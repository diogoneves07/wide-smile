{"version":3,"sources":["webpack://wS/webpack/universalModuleDefinition","webpack://wS/./src/sauce/polyfills.ts","webpack://wS/webpack/bootstrap","webpack://wS/webpack/runtime/define property getters","webpack://wS/webpack/runtime/hasOwnProperty shorthand","webpack://wS/./src/sauce/manage-memory-collections.ts","webpack://wS/./src/animation-mount/crud-animation-objects.ts","webpack://wS/./src/sauce/constants.ts","webpack://wS/./src/utilities/has-own-property.ts","webpack://wS/./src/utilities/custom-for-in.ts","webpack://wS/./src/animation-engine/handle-visibility-change.ts","webpack://wS/./src/sauce/wide-smile-debug.ts","webpack://wS/./src/sauce/custom-properties-for-animations.ts","webpack://wS/./src/sauce/types.ts","webpack://wS/./src/utilities/get-random-key.ts","webpack://wS/./src/animation-engine/set-animation-progress.ts","webpack://wS/./src/utilities/to-ms.ts","webpack://wS/./src/utilities/handle-string.ts","webpack://wS/./src/based-implementations/easings.ts","webpack://wS/./src/sauce/custom-easings.ts","webpack://wS/./src/animation-mount/create-animation-auxiliary-object.ts","webpack://wS/./src/utilities/get-time-now.ts","webpack://wS/./src/utilities/ordernate-by-growing-values.ts","webpack://wS/./src/utilities-style/to-css-kebab-case.ts","webpack://wS/./src/animation-listeners/animations-listeners-handlers.ts","webpack://wS/./src/utilities-style/get-vendor-css-property.ts","webpack://wS/./src/utilities-style/reduce-css-string-rules.ts","webpack://wS/./src/utilities/remove-spaces-char.ts","webpack://wS/./src/utilities-style/css-string-rules-to-object.ts","webpack://wS/./src/utilities-style/get-linked-css-properties.ts","webpack://wS/./src/utilities/dom-attributes.ts","webpack://wS/./src/utilities/get-unit.ts","webpack://wS/./src/animation-engine/crud-animations-style.ts","webpack://wS/./src/animation-engine/calc-next-property-value.ts","webpack://wS/./src/utilities/is-dom-element.ts","webpack://wS/./src/animation-engine/animation-timeout.ts","webpack://wS/./src/animation-engine/mount-animations-stack.ts","webpack://wS/./src/animation-mount/get-property-object-to-animate.ts","webpack://wS/./src/utilities-style/split-css-properties.ts","webpack://wS/./src/animation-engine/animation-execution-cycle.ts","webpack://wS/./src/utilities-style/get-applied-style.ts","webpack://wS/./src/sauce/elements-canche.ts","webpack://wS/./src/utilities-style/get-easy-computed-style.ts","webpack://wS/./src/based-implementations/colors.ts","webpack://wS/./src/utilities-style/removes-important-string.ts","webpack://wS/./src/utilities-style/get-computed-values-after-change.ts","webpack://wS/./src/utilities-style/apply-css-transition.ts","webpack://wS/./src/utilities-style/css-properties-important.ts","webpack://wS/./src/utilities-style/property-in-style-object.ts","webpack://wS/./src/utilities-style/same-css-property.ts","webpack://wS/./src/animation-mount/get-unit-of-measure-properties.ts","webpack://wS/./src/animation-mount/css-properties-to-animate.ts","webpack://wS/./src/sauce/parser-string-stagger.ts","webpack://wS/./src/based-implementations/stagger.ts","webpack://wS/./src/animation-mount/load-properties-to-animate.ts","webpack://wS/./src/utilities-style/to-css-string-rules.ts","webpack://wS/./src/animation-mount/normalize-animation-object-properties.ts","webpack://wS/./src/animation-mount/flatten-keyframes.ts","webpack://wS/./src/animation-mount/load-animation.ts","webpack://wS/./src/sauce/animation-constructor.ts","webpack://wS/./src/sauce/iteration-control-methods.ts","webpack://wS/./src/animation-actions/progress-animation-go-to.ts","webpack://wS/./src/animation-actions/update-animation.ts","webpack://wS/./src/animation-actions/destroy-animation.ts","webpack://wS/./src/sauce/animation.ts","webpack://wS/./src/animation-actions/resume-animation.ts","webpack://wS/./src/animation-actions/restart-animation.ts","webpack://wS/./src/utilities/multiply-value.ts","webpack://wS/./src/sauce/organize-cycle.ts","webpack://wS/./src/sauce/logic-to-play-animations.ts","webpack://wS/./src/sauce/organize-animation-creations.ts","webpack://wS/./src/animation-mount/is-dir-value.ts","webpack://wS/./src/sauce/defaults-animation-properties-values.ts","webpack://wS/./src/sauce/create-animation-properties-object.ts","webpack://wS/./src/sauce/performer-fns-methods.ts","webpack://wS/./src/sauce/new-performer-fn.ts","webpack://wS/./src/animation-mount/get-elements-in-the-dom.ts","webpack://wS/./src/index.ts","webpack://wS/./wide-smile.ts"],"names":["root","factory","exports","module","define","amd","self","Array","isArray","arg","Object","prototype","toString","call","assign","defineProperty","enumerable","configurable","writable","value","target","TypeError","to","i","arguments","length","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","CSS_VENDORS","split","x","window","requestAnimationFrame","cancelAnimationFrame","Number","isNaN","input","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","key","o","get","obj","prop","hasOwnProperty","setTimeoutId","REFERENCES_TO_USELESS_OBJECTS","sendToGarbageCollector","objectOrArray","Error","push","releasesGarbageFromAnimations","clearTimeout","setTimeout","splice","Math","max","floor","ANIMATION_AUXILIARY_OBJECTS","getAnimationAuxiliaryObject","animationId","ANIMATION_STATES","ANIMATION_DIRECTIONS","CSS_VENDORS_LENGTH","MAX_KEYFRAME","WIDE_SMILE_SCROLL_PROPERTIES","WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS","matrix","matrix3d","perspective","rotate","rotate3d","rotateX","rotateY","rotateZ","translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","object","customForIn","objectForLoop","callbackfn","avoid","thisArg","isInPrototype","avoidItems","jumps","join","pass","getPrototype","indexOf","propertyName","callbackfnCalled","ANIMATIONS_PAUSED","debugNormal","type","message","callbackTest","document","addEventListener","hidden","c","animation","state","pauseDocHidden","pause","forEach","a","resume","CUSTOM_SPECIAL_PROPERTIES","OBSERVER_PROPERTIES","getObject","createCustomProperty","propertyOrProperties","debugHelper","p","_propertyValue","removeCustomProperty","names","name","getCustomProperty","isEmptyObject","variable","isNumber","$typeof","getRandomKey","lastkey","selected","random","setAnimationProgress","animationAuxiliaryObject","keyframesKeys","countDriveloop","maxProgress","progress","progressValue","drive","driveEasy","listOfProgress","takeControlOfTheDrive","direction","dir","iterationsCompleted","count","progressStoppedAt","round","abs","hasMaxProgress","Infinity","n","toMs","seconds","trimString","string","trim","replace","toCamelCase","_all","letter","toUpperCase","minMax","val","min","mathPow","y","isUnd","v","parseEasingParameters","match","exec","map","parseFloat","steps","stps","s","t","ceil","eases","functionEasings","penner","linear","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","amplitude","period","amp","per","sin","asin","easeIn","bezier","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","mX1","mY1","mX2","mY2","sampleValues","Float32Array","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","aG","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","ab","aa","binarySubdivide","getTForX","applyArguments","func","args","parseEasings","easing","duration","ease","params","mass","stiffness","damping","velocity","w0","zeta","wd","solver","exp","frame","elapsed","rest","spring","CUSTOM_EASINGS","getCustomEasing","propertiesForAnimationAuxiliaryObject","dur","reverseExecution","getTimeNow","Date","now","getTime","ordernateByGrowingValues","array","sort","toCSSKebabCase","toLowerCase","EVENTS_IN_OBSERVATION","LISTENERS_NAMES","addAnimationEventListener","animationObjectBuket","eName","removeAnimationEventListener","callbackfnOrIndex","index","propagateAnimationEventListener","eventBucket","eventName","slice","performer","DIV_ELEMENT_STYLE","createElement","style","KNOWN_PROPERTIES","getVendorCSSProperty","propertyValue","cssText","values","l","substring","CSSStringRules","removeSpacesChar","str","CSSStringRulesToObject","CSSProperties","styleObject","property","propertyIndex","getLinkedCSSProperties","propertyNameCSS","linkedCSSPropertiesList","counting","item","getAttr","element","attrName","getAttribute","setAttr","attrValue","setAttribute","getUnit","transformFunctionsToObject","current","transformFunctionsObjectToString","transformFunctionsObject","newValue","animateTargetTransform","beforeAnimating","fnName","properties","transfromFns","elt","animateTargetCSS","animateTargetDirectProps","pName","direct","animateTargetAttributes","attr","applyAnimationsStyleToElement","animateProperties","valuesOfThePropertiesBeforeAnimating","propertyObject","from","percentageInRelationToKey","lastKey","ss","result","originalArrayLength","percentageCompleted","observerFn","animateTargetObserved","keyframes","f","newPropertyValue","fromAndTo","currentPercent","easingFn","startValues","endValues","startValueIndex","unitOfMeasure","fromNumber","toNumber","propertyValues","hasRGB","treatSupportsFloatingValue","calcNextPropertyValue","removeAnimationStyle","requiredAnimationProperties","removeChanges","targets","e","nodeType","SVGElement","removeAttribute","resetHTMLElement","hasRAf","STARTED_STACK_MOUNT","ANIMATIONS_STACK","OBSERVERS_OF_THE_STACK_OF_ANIMATIONS","addAnimationToStack","callback","timeout","requestAnimationFrameId","id","animationTimeout","animationsStack","removeAnimationFromStack","getAnimationInTheStack","setInterval","POOL_PROPERTY_OBJECTS","getPropertyObjectToAnimate","propertiesKeyframes","kf","differentValues","shift","keyframeValue","lastIndex","propertiesSplited","filter","timeoutId","ANIMATIONS_DELAY","manageAnimationDelay","delay","startTime","clearInterval","remainingDelayAnimation","resetIterationRelatedProperties","insertAnimationInTheQueue","jumpTimeout","animationLoadingTime","animationAlreadyStarted","newIntercalation","iterationInterlacations","startTimeOfTheIteration","timeRunningIteration","toAuxiliaryObject","durationOfTheInterlacation","currentTime","leftovers","timeConsumed","averageDurationForIntercalation","completed","newProgress","timeBasedProgress","iterationCompleted","backRunning","amountOfIterations","loop","backRunningStopped","animationProgressObject","lastStartProgress","performNewAnimationIntercalation","newIntercalationObject","u","aAuxiliaryObject","autoDestroy","isInCycle","completedAnimation","conclusionOfTheIntercalation","endDelay","startAnimationExecutionCycle","getWidthHeight","elementStyleObject","getBoundingClientRect","boxSizing","sides","fields","augment","field","augmentDimension","getAppliedStyle","computedStyle","bestStyleComputed","elementStyle","elementCSSText","currentComputedStyleForUse","currentComputedStyle","inDisplayNone","getPropertyValue","display","propertiesToBeHandled","computedValue","checkProperty","position","String","computePropertiesValue","appliedStyle","propertyNameInCamelCase","ELEMENTS_CANCHE","bucketId","tagName","nodeName","useElementCanche","elementCancheContainer","bucket","data","getElementCanche","view","hasBucket","ownerDocument","defaultView","opener","getComputedStyle","elementCancheObject","startComputedStyle","bestComputedStyle","createElementCanche","isHex","test","isRgb","isHsl","isColor","colorToRgb","rgbValue","rgb","hexValue","hex","_m","r","g","parseInt","hexToRgba","hslValue","hsl","h","hue2rgb","q","tt","hslToRgba","removesImportantString","getComputedValuesAfterChange","elementCanche","affectedCSSProperties","affectedCSSPropertiesInitialValues","bestCSSStringRules","reduceCSSStringRules","beforeComputedStyle","transitionValue","CSSStyleRules","applyCSSTransition","CSSPropertiesImportant","afterComputedStyle","linkedCSSProperties","_value","propertyVendor","CSSProperty","CSSPropertyVendor","sameCSSProperty","before","after","parentElement","parentNode","possibleUnits","possibleUnitsLength","knownProperties","scrollLeft","scrollTop","scrollTo","opacity","getUnitOfMeasureForPropertyValue","CANCHE_COLORS_VALUES","stringToArray","parserStringStagger","stringStagger","splitValue","form","getGrid","getOtherValue","grid","staggerParams","axis","start","fromIndex","val1","val2","unit","fromCenter","isRange","maxValue","el","fIndex","fromX","fromY","distanceX","distanceY","stagger","getValue","revealSpecialProperties","specialPropertyCallback","propertiesFound","getCurrentValue","currentValue","organizeTransformFunctionsValue","transformFunction","getCurrentValueTransformFunction","useCurrentValue","operator","getRelativeValue","transformFnValues","unitOfMeasureInUse","lastRealValue","defaultValue","propertiesToBeAnimated","targetObject","props","specials","attrProperties","transformProperties","targetProperties","concat","propertyKeyframes","keyframe","v1","v2","consultComputedStyle","propertiesChanged","wrongValue","correctValue","CSSPropertiesToAnimate","attrPropertiesToAnimate","transformFnName","k","getUnitOfMeasureForPropertiesValues","transformPropertiesToAnimate","scrollProperty","scrollHeight","scrollWidth","clientHeight","clientWidth","scrollValues","getScrollValues","directPropertiesToAnimate","ANIMATIONS_FOR_LOAD","IS_BUSY_LOADER","loadNextAnimation","loadPropertiesToAnimate","callbackLoaded","creator","global","asyncLoading","releaseTheExecutionStack","repeat","timePassed","toArray","normalizePastedProperties","loopObject","splitedPropertyName","normalizePastedAnimationProperties","arrayKeyframesToObject","keyframesObject","keyframesArray","leftoversIndexs","newKeyframesArray","offset","newKeyframe","LoadAnimation","hasAnimationAuxiliaryObject","initialProgress","dataLoadingState","CreateAnimationAuxiliaryObject","addAnimationAuxiliaryObject","animationArrivalTime","propertiesUsed","kframes","newKeyframes","propertiesToAnimate","propertiesUsedForThis","flattenKeyframes","$hidden","_v","forwardAnimation","restartAnimationProperties","startAnimation","loadedAnimation","ANIMATIONS_ID","iterationControlMethods","realDuration","newDuration","part","applyDelay","aInstance","toProgress","checkDur","jump","progressAnimationGoTo","updateAnimation","removeInstance","U_A_O","this","D_A_P","dfs","AnimationConstructor","resumeAnimation","restartAnimation","end","multiply","multiplyValue","endIteration","performerProperties","cycleOptions","removeAnimationAuxiliaryObject","animationInstances","independentAnimations","animationInstancesInCycle","sequence","destroyAnimation","runAnimation","play","revertAnimationProgress","organizeCycleSequence","animationPerformer","instanceToLink","typeOfLink","numberOfAnimationsToComplete","unshift","cycle","countCompleteAnimations","countLoops","loopDirection","runAfterThis","reverse","rAfterThis","otherAnimationInstance","on","off","runAfter","repeatCycleExecution","logicToPlayAnimations","animationsThatPerformTogether","animationsThatWaitIterations","performerFn","animations","autoPlay","load","STACK_OF_ANIMATIONS_SKETCHES","ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS","useAnimationObjectExpectingSideEffects","callbacks","alreadyInProcess","runCallbacksAtTheRightTime","animationOptions","animationPropertiesObjects","fromStaggers","newAnimationProperties","checkCreateNewObject","fn","indexOrAnimation","organizedAnimations","AnimationWS","_index","linkedAnimation","afterIterations","playTogether","addToLinkedAnimationObject","organizeAnimationsObjects","addInStackForConstruction","aOptions","lAnimation","isDirValue","ANIMATION_PERFORMER_PROPERTIES","parametersToAnimateShortcuts","createAnimationPropertiesObject","animate","parametersToAnimateOrPropertyValue","parametersToAnimateOrDurOrAutoDestroy","parametersToAnimationProperties","animationProperties","DEFAULTS_ANIMATION_PROPERTIES_VALUES","getAnimationsRunning","playAnimations","$","parametersToAnimate","currentAfterIterations","_","lastAnimationParametersAdded","lastAnimationCreated","objectExpectingSideEffects","initialKeyframe","animateProps","loopOrDir","iterations","ready","restart","go","back","speed","revert","dirTo","cancel","destroy","performerProps","creatorDefaults","defaults","elements","targetForElements","elementOrSelector","querySelectorAll","getElementsInTheDOM","animationPerformerProperties","PERFORMER_FNS_METHODS","performers","CREATORS_FN_METHODS","CREATORS_FN_GLOBAL","new","NewCreatorFn","GetCreatorFnProperties","version","observeds","all","newEasing","registerCustomEasing","newSpecialProperty","deleteSpecialProperty","propertiesNames","newObservedProperty","deleteObservedProperty","creatorFn","countNumbers","NewPerformerFn"],"mappings":"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","file":"wide-smile.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wS\"] = factory();\n\telse\n\t\troot[\"wS\"] = factory();\n})(self, function() {\nreturn ","/* eslint-disable */\n\nif (!Array.isArray) {\n  Array.isArray = (arg: unknown): arg is unknown[] => {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\nif (!Object.assign) {\n  Object.defineProperty(Object, 'assign', {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value(target: any) {\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert first argument to object');\n      }\n\n      const to = Object(target);\n      for (let i = 1; i < arguments.length; i++) {\n        let nextSource = arguments[i];\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n        nextSource = Object(nextSource);\n\n        const keysArray = Object.keys(Object(nextSource));\n        for (\n          let nextIndex = 0, len = keysArray.length;\n          nextIndex < len;\n          nextIndex++\n        ) {\n          const nextKey = keysArray[nextIndex];\n          const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n          if (desc !== undefined && desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      return to;\n    },\n  });\n}\n\n(() => {\n  const CSS_VENDORS = 'ms moz webkit o'.split(' ');\n  for (\n    let x = 0;\n    x < CSS_VENDORS.length && !window.requestAnimationFrame;\n    x += 1\n  ) {\n    if (window[`${CSS_VENDORS[x]}RequestAnimationFrame` as never]) {\n      (window as any).requestAnimationFrame =\n        window[`${CSS_VENDORS[x]}RequestAnimationFrame` as never];\n    }\n    if (window[`${CSS_VENDORS[x]}CancelAnimationFrame` as never]) {\n      (window as any).cancelAnimationFrame =\n        window[`${CSS_VENDORS[x]}CancelAnimationFrame` as never];\n    } else if (\n      window[`${CSS_VENDORS[x]}CancelRequestAnimationFrame` as never]\n    ) {\n      (window as any).cancelAnimationFrame =\n        window[`${CSS_VENDORS[x]}CancelRequestAnimationFrame` as never];\n    }\n  }\n})();\n\nNumber.isNaN =\n  Number.isNaN ||\n  function isNaN(input: unknown) {\n    return typeof input === 'number' && input !== input;\n  };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","const REFERENCES_TO_USELESS_OBJECTS: object[] = [];\r\n\r\n/**\r\n * Is sent to a memory that is maintained to prevent the garbage collector from occupy thread for long periods.\r\n */\r\nexport function sendToGarbageCollector(...objectOrArray: object[]): void {\r\n  if (typeof objectOrArray === 'object') {\r\n    REFERENCES_TO_USELESS_OBJECTS.push(objectOrArray);\r\n  } else {\r\n    throw new Error(\r\n      `\\n\\n<bigSmile>: Something other than an object was passed to the garbage collector.`\r\n    );\r\n  }\r\n}\r\n\r\nlet setTimeoutId: undefined | number;\r\n/**\r\n * Removes the few elements of the array that keeps references to objects that are no longer in use.\r\n */\r\nexport function releasesGarbageFromAnimations(): void {\r\n  if (REFERENCES_TO_USELESS_OBJECTS.length > 0) {\r\n    clearTimeout(setTimeoutId);\r\n    setTimeoutId = (setTimeout(() => {\r\n      releasesGarbageFromAnimations();\r\n    }, 400) as unknown) as number;\r\n\r\n    REFERENCES_TO_USELESS_OBJECTS.splice(\r\n      0,\r\n      Math.max(1, Math.floor((REFERENCES_TO_USELESS_OBJECTS.length / 100) * 50))\r\n    );\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { sendToGarbageCollector } from '../sauce/manage-memory-collections';\r\n\r\n/**\r\n * A container for animations that saves the dedicated objects to each in pairs (the user animation instance and the built-in animation instance).\r\n */\r\n\r\nconst ANIMATION_AUXILIARY_OBJECTS: {\r\n  [animationId: string]: AnimationAuxiliaryObject;\r\n} = {};\r\n\r\nexport function getAllAnimationAuxiliaryObjects(): typeof ANIMATION_AUXILIARY_OBJECTS {\r\n  return ANIMATION_AUXILIARY_OBJECTS;\r\n}\r\nexport function addAnimationAuxiliaryObject(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  ANIMATION_AUXILIARY_OBJECTS[\r\n    animationAuxiliaryObject.animationId\r\n  ] = animationAuxiliaryObject;\r\n}\r\nexport function getAnimationAuxiliaryObject(\r\n  animationId: number\r\n): false | AnimationAuxiliaryObject {\r\n  return ANIMATION_AUXILIARY_OBJECTS[animationId] || false;\r\n}\r\n\r\nexport function removeAnimationAuxiliaryObject(\r\n  animationId: number\r\n): AnimationAuxiliaryObject | false {\r\n  const animationAuxiliaryObject = ANIMATION_AUXILIARY_OBJECTS[animationId];\r\n  if (animationAuxiliaryObject) {\r\n    delete ANIMATION_AUXILIARY_OBJECTS[animationId];\r\n    sendToGarbageCollector(animationAuxiliaryObject);\r\n    return animationAuxiliaryObject;\r\n  }\r\n  return false;\r\n}\r\n","export const ANIMATION_STATES: Readonly<\n  [\n    waiting: 'waiting',\n    running: 'running',\n    completed: 'completed',\n    paused: 'paused',\n    destroyed: 'destroyed',\n    loaded: 'loaded',\n    loading: 'loading',\n    canceled: 'canceled'\n  ]\n> = [\n  'waiting',\n  'running',\n  'completed',\n  'paused',\n  'destroyed',\n  'loaded',\n  'loading',\n  'canceled',\n];\n\nexport const ANIMATION_DIRECTIONS: Readonly<\n  [\n    normal: 'normal',\n    reverse: 'reverse',\n    alternate: 'alternate',\n    alternateReverse: 'alternate-reverse',\n    randomKeys: 'random-keys',\n    randomOffset: 'random-offset',\n    fluidRandomKeys: 'fluid-random-keys',\n    fluidRandomOffset: 'fluid-random-offset'\n  ]\n> = [\n  'normal',\n\n  'reverse',\n\n  'alternate',\n\n  'alternate-reverse',\n\n  'random-keys',\n\n  'random-offset',\n\n  'fluid-random-keys',\n\n  'fluid-random-offset',\n];\n\nexport const WIDE_SMILE_VERSION = '0.0.1';\n\nexport const CSS_VENDORS: Readonly<string[]> = ['moz', 'ms', 'o', 'webkit'];\n\nexport const CSS_VENDORS_LENGTH = CSS_VENDORS.length;\n\nexport const MAX_KEYFRAME = 100;\n\n/**\n * Defines the time taken for each animation intercalation.\n */\nexport const INTERCALATION_TIME = 18;\n\nexport const BEST_FPS_TIMEOUT = 13;\n\nexport const TIME_OUT_FOR_SMART_LOADING = 50;\n\nexport const WIDE_SMILE_SCROLL_PROPERTIES = ['scrollLeft', 'scrollTop'];\n\n/**\n * Initial values of the transformation functions.\n */\nexport const WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS: Readonly<\n  Record<string, string>\n> = {\n  matrix: '1, 0, 0, 1, 0, 0',\n  matrix3d: '1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1',\n  perspective: '0',\n  rotate: '0',\n  rotate3d: '0, 0, 0, 0',\n  rotateX: '0',\n  rotateY: '0',\n  rotateZ: '0',\n  translate: '0, 0',\n  translate3d: '0, 0, 0',\n  translateX: '0',\n  translateY: '0',\n  translateZ: '0',\n  scale: '1, 1',\n  scale3d: '1, 1, 1',\n  scaleX: '1',\n  scaleY: '1',\n  scaleZ: '1',\n  skew: '0, 0',\n  skewX: '0',\n  skewY: '0',\n};\n","export default function hasOwnProperty(\r\n  object: object,\r\n  key: string | number | symbol\r\n): boolean {\r\n  return Object.prototype.hasOwnProperty.call(object, key);\r\n}\r\n\r\nexport function hasOwnPropertyTarget(\r\n  object: object,\r\n  key: string | number | symbol\r\n): boolean {\r\n  return object && key in object;\r\n}\r\n","import hasOwnProperty from './has-own-property';\r\n\r\n/**\r\n * Very similar to a \"for in\", however, it is optional go through the \"prototype\" and is more controllable.\r\n * @param objectForLoop\r\n * The object.\r\n *\r\n * @param callbackfn\r\n * A function that accepts up to three arguments. Calls the callbackfn function one time for each element in the array. If callbackfn returns any value that, if converted to boolean equals \"true\" the looping and terminating.\r\n *\r\n * @param avoid\r\n * A drive of \"key\" to jump or the key to start counting. The default value is \"prototype\" - ( avoiding the object's prototype reading ).\r\n *\r\n * @param thisArg\r\n * An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n */\r\n\r\nexport default function customForIn<\r\n  Type extends\r\n    | {\r\n        [K in keyof Type]: Type[keyof Type];\r\n      }\r\n    | Type[]\r\n>(\r\n  objectForLoop: Type,\r\n  callbackfn: (\r\n    value: Type[keyof Type],\r\n    index: keyof Type,\r\n    objectInLoop: typeof objectForLoop\r\n  ) => unknown,\r\n  avoid: string | number | unknown[] = 'prototype',\r\n  thisArg?: unknown\r\n): boolean {\r\n  const isInPrototype = Array.isArray(objectForLoop)\r\n    ? (key: string | number) => {\r\n        return Number.isNaN(Number(key));\r\n      }\r\n    : (key: string | number) => {\r\n        return !hasOwnProperty(objectForLoop, key);\r\n      };\r\n  const avoidItems = Array.isArray(avoid);\r\n  const jumps = avoidItems ? (avoid as string[]).join(' ') : '';\r\n  let pass = avoidItems || !avoid || avoid === 'prototype';\r\n  const getPrototype = avoid.toString().indexOf('prototype') !== -1;\r\n\r\n  // eslint-disable-next-line\r\n  for (const propertyName in objectForLoop) {\r\n    if (\r\n      !(getPrototype && isInPrototype(propertyName)) &&\r\n      jumps.indexOf(propertyName) === -1 &&\r\n      pass === true\r\n    ) {\r\n      const callbackfnCalled = callbackfn.call(\r\n        thisArg,\r\n        objectForLoop[propertyName as never],\r\n        propertyName as keyof Type,\r\n        objectForLoop\r\n      );\r\n      if (callbackfnCalled) return true;\r\n    }\r\n    if (!pass) pass = propertyName === avoid;\r\n  }\r\n  return false;\r\n}\r\n","import { getAllAnimationAuxiliaryObjects } from '../animation-mount/crud-animation-objects';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport customForIn from '../utilities/custom-for-in';\r\n\r\nconst ANIMATIONS_PAUSED: AnimationInstance[] = [];\r\nexport default function handleVisibilityChange(): void {\r\n  if (document.hidden) {\r\n    customForIn(getAllAnimationAuxiliaryObjects(), (c) => {\r\n      const animation = c.animation;\r\n      if (animation.state !== ANIMATION_STATES[3] && animation.pauseDocHidden) {\r\n        animation.pause();\r\n        ANIMATIONS_PAUSED.push(animation);\r\n      }\r\n    });\r\n  } else {\r\n    ANIMATIONS_PAUSED.forEach((a) => {\r\n      a.resume();\r\n    });\r\n    ANIMATIONS_PAUSED.length = 0;\r\n  }\r\n}\r\n\r\nif (typeof document !== 'undefined') {\r\n  document.addEventListener('visibilitychange', handleVisibilityChange);\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\n\nexport default function debugAnimation(\n  animation: AnimationInstance,\n  message: string,\n  callbackTest?: () => boolean\n): void {\n  const check = callbackTest ? callbackTest() : true;\n  if (check)\n    throw new Error(\n      `\\n\\n<CreatorFn>: \\n\\n| AnimationWS object name: ${animation.animationId} | \\n\\n--> ${message}\\n\\n`\n    );\n}\n\nexport function debugNormal(\n  type: string,\n  message: string,\n  callbackTest?: () => boolean\n): void {\n  const check = callbackTest ? callbackTest() : true;\n  if (check)\n    throw new Error(\n      `\\n\\n<CreatorFn>: \\n\\n| Where or what happened: ${type} | \\n\\n--> ${message}\\n\\n`\n    );\n}\n","import { debugNormal } from './wide-smile-debug';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport CreateSpecialPropertyCallbackfn from '../contracts/create-special-property-callbackfn';\r\nimport CreateObserverPropertyCallbackfn from '../contracts/create-observer-property-callbackfn';\r\n\r\ntype CustomProperties = 'special' | 'observed';\r\n\r\nexport const CUSTOM_SPECIAL_PROPERTIES: Record<\r\n  string,\r\n  CreateSpecialPropertyCallbackfn\r\n> = {};\r\n\r\nexport const OBSERVER_PROPERTIES: Record<\r\n  string,\r\n  CreateObserverPropertyCallbackfn\r\n> = {};\r\n\r\nfunction getObject(type: CustomProperties) {\r\n  switch (type) {\r\n    case 'observed':\r\n      return OBSERVER_PROPERTIES;\r\n\r\n    default:\r\n      return CUSTOM_SPECIAL_PROPERTIES;\r\n  }\r\n}\r\nexport function createCustomProperty(\r\n  propertyOrProperties:\r\n    | string\r\n    | Record<\r\n        string,\r\n        CreateSpecialPropertyCallbackfn | CreateObserverPropertyCallbackfn\r\n      >,\r\n  callbackfn:\r\n    | CreateSpecialPropertyCallbackfn\r\n    | CreateObserverPropertyCallbackfn\r\n    | undefined,\r\n  type: CustomProperties\r\n): void {\r\n  const object = getObject(type);\r\n\r\n  const debugHelper = (() => {\r\n    if (\r\n      typeof propertyOrProperties === 'string' &&\r\n      hasOwnProperty(object, propertyOrProperties)\r\n    ) {\r\n      return propertyOrProperties;\r\n    }\r\n    let p = '';\r\n    customForIn(propertyOrProperties, (_propertyValue, propertyName) => {\r\n      if (hasOwnProperty(object, propertyName)) {\r\n        p = propertyName;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    return p;\r\n  })();\r\n  debugNormal(\r\n    'createProperty Method',\r\n    `There's already a property with that name \"${debugHelper}\" on it.`,\r\n    () => {\r\n      return !!debugHelper;\r\n    }\r\n  );\r\n  if (typeof propertyOrProperties === 'object') {\r\n    Object.assign(object, propertyOrProperties);\r\n  } else {\r\n    object[\r\n      propertyOrProperties\r\n    ] = callbackfn as CreateSpecialPropertyCallbackfn;\r\n  }\r\n}\r\n\r\nexport function removeCustomProperty(\r\n  names: string[],\r\n  type: CustomProperties\r\n): void {\r\n  const object = getObject(type);\r\n  names.forEach((name) => {\r\n    delete object[name];\r\n  });\r\n}\r\n\r\nexport function getCustomProperty(\r\n  name: string,\r\n  type: 'special'\r\n): CreateSpecialPropertyCallbackfn;\r\n\r\nexport function getCustomProperty(\r\n  name: string,\r\n  type: 'observed'\r\n): CreateObserverPropertyCallbackfn;\r\n\r\nexport function getCustomProperty(\r\n  name: string,\r\n  type: CustomProperties\r\n): unknown {\r\n  const object = getObject(type);\r\n  if (hasOwnProperty(object, name)) {\r\n    return object[name];\r\n  }\r\n  return false;\r\n}\r\n","function $typeof(i: unknown) {\n  return typeof i;\n}\n\n/**\n * Check if a variable is an empty object.\n */\nexport function isEmptyObject(variable: unknown): boolean {\n  return Object.keys(variable as Record<string, unknown>).length < 1;\n}\n\n/** Returns a Boolean value that indicates whether a value is the reserved value number. */\nexport function isNumber(i: unknown): boolean {\n  return $typeof(i) === 'number' && !Number.isNaN(i as number);\n}\n","/**\n * Gets a random key.\n * @param keys\n * The array of numeric values.\n *\n * @param lastkey\n * The array of numeric values.\n */\nexport default function getRandomKey(keys: number[], lastkey = 0): number {\n  const selected: number = Math.floor(Math.random() * keys.length);\n  return keys[selected] === lastkey\n    ? keys[selected - 1 >= 0 ? selected - 1 : selected + 1]\n    : keys[selected];\n}\n","import { isNumber } from '../sauce/types';\r\nimport { MAX_KEYFRAME, ANIMATION_DIRECTIONS } from '../sauce/constants';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { getRandomKey } from '../utilities/index';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\n\r\n/**\r\n * Defines the direction of the animation iteration.\r\n */\r\nexport default function setAnimationProgress(\r\n  animationAuxiliaryObject: Pick<\r\n    AnimationAuxiliaryObject,\r\n    'countDriveloop' | 'keyframesKeys' | 'lastStartProgress'\r\n  > & {\r\n    animation: Pick<\r\n      AnimationInstance,\r\n      'dir' | 'count' | 'drive' | 'dur' | 'max' | 'progressValue'\r\n    >;\r\n  }\r\n): Pick<AnimationAuxiliaryObject, 'countDriveloop'> & {\r\n  maxProgress: AnimationInstance['max'];\r\n  progress: AnimationInstance['progressValue'];\r\n} {\r\n  const a = animationAuxiliaryObject;\r\n  const { keyframesKeys, animation } = a;\r\n  let { countDriveloop } = a;\r\n  let maxProgress = animation.max;\r\n  let progress = animation.progressValue;\r\n\r\n  const drive = animation.drive as Exclude<typeof animation.drive, Function>;\r\n\r\n  let driveEasy = typeof drive === 'string' ? drive : '';\r\n\r\n  const listOfProgress = typeof drive === 'number' ? [drive] : drive;\r\n\r\n  const takeControlOfTheDrive = Array.isArray(listOfProgress)\r\n    ? listOfProgress[countDriveloop] &&\r\n      typeof listOfProgress[countDriveloop] === 'string'\r\n    : false;\r\n\r\n  const direction = animation.dir;\r\n\r\n  const iterationsCompleted = animation.count;\r\n\r\n  const progressStoppedAt = progress || 0;\r\n\r\n  if (takeControlOfTheDrive) {\r\n    driveEasy = listOfProgress[countDriveloop] as string;\r\n  }\r\n  progress = progressStoppedAt;\r\n  if (driveEasy === ANIMATION_DIRECTIONS[6]) {\r\n    maxProgress = getRandomKey(keyframesKeys, progressStoppedAt);\r\n  } else if (driveEasy === ANIMATION_DIRECTIONS[7]) {\r\n    do {\r\n      maxProgress = Math.round(Math.random() * MAX_KEYFRAME);\r\n    } while (Math.abs(progressStoppedAt - maxProgress) < 20);\r\n  } else if (\r\n    driveEasy === ANIMATION_DIRECTIONS[4] ||\r\n    driveEasy === ANIMATION_DIRECTIONS[5]\r\n  ) {\r\n    maxProgress = getRandomKey(keyframesKeys, progressStoppedAt);\r\n    progress = 0;\r\n  } else if (\r\n    direction === ANIMATION_DIRECTIONS[1] ||\r\n    (direction === ANIMATION_DIRECTIONS[2] && iterationsCompleted % 2 === 1) ||\r\n    (direction === ANIMATION_DIRECTIONS[3] && iterationsCompleted % 2 === 0)\r\n  ) {\r\n    progress = MAX_KEYFRAME;\r\n    maxProgress = 0;\r\n  } else {\r\n    progress = 0;\r\n    maxProgress = MAX_KEYFRAME;\r\n  }\r\n\r\n  if (!takeControlOfTheDrive && Array.isArray(listOfProgress)) {\r\n    const hasMaxProgress = listOfProgress[countDriveloop];\r\n    if (countDriveloop < listOfProgress.length || hasMaxProgress === Infinity) {\r\n      if (hasMaxProgress === Infinity) {\r\n        countDriveloop = 0;\r\n      }\r\n      const n = listOfProgress[countDriveloop];\r\n      if (Array.isArray(n)) {\r\n        maxProgress = (isNumber(n[1]) ? n[1] : maxProgress) as number;\r\n\r\n        progress = n[0] as number;\r\n      } else {\r\n        maxProgress = (isNumber(n) ? n : maxProgress) as number;\r\n\r\n        progress = progressStoppedAt;\r\n      }\r\n\r\n      countDriveloop += 1;\r\n      if (countDriveloop >= listOfProgress.length) {\r\n        countDriveloop = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    countDriveloop,\r\n    progress,\r\n    maxProgress,\r\n  };\r\n}\r\n","/** Converts seconds to milliseconds. */\n\nexport default function toMs(seconds: number): number {\n  return Math.floor(seconds * 1000);\n}\n","/**\n * Removes the leading and trailing white space and line terminator characters from a string.\n */\nexport function trimString(string: string): string {\n  if (string.trim) {\n    return string.trim();\n  }\n  return string.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n\n/**\n * Converts to camelCase the string.\n */\nexport function toCamelCase(string: string): string {\n  const rmsPrefix = /^-ms-/;\n  const rdashAlpha = /-([a-z])/g;\n  return string\n    .replace(rmsPrefix, 'ms-')\n    .replace(rdashAlpha, (_all: string, letter: string): string => {\n      return letter.toUpperCase();\n    });\n}\n","/* The code below is based on the implementation of anime.js v3.2.1 Copyright (c) 2020 Julian Garnier  */\r\n\r\n/* eslint-disable no-plusplus  */\r\n/* eslint-disable no-cond-assign */\r\n/* eslint-disable no-constant-condition */\r\n\r\nimport EasingFunction from '../contracts/easing-function';\r\nimport { toCamelCase } from '../utilities/handle-string';\r\n\r\nfunction minMax(val: number, min: number, max: number) {\r\n  return Math.min(Math.max(val, min), max);\r\n}\r\nfunction mathPow(x: number, y: number) {\r\n  return x ** y;\r\n}\r\nfunction isUnd(v: unknown) {\r\n  return typeof v === 'undefined';\r\n}\r\n\r\n// Easings\r\n\r\nfunction parseEasingParameters(string: string) {\r\n  const match = /\\(([^)]+)\\)/.exec(string);\r\n  return match\r\n    ? match[1].split(',').map((p) => {\r\n        return parseFloat(p);\r\n      })\r\n    : [];\r\n}\r\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\r\n\r\nfunction spring(string: string, duration: number) {\r\n  const params = parseEasingParameters(string);\r\n  const mass = minMax(isUnd(params[0]) ? 1 : params[0], 0.1, 100);\r\n  const stiffness = minMax(isUnd(params[1]) ? 100 : params[1], 0.1, 100);\r\n  const damping = minMax(isUnd(params[2]) ? 10 : params[2], 0.1, 100);\r\n  const velocity = minMax(isUnd(params[3]) ? 0 : params[3], 0.1, 100);\r\n  const w0 = Math.sqrt(stiffness / mass);\r\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\r\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\r\n  const a = 1;\r\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\r\n\r\n  function solver(t: number) {\r\n    let progress = duration ? (duration * t) / 1000 : t;\r\n    if (zeta < 1) {\r\n      progress =\r\n        Math.exp(-progress * zeta * w0) *\r\n        (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\r\n    } else {\r\n      progress = (a + b * progress) * Math.exp(-progress * w0);\r\n    }\r\n    if (t === 0 || t === 1) {\r\n      return t;\r\n    }\r\n    return 1 - progress;\r\n  }\r\n\r\n  function getDuration() {\r\n    const frame = 1 / 6;\r\n    let elapsed = 0;\r\n    let rest = 0;\r\n    while (true) {\r\n      elapsed += frame;\r\n      if (solver(elapsed) === 1) {\r\n        rest++;\r\n        if (rest >= 16) {\r\n          break;\r\n        }\r\n      } else {\r\n        rest = 0;\r\n      }\r\n    }\r\n    return elapsed * frame * 1000;\r\n  }\r\n\r\n  return duration ? solver : getDuration;\r\n}\r\n\r\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\r\n\r\nfunction steps(stps: number) {\r\n  let s = stps;\r\n  if (s === undefined) s = 10;\r\n\r\n  return (t: number) => {\r\n    return Math.ceil(minMax(t, 0.000001, 1) * s) * (1 / s);\r\n  };\r\n}\r\n\r\nconst penner = (() => {\r\n  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)\r\n\r\n  const eases: Record<string, Function> = {\r\n    linear() {\r\n      return (t: number) => {\r\n        return t;\r\n      };\r\n    },\r\n  };\r\n\r\n  const functionEasings: Record<string, Function> = {\r\n    Sine() {\r\n      return (t: number) => {\r\n        return 1 - Math.cos((t * Math.PI) / 2);\r\n      };\r\n    },\r\n    Circ() {\r\n      return (t: number) => {\r\n        return 1 - Math.sqrt(1 - t * t);\r\n      };\r\n    },\r\n    Back() {\r\n      return (t: number) => {\r\n        return t * t * (3 * t - 2);\r\n      };\r\n    },\r\n    Bounce() {\r\n      return (t: number) => {\r\n        let pow2;\r\n        let b = 4;\r\n        while (t < ((pow2 = mathPow(2, --b)) - 1) / 11);\r\n        return (\r\n          1 / mathPow(4, 3 - b) - 7.5625 * mathPow((pow2 * 3 - 2) / 22 - t, 2)\r\n        );\r\n      };\r\n    },\r\n    Elastic(amplitude: number, period: number) {\r\n      let amp = amplitude;\r\n      let per = period;\r\n      if (amp === undefined) amp = 1;\r\n      if (period === undefined) per = 0.5;\r\n\r\n      const a = minMax(amp, 1, 10);\r\n      const p = minMax(per, 0.1, 2);\r\n      return (t: number) => {\r\n        return t === 0 || t === 1\r\n          ? t\r\n          : -a *\r\n              mathPow(2, 10 * (t - 1)) *\r\n              Math.sin(\r\n                ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) *\r\n                  (Math.PI * 2)) /\r\n                  p\r\n              );\r\n      };\r\n    },\r\n  };\r\n\r\n  const baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];\r\n\r\n  baseEasings.forEach((name, i) => {\r\n    functionEasings[name] = () => {\r\n      return (t: number) => {\r\n        return mathPow(t, i + 2);\r\n      };\r\n    };\r\n  });\r\n\r\n  Object.keys(functionEasings).forEach((name) => {\r\n    const easeIn = functionEasings[name];\r\n    eases[`easeIn${name}`] = easeIn;\r\n    eases[`easeOut${name}`] = (a: number, b: number) => {\r\n      return (t: number) => {\r\n        return 1 - easeIn(a, b)(1 - t);\r\n      };\r\n    };\r\n    eases[`easeInOut${name}`] = (a: number, b: number) => {\r\n      return (t: number) => {\r\n        return t < 0.5\r\n          ? easeIn(a, b)(t * 2) / 2\r\n          : 1 - easeIn(a, b)(t * -2 + 2) / 2;\r\n      };\r\n    };\r\n    eases[`easeOutIn${name}`] = (a: number, b: number) => {\r\n      return (t: number) => {\r\n        return t < 0.5\r\n          ? (1 - easeIn(a, b)(1 - t * 2)) / 2\r\n          : (easeIn(a, b)(t * 2 - 1) + 1) / 2;\r\n      };\r\n    };\r\n  });\r\n\r\n  return eases;\r\n})();\r\n\r\n// BezierEasing https://github.com/gre/bezier-easing\r\n\r\nconst bezier = (() => {\r\n  const kSplineTableSize = 11;\r\n  const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n  function A(aA1: number, aA2: number) {\r\n    return 1.0 - 3.0 * aA2 + 3.0 * aA1;\r\n  }\r\n  function B(aA1: number, aA2: number) {\r\n    return 3.0 * aA2 - 6.0 * aA1;\r\n  }\r\n  function C(aA1: number) {\r\n    return 3.0 * aA1;\r\n  }\r\n\r\n  function calcBezier(aT: number, aA1: number, aA2: number) {\r\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n  }\r\n  function getSlope(aT: number, aA1: number, aA2: number) {\r\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n  }\r\n\r\n  function binarySubdivide(\r\n    aX: number,\r\n    aA: number,\r\n    aB: number,\r\n    mX1: number,\r\n    mX2: number\r\n  ) {\r\n    let currentX;\r\n    let currentT;\r\n    let i = 0;\r\n    let ab = aB;\r\n    let aa = aA;\r\n    do {\r\n      currentT = aa + (ab - aa) / 2.0;\r\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n      if (currentX > 0.0) {\r\n        ab = currentT;\r\n      } else {\r\n        aa = currentT;\r\n      }\r\n      i += 1;\r\n    } while (Math.abs(currentX) > 0.0000001 && i < 10);\r\n    return currentT;\r\n  }\r\n\r\n  function newtonRaphsonIterate(\r\n    aX: number,\r\n    aGuessT: number,\r\n    mX1: number,\r\n    mX2: number\r\n  ) {\r\n    let aG = aGuessT;\r\n    for (let i = 0; i < 4; i += 1) {\r\n      const currentSlope = getSlope(aG, mX1, mX2);\r\n      if (currentSlope === 0.0) {\r\n        return aG;\r\n      }\r\n      const currentX = calcBezier(aG, mX1, mX2) - aX;\r\n      aG -= currentX / currentSlope;\r\n    }\r\n    return aG;\r\n  }\r\n\r\n  function bz(mX1: number, mY1: number, mX2: number, mY2: number) {\r\n    if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1)) {\r\n      return undefined;\r\n    }\r\n    const sampleValues = new Float32Array(kSplineTableSize);\r\n\r\n    if (mX1 !== mY1 || mX2 !== mY2) {\r\n      for (let i = 0; i < kSplineTableSize; ++i) {\r\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n      }\r\n    }\r\n\r\n    function getTForX(aX: number) {\r\n      let intervalStart = 0;\r\n      let currentSample = 1;\r\n      const lastSample = kSplineTableSize - 1;\r\n\r\n      for (\r\n        ;\r\n        currentSample !== lastSample && sampleValues[currentSample] <= aX;\r\n        ++currentSample\r\n      ) {\r\n        intervalStart += kSampleStepSize;\r\n      }\r\n\r\n      --currentSample;\r\n\r\n      const dist =\r\n        (aX - sampleValues[currentSample]) /\r\n        (sampleValues[currentSample + 1] - sampleValues[currentSample]);\r\n      const guessForT = intervalStart + dist * kSampleStepSize;\r\n      const initialSlope = getSlope(guessForT, mX1, mX2);\r\n\r\n      if (initialSlope >= 0.001) {\r\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n      }\r\n      if (initialSlope === 0.0) {\r\n        return guessForT;\r\n      }\r\n      return binarySubdivide(\r\n        aX,\r\n        intervalStart,\r\n        intervalStart + kSampleStepSize,\r\n        mX1,\r\n        mX2\r\n      );\r\n    }\r\n\r\n    return (x: number) => {\r\n      if (mX1 === mY1 && mX2 === mY2) {\r\n        return x;\r\n      }\r\n      if (x === 0 || x === 1) {\r\n        return x;\r\n      }\r\n      return calcBezier(getTForX(x), mY1, mY2);\r\n    };\r\n  }\r\n\r\n  return bz;\r\n})();\r\n\r\nexport function applyArguments(func: Function, args: number[]): EasingFunction {\r\n  return func(...args) as EasingFunction;\r\n}\r\nexport function parseEasings(\r\n  easing: string | Function,\r\n  duration?: number\r\n): EasingFunction {\r\n  if (typeof easing === 'function') {\r\n    return easing as EasingFunction;\r\n  }\r\n  const name = easing.split('(')[0];\r\n  const ease = penner[toCamelCase(name)];\r\n  const args = parseEasingParameters(easing);\r\n  switch (name) {\r\n    case 'spring':\r\n      return spring(easing, duration as number);\r\n    case 'cubicBezier':\r\n      return applyArguments(bezier, args);\r\n    case 'steps':\r\n      return applyArguments(steps, args);\r\n    default:\r\n      return applyArguments(ease, args);\r\n  }\r\n}\r\n","import EasingFunction from '../contracts/easing-function';\r\n\r\nconst CUSTOM_EASINGS: Record<string, EasingFunction> = {};\r\nexport function registerCustomEasing(\r\n  name: string,\r\n  callback: EasingFunction\r\n): void {\r\n  CUSTOM_EASINGS[name] = callback;\r\n}\r\n\r\nexport function getCustomEasing(name: string): EasingFunction | undefined {\r\n  return CUSTOM_EASINGS[name];\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { toMs } from '../utilities/index';\r\nimport { parseEasings } from '../based-implementations/easings';\r\nimport { getCustomEasing } from '../sauce/custom-easings';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport EasingFunction from '../contracts/easing-function';\r\n\r\n/**\r\n * Sets the value of some properties For `AnimationAuxiliaryObject` from a `AnimationInstance`.\r\n */\r\nexport function propertiesForAnimationAuxiliaryObject(\r\n  animation: AnimationInstance\r\n): Pick<AnimationAuxiliaryObject, 'easing' | 'reverseExecution' | 'duration'> {\r\n  let easing: EasingFunction;\r\n  if (\r\n    typeof animation.easing === 'string' &&\r\n    getCustomEasing(animation.easing)\r\n  ) {\r\n    easing = getCustomEasing(animation.easing) as EasingFunction;\r\n  } else {\r\n    easing = parseEasings(animation.easing, toMs(animation.dur));\r\n  }\r\n  return {\r\n    easing,\r\n\r\n    duration: animation.dur,\r\n\r\n    reverseExecution: ((direction: AnimationInstance['dir']) => {\r\n      switch (direction) {\r\n        case 'reverse':\r\n        case 'alternate-reverse':\r\n          return true;\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    })(animation.dir),\r\n  };\r\n}\r\nexport default function CreateAnimationAuxiliaryObject(\r\n  animation: AnimationInstance\r\n): AnimationAuxiliaryObject {\r\n  return {\r\n    animateProperties: [],\r\n\r\n    keyframesKeys: [],\r\n\r\n    remainingDelayAnimation: toMs(animation.delay),\r\n\r\n    initialProgress: animation.progressValue,\r\n\r\n    lastStartProgress: 0,\r\n\r\n    animationId: animation.animationId,\r\n\r\n    countDriveloop: 0,\r\n\r\n    dataLoadingState: 'loading',\r\n\r\n    backRunning: false,\r\n\r\n    startTimeOfTheIteration: 0,\r\n\r\n    timeRunningIteration: 0,\r\n\r\n    valuesOfThePropertiesBeforeAnimating: [],\r\n\r\n    animationAlreadyStarted: false,\r\n\r\n    iterationInterlacations: {\r\n      timeConsumed: 0,\r\n      completed: 0,\r\n      leftovers: 0,\r\n    },\r\n    animationLoadingTime: 0,\r\n\r\n    animation,\r\n    ...propertiesForAnimationAuxiliaryObject(animation),\r\n  } as AnimationAuxiliaryObject;\r\n}\r\n","export default function getTimeNow(): number {\r\n  return Date.now ? Date.now() : new Date().getTime();\r\n}\r\n","/**\n * Orders the array by growth values.\n */\nexport default function ordernateByGrowingValues(\n  array: (string | number)[]\n): number[] {\n  return array.map(Number).sort((a, b) => {\n    return a - b;\n  });\n}\n","/**\n * Converts the string to a CSS valid.\n */\nexport default function toCSSKebabCase(string: string): string {\n  const rdashAlpha = /([A-Z])/g;\n  return string.replace(rdashAlpha, (_all, letter: string) => {\n    return `-${letter}`.toLowerCase();\n  });\n}\n","import { AnimationInstance } from '../contracts/animation-inter';\r\nimport toCSSKebabCase from '../utilities-style/to-css-kebab-case';\r\nimport { toCamelCase, trimString } from '../utilities/handle-string';\r\n\r\nconst EVENTS_IN_OBSERVATION: Record<string, Record<string, Function[]>> = {};\r\n\r\nexport const LISTENERS_NAMES: [\r\n  'start',\r\n  'loopEnd',\r\n  'end',\r\n  'load',\r\n  'cancel',\r\n  'destroy',\r\n  'play',\r\n  '$-iteration-control-methods',\r\n  'ready',\r\n  'change',\r\n  'loopStart',\r\n  '$-end-animation-in-cycle',\r\n  'progressValue'\r\n] = [\r\n  'start',\r\n  'loopEnd',\r\n  'end',\r\n  'load',\r\n  'cancel',\r\n  'destroy',\r\n  'play',\r\n  '$-iteration-control-methods',\r\n  'ready',\r\n  'change',\r\n  'loopStart',\r\n  '$-end-animation-in-cycle',\r\n  'progressValue',\r\n];\r\n\r\nexport function addAnimationEventListener(\r\n  name: string,\r\n  callbackfn: Function,\r\n  animation: AnimationInstance\r\n): void {\r\n  const { animationId } = animation;\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    EVENTS_IN_OBSERVATION[animationId] = {};\r\n  }\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n  const eName = trimString(name);\r\n  if (eName) {\r\n    if (animationObjectBuket[eName]) {\r\n      animationObjectBuket[eName].push(callbackfn);\r\n    } else {\r\n      animationObjectBuket[eName] = [callbackfn];\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeAnimationEventListener(\r\n  name: string,\r\n  callbackfnOrIndex: Function | number,\r\n  animation: AnimationInstance\r\n): void {\r\n  const animationId = animation.animationId;\r\n\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    return;\r\n  }\r\n\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n\r\n  const eName = trimString(name);\r\n  if (eName && animationObjectBuket[eName]) {\r\n    if (typeof callbackfnOrIndex === 'number') {\r\n      animationObjectBuket[eName].splice(callbackfnOrIndex, 1);\r\n    } else {\r\n      const index = animationObjectBuket[eName].indexOf(callbackfnOrIndex);\r\n\r\n      if (index >= 0) {\r\n        animationObjectBuket[eName].splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeAllAnimationEventListeners(animationId: number): void {\r\n  delete EVENTS_IN_OBSERVATION[animationId];\r\n}\r\n\r\nexport function propagateAnimationEventListener(\r\n  name: string,\r\n  animation: AnimationInstance,\r\n  callbackfn?: (callbackfn: Function, animation: AnimationInstance) => void\r\n): void {\r\n  let eventName = trimString(name);\r\n  let eventBucket: typeof EVENTS_IN_OBSERVATION[string][string];\r\n  const { animationId } = animation;\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    return;\r\n  }\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n\r\n  if (animationObjectBuket[eventName]) {\r\n    eventBucket = animationObjectBuket[eventName];\r\n  } else if (animationObjectBuket[toCamelCase(eventName)]) {\r\n    eventName = toCamelCase(eventName);\r\n    eventBucket = animationObjectBuket[eventName];\r\n  } else {\r\n    eventName = toCSSKebabCase(eventName);\r\n    eventBucket = animationObjectBuket[eventName];\r\n  }\r\n\r\n  if (eventBucket) {\r\n    // Copy the array to avoid side effects of the methods.\r\n    eventBucket.slice().forEach((v) => {\r\n      if (callbackfn) {\r\n        callbackfn(v, animation);\r\n      } else {\r\n        v.call(animation.performer, animation.performer);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function updateListenersAnimationId(\r\n  lastAnimationId: number,\r\n  newAnimationId: number\r\n): void {\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[lastAnimationId];\r\n  EVENTS_IN_OBSERVATION[newAnimationId] = animationObjectBuket;\r\n\r\n  delete EVENTS_IN_OBSERVATION[lastAnimationId];\r\n}\r\n","import { CSS_VENDORS_LENGTH, CSS_VENDORS } from '../sauce/constants';\nimport { toCamelCase } from '../utilities/index';\n\n/**\n * Gets the vendor for a determined CSS property.\n *\n * @param propertyName\n * The propertyName\n *\n * @returns {string}\n *\n * The CSS property( with the vendor prefix).\n */\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\nconst KNOWN_PROPERTIES: Record<string, string> = {};\nexport default function getVendorCSSProperty(\n  propertyName: string,\n  propertyValue?: string\n): string {\n  if (KNOWN_PROPERTIES[propertyName]) {\n    return KNOWN_PROPERTIES[propertyName];\n  }\n  DIV_ELEMENT_STYLE.cssText = '';\n\n  let name = propertyName;\n  const values = [propertyValue, 'inherit', 'initial'];\n  const l = values.length;\n\n  for (let index = 0; index < l; index += 1) {\n    const value = values[index];\n    if (value) {\n      if (name.substring(0, 1) === '-') {\n        name = name.replace(/-[^>](.*?)-/, '');\n      }\n      DIV_ELEMENT_STYLE[toCamelCase(name) as never] = value;\n      if (DIV_ELEMENT_STYLE.cssText) {\n        KNOWN_PROPERTIES[propertyName] = name;\n        return name;\n      }\n      for (let count = CSS_VENDORS_LENGTH - 1; count >= 0; count -= 1) {\n        const n = `-${CSS_VENDORS[count]}-${name}`;\n        DIV_ELEMENT_STYLE[toCamelCase(n) as never] = value;\n        if (DIV_ELEMENT_STYLE.cssText) {\n          KNOWN_PROPERTIES[propertyName] = n;\n          return n;\n        }\n      }\n    }\n  }\n  KNOWN_PROPERTIES[propertyName] = propertyName;\n\n  return propertyName;\n}\n","/**\n * Attempts to reduce CSS string rules by applying to an element outside of the document and returning the result.\n */\nconst reduceCSSStringRules = (() => {\n  const DIV_ELEMENT_STYLE = document.createElement('div').style;\n  return (CSSStringRules: string) => {\n    DIV_ELEMENT_STYLE.cssText = CSSStringRules;\n    return DIV_ELEMENT_STYLE.cssText;\n  };\n})();\nexport default reduceCSSStringRules;\n","/**\n * Removes the spaces between the characters in the string.\n */\nexport default function removeSpacesChar(str: string): string {\n  return str.replace(/[ ]+/g, '');\n}\n","import { removeSpacesChar, toCamelCase, trimString } from '../utilities/index';\n\n/**\n * Converts CSS string rules to object.\n */\nexport default function CSSStringRulesToObject(\n  CSSStringRules: string\n): Record<string, string> {\n  const CSSProperties = `${CSSStringRules};`.split(';');\n  const styleObject: Record<string, string> = {};\n  CSSProperties.forEach((value) => {\n    const property = value;\n    const propertyIndex = property.indexOf(':') + 1;\n    const propertyName = property.substring(0, propertyIndex - 1);\n    if (propertyName) {\n      styleObject[removeSpacesChar(toCamelCase(propertyName))] = trimString(\n        property.substring(propertyIndex, property.length)\n      );\n    }\n  });\n  return styleObject;\n}\n","import toCSSKebabCase from './to-css-kebab-case';\r\n\r\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\r\nconst KNOWN_PROPERTIES: Record<string, string[]> = {};\r\nexport default function getLinkedCSSProperties(\r\n  propertyName: string,\r\n  propertyValue?: string\r\n): string[] {\r\n  if (KNOWN_PROPERTIES[propertyName]) {\r\n    return KNOWN_PROPERTIES[propertyName];\r\n  }\r\n  DIV_ELEMENT_STYLE.cssText = '';\r\n\r\n  const propertyNameCSS = toCSSKebabCase(propertyName);\r\n\r\n  const linkedCSSPropertiesList: string[] = [];\r\n\r\n  let counting = 0;\r\n\r\n  const values = [propertyValue, 'inherit', 'initial'];\r\n  const l = values.length;\r\n  let property = '';\r\n  for (let index = 0; index < l; index += 1) {\r\n    const value = values[index];\r\n    if (value) {\r\n      DIV_ELEMENT_STYLE[propertyNameCSS as never] = value;\r\n      property = DIV_ELEMENT_STYLE.item(counting);\r\n      if (property) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  while (property !== '') {\r\n    linkedCSSPropertiesList.push(property);\r\n\r\n    counting += 1;\r\n    property = DIV_ELEMENT_STYLE.item(counting);\r\n  }\r\n\r\n  KNOWN_PROPERTIES[propertyName] = linkedCSSPropertiesList;\r\n\r\n  return KNOWN_PROPERTIES[propertyName];\r\n}\r\n","export function getAttr(element: HTMLElement, attrName: string): string | null {\r\n  return element.getAttribute(attrName);\r\n}\r\n\r\nexport function setAttr(\r\n  element: HTMLElement,\r\n  attrName: string,\r\n  attrValue: string\r\n): void {\r\n  return element.setAttribute(attrName, attrValue);\r\n}\r\n\r\nexport function removeAttr(element: HTMLElement, attrName: string): void {\r\n  return element.removeAttribute(attrName);\r\n}\r\n","import { trimString } from './handle-string';\n\n/**\n * Gets the unit of measure present in the string.\n */\nexport default function getUnit(val: string): string {\n  const propertyValue = trimString(val);\n\n  const n = parseFloat(propertyValue);\n  if (\n    Number.isNaN(n) ||\n    propertyValue.indexOf(',') > -1 ||\n    propertyValue.indexOf(' ') > -1\n  ) {\n    return '';\n  }\n\n  return propertyValue\n    .split(n.toString())\n    .join('')\n    .replace(/([0-9 .])/g, '');\n}\n","import {\r\n  CSSStringRulesToObject,\r\n  getVendorCSSProperty,\r\n  toCSSKebabCase,\r\n} from '../utilities-style/index';\r\nimport { customForIn, hasOwnProperty, trimString } from '../utilities/index';\r\nimport { setAttr, removeAttr, getAttr } from '../utilities/dom-attributes';\r\nimport { getCustomProperty } from '../sauce/custom-properties-for-animations';\r\nimport calcNextPropertyValue from './calc-next-property-value';\r\nimport { isEmptyObject } from '../sauce/types';\r\nimport { MAX_KEYFRAME } from '../sauce/constants';\r\nimport isDOMElement from '../utilities/is-dom-element';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\n\r\nexport function transformFunctionsToObject(\r\n  target: HTMLElement\r\n): Record<string, string> | false {\r\n  const t = getVendorCSSProperty('transform') as never;\r\n  const current = target.style[t];\r\n  if (current) {\r\n    return CSSStringRulesToObject(\r\n      current.replace(/[(]/g, ':').replace(/[)]/g, ';')\r\n    );\r\n  }\r\n  return false;\r\n}\r\nexport function transformFunctionsObjectToString(\r\n  transformFunctionsObject: Record<string, string>\r\n): string {\r\n  let newValue = '';\r\n  customForIn(transformFunctionsObject, (v, n) => {\r\n    if (v) {\r\n      newValue += `${n}(${trimString(v)\r\n        .replace(/( {2})/g, ' ')\r\n        .replace(/ /g, ', ')\r\n        .replace(/,,/g, ',')})`;\r\n    }\r\n  });\r\n\r\n  return newValue;\r\n}\r\n\r\nfunction animateTargetTransform(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const fnName = propertyName;\r\n  const properties = beforeAnimating.transfromFns;\r\n  const elt = target;\r\n  const t = getVendorCSSProperty('transform') as never;\r\n  const transformFunctionsObject = transformFunctionsToObject(target) || {};\r\n\r\n  if (!hasOwnProperty(properties, fnName)) {\r\n    properties[fnName] = transformFunctionsObject[fnName] || '';\r\n  }\r\n  transformFunctionsObject[fnName] = propertyValue;\r\n\r\n  elt.style[t] = transformFunctionsObjectToString(transformFunctionsObject);\r\n}\r\n\r\nfunction animateTargetCSS(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const properties = beforeAnimating.style;\r\n  const elt = target;\r\n\r\n  if (!hasOwnProperty(properties, propertyName)) {\r\n    properties[propertyName] = elt.style[propertyName as never];\r\n  }\r\n\r\n  elt.style[propertyName as never] = propertyValue;\r\n}\r\nfunction animateTargetDirectProps(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n): void {\r\n  const pName = propertyName as never;\r\n  const elt = target;\r\n  const properties = beforeAnimating.direct;\r\n  if (!hasOwnProperty(beforeAnimating, pName)) {\r\n    properties[pName] = elt[pName];\r\n  }\r\n  elt[pName] = propertyValue as never;\r\n}\r\n\r\nfunction animateTargetAttributes(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const pName = toCSSKebabCase(propertyName);\r\n\r\n  const properties = beforeAnimating.attr;\r\n  if (!hasOwnProperty(properties, propertyName)) {\r\n    properties[propertyName] = getAttr(target, pName);\r\n  }\r\n\r\n  setAttr(target, pName, propertyValue);\r\n}\r\n\r\nfunction animateTargetObserved(\r\n  target: object,\r\n  propertyName: string,\r\n  value: unknown,\r\n  percentageCompleted: number,\r\n  index: number\r\n) {\r\n  const observerFn = getCustomProperty(propertyName, 'observed');\r\n  observerFn(value, percentageCompleted, target, index);\r\n}\r\n\r\nexport function applyAnimationsStyleToElement(\r\n  animateProperties: AnimationAuxiliaryObject['animateProperties'],\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const {\r\n    valuesOfThePropertiesBeforeAnimating,\r\n    reverseExecution,\r\n  } = animationAuxiliaryObject;\r\n  const progress = animationAuxiliaryObject.animation.progressValue;\r\n\r\n  animateProperties.forEach((propertyObject) => {\r\n    if (!valuesOfThePropertiesBeforeAnimating[propertyObject.index]) {\r\n      valuesOfThePropertiesBeforeAnimating[propertyObject.index] = {\r\n        style: {},\r\n        attr: {},\r\n        direct: {},\r\n        transfromFns: {},\r\n      };\r\n    }\r\n    const o = propertyObject;\r\n    let from = 0;\r\n    let to = MAX_KEYFRAME;\r\n\r\n    if (o.keyframesKeys) {\r\n      const l = o.keyframesKeys.length;\r\n      for (let index = 0; index < l; index += 1) {\r\n        const key = o.keyframesKeys[index];\r\n        if (progress <= key) {\r\n          to = key;\r\n          break;\r\n        }\r\n        from = key;\r\n      }\r\n    }\r\n    let percentageInRelationToKey =\r\n      to - from > 0\r\n        ? (MAX_KEYFRAME / (to - from)) * (progress - from)\r\n        : MAX_KEYFRAME;\r\n\r\n    if (\r\n      typeof o.lastKey === 'number' &&\r\n      o.lastKey !== to &&\r\n      !reverseExecution\r\n    ) {\r\n      const s = to;\r\n      percentageInRelationToKey = reverseExecution ? 0 : MAX_KEYFRAME;\r\n      to = o.lastKey;\r\n      o.lastKey = s;\r\n      from = to;\r\n    } else {\r\n      o.lastKey = to;\r\n    }\r\n\r\n    if (reverseExecution) {\r\n      const ss = from;\r\n      from = to;\r\n      to = ss;\r\n      percentageInRelationToKey = reverseExecution\r\n        ? MAX_KEYFRAME - percentageInRelationToKey\r\n        : percentageInRelationToKey;\r\n    }\r\n\r\n    if (o.type === 'observed') {\r\n      const result = animationAuxiliaryObject.easing(\r\n        (1 / 100) * percentageInRelationToKey,\r\n        propertyObject.target,\r\n        propertyObject.index,\r\n        propertyObject.originalArrayLength\r\n      );\r\n      animateTargetObserved(\r\n        o.target,\r\n        o.propertyName,\r\n        reverseExecution\r\n          ? propertyObject.keyframes[from]\r\n          : propertyObject.keyframes[to],\r\n        0 + result * (100 - 0),\r\n        propertyObject.index\r\n      );\r\n    } else {\r\n      o.newPropertyValue = calcNextPropertyValue(\r\n        propertyObject,\r\n        [from, to],\r\n        percentageInRelationToKey,\r\n        animationAuxiliaryObject.easing,\r\n        animationAuxiliaryObject.animation.round\r\n      );\r\n\r\n      let f: Function;\r\n\r\n      switch (o.type) {\r\n        case 'transform':\r\n          f = animateTargetTransform;\r\n          break;\r\n        case 'attr':\r\n          f = animateTargetAttributes;\r\n          break;\r\n        case 'direct':\r\n          f = animateTargetDirectProps;\r\n          break;\r\n        default:\r\n          f = animateTargetCSS;\r\n          break;\r\n      }\r\n\r\n      f(\r\n        o.target,\r\n        o.propertyName,\r\n        o.newPropertyValue,\r\n        valuesOfThePropertiesBeforeAnimating[propertyObject.index]\r\n      );\r\n    }\r\n  });\r\n}\r\n\r\nfunction resetHTMLElement(\r\n  target: HTMLElement,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const t = target;\r\n  customForIn(beforeAnimating.attr, (value, name) => {\r\n    if (value) {\r\n      setAttr(t, name, value);\r\n    } else {\r\n      removeAttr(t, name);\r\n    }\r\n  });\r\n  customForIn(beforeAnimating.style, (value, name) => {\r\n    if (value) {\r\n      t.style[name as never] = value;\r\n    } else {\r\n      t.style[name as never] = '';\r\n    }\r\n  });\r\n\r\n  const transformFunctionsObject = transformFunctionsToObject(t);\r\n\r\n  if (!isEmptyObject(beforeAnimating.transfromFns)) {\r\n    const p = getVendorCSSProperty('transform') as never;\r\n    t.style[p] = transformFunctionsObjectToString({\r\n      ...transformFunctionsObject,\r\n      ...beforeAnimating.transfromFns,\r\n    });\r\n  }\r\n}\r\n/**\r\n * Removes the style added by the animation.\r\n */\r\nexport function removeAnimationStyle(\r\n  requiredAnimationProperties: Pick<\r\n    AnimationAuxiliaryObject,\r\n    'animationId' | 'valuesOfThePropertiesBeforeAnimating'\r\n  > & {\r\n    animation: Pick<AnimationInstance, 'removeChanges' | 'targets'>;\r\n  }\r\n): void {\r\n  const {\r\n    animation,\r\n    valuesOfThePropertiesBeforeAnimating,\r\n  } = requiredAnimationProperties;\r\n  if (!animation.removeChanges) {\r\n    return;\r\n  }\r\n  const targets = animation.targets;\r\n\r\n  for (let index = targets.length - 1; index > -1; index -= 1) {\r\n    const targetObject = targets[index];\r\n    const { target } = targetObject;\r\n\r\n    const beforeAnimating = valuesOfThePropertiesBeforeAnimating[index];\r\n    if (isDOMElement(target)) {\r\n      resetHTMLElement(target as HTMLElement, beforeAnimating);\r\n    }\r\n    customForIn(beforeAnimating.direct, (value, name) => {\r\n      target[name as never] = value as never;\r\n    });\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { trimString } from '../utilities/handle-string';\r\n\r\nfunction treatSupportsFloatingValue(propertyValues: string[]) {\r\n  const values = propertyValues;\r\n  const hasRGB = values.indexOf('rgb');\r\n  if (hasRGB > -1) {\r\n    let index = hasRGB;\r\n    do {\r\n      const v = Number(trimString(values[index]));\r\n      if (!Number.isNaN(v)) {\r\n        values[index] = Math.round(v) + (getUnit(values[index]) || '');\r\n      }\r\n      index += 1;\r\n    } while (values[index] !== ')');\r\n  }\r\n  return values;\r\n}\r\nexport default function calcNextPropertyValue(\r\n  propertyObject: AnimationAuxiliaryObject['animateProperties'][number],\r\n  fromAndTo: [from: number, to: number],\r\n  currentPercent: number,\r\n  easingFn: AnimationAuxiliaryObject['easing'],\r\n  round: number\r\n): string {\r\n  const startValues = propertyObject.keyframes[fromAndTo[0]] as string[];\r\n\r\n  const endValues = propertyObject.keyframes[fromAndTo[1]] as string[];\r\n\r\n  const newValue: string[] = [];\r\n\r\n  endValues.forEach((value, index) => {\r\n    const startValueIndex = startValues[index]\r\n      ? trimString(startValues[index] as string)\r\n      : '0';\r\n    let result;\r\n\r\n    if (!Number.isNaN(parseFloat(value))) {\r\n      const unitOfMeasure = getUnit(value) || getUnit(startValueIndex) || '';\r\n\r\n      const fromNumber = parseFloat(startValueIndex);\r\n      const toNumber = parseFloat(trimString(value));\r\n      result = easingFn(\r\n        (1 / 100) * currentPercent,\r\n        propertyObject.target,\r\n        propertyObject.index,\r\n        propertyObject.originalArrayLength\r\n      );\r\n\r\n      result = fromNumber + result * (toNumber - fromNumber);\r\n\r\n      if (round) {\r\n        result = Math.round(result * round) / round;\r\n      }\r\n\r\n      result = ` ${result.toString() + unitOfMeasure}`;\r\n    } else {\r\n      result = value;\r\n    }\r\n    newValue.push(result);\r\n  });\r\n\r\n  return treatSupportsFloatingValue(newValue).join('');\r\n}\r\n","export default function isDOMElement(e: object): boolean {\r\n  return (e as HTMLElement).nodeType ? true : false || e instanceof SVGElement;\r\n}\r\n","const hasRAf = typeof window.requestAnimationFrame === 'function';\r\nfunction clearAnimationTimeout(id: number): void {\r\n  if (hasRAf) {\r\n    return window.cancelAnimationFrame(id);\r\n  }\r\n  return window.clearTimeout(id);\r\n}\r\n\r\nexport default function animationTimeout(\r\n  callback: () => void,\r\n  timeout?: number | undefined\r\n): number {\r\n  if (hasRAf) {\r\n    const requestAnimationFrameId = window.requestAnimationFrame(() => {\r\n      callback();\r\n      clearAnimationTimeout(requestAnimationFrameId);\r\n    });\r\n    return requestAnimationFrameId;\r\n  }\r\n  return (setTimeout(callback, timeout || 0) as unknown) as number;\r\n}\r\n","import animationTimeout from './animation-timeout';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { sendToGarbageCollector } from '../sauce/manage-memory-collections';\r\nimport { customForIn } from '../utilities/index';\r\nimport { BEST_FPS_TIMEOUT } from '../sauce/constants';\r\nimport { isEmptyObject } from '../sauce/types';\r\n\r\n/**\r\n * Indicates whether the stack mount is already started.\r\n */\r\nlet STARTED_STACK_MOUNT = false;\r\n\r\n/**\r\n * That's where the animations are queued before they're executed.\r\n */\r\nlet ANIMATIONS_STACK: Record<string, AnimationAuxiliaryObject | null> = {};\r\n\r\nconst OBSERVERS_OF_THE_STACK_OF_ANIMATIONS: Record<\r\n  string,\r\n  (animationsStack: Record<string, AnimationAuxiliaryObject>) => unknown\r\n> = {};\r\n\r\nexport function addMountedStackObserver(\r\n  callbackfn: typeof OBSERVERS_OF_THE_STACK_OF_ANIMATIONS[string],\r\n  name: string\r\n): void {\r\n  OBSERVERS_OF_THE_STACK_OF_ANIMATIONS[name] = callbackfn;\r\n}\r\n\r\n/**\r\n * Adds the execution queue  a \"callbackfn\" (through requestAnimationFrame or setTimeout). When invoked the same calls the function that unmount the stack and completes the cycle.\r\n */\r\n\r\nexport function timeoutForStackMounting(): void {\r\n  animationTimeout(() => {\r\n    if (isEmptyObject(ANIMATIONS_STACK)) {\r\n      STARTED_STACK_MOUNT = false;\r\n      return;\r\n    }\r\n\r\n    const animationsStack: Record<string, AnimationAuxiliaryObject> = {};\r\n\r\n    customForIn(ANIMATIONS_STACK, (propertyValue, propertyName) => {\r\n      if (propertyValue) {\r\n        animationsStack[propertyName] = propertyValue;\r\n      }\r\n    });\r\n    sendToGarbageCollector(animationsStack, ANIMATIONS_STACK);\r\n\r\n    /*\r\n     * Restarts the values of the mount stack.\r\n     */\r\n    STARTED_STACK_MOUNT = false;\r\n    ANIMATIONS_STACK = {};\r\n\r\n    customForIn(OBSERVERS_OF_THE_STACK_OF_ANIMATIONS, (observerFn) => {\r\n      observerFn(animationsStack);\r\n    });\r\n  });\r\n}\r\n\r\nexport function addAnimationToStack(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject | 'open'\r\n): boolean {\r\n  if (\r\n    animationAuxiliaryObject !== 'open' &&\r\n    (!animationAuxiliaryObject || !animationAuxiliaryObject.animation)\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  if (!STARTED_STACK_MOUNT) {\r\n    /**\r\n     * Waits for animations so that each style is added together.\r\n     */\r\n\r\n    STARTED_STACK_MOUNT = true;\r\n\r\n    timeoutForStackMounting();\r\n  }\r\n  if (animationAuxiliaryObject !== 'open') {\r\n    ANIMATIONS_STACK[\r\n      animationAuxiliaryObject.animationId\r\n    ] = animationAuxiliaryObject;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nsetInterval(() => {\r\n  addAnimationToStack('open');\r\n}, BEST_FPS_TIMEOUT);\r\n\r\naddAnimationToStack('open');\r\n\r\nexport function removeAnimationFromStack(\r\n  animationId: AnimationAuxiliaryObject['animationId']\r\n): void {\r\n  if (ANIMATIONS_STACK[animationId]) {\r\n    ANIMATIONS_STACK[animationId] = null;\r\n  }\r\n}\r\nexport function hasAnimationInTheStack(): boolean {\r\n  return !isEmptyObject(ANIMATIONS_STACK);\r\n}\r\nexport function getAnimationInTheStack(\r\n  animationId?: number\r\n):\r\n  | AnimationAuxiliaryObject\r\n  | Record<string, AnimationAuxiliaryObject | null>\r\n  | null {\r\n  if (typeof animationId !== 'number') {\r\n    return ANIMATIONS_STACK;\r\n  }\r\n  return ANIMATIONS_STACK[animationId];\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport splitCSSProperties from '../utilities-style/split-css-properties';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport ordernateByGrowingValues from '../utilities/ordernate-by-growing-values';\r\n\r\nconst POOL_PROPERTY_OBJECTS: PropertyObject[] = [];\r\nexport function recyclePropertyObjectToAnimate(\r\n  animateProperties: PropertyObject[]\r\n): void {\r\n  const u = undefined as never;\r\n  if (\r\n    POOL_PROPERTY_OBJECTS.length < 500 /** Maximum objects in the dumpster. */\r\n  ) {\r\n    animateProperties.forEach((obj) => {\r\n      const o = obj;\r\n      o.target = u;\r\n      o.index = u;\r\n      o.keyframes = u;\r\n      o.keyframesKeys = u;\r\n      o.propertyName = u;\r\n      o.newPropertyValue = u;\r\n      o.lastKey = u;\r\n      o.type = u;\r\n      o.originalArrayLength = u;\r\n      POOL_PROPERTY_OBJECTS.push(o);\r\n    });\r\n  }\r\n}\r\n\r\nfunction removeSpaces(a: string[]) {\r\n  return a.filter((v) => v !== ' ');\r\n}\r\nfunction splitKeyframePropertyValue(keyframes: Record<string, string>) {\r\n  const n: Record<string, string[]> = {};\r\n  customForIn(keyframes, (keyframeValue, key) => {\r\n    n[key] = removeSpaces(splitCSSProperties(keyframeValue));\r\n  });\r\n  return n;\r\n}\r\ntype PropertyObject = AnimationAuxiliaryObject['animateProperties'][number];\r\nexport default function getPropertyObjectToAnimate(\r\n  propertiesKeyframes: Record<string, Record<string, string>>,\r\n  target: object,\r\n  index: number,\r\n  originalArrayLength: number,\r\n  type: PropertyObject['type']\r\n): PropertyObject[] {\r\n  const animateProperties: PropertyObject[] = [];\r\n  customForIn(propertiesKeyframes, (kf, propertyName) => {\r\n    let differentValues = false;\r\n    let lastkey = '0';\r\n    customForIn(kf, (value, key) => {\r\n      differentValues = value !== kf[lastkey];\r\n      if (differentValues) {\r\n        return true;\r\n      }\r\n      lastkey = key;\r\n      return false;\r\n    });\r\n    if (\r\n      hasOwnProperty(kf, '0') &&\r\n      hasOwnProperty(kf, '100') &&\r\n      differentValues\r\n    ) {\r\n      const o = (POOL_PROPERTY_OBJECTS.shift() || {}) as PropertyObject;\r\n      o.target = target;\r\n      o.index = index;\r\n      o.keyframes = splitKeyframePropertyValue(kf);\r\n      o.keyframesKeys = ordernateByGrowingValues(Object.keys(kf));\r\n      o.propertyName = propertyName;\r\n      o.type = type;\r\n      o.originalArrayLength = originalArrayLength;\r\n      animateProperties.push(o);\r\n    }\r\n  });\r\n\r\n  return animateProperties;\r\n}\r\n","/**\n * Splits the CSS properties and their values into a array.\n */\n\nexport default function splitCSSProperties(CSSStringRules: string): string[] {\n  let lastIndex = 0;\n  const propertiesSplited: string[] = [];\n  const style = CSSStringRules.replace(/(;)/g, '; ').replace(/( {2})/g, ' ');\n  style.replace(/[:()[\\] ,=]/g, (a: string, b: number) => {\n    const s = style.substring(lastIndex, b);\n    if (s) {\n      propertiesSplited.push(s);\n    }\n\n    propertiesSplited.push(a);\n    lastIndex = b + 1;\n\n    return a;\n  });\n  propertiesSplited.push(style.substring(lastIndex, Infinity));\n\n  return propertiesSplited;\n}\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { MAX_KEYFRAME, ANIMATION_STATES } from '../sauce/constants';\r\nimport { applyAnimationsStyleToElement } from './crud-animations-style';\r\n\r\nimport { customForIn, getTimeNow, toMs } from '../utilities/index';\r\nimport { releasesGarbageFromAnimations } from '../sauce/manage-memory-collections';\r\nimport {\r\n  addMountedStackObserver,\r\n  getAnimationInTheStack,\r\n  addAnimationToStack,\r\n} from './mount-animations-stack';\r\nimport {\r\n  propagateAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\n\r\nimport { recyclePropertyObjectToAnimate } from '../animation-mount/get-property-object-to-animate';\r\nimport setAnimationProgress from './set-animation-progress';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\n\r\n/* \r\n  eslint-disable @typescript-eslint/no-use-before-define \r\n*/\r\n\r\nconst manageAnimationDelay = (() => {\r\n  let ANIMATIONS_DELAY: {\r\n    animationAuxiliaryObject: AnimationAuxiliaryObject;\r\n    delay: number;\r\n    startTime: number;\r\n    callback: (a: AnimationAuxiliaryObject) => void;\r\n  }[] = [];\r\n  let timeoutId: number | NodeJS.Timeout | undefined;\r\n  function t() {\r\n    timeoutId = setInterval(() => {\r\n      if (ANIMATIONS_DELAY.length === 0) {\r\n        clearInterval(timeoutId as number);\r\n        timeoutId = undefined;\r\n        return;\r\n      }\r\n      ANIMATIONS_DELAY = ANIMATIONS_DELAY.filter((values) => {\r\n        const v = values;\r\n        const c = getTimeNow() - v.startTime;\r\n        const state = v.animationAuxiliaryObject.animation.state;\r\n        if (state === ANIMATION_STATES[1]) {\r\n          if (c >= v.delay) {\r\n            v.animationAuxiliaryObject.remainingDelayAnimation = v.delay - c;\r\n            resetIterationRelatedProperties(v.animationAuxiliaryObject);\r\n            v.animationAuxiliaryObject.remainingDelayAnimation = 0;\r\n\r\n            v.callback(v.animationAuxiliaryObject);\r\n            return false;\r\n          }\r\n        }\r\n\r\n        if (state === ANIMATION_STATES[7] || state === ANIMATION_STATES[4]) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      });\r\n    }, 0);\r\n  }\r\n\r\n  return (\r\n    animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n    delay: number,\r\n    startTime: number,\r\n    callback: (a: AnimationAuxiliaryObject) => void\r\n  ) => {\r\n    ANIMATIONS_DELAY.push({\r\n      animationAuxiliaryObject,\r\n      delay,\r\n      startTime,\r\n      callback,\r\n    });\r\n    if (!timeoutId) {\r\n      t();\r\n    }\r\n  };\r\n})();\r\n\r\n/**\r\n * Delegates the animation to be executed.\r\n */\r\nfunction insertAnimationInTheQueue(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  jumpTimeout = false,\r\n  animationLoadingTime = 0\r\n) {\r\n  const a = animationAuxiliaryObject;\r\n  const { animation, remainingDelayAnimation } = a;\r\n\r\n  if (!a.animationAlreadyStarted) {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[8], animation);\r\n  }\r\n\r\n  const delay = Math.max(toMs(animation.delay) - animationLoadingTime, 0);\r\n\r\n  if ((delay > 0 || remainingDelayAnimation) && !jumpTimeout) {\r\n    manageAnimationDelay(\r\n      a,\r\n      remainingDelayAnimation || delay,\r\n      getTimeNow(),\r\n      () => {\r\n        addAnimationToStack(a);\r\n        propagateAnimationEventListener(LISTENERS_NAMES[10], animation);\r\n      }\r\n    );\r\n  } else {\r\n    resetIterationRelatedProperties(a);\r\n\r\n    a.remainingDelayAnimation = 0;\r\n\r\n    addAnimationToStack(a);\r\n    propagateAnimationEventListener(LISTENERS_NAMES[10], animation);\r\n  }\r\n}\r\n\r\n/**\r\n * Deal with the processing of a new animation intercalation.\r\n */\r\nfunction newIntercalation(\r\n  requiredAnimationProperties: Pick<\r\n    AnimationAuxiliaryObject,\r\n    | 'iterationInterlacations'\r\n    | 'startTimeOfTheIteration'\r\n    | 'reverseExecution'\r\n    | 'timeRunningIteration'\r\n  > & {\r\n    animation: Pick<\r\n      AnimationInstance,\r\n      'dur' | 'delay' | 'progressValue' | 'max'\r\n    >;\r\n  }\r\n): {\r\n  toAuxiliaryObject: Pick<\r\n    AnimationAuxiliaryObject,\r\n    | 'iterationInterlacations'\r\n    | 'startTimeOfTheIteration'\r\n    | 'reverseExecution'\r\n    | 'timeRunningIteration'\r\n  >;\r\n  progress: number;\r\n} {\r\n  const animationAuxiliaryObject = requiredAnimationProperties;\r\n  const { animation, iterationInterlacations } = animationAuxiliaryObject;\r\n  const maxProgress = animation.max;\r\n  let progress = animation.progressValue;\r\n\r\n  let {\r\n    startTimeOfTheIteration,\r\n    reverseExecution,\r\n    timeRunningIteration,\r\n  } = animationAuxiliaryObject;\r\n\r\n  const duration = toMs(animation.dur);\r\n\r\n  if (duration <= 0) {\r\n    return {\r\n      toAuxiliaryObject: {\r\n        iterationInterlacations,\r\n        startTimeOfTheIteration,\r\n        reverseExecution,\r\n        timeRunningIteration,\r\n      },\r\n      progress: maxProgress,\r\n    };\r\n  }\r\n\r\n  const currentTime = getTimeNow();\r\n\r\n  /**\r\n   * Checks how the animation's progress should behave.\r\n   */\r\n  reverseExecution = progress > maxProgress;\r\n\r\n  let durationOfTheInterlacation: number;\r\n\r\n  if (startTimeOfTheIteration > 0) {\r\n    durationOfTheInterlacation =\r\n      currentTime - startTimeOfTheIteration - timeRunningIteration;\r\n  } else {\r\n    durationOfTheInterlacation = 0;\r\n  }\r\n\r\n  durationOfTheInterlacation += iterationInterlacations.leftovers;\r\n\r\n  iterationInterlacations.timeConsumed += durationOfTheInterlacation;\r\n\r\n  const averageDurationForIntercalation =\r\n    iterationInterlacations.completed > 0\r\n      ? iterationInterlacations.timeConsumed / iterationInterlacations.completed\r\n      : 0;\r\n\r\n  iterationInterlacations.leftovers = Math.max(\r\n    0,\r\n    durationOfTheInterlacation - averageDurationForIntercalation\r\n  );\r\n\r\n  iterationInterlacations.completed += 1;\r\n\r\n  const timeBasedProgress =\r\n    (MAX_KEYFRAME / duration) * averageDurationForIntercalation;\r\n\r\n  let newProgress: number;\r\n\r\n  if (reverseExecution) {\r\n    newProgress = progress - timeBasedProgress;\r\n    newProgress = newProgress < 0 ? 0 : newProgress;\r\n    newProgress = newProgress < maxProgress ? maxProgress : newProgress;\r\n  } else {\r\n    newProgress = progress + timeBasedProgress;\r\n    newProgress = newProgress > MAX_KEYFRAME ? MAX_KEYFRAME : newProgress;\r\n    newProgress = newProgress > maxProgress ? maxProgress : newProgress;\r\n  }\r\n\r\n  progress = newProgress;\r\n  timeRunningIteration = (duration / MAX_KEYFRAME) * progress;\r\n\r\n  startTimeOfTheIteration = currentTime - timeRunningIteration;\r\n\r\n  return {\r\n    toAuxiliaryObject: {\r\n      iterationInterlacations,\r\n      startTimeOfTheIteration,\r\n      reverseExecution,\r\n      timeRunningIteration,\r\n    },\r\n    progress,\r\n  };\r\n}\r\n\r\nexport function resetIterationRelatedProperties(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  const a = animationAuxiliaryObject;\r\n\r\n  a.iterationInterlacations = {\r\n    timeConsumed: 0,\r\n    completed: 0,\r\n    leftovers: 0,\r\n  };\r\n  a.startTimeOfTheIteration = 0;\r\n  a.timeRunningIteration = 0;\r\n  return a;\r\n}\r\n\r\n/**\r\n * Deals with the completion of an animation's iteration.\r\n */ function iterationCompleted(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const a = animationAuxiliaryObject;\r\n  const { animation } = a;\r\n  let { backRunning } = a;\r\n  let maxProgress = animation.max;\r\n\r\n  const amountOfIterations = animation.loop;\r\n  let iterationsCompleted = animation.count;\r\n\r\n  let backRunningStopped = -1;\r\n\r\n  a.animateProperties.forEach((obj) => {\r\n    const o = obj;\r\n    o.lastKey = undefined;\r\n  });\r\n\r\n  /**\r\n   * Checks that the completion of the interaction was not an animation return action(methods: `go` and `back`).\r\n   */\r\n  if (!backRunning) {\r\n    iterationsCompleted += 1;\r\n  }\r\n  animation.count = iterationsCompleted;\r\n\r\n  if (\r\n    amountOfIterations > iterationsCompleted ||\r\n    amountOfIterations === Infinity ||\r\n    amountOfIterations === true\r\n  ) {\r\n    if (backRunning) {\r\n      backRunningStopped = animation.progressValue;\r\n      backRunning = false;\r\n      propagateAnimationEventListener(LISTENERS_NAMES[7], animation);\r\n    }\r\n\r\n    const animationProgressObject = setAnimationProgress(a);\r\n\r\n    a.countDriveloop = animationProgressObject.countDriveloop;\r\n    a.lastStartProgress = animationProgressObject.progress;\r\n\r\n    maxProgress = animationProgressObject.maxProgress;\r\n\r\n    propagateAnimationEventListener(LISTENERS_NAMES[7], animation);\r\n    propagateAnimationEventListener(LISTENERS_NAMES[1], animation);\r\n\r\n    resetIterationRelatedProperties(a);\r\n\r\n    a.backRunning = backRunning;\r\n\r\n    animation.max = maxProgress;\r\n    animation.progressValue = animationProgressObject.progress;\r\n\r\n    if (backRunningStopped > -1) {\r\n      /**\r\n       * Maintain the value of the last progress.\r\n       */\r\n      animation.progressValue = backRunningStopped;\r\n\r\n      performNewAnimationIntercalation(a);\r\n    } else {\r\n      const newIntercalationObject = newIntercalation(a);\r\n\r\n      Object.assign(a, newIntercalationObject.toAuxiliaryObject);\r\n      animation.progressValue = newIntercalationObject.progress;\r\n\r\n      insertAnimationInTheQueue(a);\r\n    }\r\n  } else {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[1], animation);\r\n    completedAnimation(a);\r\n  }\r\n}\r\n/**\r\n * Checks whether the animation iteration has been completed or there should be more intercalations.\r\n */\r\nfunction conclusionOfTheIntercalation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  releasesGarbageFromAnimations();\r\n\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  const { animation } = aAuxiliaryObject;\r\n\r\n  if (animation.state === ANIMATION_STATES[1]) {\r\n    const { reverseExecution } = aAuxiliaryObject;\r\n    const maxProgress = animation.max;\r\n    const progress = animation.progressValue;\r\n    if (\r\n      (reverseExecution && progress < maxProgress) ||\r\n      (!reverseExecution && progress > maxProgress) ||\r\n      progress === maxProgress\r\n    ) {\r\n      animation.progressValue = maxProgress;\r\n\r\n      const endDelay = Math.max(toMs(animation.endDelay));\r\n\r\n      if (endDelay > 0) {\r\n        manageAnimationDelay(\r\n          aAuxiliaryObject,\r\n          endDelay,\r\n          getTimeNow(),\r\n          iterationCompleted\r\n        );\r\n      } else {\r\n        iterationCompleted(aAuxiliaryObject);\r\n      }\r\n    } else {\r\n      performNewAnimationIntercalation(aAuxiliaryObject);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Calls the functions that traverse the stack and applies the style to the elements, restarts the values of the mount stack, removes the items from the stack, and forwards the animation objects to be audited.\r\n */\r\nfunction performIntercalationOfTheAnimations(\r\n  animationsStack: Record<string, AnimationAuxiliaryObject>\r\n): void {\r\n  customForIn(\r\n    animationsStack,\r\n    (animationAuxiliaryObject: AnimationAuxiliaryObject) => {\r\n      const aAuxiliaryObject = animationAuxiliaryObject;\r\n\r\n      const { animation, animateProperties } = aAuxiliaryObject;\r\n      let { animationAlreadyStarted } = aAuxiliaryObject;\r\n\r\n      if (animation.state === ANIMATION_STATES[1]) {\r\n        applyAnimationsStyleToElement(animateProperties, aAuxiliaryObject);\r\n\r\n        if (!animationAlreadyStarted) {\r\n          propagateAnimationEventListener(LISTENERS_NAMES[0], animation);\r\n          animationAlreadyStarted = true;\r\n          aAuxiliaryObject.animationAlreadyStarted = true;\r\n        }\r\n\r\n        propagateAnimationEventListener(LISTENERS_NAMES[9], animation);\r\n        if (typeof animation.progress === 'function') {\r\n          animation.progress(animation.progressValue);\r\n        }\r\n      }\r\n    }\r\n  );\r\n\r\n  customForIn(\r\n    animationsStack,\r\n    (animationAuxiliaryObject: AnimationAuxiliaryObject) => {\r\n      conclusionOfTheIntercalation(animationAuxiliaryObject);\r\n    }\r\n  );\r\n}\r\n\r\naddMountedStackObserver(\r\n  performIntercalationOfTheAnimations,\r\n  'performIntercalation'\r\n);\r\n\r\nexport function performNewAnimationIntercalation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  if (aAuxiliaryObject.remainingDelayAnimation > 0) {\r\n    insertAnimationInTheQueue(aAuxiliaryObject);\r\n    return;\r\n  }\r\n  const newIntercalationObject = newIntercalation(aAuxiliaryObject);\r\n\r\n  Object.assign(aAuxiliaryObject, newIntercalationObject.toAuxiliaryObject);\r\n\r\n  aAuxiliaryObject.animation.progressValue = newIntercalationObject.progress;\r\n\r\n  addAnimationToStack(aAuxiliaryObject);\r\n}\r\n\r\nfunction completedAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  const { animation } = animationAuxiliaryObject;\r\n  /**\r\n   * Check before propagating events.\r\n   */\r\n  if (animation.autoDestroy) {\r\n    recyclePropertyObjectToAnimate(aAuxiliaryObject.animateProperties);\r\n  }\r\n  animation.state = ANIMATION_STATES[2];\r\n  propagateAnimationEventListener(LISTENERS_NAMES[7], animation);\r\n  propagateAnimationEventListener(LISTENERS_NAMES[2], animation);\r\n  if (animation.isInCycle) {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[11], animation);\r\n  }\r\n}\r\n\r\nexport default function startAnimationExecutionCycle(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  jumpTimeout = false\r\n): void {\r\n  const a = animationAuxiliaryObject;\r\n  if (getAnimationInTheStack(a.animationId)) {\r\n    return;\r\n  }\r\n  /**\r\n   * Gets the time that the animation took to complete the load.\r\n   */\r\n  const { animationLoadingTime } = a;\r\n  const newIntercalationObject = newIntercalation(a);\r\n  Object.assign(a, newIntercalationObject.toAuxiliaryObject);\r\n\r\n  a.animationLoadingTime = 0;\r\n\r\n  a.animation.state = ANIMATION_STATES[1];\r\n  a.animation.progressValue = newIntercalationObject.progress;\r\n\r\n  insertAnimationInTheQueue(a, jumpTimeout, animationLoadingTime);\r\n}\r\n","import { toCamelCase } from '../utilities/index';\n\nfunction augmentDimension(\n  name: 'width' | 'height',\n  elementStyleObject: CSSStyleDeclaration\n): number {\n  const isBorderBox =\n    elementStyleObject.boxSizing.toString().toLowerCase() === 'border-box';\n\n  if (isBorderBox) {\n    const sides = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n    const fields = [\n      `padding${sides[0]}`,\n      `padding${sides[1]}`,\n      `border${sides[0]}Width`,\n      `border${sides[1]}Width`,\n    ];\n    let augment = 0;\n\n    fields.forEach((field) => {\n      const value = parseFloat(elementStyleObject[field as never]);\n      if (!Number.isNaN(value)) {\n        augment += value;\n      }\n    });\n    return -augment;\n  }\n\n  return 0;\n}\n\nfunction getWidthHeight(\n  element: HTMLElement,\n  property: 'width' | 'height',\n  elementStyleObject: CSSStyleDeclaration\n): string {\n  return `${\n    element.getBoundingClientRect()[property] +\n    augmentDimension(property, elementStyleObject)\n  }px`;\n}\n\n/**\n * Normalizes some CSS properties that have not had a set value.\n *\n * @example\n * [ 'top', 'left', 'bottom', 'right', 'width', 'height' ]\n */\nfunction computePropertiesValue(\n  element: HTMLElement,\n  computedStyle: CSSStyleDeclaration\n): Record<string, string> {\n  const elementStyle = element.style;\n  const elementCSSText = elementStyle.cssText;\n\n  const currentComputedStyleForUse = computedStyle;\n\n  const currentComputedStyle = currentComputedStyleForUse;\n\n  const inDisplayNone =\n    currentComputedStyle.getPropertyValue('display') === 'none';\n\n  if (inDisplayNone) {\n    elementStyle.display = 'initial';\n    elementStyle.cssText = elementCSSText;\n  }\n  const propertiesToBeHandled: Record<string, string> = {};\n\n  ['top', 'left', 'bottom', 'right', 'width', 'height'].forEach(\n    (propertyName) => {\n      let computedValue: string | number = 0;\n\n      if (\n        inDisplayNone &&\n        (propertyName === 'width' || propertyName === 'height')\n      ) {\n        elementStyle.display = 'initial';\n\n        computedValue = getWidthHeight(\n          element,\n          propertyName as 'width' | 'height',\n          currentComputedStyleForUse\n        );\n\n        elementStyle.cssText = elementCSSText;\n\n        propertiesToBeHandled[propertyName] = String(computedValue);\n      } else {\n        computedValue = currentComputedStyle[propertyName as never];\n\n        if (!computedValue) {\n          computedValue = element.style[(propertyName as unknown) as number];\n        }\n\n        if (computedValue === 'auto') {\n          if (propertyName === 'width' || propertyName === 'height') {\n            computedValue = getWidthHeight(\n              element,\n              propertyName,\n              currentComputedStyle\n            );\n          } else {\n            let checkProperty: number;\n            switch (propertyName) {\n              case 'top':\n              case 'left':\n                checkProperty = 1;\n                break;\n\n              case 'right':\n              case 'bottom':\n                checkProperty = 2;\n                break;\n\n              default:\n                checkProperty = 0;\n                break;\n            }\n            if (checkProperty) {\n              const { position } = currentComputedStyle;\n\n              if (\n                position === 'fixed' ||\n                (checkProperty === 1 && position === 'absolute')\n              ) {\n                if (inDisplayNone) {\n                  elementStyle.display = 'initial';\n                }\n                computedValue = `${\n                  element.getBoundingClientRect()[\n                    propertyName as 'top' | 'left' | 'bottom' | 'right'\n                  ]\n                }px`;\n\n                elementStyle.cssText = elementCSSText;\n              } else {\n                computedValue = '0px';\n              }\n            }\n          }\n        }\n        propertiesToBeHandled[propertyName] = computedValue\n          ? String(computedValue)\n          : '';\n      }\n    }\n  );\n  return propertiesToBeHandled;\n}\n\n/**\n * Gets the computed style of the element. Only properties that actually have value, shorthand properties, or with empty value are discarded.\n */\nexport default function getAppliedStyle(\n  element: HTMLElement,\n  computedStyle: CSSStyleDeclaration\n): Record<string, string> {\n  const bestStyleComputed = computePropertiesValue(element, computedStyle);\n  const appliedStyle: Record<string, string> = {};\n  let counting = 0;\n  let propertyName = computedStyle.item(counting);\n\n  while (propertyName !== '') {\n    const propertyNameInCamelCase = toCamelCase(propertyName);\n    const propertyValue = computedStyle.getPropertyValue(propertyName);\n    if (propertyValue !== '') {\n      appliedStyle[propertyNameInCamelCase] =\n        bestStyleComputed[propertyNameInCamelCase] || propertyValue;\n    }\n    counting += 1;\n    propertyName = computedStyle.item(counting);\n  }\n\n  return appliedStyle;\n}\n","import getEasyComputedStyle from '../utilities-style/get-easy-computed-style';\r\nimport getAppliedStyle from '../utilities-style/get-applied-style';\r\nimport customForIn from '../utilities/custom-for-in';\r\n/* eslint-disable  import/prefer-default-export */\r\n\r\ntype ElementsCanche = Record<\r\n  string,\r\n  {\r\n    target: HTMLElement;\r\n    data: {\r\n      computedStyle: CSSStyleDeclaration;\r\n      bestComputedStyle: () => Record<string, string>;\r\n      startComputedStyle: Record<string, string>;\r\n    };\r\n  }[]\r\n>;\r\n\r\nconst ELEMENTS_CANCHE: ElementsCanche = {};\r\n\r\nfunction bucketId(target: HTMLElement) {\r\n  return (target.tagName || target.nodeName).toLowerCase();\r\n}\r\ntype ElementData = typeof ELEMENTS_CANCHE[string][number]['data'];\r\n\r\nfunction getElementCanche(\r\n  target: HTMLElement\r\n):\r\n  | false\r\n  | {\r\n      data: ElementData;\r\n      index: number;\r\n      bucket: typeof ELEMENTS_CANCHE[string];\r\n    } {\r\n  const bucket = ELEMENTS_CANCHE[bucketId(target)];\r\n\r\n  if (!bucket) {\r\n    return false;\r\n  }\r\n\r\n  for (\r\n    let counting = 0, { length } = bucket;\r\n    counting < length;\r\n    counting += 1\r\n  ) {\r\n    if (bucket[counting].target === target) {\r\n      return { data: bucket[counting].data, index: counting, bucket };\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction createElementCanche(target: HTMLElement): ElementData {\r\n  const hasBucket = bucketId(target);\r\n  const bucket = ELEMENTS_CANCHE[hasBucket];\r\n  const computedStyle = getEasyComputedStyle(target);\r\n  const elementCancheObject = {\r\n    target,\r\n    data: {\r\n      computedStyle,\r\n      startComputedStyle: getAppliedStyle(target, computedStyle),\r\n      bestComputedStyle: () => getAppliedStyle(target, computedStyle),\r\n    },\r\n  };\r\n\r\n  if (bucket) {\r\n    bucket.push(elementCancheObject);\r\n  } else {\r\n    ELEMENTS_CANCHE[hasBucket] = [elementCancheObject];\r\n  }\r\n\r\n  return elementCancheObject.data;\r\n}\r\n\r\ntype ElementDataWithMethods = Required<ElementData>;\r\n\r\nexport function useElementCanche(target: HTMLElement): ElementDataWithMethods {\r\n  const elementCancheContainer = getElementCanche(target);\r\n  const elementData = elementCancheContainer\r\n    ? elementCancheContainer.data\r\n    : createElementCanche(target);\r\n\r\n  return (elementData as unknown) as ElementDataWithMethods;\r\n}\r\n\r\n/**\r\n * Auto removes elements removed from the DOM.\r\n */\r\nsetInterval(() => {\r\n  customForIn(ELEMENTS_CANCHE, (bucket) => {\r\n    bucket.slice().forEach((o, index) => {\r\n      const { target } = o;\r\n      if (!target.parentElement && !target.parentNode) {\r\n        bucket.splice(index, 1);\r\n      }\r\n    });\r\n  });\r\n}, 500);\r\n","/**\n * Gets the calculated style of the element.\n */\nexport default function getEasyComputedStyle(\n  element: HTMLElement\n): CSSStyleDeclaration {\n  let view: (Window & typeof globalThis) | null =\n    element.ownerDocument.defaultView;\n  if (!view || !view.opener) {\n    view = window;\n  }\n  return view.getComputedStyle(element);\n}\n","/* The code below is based on the implementation of anime.js v3.2.1 Copyright (c) 2020 Julian Garnier  */\r\n\r\nimport removeSpacesChar from '../utilities/remove-spaces-char';\r\n\r\n// Colors\r\n\r\nexport function isHex(a: string): boolean {\r\n  return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a);\r\n}\r\nexport function isRgb(a: string): boolean {\r\n  return /^rgb/.test(a);\r\n}\r\nexport function isHsl(a: string): boolean {\r\n  return /^hsl/.test(a);\r\n}\r\nexport function isColor(a: string): boolean {\r\n  const c = removeSpacesChar(a);\r\n  if (c.split(')').length > 1) {\r\n    return false;\r\n  }\r\n  return isHex(a) || isRgb(a) || isHsl(a);\r\n}\r\n\r\nexport function rgbToRgba(rgbValue: string): string {\r\n  const rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\r\n  return rgb ? `rgba(${rgb[1]},1)` : rgbValue;\r\n}\r\n\r\nexport function hexToRgba(hexValue: string): string {\r\n  const rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  const hex = hexValue.replace(rgx, (_m, r, g, b) => {\r\n    return r + r + g + g + b + b;\r\n  });\r\n  const rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(\r\n    hex\r\n  ) as RegExpExecArray;\r\n  const r = parseInt(rgb[1], 16);\r\n  const g = parseInt(rgb[2], 16);\r\n  const b = parseInt(rgb[3], 16);\r\n  return `rgba(${r},${g},${b},1)`;\r\n}\r\n\r\nexport function hslToRgba(hslValue: string): string {\r\n  const hsl =\r\n    /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) ||\r\n    (/hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(\r\n      hslValue\r\n    ) as RegExpExecArray);\r\n  const h = parseInt(hsl[1], 10) / 360;\r\n  const s = parseInt(hsl[2], 10) / 100;\r\n  const l = parseInt(hsl[3], 10) / 100;\r\n  const a = hsl[4] || 1;\r\n  function hue2rgb(p: number, q: number, t: number) {\r\n    let tt = t;\r\n    if (tt < 0) {\r\n      tt += 1;\r\n    }\r\n    if (tt > 1) {\r\n      tt -= 1;\r\n    }\r\n    if (tt < 1 / 6) {\r\n      return p + (q - p) * 6 * tt;\r\n    }\r\n    if (tt < 1 / 2) {\r\n      return q;\r\n    }\r\n    if (tt < 2 / 3) {\r\n      return p + (q - p) * (2 / 3 - tt) * 6;\r\n    }\r\n    return p;\r\n  }\r\n  let r;\r\n  let g;\r\n  let b;\r\n  if (s === 0) {\r\n    r = l;\r\n    g = l;\r\n    b = l;\r\n  } else {\r\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n    const p = 2 * l - q;\r\n    r = hue2rgb(p, q, h + 1 / 3);\r\n    g = hue2rgb(p, q, h);\r\n    b = hue2rgb(p, q, h - 1 / 3);\r\n  }\r\n  return `rgba(${r * 255},${g * 255},${b * 255},${a})`;\r\n}\r\n\r\nexport function colorToRgb(value: string): string {\r\n  const val = removeSpacesChar(value);\r\n  if (isRgb(val)) {\r\n    return rgbToRgba(val);\r\n  }\r\n  if (isHex(val)) {\r\n    return hexToRgba(val);\r\n  }\r\n  if (isHsl(val)) {\r\n    return hslToRgba(val);\r\n  }\r\n  return val;\r\n}\r\n","/**\n * Removes the CSS string \"!important\" from all properties.\n */\nexport default function removesImportantString(CSSStringRules: string): string {\n  return CSSStringRules.split('!important').join('');\n}\n","import applyCSSTransition from './apply-css-transition';\nimport propertyInStyleObject from './property-in-style-object';\nimport removesImportantString from './removes-important-string';\nimport CSSPropertiesImportant from './css-properties-important';\nimport { customForIn, toCamelCase } from '../utilities/index';\nimport { useElementCanche } from '../sauce/elements-canche';\nimport CSSStringRulesToObject from './css-string-rules-to-object';\nimport getLinkedCSSProperties from './get-linked-css-properties';\nimport reduceCSSStringRules from './reduce-css-string-rules';\n\n/**\n * Gets the CSS properties that would be changed in the element if there was the application of a determined style.\n *\n * @param element\n * An HTML element.\n *\n * @param CSSStringRules\n * The style to be applied.\n *\n * @param getTheseProperties\n * Indicates which properties should be read.\n *\n * @param initialStyle\n * Save the style as the initial style for the properties.\n */\n\nexport default function getComputedValuesAfterChange(\n  element: HTMLElement,\n  CSSStringRules: string\n): {\n  before: Record<string, string>;\n  after: Record<string, string>;\n  beforeComputedStyle: Record<string, string>;\n  afterComputedStyle: Record<string, string>;\n} {\n  const elementCSSText = element.style.cssText;\n  const elementStyle = element.style;\n  const elementCanche = useElementCanche(element);\n\n  const affectedCSSProperties: Record<string, string> = {};\n  const affectedCSSPropertiesInitialValues: Record<string, string> = {};\n\n  const bestCSSStringRules = reduceCSSStringRules(CSSStringRules);\n\n  const beforeComputedStyle = elementCanche.bestComputedStyle();\n\n  applyCSSTransition(\n    element,\n    'all linear 0s',\n    CSSPropertiesImportant(`${bestCSSStringRules}`)\n  );\n\n  const afterComputedStyle = elementCanche.bestComputedStyle();\n\n  const linkedCSSProperties: typeof afterComputedStyle = {};\n  customForIn(\n    CSSStringRulesToObject(bestCSSStringRules),\n    (propertyValue, propertyName) => {\n      getLinkedCSSProperties(\n        propertyName as string,\n        propertyValue as string\n      ).forEach((property) => {\n        linkedCSSProperties[toCamelCase(property)] = propertyValue as string;\n      });\n    }\n  );\n\n  customForIn(linkedCSSProperties, (_value, propertyName) => {\n    const pName = (propertyName as unknown) as string;\n    if (!propertyInStyleObject(pName, affectedCSSProperties)) {\n      if (afterComputedStyle[pName] && pName !== 'cssText') {\n        affectedCSSProperties[pName] = afterComputedStyle[pName];\n\n        affectedCSSPropertiesInitialValues[pName] = beforeComputedStyle[pName];\n      }\n    }\n  });\n\n  customForIn(affectedCSSProperties, (propertyValue, propertyName) => {\n    affectedCSSProperties[propertyName] = removesImportantString(\n      propertyValue as string\n    );\n\n    affectedCSSPropertiesInitialValues[propertyName] = removesImportantString(\n      beforeComputedStyle[propertyName as string]\n    );\n  });\n\n  elementStyle.cssText = elementCSSText;\n  return {\n    before: affectedCSSPropertiesInitialValues,\n    after: affectedCSSProperties,\n    beforeComputedStyle,\n    afterComputedStyle,\n  };\n}\n","import getVendorCSSProperty from './get-vendor-css-property';\n/**\n * Applies a transition to certain CSS properties.\n * @param element\n * An HTML element\n *\n * @param transitionValue\n *\n * @param CSSStyleRules\n * A value for the \"transition\" CSS property.\n */\nexport default function applyCSSTransition(\n  element: HTMLElement,\n  transitionValue: string,\n  CSSStyleRules: string\n): void {\n  const elementStyle = element.style;\n\n  elementStyle.cssText = `${\n    elementStyle.cssText + getVendorCSSProperty('transition', transitionValue)\n  }:${transitionValue};${CSSStyleRules}`;\n}\n","import removesImportantString from './removes-important-string';\n/**\n * Adds the CSS string \"!important\" to all properties.\n */\nexport default function CSSPropertiesImportant(CSSStringRules: string): string {\n  return removesImportantString(CSSStringRules).split(';').join(' !important;');\n}\n","import { customForIn } from '../utilities/index';\nimport sameCSSProperty from './same-css-property';\n\n/**\n * Checks that a specific property exists in a style object, vendors are not taken into account\n * ([moz, ms, webkit, o]-opacity is equal opacity).\n */\nexport default function propertyInStyleObject(\n  property: string,\n  styleObject:\n    | Record<keyof HTMLElement['style'], unknown>\n    | Record<string, unknown>\n): boolean {\n  return customForIn(styleObject, (_value, propertyName) => {\n    if (sameCSSProperty(propertyName, property)) {\n      return true;\n    }\n    return false;\n  });\n}\n","import { CSS_VENDORS, CSS_VENDORS_LENGTH } from '../sauce/constants';\nimport toCSSKebabCase from './to-css-kebab-case';\n\n/**\n * Compares whether the properties are the same despite the vendor.\n */\nexport default function sameCSSProperty(\n  property: string,\n  propertyVendor: string\n): boolean {\n  const CSSProperty = toCSSKebabCase(property);\n  const CSSPropertyVendor = toCSSKebabCase(propertyVendor);\n  if (CSSProperty === CSSPropertyVendor) {\n    return true;\n  }\n\n  for (let counting = CSS_VENDORS_LENGTH - 1; counting > -1; counting -= 1) {\n    if (`-${CSS_VENDORS[counting]}-${CSSProperty}` === CSSPropertyVendor) {\n      return true;\n    }\n  }\n  return false;\n}\n","import toCSSKebabCase from '../utilities-style/to-css-kebab-case';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { trimString } from '../utilities/handle-string';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\n\r\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\r\nconst possibleUnits = ['px', 'deg'];\r\nconst possibleUnitsLength = possibleUnits.length;\r\nconst knownProperties: Record<string, string> = {\r\n  perspective: 'px',\r\n  rotate: 'deg',\r\n  rotate3d: '',\r\n  rotateX: 'deg',\r\n  rotateY: 'deg',\r\n  rotateZ: 'deg',\r\n  translate: 'px',\r\n  translate3d: 'px',\r\n  translateX: 'px',\r\n  translateY: 'px',\r\n  translateZ: 'px',\r\n  scale: '',\r\n  scale3d: '',\r\n  scaleX: '',\r\n  scaleY: '',\r\n  scaleZ: '',\r\n  skew: 'deg',\r\n  skewX: 'deg',\r\n  skewY: 'deg',\r\n  scrollLeft: '',\r\n  scrollTop: '',\r\n  scrollTo: '',\r\n  opacity: '',\r\n};\r\nexport function getUnitOfMeasureForPropertyValue(\r\n  propertyName: string,\r\n  propertyValue: string\r\n): string {\r\n  const propertyNameCSS = toCSSKebabCase(propertyName) as never;\r\n  if (typeof propertyValue === 'string') {\r\n    return propertyValue\r\n      .split(' ')\r\n      .map((value) => {\r\n        const v = trimString(value);\r\n\r\n        if (!getUnit(v) && typeof parseFloat(v) === 'number') {\r\n          if (hasOwnProperty(knownProperties, propertyName)) {\r\n            return (\r\n              parseFloat(v) +\r\n              knownProperties[propertyName] +\r\n              (v.indexOf(',') > -1 ? ',' : '')\r\n            );\r\n          }\r\n\r\n          for (let index = 0; index < possibleUnitsLength; index += 1) {\r\n            const u = possibleUnits[index];\r\n\r\n            DIV_ELEMENT_STYLE[propertyNameCSS] = v + u;\r\n\r\n            if (DIV_ELEMENT_STYLE.item(0)) {\r\n              knownProperties[propertyName] = u;\r\n              DIV_ELEMENT_STYLE[propertyNameCSS] = '';\r\n\r\n              return v + u;\r\n            }\r\n          }\r\n\r\n          DIV_ELEMENT_STYLE[propertyNameCSS] = '';\r\n        }\r\n\r\n        return value;\r\n      })\r\n      .join(' ');\r\n  }\r\n\r\n  return propertyValue;\r\n}\r\nexport function getUnitOfMeasureForPropertiesValues<T>(\r\n  keyframe: Record<string, string>\r\n): T {\r\n  const k = keyframe;\r\n  customForIn(k, (propertyValue, propertyName) => {\r\n    k[propertyName] = getUnitOfMeasureForPropertyValue(\r\n      propertyName,\r\n      propertyValue\r\n    );\r\n  });\r\n  return (k as unknown) as T;\r\n}\r\n","import { isColor } from '../based-implementations/colors';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { toCamelCase, trimString } from '../utilities/handle-string';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\n\r\nconst CANCHE_COLORS_VALUES: Record<string, string> = {};\r\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\r\n\r\nexport function addToCancheColorValue(\r\n  wrongValue: string,\r\n  correctValue: string\r\n): void {\r\n  CANCHE_COLORS_VALUES[wrongValue] = correctValue;\r\n}\r\nexport function getColorValueFromCanche(value: string): string {\r\n  if (hasOwnProperty(CANCHE_COLORS_VALUES, value)) {\r\n    return CANCHE_COLORS_VALUES[value];\r\n  }\r\n  return value;\r\n}\r\n\r\nexport function consultComputedStyle(kf: Record<string, string>): boolean {\r\n  return customForIn(kf, (propertyValue, propertyName) => {\r\n    if (propertyValue) {\r\n      DIV_ELEMENT_STYLE.cssText = '';\r\n      const n = toCamelCase(propertyName) as never;\r\n      const unit = getUnit(propertyValue);\r\n\r\n      DIV_ELEMENT_STYLE[n] = propertyValue;\r\n\r\n      const v1 = DIV_ELEMENT_STYLE[n]\r\n        ? Number(trimString(DIV_ELEMENT_STYLE[n]))\r\n        : DIV_ELEMENT_STYLE[n];\r\n      const v2 = Number(trimString(propertyValue));\r\n      if (\r\n        DIV_ELEMENT_STYLE[n] &&\r\n        (unit === 'px' ||\r\n          isColor(propertyValue) ||\r\n          (DIV_ELEMENT_STYLE[n] === propertyValue &&\r\n            !Number.isNaN(v1) &&\r\n            v1 === v2))\r\n      ) {\r\n        DIV_ELEMENT_STYLE[n] = '';\r\n        return false;\r\n      }\r\n      DIV_ELEMENT_STYLE[n] = '';\r\n    }\r\n\r\n    return true;\r\n  });\r\n}\r\n","import EasingsFunctionsList from '../contracts/easings-functions-list';\r\n\r\nimport { trimString } from '../utilities/handle-string';\r\nimport stagger from '../based-implementations/stagger';\r\nimport FunctionForPropertyValueInKeyframe from '../contracts/function-for-property-value-in-keyframe';\r\nimport { StaggerParams } from '../contracts/stagger-params';\r\n\r\nfunction stringToArray(v: string) {\r\n  return v.split(',').map((n) => parseFloat(trimString(n)));\r\n}\r\nfunction getPropertyValue(v: string) {\r\n  const value = /\\[(.*)\\]/.exec(v);\r\n  if (value && value[1]) {\r\n    return stringToArray(value[1]);\r\n  }\r\n  return v;\r\n}\r\nexport default function parserStringStagger(\r\n  stringStagger: string\r\n): string | FunctionForPropertyValueInKeyframe {\r\n  const value = trimString(stringStagger);\r\n  if (\r\n    (!Number.isNaN(parseFloat(value.substring(0, 1))) &&\r\n      value.indexOf('<') > -1 &&\r\n      value.indexOf('>') > -1) ||\r\n    value.substring(0, 1) === '['\r\n  ) {\r\n    const splitValue = value.split('<');\r\n    const propertyValue = getPropertyValue(trimString(splitValue[0]));\r\n\r\n    const form = /<(.*)>/.exec(value);\r\n    const getGrid = /\\[(.*)\\]/.exec(splitValue[1]);\r\n    const getOtherValue = splitValue[1]\r\n      .replace(/(.*)>/, '')\r\n      .replace(/\\[(.*)\\]/, '');\r\n\r\n    const grid = getGrid\r\n      ? (stringToArray(trimString(getGrid[1])) as StaggerParams['grid'])\r\n      : false;\r\n    const staggerParams = {} as StaggerParams;\r\n    if (grid) {\r\n      staggerParams.grid = grid;\r\n    }\r\n    if (form && trimString(form[1])) {\r\n      const v = parseFloat(trimString(form[1]));\r\n\r\n      staggerParams.from = (Number.isNaN(v)\r\n        ? trimString(form[1])\r\n        : v) as StaggerParams['from'];\r\n    }\r\n    getOtherValue.split(' ').forEach((a) => {\r\n      const v = trimString(a);\r\n      if (v) {\r\n        const isNumber = parseFloat(v);\r\n\r\n        if (Number.isNaN(isNumber)) {\r\n          switch (v) {\r\n            case 'x':\r\n            case 'y':\r\n            case 'both':\r\n              staggerParams.axis = v;\r\n              break;\r\n            case 'normal':\r\n            case 'reverse':\r\n              staggerParams.dir = v;\r\n              break;\r\n\r\n            default:\r\n              staggerParams.easing = v as EasingsFunctionsList;\r\n              break;\r\n          }\r\n        } else {\r\n          staggerParams.start = isNumber;\r\n        }\r\n      }\r\n    });\r\n\r\n    return stagger(\r\n      Array.isArray(propertyValue)\r\n        ? propertyValue.map((v) => v.toString())\r\n        : propertyValue,\r\n      staggerParams\r\n    );\r\n  }\r\n  return stringStagger;\r\n}\r\n","/* The code below is based on the implementation of anime.js v3.2.1 Copyright (c) 2020 Julian Garnier  */\r\n\r\nimport EasingFunction from '../contracts/easing-function';\r\nimport FunctionForPropertyValueInKeyframe from '../contracts/function-for-property-value-in-keyframe';\r\nimport { StaggerParams } from '../contracts/stagger-params';\r\nimport { getCustomEasing } from '../sauce/custom-easings';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { parseEasings } from './easings';\r\n\r\nexport default function stagger(\r\n  value: string | number | (string | number)[],\r\n  params?: StaggerParams\r\n): FunctionForPropertyValueInKeyframe {\r\n  const p: StaggerParams = params === undefined ? {} : params;\r\n\r\n  const val = (typeof value === 'number' ? value.toString() : value) as\r\n    | string\r\n    | string[];\r\n  let easing: EasingFunction | null;\r\n\r\n  const grid = p.grid;\r\n  const axis = p.axis;\r\n  let fromIndex = p.from || 0;\r\n  if (fromIndex === 'edges') {\r\n    fromIndex = 'center';\r\n    if (!p.dir || p.dir === 'normal') {\r\n      p.dir = 'reverse';\r\n    } else {\r\n      p.dir = 'normal';\r\n    }\r\n  }\r\n  const dir = p.dir || 'normal';\r\n  const fromCenter = fromIndex === 'center';\r\n  const isRange = Array.isArray(val);\r\n  let val1: number;\r\n  let val2: number;\r\n  let unit: string;\r\n\r\n  if (params && params.easing && typeof params.easing === 'string') {\r\n    easing = getCustomEasing(params.easing) || parseEasings(params.easing);\r\n  } else {\r\n    easing = null;\r\n  }\r\n\r\n  if (Array.isArray(val)) {\r\n    val1 = parseFloat(val[0]);\r\n    val2 = parseFloat(val[1]);\r\n\r\n    unit = getUnit(val[1]) || '';\r\n  } else {\r\n    val1 = parseFloat(val as string);\r\n    val2 = 0;\r\n\r\n    unit = getUnit(val) || '';\r\n  }\r\n\r\n  const start = p.start || 0 + (isRange ? val1 : 0);\r\n  let values: number[] = [];\r\n  let maxValue = 0;\r\n  return (el: object, i: number, t: number) => {\r\n    let fIndex: number;\r\n    switch (fromIndex) {\r\n      case 'first':\r\n        fIndex = 0;\r\n        break;\r\n      case 'center':\r\n        fIndex = (t - 1) / 2;\r\n\r\n        break;\r\n      case 'last':\r\n        fIndex = t - 1;\r\n\r\n        break;\r\n      case 'random':\r\n        fIndex = Math.floor(Math.random() * (t + 1));\r\n        break;\r\n      default:\r\n        fIndex = fromIndex as number;\r\n        break;\r\n    }\r\n\r\n    if (!values.length) {\r\n      for (let index = 0; index < t; index += 1) {\r\n        if (!grid) {\r\n          values.push(Math.abs(fIndex - index));\r\n        } else {\r\n          const fromX = !fromCenter ? fIndex % grid[0] : (grid[0] - 1) / 2;\r\n          const fromY = !fromCenter\r\n            ? Math.floor(fIndex / grid[0])\r\n            : (grid[1] - 1) / 2;\r\n          const toX = index % grid[0];\r\n          const toY = Math.floor(index / grid[0]);\r\n          const distanceX = fromX - toX;\r\n          const distanceY = fromY - toY;\r\n          let r = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\r\n          if (axis === 'x') {\r\n            r = -distanceX;\r\n          }\r\n          if (axis === 'y') {\r\n            r = -distanceY;\r\n          }\r\n          values.push(r);\r\n        }\r\n        maxValue = Math.max(...values);\r\n      }\r\n      if (easing) {\r\n        values = values.map((v) => {\r\n          return (easing as EasingFunction)(v / maxValue, el, i, t) * maxValue;\r\n        });\r\n      }\r\n      if (dir === 'reverse') {\r\n        values = values.map((v) => {\r\n          if (axis) {\r\n            return v < 0 ? v * -1 : -v;\r\n          }\r\n          return Math.abs(maxValue - v);\r\n        });\r\n      }\r\n    }\r\n\r\n    const spacing = isRange ? (val2 - val1) / maxValue : val1;\r\n\r\n    const r = start + spacing * (Math.round(values[i] * 100) / 100);\r\n    return unit ? r + unit : r;\r\n  };\r\n}\r\n","import { transformFunctionsToObject } from '../animation-engine/crud-animations-style';\r\nimport { hasAnimationInTheStack } from '../animation-engine/mount-animations-stack';\r\nimport {\r\n  ANIMATION_STATES,\r\n  WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS,\r\n  WIDE_SMILE_SCROLL_PROPERTIES,\r\n  TIME_OUT_FOR_SMART_LOADING,\r\n} from '../sauce/constants';\r\nimport { getCustomProperty } from '../sauce/custom-properties-for-animations';\r\nimport { useElementCanche } from '../sauce/elements-canche';\r\nimport { isEmptyObject } from '../sauce/types';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { colorToRgb, isColor } from '../based-implementations/colors';\r\nimport getComputedValuesAfterChange from '../utilities-style/get-computed-values-after-change';\r\nimport getLinkedCSSProperties from '../utilities-style/get-linked-css-properties';\r\nimport getVendorCSSProperty from '../utilities-style/get-vendor-css-property';\r\nimport toCSSKebabCase from '../utilities-style/to-css-kebab-case';\r\nimport toCSSStringRules from '../utilities-style/to-css-string-rules';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport { getAttr } from '../utilities/dom-attributes';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { toCamelCase, trimString } from '../utilities/handle-string';\r\nimport hasOwnProperty, {\r\n  hasOwnPropertyTarget,\r\n} from '../utilities/has-own-property';\r\nimport {\r\n  getUnitOfMeasureForPropertiesValues,\r\n  getUnitOfMeasureForPropertyValue,\r\n} from './get-unit-of-measure-properties';\r\n\r\nimport getPropertyObjectToAnimate from './get-property-object-to-animate';\r\nimport {\r\n  addToCancheColorValue,\r\n  consultComputedStyle,\r\n  getColorValueFromCanche,\r\n} from './css-properties-to-animate';\r\nimport parserStringStagger from '../sauce/parser-string-stagger';\r\nimport ordernateByGrowingValues from '../utilities/ordernate-by-growing-values';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport PropertiesToAnimateObjectKeyframes from '../contracts/properties-to-animate-object-keyframes';\r\nimport TargetsAnimationProperty from '../contracts/targets-animation-property';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define  */\r\n\r\ntype PropertyObject = AnimationAuxiliaryObject['animateProperties'][number];\r\n\r\ntype Properties = Record<string, Record<string, ValuesToAnimateProperty>>;\r\n\r\ntype PropertiesType = 'css' | 'attr' | 'direct' | 'transform';\r\n\r\nfunction getValue(\r\n  propertyValue: ValuesToAnimateProperty,\r\n  target: object,\r\n  index: number,\r\n  length: number\r\n): string;\r\nfunction getValue(\r\n  propertyValue: ValuesToAnimateProperty,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n): string;\r\nfunction getValue(\r\n  propertyValue: ValuesToAnimateProperty,\r\n  target: unknown,\r\n  index: number,\r\n  length: number\r\n) {\r\n  const value =\r\n    typeof propertyValue === 'string'\r\n      ? parserStringStagger(propertyValue)\r\n      : propertyValue;\r\n  switch (typeof value) {\r\n    case 'number':\r\n      return (value as number).toString() as string;\r\n\r\n    case 'function':\r\n      return (value as Function)(target, index, length).toString() as string;\r\n\r\n    default:\r\n      return (value as unknown) as string;\r\n  }\r\n}\r\n\r\nfunction revealSpecialProperties(\r\n  propertyName: string,\r\n  propertyValue: unknown,\r\n  target: object,\r\n  index: number\r\n): Record<string, unknown> {\r\n  const pName = propertyName;\r\n  const specialPropertyCallback = getCustomProperty(pName, 'special');\r\n\r\n  const propertiesFound: Record<string, unknown> = {};\r\n  if (specialPropertyCallback) {\r\n    const o = specialPropertyCallback(propertyValue as never, target, index);\r\n    customForIn(o, (value, name) => {\r\n      if (getCustomProperty(name, 'special')) {\r\n        Object.assign(\r\n          propertiesFound,\r\n          revealSpecialProperties(name, value, target, index)\r\n        );\r\n      } else {\r\n        propertiesFound[name] = value;\r\n      }\r\n    });\r\n  }\r\n\r\n  return propertiesFound;\r\n}\r\n\r\nfunction computedStyle(target: HTMLElement) {\r\n  return (useElementCanche(target).computedStyle as unknown) as Record<\r\n    string,\r\n    string\r\n  >;\r\n}\r\n\r\nfunction getRelativeValue(\r\n  to: string,\r\n  propertyName: string,\r\n  type: PropertiesType,\r\n  target: HTMLElement\r\n) {\r\n  const operator = /^(\\*=|\\+=|-=)/.exec(to);\r\n  if (!operator) {\r\n    return to;\r\n  }\r\n  const from = getCurrentValue(target, propertyName, type);\r\n  const u = getUnit(to) || '';\r\n  const x = parseFloat(from);\r\n  const y = parseFloat(to.replace(operator[0], ''));\r\n  let v;\r\n  switch (operator[0][0]) {\r\n    case '-':\r\n      v = x - y;\r\n      break;\r\n    case '*':\r\n      v = x * y;\r\n      break;\r\n    default:\r\n      v = x + y;\r\n  }\r\n  return v + u;\r\n}\r\n\r\nfunction getCurrentValue(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  type: PropertiesType\r\n) {\r\n  let currentValue: string;\r\n  switch (type) {\r\n    case 'attr':\r\n      currentValue = getAttr(target, propertyName) || '0';\r\n      break;\r\n    case 'direct':\r\n      currentValue = (target[propertyName as never] as number).toString();\r\n      break;\r\n    case 'transform':\r\n      currentValue = getUnitOfMeasureForPropertyValue(\r\n        propertyName,\r\n        organizeTransformFunctionsValue(\r\n          propertyName,\r\n          getCurrentValueTransformFunction(target, propertyName)\r\n        )\r\n      );\r\n      break;\r\n\r\n    default:\r\n      currentValue = computedStyle(target)[propertyName] || '';\r\n\r\n      break;\r\n  }\r\n  return currentValue;\r\n}\r\n\r\nfunction useCurrentValue<T>(\r\n  propertyValue: T,\r\n  propertyName: string,\r\n  type: PropertiesType,\r\n  target: HTMLElement\r\n) {\r\n  let v;\r\n  if (typeof propertyValue === 'string') {\r\n    v = propertyValue;\r\n    if (v.indexOf('?') > -1) {\r\n      v = v.replace(\r\n        /\\?/,\r\n        getCurrentValue(target, propertyName, type)\r\n      ) as unknown;\r\n    }\r\n\r\n    v = getRelativeValue(v as string, propertyName, type, target);\r\n  }\r\n\r\n  return (v as unknown) as T;\r\n}\r\n\r\nfunction CSSPropertiesToAnimate(\r\n  CSSProperties: Properties,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n) {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(CSSProperties, (propertyKeyframes, propertyName) => {\r\n    const pName = toCamelCase(propertyName);\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = getUnitOfMeasureForPropertyValue(\r\n        propertyName,\r\n        useCurrentValue(\r\n          getValue(value, target, index, length),\r\n          propertyName,\r\n          'css',\r\n          target\r\n        )\r\n      );\r\n\r\n      getLinkedCSSProperties(propertyName).forEach((n) => {\r\n        const name = toCamelCase(n);\r\n        if (typeof value === 'string' && value.indexOf('?') > -1) {\r\n          const currentValue = getUnitOfMeasureForPropertyValue(\r\n            name,\r\n            useCurrentValue(value, name, 'css', target)\r\n          );\r\n          keyframes[key][name] = isColor(currentValue)\r\n            ? colorToRgb(currentValue)\r\n            : currentValue;\r\n        } else {\r\n          keyframes[key][name] = v;\r\n        }\r\n      });\r\n      if (!keyframes[key][pName]) {\r\n        keyframes[key][pName] = v;\r\n      }\r\n    });\r\n  });\r\n\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const kf = keyframe;\r\n\r\n    customForIn(kf, (propertyValue, propertyName) => {\r\n      kf[propertyName] = getColorValueFromCanche(propertyValue);\r\n    });\r\n\r\n    const properties = toCSSStringRules(kf);\r\n\r\n    let o: Record<string, string>;\r\n\r\n    if (properties && consultComputedStyle(kf)) {\r\n      const propertiesChanged = getComputedValuesAfterChange(\r\n        target,\r\n        properties\r\n      );\r\n\r\n      o = isEmptyObject(propertiesChanged.after)\r\n        ? propertiesChanged.before\r\n        : propertiesChanged.after;\r\n    } else {\r\n      o = kf;\r\n    }\r\n\r\n    customForIn(o, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n\r\n      propertiesKeyframes[propertyName][key] = isColor(propertyValue)\r\n        ? colorToRgb(propertyValue)\r\n        : propertyValue;\r\n\r\n      if (\r\n        isColor(propertiesKeyframes[propertyName][key]) &&\r\n        propertiesKeyframes[propertyName][key] !== kf[propertyName] &&\r\n        trimString(kf[propertyName]).split(' ').length === 1\r\n      ) {\r\n        addToCancheColorValue(\r\n          kf[propertyName],\r\n          propertiesKeyframes[propertyName][key]\r\n        );\r\n      }\r\n    });\r\n  });\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'css'\r\n  );\r\n}\r\n\r\nfunction attrPropertiesToAnimate(\r\n  attrProperties: Properties,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n) {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(attrProperties, (propertyKeyframes, propertyName) => {\r\n    const attrName = toCSSKebabCase(propertyName);\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = useCurrentValue(\r\n        getValue(value, target, index, length),\r\n        attrName,\r\n        'attr',\r\n        target\r\n      );\r\n      keyframes[key][propertyName] = v;\r\n    });\r\n  });\r\n\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const properties = keyframe;\r\n\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n      propertiesKeyframes[propertyName][key] = propertyValue;\r\n    });\r\n  });\r\n\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'attr'\r\n  );\r\n}\r\n\r\nfunction organizeTransformFunctionsValue(\r\n  propertyName: keyof typeof WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS,\r\n  propertyValue: string\r\n) {\r\n  const propertyValues = propertyValue.split(',');\r\n\r\n  const transformFnValues = WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS[\r\n    propertyName\r\n  ].split(',');\r\n\r\n  let unitOfMeasureInUse = '';\r\n  let lastRealValue = '';\r\n  const newPropertyValues = transformFnValues.map((defaultValue, index) => {\r\n    let value = propertyValues[index];\r\n    if (value) {\r\n      lastRealValue = value;\r\n    } else {\r\n      value = lastRealValue || defaultValue;\r\n    }\r\n    unitOfMeasureInUse = value ? getUnit(value) : unitOfMeasureInUse;\r\n\r\n    return value;\r\n  });\r\n  return newPropertyValues.join(',').replace(/( {2})/g, ' ');\r\n}\r\n\r\nfunction getCurrentValueTransformFunction(\r\n  target: HTMLElement,\r\n  transformFunction: string\r\n) {\r\n  const current = target.style[getVendorCSSProperty('transform') as never];\r\n\r\n  if (current && current.indexOf(transformFunction) > -1) {\r\n    const transformFunctionsObject = transformFunctionsToObject(target) || {};\r\n    if (\r\n      hasOwnProperty(transformFunctionsObject, transformFunction) &&\r\n      transformFunctionsObject[transformFunction]\r\n    ) {\r\n      return transformFunctionsObject[transformFunction];\r\n    }\r\n  }\r\n\r\n  return WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS[transformFunction];\r\n}\r\n\r\nfunction transformPropertiesToAnimate(\r\n  transformProperties: Properties,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n) {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(transformProperties, (propertyKeyframes, propertyName) => {\r\n    const transformFnName = propertyName;\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = useCurrentValue(\r\n        getValue(value, target, index, length),\r\n        transformFnName,\r\n        'transform',\r\n        target\r\n      );\r\n\r\n      keyframes[key][propertyName] = v;\r\n    });\r\n  });\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const properties = getUnitOfMeasureForPropertiesValues(keyframe) as Record<\r\n      string,\r\n      string\r\n    >;\r\n\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n\r\n      propertiesKeyframes[propertyName][key] = organizeTransformFunctionsValue(\r\n        propertyName,\r\n        propertyValue\r\n      );\r\n    });\r\n  });\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'transform'\r\n  );\r\n}\r\n\r\nfunction getScrollValues(target: HTMLElement, to: string) {\r\n  const scrollHeight = target.scrollHeight;\r\n  const scrollWidth = target.scrollWidth;\r\n  const clientHeight = target.clientHeight;\r\n  const clientWidth = target.clientWidth;\r\n  const scrollValues = (value: string | number, maxValue: number) => {\r\n    let v = value;\r\n    v = typeof v === 'number' ? v.toString() : v;\r\n    let r = parseFloat(v);\r\n\r\n    if (v.indexOf('%') > -1) {\r\n      r = (maxValue / 100) * Math.floor(parseFloat(v));\r\n    }\r\n\r\n    v = r > maxValue || v.indexOf('max') > -1 ? maxValue : r;\r\n\r\n    return v.toString();\r\n  };\r\n\r\n  return {\r\n    scrollTop: scrollValues(to, scrollHeight - clientHeight),\r\n    scrollLeft: scrollValues(to, scrollWidth - clientWidth),\r\n  };\r\n}\r\nfunction directPropertiesToAnimate(\r\n  targetProperties: Properties,\r\n  target: object,\r\n  index: number,\r\n  length: number\r\n) {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(targetProperties, (propertyKeyframes, propertyName) => {\r\n    const scrollProperty = propertyName;\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = useCurrentValue(\r\n        getValue(value, target, index, length),\r\n        scrollProperty,\r\n        'direct',\r\n        target as never\r\n      );\r\n\r\n      keyframes[key][propertyName] = v;\r\n    });\r\n  });\r\n\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const properties = keyframe;\r\n\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n      if (WIDE_SMILE_SCROLL_PROPERTIES.indexOf(propertyName as string) > -1) {\r\n        propertiesKeyframes[propertyName][key] = getScrollValues(\r\n          target as HTMLElement,\r\n          propertyValue\r\n        )[propertyName as 'scrollTop' | 'scrollLeft'];\r\n      } else {\r\n        propertiesKeyframes[propertyName][key] = propertyValue;\r\n      }\r\n    });\r\n  });\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'direct'\r\n  );\r\n}\r\n\r\nfunction propertiesToBeAnimated(\r\n  targetObject: TargetsAnimationProperty[number],\r\n  props: PropertiesToAnimateObjectKeyframes,\r\n  specials: PropertiesToAnimateObjectKeyframes\r\n): AnimationAuxiliaryObject['animateProperties'] {\r\n  let animateProperties: PropertyObject[] = [];\r\n  const properties = props;\r\n  const CSSProperties: Properties = {};\r\n  const attrProperties: Properties = {};\r\n  const transformProperties: Properties = {};\r\n  const targetProperties: Properties = {};\r\n  const { target, index, originalArrayLength } = targetObject;\r\n\r\n  customForIn(specials, (o, propertyName) => {\r\n    customForIn(o, (value, key) => {\r\n      customForIn(\r\n        revealSpecialProperties(propertyName as string, value, target, index),\r\n        (v, n) => {\r\n          if (!properties[n as never]) {\r\n            properties[n as never] = {} as never;\r\n          }\r\n          if (value !== '?') {\r\n            properties[n as never][key] = v as never;\r\n          } else {\r\n            properties[n as never][key] = value as never;\r\n          }\r\n        }\r\n      );\r\n    });\r\n  });\r\n\r\n  customForIn(properties, (propertyValue, propertyName) => {\r\n    const keyframes = { ...propertyValue };\r\n    if (getCustomProperty(propertyName, 'observed')) {\r\n      if (keyframes[100] === '?') {\r\n        keyframes[100] = keyframes[0];\r\n      }\r\n\r\n      animateProperties.push({\r\n        keyframes,\r\n        keyframesKeys: ordernateByGrowingValues(Object.keys(keyframes)),\r\n        target,\r\n        index,\r\n        propertyName: propertyName as string,\r\n        type: 'observed',\r\n        originalArrayLength,\r\n      });\r\n    } else if (\r\n      hasOwnProperty(WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS, propertyName)\r\n    ) {\r\n      transformProperties[propertyName] = keyframes;\r\n    } else if (hasOwnPropertyTarget(target, propertyName)) {\r\n      targetProperties[propertyName] = keyframes;\r\n    } else if (\r\n      getAttr(target as HTMLElement, propertyName) !== null ||\r\n      !getLinkedCSSProperties(getVendorCSSProperty(propertyName as string))[0]\r\n    ) {\r\n      attrProperties[propertyName] = keyframes;\r\n    } else {\r\n      CSSProperties[getVendorCSSProperty(propertyName as string)] = keyframes;\r\n    }\r\n  });\r\n\r\n  if (!isEmptyObject(CSSProperties)) {\r\n    animateProperties = animateProperties.concat(\r\n      CSSPropertiesToAnimate(\r\n        CSSProperties,\r\n        target as HTMLElement,\r\n        index,\r\n        originalArrayLength\r\n      )\r\n    );\r\n  }\r\n  if (!isEmptyObject(attrProperties)) {\r\n    animateProperties = animateProperties.concat(\r\n      attrPropertiesToAnimate(\r\n        attrProperties,\r\n        target as HTMLElement,\r\n        index,\r\n        originalArrayLength\r\n      )\r\n    );\r\n  }\r\n  if (!isEmptyObject(transformProperties)) {\r\n    animateProperties = animateProperties.concat(\r\n      transformPropertiesToAnimate(\r\n        transformProperties,\r\n        target as HTMLElement,\r\n        index,\r\n        originalArrayLength\r\n      )\r\n    );\r\n  }\r\n  if (!isEmptyObject(targetProperties)) {\r\n    animateProperties = animateProperties.concat(\r\n      directPropertiesToAnimate(\r\n        targetProperties,\r\n        target,\r\n        index,\r\n        originalArrayLength\r\n      )\r\n    );\r\n  }\r\n\r\n  return animateProperties;\r\n}\r\n\r\nconst ANIMATIONS_FOR_LOAD: Parameters<typeof loadPropertiesToAnimate>[] = [];\r\nlet IS_BUSY_LOADER = false;\r\nconst loadNextAnimation = (a?: typeof ANIMATIONS_FOR_LOAD[number]) => {\r\n  if (a) {\r\n    loadPropertiesToAnimate(...a);\r\n  }\r\n};\r\nexport default function loadPropertiesToAnimate(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  props: PropertiesToAnimateObjectKeyframes,\r\n  callbackLoaded: (\r\n    result: boolean,\r\n    propertiesToAnimate: PropertyObject[]\r\n  ) => void\r\n): void {\r\n  const { animation } = animationAuxiliaryObject;\r\n  const targets = animation.targets;\r\n\r\n  if (animation.creator.global.asyncLoading) {\r\n    IS_BUSY_LOADER = false;\r\n  }\r\n\r\n  /**\r\n   * There's an animation currently loading.\r\n   */\r\n  if (IS_BUSY_LOADER) {\r\n    ANIMATIONS_FOR_LOAD.push([animationAuxiliaryObject, props, callbackLoaded]);\r\n\r\n    return;\r\n  }\r\n  IS_BUSY_LOADER = true;\r\n\r\n  const length = targets.length;\r\n  const properties = { ...props };\r\n  const specials = (() => {\r\n    const o: typeof properties = {};\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (getCustomProperty(propertyName as string, 'special')) {\r\n        o[propertyName] = propertyValue as never;\r\n      }\r\n    });\r\n    return o;\r\n  })();\r\n\r\n  let animateProperties: PropertyObject[] = [];\r\n\r\n  let count = 0;\r\n  let startTime = getTimeNow();\r\n\r\n  let releaseTheExecutionStack = false;\r\n\r\n  (function repeat() {\r\n    animateProperties = animateProperties.concat(\r\n      propertiesToBeAnimated(targets[count], properties, specials)\r\n    );\r\n    const timePassed = getTimeNow() - startTime;\r\n\r\n    count += 1;\r\n\r\n    switch (animation.state) {\r\n      case ANIMATION_STATES[2]:\r\n      case ANIMATION_STATES[3]:\r\n      case ANIMATION_STATES[4]:\r\n      case ANIMATION_STATES[7]:\r\n        IS_BUSY_LOADER = false;\r\n        callbackLoaded(false, animateProperties);\r\n        loadNextAnimation(ANIMATIONS_FOR_LOAD.shift());\r\n        return;\r\n      default:\r\n        if (count < length) {\r\n          if (\r\n            (!releaseTheExecutionStack && !hasAnimationInTheStack()) ||\r\n            timePassed < TIME_OUT_FOR_SMART_LOADING\r\n          ) {\r\n            releaseTheExecutionStack = true;\r\n\r\n            repeat();\r\n          } else {\r\n            releaseTheExecutionStack = false;\r\n            startTime = getTimeNow();\r\n            const setTimeoutId = setTimeout(() => {\r\n              clearTimeout(setTimeoutId);\r\n              repeat();\r\n            }, 0);\r\n          }\r\n        } else {\r\n          IS_BUSY_LOADER = false;\r\n\r\n          callbackLoaded(true, animateProperties);\r\n          loadNextAnimation(ANIMATIONS_FOR_LOAD.shift());\r\n        }\r\n        break;\r\n    }\r\n  })();\r\n}\r\n","import toCSSKebabCase from './to-css-kebab-case';\nimport { customForIn } from '../utilities/index';\n\n/**\n * Converts a style object to a style string.\n */\nexport default function toCSSStringRules(styleObject: object): string {\n  let string = '';\n  customForIn(styleObject, (_value, propertyName) => {\n    string = `${string} ${propertyName}: ${styleObject[propertyName]};`;\n  });\n  return toCSSKebabCase(string);\n}\n","import { AnimationInstance } from '../contracts/animation-inter';\r\nimport { customForIn } from '../utilities/index';\r\n\r\nfunction toArray<Type extends object>(o: unknown): Type | false {\r\n  if (!o || typeof o !== 'object') {\r\n    return false;\r\n  }\r\n  const c = Array.isArray(o) ? o : [].slice.call(o);\r\n  return c && c.length > 0 ? (c as Type) : false;\r\n}\r\n\r\nexport function normalizePastedProperties<Type extends object>(\r\n  obj: Type,\r\n  loopObject?: boolean\r\n): Type {\r\n  const o = obj;\r\n\r\n  customForIn(obj, (propertyValue, propertyName) => {\r\n    const splitedPropertyName = (propertyName as string).split('_');\r\n    if (splitedPropertyName.length > 1) {\r\n      splitedPropertyName.forEach((pName) => {\r\n        const n = pName as never;\r\n        if (pName) {\r\n          if (o[n] && typeof propertyValue === 'object') {\r\n            const v = toArray(propertyValue);\r\n            if (v) {\r\n              o[n] = (o[n] as unknown[]).concat(v) as never;\r\n            } else {\r\n              Object.assign(o[n], propertyValue);\r\n            }\r\n          } else {\r\n            o[n] = propertyValue as never;\r\n          }\r\n        }\r\n      });\r\n      delete o[propertyName];\r\n    }\r\n    if (\r\n      loopObject &&\r\n      propertyValue &&\r\n      typeof propertyValue === 'object' &&\r\n      !toArray(propertyValue)\r\n    ) {\r\n      normalizePastedProperties(propertyValue as never);\r\n    }\r\n  });\r\n  return o;\r\n}\r\n/**\r\n * Normalize object properties that have been pasted to be able to share the same value.\r\n * @example\r\n * input = {\r\n *  firstname_lastname: 'Neves'\r\n * }\r\n *\r\n * output = {\r\n *  firstname: 'Neves'\r\n *  lastname: 'Neves'\r\n * }\r\n *\r\n */\r\nexport default function normalizePastedAnimationProperties<Type extends object>(\r\n  animation: Type\r\n): Type {\r\n  const aInstance = (normalizePastedProperties(\r\n    animation\r\n  ) as unknown) as AnimationInstance;\r\n\r\n  return (aInstance as unknown) as Type;\r\n}\r\n","import Keyframes from '../contracts/key-frames';\r\nimport { PerformerFnProperties } from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport PropertiesToAnimateObjectKeyframes from '../contracts/properties-to-animate-object-keyframes';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport normalizePastedAnimationProperties from './normalize-animation-object-properties';\r\n\r\nfunction arrayKeyframesToObject(keyframes: Keyframes) {\r\n  const keyframesObject: Record<string, Keyframes[number]> = {};\r\n  const keyframesArray = keyframes.slice();\r\n  let leftovers = 100;\r\n  let lastKey = 0;\r\n  const keyframesArrayLength = keyframes.length;\r\n  let leftoversIndexs = keyframesArrayLength;\r\n  const newKeyframesArray: typeof keyframesArray = [];\r\n  keyframesArray.slice().forEach((keyframe, index) => {\r\n    if (hasOwnProperty(keyframe, 'offset') && Array.isArray(keyframe.offset)) {\r\n      keyframesArray.splice(index, 1);\r\n      keyframe.offset.forEach((value) => {\r\n        const newKeyframe = (() => {\r\n          const k: typeof keyframe = {};\r\n          customForIn(keyframe, (propertyValue, propertyName) => {\r\n            if (propertyName !== 'offset') {\r\n              k[propertyName] = propertyValue as never;\r\n            }\r\n          });\r\n          return k;\r\n        })();\r\n        newKeyframe.offset = value as number;\r\n        newKeyframesArray.push(newKeyframe);\r\n      });\r\n    } else {\r\n      newKeyframesArray.push(keyframe);\r\n    }\r\n  });\r\n\r\n  newKeyframesArray.forEach((keyframe, index) => {\r\n    const kf = keyframe;\r\n    if (hasOwnProperty(keyframe, 'offset')) {\r\n      lastKey = Math.max(Math.min((100 / 1) * (kf.offset as number), 100), 0);\r\n      delete kf.offset;\r\n    } else {\r\n      lastKey = index > 0 ? leftovers / leftoversIndexs + lastKey : 0;\r\n    }\r\n\r\n    if (hasOwnProperty(keyframesObject, lastKey)) {\r\n      keyframesObject[lastKey] = {\r\n        ...keyframesObject[lastKey],\r\n        ...(kf as Record<string, string>),\r\n      };\r\n    } else {\r\n      keyframesObject[lastKey] = kf as never;\r\n    }\r\n\r\n    leftovers = 100 - lastKey;\r\n\r\n    leftoversIndexs -= 1;\r\n\r\n    return true;\r\n  });\r\n\r\n  return keyframesObject;\r\n}\r\nexport default function flattenKeyframes(\r\n  keyframes: Keyframes | PropertiesToAnimateObject,\r\n  propertiesUsed: PerformerFnProperties['propertiesUsed']\r\n): PropertiesToAnimateObjectKeyframes {\r\n  let kframes = keyframes;\r\n  let newKeyframes: Record<string, Keyframes[number]> = {};\r\n  const propertiesToAnimate: PropertiesToAnimateObjectKeyframes = {};\r\n  const propertiesUsedForThis: string[] = [];\r\n\r\n  if (Array.isArray(kframes)) {\r\n    newKeyframes = arrayKeyframesToObject(kframes);\r\n  } else {\r\n    kframes = { ...keyframes } as PropertiesToAnimateObject;\r\n    customForIn(kframes, (propertyValue, propertyName) => {\r\n      if (Array.isArray(propertyValue)) {\r\n        propertiesToAnimate[propertyName] = arrayKeyframesToObject(\r\n          (propertyValue as unknown) as Keyframes\r\n        ) as never;\r\n        delete kframes[propertyName as never];\r\n      }\r\n    });\r\n\r\n    newKeyframes[0] = (() => {\r\n      const keyframe: PropertiesToAnimateObject = {};\r\n      customForIn(kframes, (_propertyValue, propertyName) => {\r\n        // Value to be set yet.\r\n        keyframe[propertyName] = '?';\r\n      });\r\n      return keyframe;\r\n    })();\r\n    newKeyframes[100] = kframes as never;\r\n  }\r\n\r\n  customForIn(newKeyframes, (keyframe, key) => {\r\n    newKeyframes[key] = normalizePastedAnimationProperties(keyframe);\r\n  });\r\n\r\n  customForIn(propertiesToAnimate, (propertyValue, propertyName) => {\r\n    let n = propertyName;\r\n\r\n    if (!Number.isNaN(parseFloat(n))) {\r\n      n = propertiesUsed[Number(n)];\r\n      propertiesToAnimate[n] = propertyValue;\r\n      delete propertiesToAnimate[propertyName];\r\n    }\r\n    if (propertiesUsed.indexOf(n) === -1) {\r\n      propertiesUsed.push(n);\r\n    }\r\n  });\r\n\r\n  customForIn(newKeyframes, (keyframe) => {\r\n    customForIn(keyframe, (propertyValue, propertyName) => {\r\n      const f = keyframe;\r\n      let n = propertyName as string;\r\n\r\n      if (!Number.isNaN(parseFloat(n))) {\r\n        n = propertiesUsed[Number(n)];\r\n\r\n        /**\r\n         * Replaces indexes by the property name.\r\n         */\r\n        f[n as never] = propertyValue as never;\r\n\r\n        delete f[propertyName];\r\n      }\r\n      if (propertiesUsed.indexOf(n) === -1) {\r\n        propertiesUsed.push(n);\r\n      }\r\n      if (propertiesUsedForThis.indexOf(n) === -1) {\r\n        propertiesUsedForThis.push(n);\r\n      }\r\n    });\r\n  });\r\n\r\n  customForIn(newKeyframes, (keyframe, key) => {\r\n    propertiesUsedForThis.forEach((propertyName) => {\r\n      const v = keyframe[propertyName as never];\r\n\r\n      if (!propertiesToAnimate[propertyName]) {\r\n        propertiesToAnimate[propertyName] = {};\r\n      }\r\n      if (key !== '0' && key !== '100') {\r\n        if (keyframe[propertyName as never]) {\r\n          propertiesToAnimate[propertyName][key] = v;\r\n        }\r\n      } else {\r\n        propertiesToAnimate[propertyName][key] =\r\n          typeof v === 'undefined' ? '?' : v;\r\n      }\r\n    });\r\n  });\r\n\r\n  return propertiesToAnimate;\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport setAnimationProgress from '../animation-engine/set-animation-progress';\r\nimport {\r\n  addAnimationAuxiliaryObject,\r\n  getAnimationAuxiliaryObject,\r\n} from './crud-animation-objects';\r\nimport CreateAnimationAuxiliaryObject from './create-animation-auxiliary-object';\r\nimport {\r\n  customForIn,\r\n  getTimeNow,\r\n  ordernateByGrowingValues,\r\n} from '../utilities/index';\r\nimport {\r\n  propagateAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport startAnimationExecutionCycle from '../animation-engine/animation-execution-cycle';\r\nimport loadPropertiesToAnimate from './load-properties-to-animate';\r\nimport flattenKeyframes from './flatten-keyframes';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\n\r\nfunction forwardAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  animationArrivalTime: number,\r\n  callbackLoaded: (animationAuxiliaryObjects: AnimationAuxiliaryObject) => void\r\n) {\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  const { animation } = aAuxiliaryObject;\r\n  const startAnimationLoadingTime = getTimeNow();\r\n\r\n  const keyframes = flattenKeyframes(\r\n    animation.keyframes,\r\n    animation.performer.$hidden.propertiesUsed\r\n  );\r\n\r\n  const keyframesKeys = (() => {\r\n    const keys: string[] = [];\r\n    customForIn(keyframes, (propertyKeyframes) => {\r\n      customForIn(propertyKeyframes, (_v, key) => {\r\n        if (keys.indexOf(key) === -1) {\r\n          keys.push(key);\r\n        }\r\n      });\r\n    });\r\n\r\n    return ordernateByGrowingValues(keys);\r\n  })();\r\n\r\n  aAuxiliaryObject.keyframesKeys = keyframesKeys;\r\n\r\n  const animationProgressObject = setAnimationProgress(aAuxiliaryObject);\r\n\r\n  aAuxiliaryObject.lastStartProgress = animationProgressObject.progress;\r\n  aAuxiliaryObject.countDriveloop = animationProgressObject.countDriveloop;\r\n\r\n  animation.progressValue = animationProgressObject.progress;\r\n  animation.max = animationProgressObject.maxProgress;\r\n  loadPropertiesToAnimate(\r\n    aAuxiliaryObject,\r\n    keyframes,\r\n    (result, propertiesToAnimate) => {\r\n      const currentTime = getTimeNow();\r\n      const animationLoadingTime = currentTime - animationArrivalTime;\r\n      const waitingTime = animationLoadingTime;\r\n      const loadingTime = currentTime - startAnimationLoadingTime;\r\n\r\n      /* console.log(\r\n        `AnimationWS \"${animation.animationId}\" - Times: [ \\n\\r\\n\\r waitingTime: ${waitingTime}ms, \\n\\r\\n\\r loadingTime: ${loadingTime}ms,\\n\\r\\n\\r elementLenght: ${animation.targets.length}\\n\\r\\n\\r]`\r\n      ); */\r\n      aAuxiliaryObject.dataLoadingState = result ? 'load' : 'stoped';\r\n      aAuxiliaryObject.animationLoadingTime = animationLoadingTime;\r\n      aAuxiliaryObject.animateProperties = propertiesToAnimate;\r\n\r\n      callbackLoaded(aAuxiliaryObject);\r\n\r\n      propagateAnimationEventListener(\r\n        LISTENERS_NAMES[3],\r\n        aAuxiliaryObject.animation\r\n      );\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Creates an object with the properties of the user's animation instance, and adds control-related properties and the execution of the animation, thus maintaining hidden complexity.\r\n */\r\nexport default function LoadAnimation(\r\n  animation: AnimationInstance,\r\n  callbackLoaded: (animationAuxiliaryObjects: AnimationAuxiliaryObject) => void\r\n): void {\r\n  const hasAnimationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n\r\n  if (animation.state !== ANIMATION_STATES[0] || hasAnimationAuxiliaryObject) {\r\n    if (hasAnimationAuxiliaryObject) {\r\n      if (hasAnimationAuxiliaryObject.dataLoadingState === 'loading') {\r\n        const setTimeoutId = setTimeout(() => {\r\n          clearTimeout(setTimeoutId);\r\n\r\n          if (animation.state !== ANIMATION_STATES[1]) {\r\n            LoadAnimation(animation, callbackLoaded);\r\n          }\r\n        });\r\n      } else if (\r\n        hasAnimationAuxiliaryObject.dataLoadingState === 'load' &&\r\n        hasAnimationAuxiliaryObject.animation.state === ANIMATION_STATES[5]\r\n      ) {\r\n        startAnimationExecutionCycle(hasAnimationAuxiliaryObject);\r\n      } else {\r\n        startAnimationExecutionCycle(\r\n          /* eslint-disable-next-line @typescript-eslint/no-use-before-define */\r\n          restartAnimationProperties(hasAnimationAuxiliaryObject),\r\n          true\r\n        );\r\n      }\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  const currentTime = getTimeNow();\r\n\r\n  const animationAuxiliaryObject = CreateAnimationAuxiliaryObject(animation);\r\n\r\n  addAnimationAuxiliaryObject(animationAuxiliaryObject);\r\n\r\n  Object.assign(animationAuxiliaryObject.animation, {\r\n    state: ANIMATION_STATES[6],\r\n    delay: animation.delay,\r\n  });\r\n\r\n  forwardAnimation(animationAuxiliaryObject, currentTime, callbackLoaded);\r\n}\r\n\r\nexport function startAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  if (\r\n    animationAuxiliaryObject.dataLoadingState === 'load' &&\r\n    animationAuxiliaryObject.animation.state !== ANIMATION_STATES[3]\r\n  ) {\r\n    const a = animationAuxiliaryObject;\r\n    a.animation.state = ANIMATION_STATES[1];\r\n\r\n    startAnimationExecutionCycle(animationAuxiliaryObject);\r\n  }\r\n}\r\nexport function loadedAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const a = animationAuxiliaryObject;\r\n  if (\r\n    a.dataLoadingState === 'load' &&\r\n    a.animation.state !== ANIMATION_STATES[3]\r\n  ) {\r\n    a.animation.state = ANIMATION_STATES[5];\r\n  }\r\n}\r\n\r\nexport function restartAnimationProperties(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  Object.assign(animationAuxiliaryObject, {\r\n    countDriveloop: 0,\r\n    progress: animationAuxiliaryObject.initialProgress,\r\n    animationAlreadyStarted: false,\r\n  });\r\n  const animationProgressObject = setAnimationProgress(\r\n    animationAuxiliaryObject\r\n  );\r\n\r\n  Object.assign(animationAuxiliaryObject, {\r\n    lastStartProgress: animationProgressObject.progress,\r\n    countDriveloop: animationProgressObject.countDriveloop,\r\n    progress: animationProgressObject.progress,\r\n  });\r\n\r\n  Object.assign(animationAuxiliaryObject.animation, {\r\n    progress: animationProgressObject.progress,\r\n    max: animationProgressObject.maxProgress,\r\n    state: ANIMATION_STATES[1],\r\n    count: 0,\r\n  });\r\n\r\n  return animationAuxiliaryObject;\r\n}\r\n","import {\r\n  AnimationInstancePropertiesAllWritable,\r\n  UserAnimationObjectInternal,\r\n} from '../contracts/animation-inter';\r\n\r\n/**\r\n * A simple counter that helps to mark animation objects through the `animationId` property to avoid collisions and also indicates the priority of the animation instance's style insertion.\r\n */\r\nlet ANIMATIONS_ID = -1;\r\n\r\nexport default function AnimationConstructor(\r\n  animation:\r\n    | AnimationInstancePropertiesAllWritable\r\n    | UserAnimationObjectInternal,\r\n  creator: UserAnimationObjectInternal['creator']\r\n): AnimationInstancePropertiesAllWritable {\r\n  const D_A_P = creator.dfs;\r\n  ANIMATIONS_ID += 1;\r\n  return {\r\n    ...D_A_P,\r\n    ...animation,\r\n    ...{\r\n      creator,\r\n\r\n      targets: animation.targets,\r\n\r\n      loop: animation.loop,\r\n\r\n      count: 0,\r\n\r\n      animationId: ANIMATIONS_ID,\r\n    },\r\n  } as AnimationInstancePropertiesAllWritable;\r\n}\r\n","import progressAnimationGoTo from '../animation-actions/progress-animation-go-to';\r\nimport {\r\n  addAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n  removeAnimationEventListener,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { MAX_KEYFRAME } from './constants';\r\n\r\nexport default function iterationControlMethods(\r\n  realDuration: number,\r\n  newDuration: number | undefined,\r\n  part: number,\r\n  animation: AnimationInstance,\r\n  applyDelay?: boolean\r\n): void {\r\n  const aInstance = animation;\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    aInstance.animationId\r\n  );\r\n\r\n  const toProgress = (MAX_KEYFRAME / 1) * Math.min(Math.max(part, 0), 1);\r\n\r\n  if (animationAuxiliaryObject) {\r\n    let dur = newDuration as number;\r\n    const checkDur = typeof dur === 'number';\r\n    const offset = Math.abs(aInstance.progressValue - toProgress);\r\n\r\n    if (checkDur && dur > 0) {\r\n      const c = 100 / offset;\r\n      dur *= c + (c / 100) * (100 / (100 - offset) - 1);\r\n    }\r\n\r\n    addAnimationEventListener(\r\n      LISTENERS_NAMES[7],\r\n      function a(this: AnimationInstance) {\r\n        if (dur === animation.dur) {\r\n          aInstance.dur = realDuration;\r\n        }\r\n        removeAnimationEventListener(LISTENERS_NAMES[7], a, animation);\r\n      },\r\n      animation\r\n    );\r\n\r\n    if (checkDur && dur <= 0) {\r\n      aInstance.jump(toProgress);\r\n    } else {\r\n      if (checkDur) {\r\n        aInstance.dur = dur;\r\n      }\r\n      progressAnimationGoTo(aInstance.animationId, toProgress, applyDelay);\r\n    }\r\n  }\r\n}\r\n","import { removeAnimationFromStack } from '../animation-engine/mount-animations-stack';\r\nimport startAnimationExecutionCycle, {\r\n  resetIterationRelatedProperties,\r\n} from '../animation-engine/animation-execution-cycle';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\n\r\nexport default function progressAnimationGoTo(\r\n  animationId: number,\r\n  newProgress: number,\r\n  applyDelay?: boolean\r\n): void {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(animationId);\r\n  if (animationAuxiliaryObject) {\r\n    const animation = animationAuxiliaryObject.animation;\r\n\r\n    removeAnimationFromStack(animationAuxiliaryObject.animationId);\r\n\r\n    animationAuxiliaryObject.lastStartProgress = animation.progressValue;\r\n\r\n    animation.max = newProgress;\r\n\r\n    if (animation.loop === animation.count) {\r\n      animation.count -= 1;\r\n    }\r\n    if (applyDelay) {\r\n      startAnimationExecutionCycle(\r\n        resetIterationRelatedProperties(animationAuxiliaryObject)\r\n      );\r\n    } else {\r\n      startAnimationExecutionCycle(\r\n        resetIterationRelatedProperties(animationAuxiliaryObject),\r\n        true\r\n      );\r\n    }\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { INTERCALATION_TIME, MAX_KEYFRAME } from '../sauce/constants';\r\nimport { toMs, getTimeNow } from '../utilities/index';\r\nimport { propertiesForAnimationAuxiliaryObject } from '../animation-mount/create-animation-auxiliary-object';\r\nimport setAnimationProgress from '../animation-engine/set-animation-progress';\r\n\r\n/**\r\n * Updates the animation with the new values of the properties.\r\n */\r\nexport default function updateAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  const { animation } = animationAuxiliaryObject;\r\n\r\n  let progress = animation.progressValue;\r\n  progress = Math.max(progress, 0);\r\n  progress = Math.min(progress, MAX_KEYFRAME);\r\n\r\n  const timeRunningIteration =\r\n    (Math.max(toMs(animation.dur), 1) / 100) * progress;\r\n\r\n  Object.assign(animationAuxiliaryObject, {\r\n    startTimeOfTheIteration: getTimeNow() - timeRunningIteration,\r\n\r\n    timeRunningIteration,\r\n\r\n    iterationInterlacations: {\r\n      timeConsumed: timeRunningIteration,\r\n\r\n      completed: Math.floor(timeRunningIteration / INTERCALATION_TIME),\r\n\r\n      leftovers: 0,\r\n    },\r\n  });\r\n\r\n  const animationProgressObject = setAnimationProgress(\r\n    animationAuxiliaryObject\r\n  );\r\n\r\n  Object.assign(animationAuxiliaryObject, {\r\n    lastStartProgress: progress,\r\n    countDriveloop: animationAuxiliaryObject.countDriveloop - 1,\r\n  });\r\n\r\n  Object.assign(animation, {\r\n    progress,\r\n    max: animationProgressObject.maxProgress,\r\n  });\r\n\r\n  Object.assign(\r\n    animationAuxiliaryObject,\r\n    propertiesForAnimationAuxiliaryObject(animation)\r\n  );\r\n\r\n  return animationAuxiliaryObject;\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport { removeAllAnimationEventListeners } from '../animation-listeners/animations-listeners-handlers';\r\nimport { removeAnimationStyle } from '../animation-engine/crud-animations-style';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { removeAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\n\r\nfunction removeInstance<T>(array: T, animation: AnimationInstance) {\r\n  return (((array as unknown) as unknown[]).filter(\r\n    (i) => i !== animation\r\n  ) as unknown) as T;\r\n}\r\n/**\r\n * Destroys an animation.\r\n */\r\nexport default function destroyAnimation(animation: AnimationInstance): void {\r\n  const aInstance = animation;\r\n  const performerProperties = aInstance.performer.$hidden;\r\n  const cycleOptions = performerProperties.cycleOptions;\r\n\r\n  if (!aInstance.state) return;\r\n\r\n  aInstance.state = ANIMATION_STATES[4];\r\n\r\n  const animationAuxiliaryObject = removeAnimationAuxiliaryObject(\r\n    aInstance.animationId\r\n  );\r\n  performerProperties.animationInstances = removeInstance(\r\n    performerProperties.animationInstances,\r\n    animation\r\n  );\r\n  performerProperties.independentAnimations = removeInstance(\r\n    performerProperties.independentAnimations,\r\n    animation\r\n  );\r\n  if (cycleOptions) {\r\n    if (cycleOptions.animationInstancesInCycle) {\r\n      cycleOptions.animationInstancesInCycle = removeInstance(\r\n        cycleOptions.animationInstancesInCycle,\r\n        animation\r\n      );\r\n    }\r\n\r\n    if (cycleOptions.sequence) {\r\n      const sequence = cycleOptions.sequence;\r\n      const l = sequence.length;\r\n\r\n      for (let index = 0; index < l; index += 1) {\r\n        sequence[index] = removeInstance(sequence[index], animation);\r\n      }\r\n\r\n      cycleOptions.sequence = sequence.filter((a) => a.length > 0);\r\n    }\r\n  }\r\n\r\n  if (animationAuxiliaryObject) {\r\n    removeAllAnimationEventListeners(aInstance.animationId);\r\n\r\n    if (aInstance.removeChanges) {\r\n      removeAnimationStyle(animationAuxiliaryObject);\r\n    }\r\n  }\r\n}\r\n","import { ANIMATION_STATES, MAX_KEYFRAME } from './constants';\nimport LoadAnimation, {\n  loadedAnimation,\n  startAnimation,\n} from '../animation-mount/load-animation';\nimport normalizePastedAnimationProperties from '../animation-mount/normalize-animation-object-properties';\nimport { removeAnimationFromStack } from '../animation-engine/mount-animations-stack';\nimport AnimationConstructor from './animation-constructor';\nimport {\n  addAnimationEventListener,\n  propagateAnimationEventListener,\n  LISTENERS_NAMES,\n  removeAnimationEventListener,\n} from '../animation-listeners/animations-listeners-handlers';\nimport { removeAnimationStyle } from '../animation-engine/crud-animations-style';\nimport iterationControlMethods from './iteration-control-methods';\nimport multiplyValue from '../utilities/multiply-value';\nimport setAnimationProgress from '../animation-engine/set-animation-progress';\nimport resumeAnimation from '../animation-actions/resume-animation';\nimport restartAnimation from '../animation-actions/restart-animation';\nimport updateAnimation from '../animation-actions/update-animation';\nimport destroyAnimation from '../animation-actions/destroy-animation';\nimport {\n  AnimationInstance,\n  AnimationInstancePropertiesAllWritable,\n  PropertiesForTheCreationOfAnimation,\n  UserAnimationObjectInternal,\n} from '../contracts/animation-inter';\nimport { ListenersEventsName } from '../contracts/listeners-events-name';\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\n\ninterface AnimationWS extends AnimationInstance {\n  [key: string]: unknown;\n}\n\nclass AnimationWS implements AnimationInstance {\n  constructor(\n    animation:\n      | AnimationInstancePropertiesAllWritable\n      | UserAnimationObjectInternal\n      | PropertiesForTheCreationOfAnimation,\n    creator: AnimationInstance['creator']\n  ) {\n    const U_A_O = normalizePastedAnimationProperties(\n      animation\n    ) as UserAnimationObjectInternal;\n    Object.assign(this, AnimationConstructor(U_A_O, creator));\n\n    return this;\n  }\n\n  load(): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n\n    if (!animationAuxiliaryObject) {\n      LoadAnimation(this, loadedAnimation);\n    }\n\n    return this;\n  }\n\n  play(): this {\n    if (\n      this.state === ANIMATION_STATES[0] ||\n      this.state === ANIMATION_STATES[5] ||\n      this.state === ANIMATION_STATES[6]\n    ) {\n      LoadAnimation(this, startAnimation);\n    }\n    return this;\n  }\n\n  pause(): this {\n    if (this.state === ANIMATION_STATES[1]) {\n      this.state = ANIMATION_STATES[3];\n\n      removeAnimationFromStack(this.animationId);\n    }\n\n    return this;\n  }\n\n  resume(): this {\n    if (this.state === ANIMATION_STATES[3]) {\n      resumeAnimation(this);\n    }\n\n    return this;\n  }\n\n  restart(): this {\n    removeAnimationFromStack(this.animationId);\n    restartAnimation(this);\n\n    return this;\n  }\n\n  end(): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (this.state !== ANIMATION_STATES[1]) {\n      if (this.state === ANIMATION_STATES[6]) {\n        const setTimeoutId = setTimeout(() => {\n          clearTimeout(setTimeoutId);\n          this.end();\n        }, 0);\n      }\n      return this;\n    }\n    if (animationAuxiliaryObject) {\n      if (typeof this.loop === 'number') {\n        this.count = this.loop - 1;\n        const animationProgressObject = setAnimationProgress(\n          animationAuxiliaryObject\n        );\n        animationAuxiliaryObject.countDriveloop =\n          animationProgressObject.countDriveloop;\n        this.max = animationProgressObject.maxProgress;\n      }\n\n      this.progressValue = this.max;\n\n      updateAnimation(animationAuxiliaryObject);\n    }\n\n    return this;\n  }\n\n  go(part: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        undefined,\n        part,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  back(part: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      animationAuxiliaryObject.backRunning = true;\n\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        undefined,\n        part,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  jump(part: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    const toProgress = (MAX_KEYFRAME / 1) * Math.min(Math.max(part, 0), 1);\n\n    if (animationAuxiliaryObject) {\n      const reverseExecution = animationAuxiliaryObject.reverseExecution;\n      const newProgress = reverseExecution\n        ? MAX_KEYFRAME - toProgress\n        : toProgress;\n\n      this.progressValue = newProgress;\n      this.max = newProgress;\n\n      updateAnimation(animationAuxiliaryObject);\n    }\n\n    return this;\n  }\n\n  speed(multiply: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        multiplyValue(this.dur, multiply),\n        (1 / MAX_KEYFRAME) * this.max,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  revert(endIteration?: boolean): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n\n    if (animationAuxiliaryObject) {\n      const lastStartProgress = animationAuxiliaryObject.lastStartProgress || 0;\n\n      if (!endIteration) {\n        animationAuxiliaryObject.backRunning = true;\n      }\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        undefined,\n        (1 / MAX_KEYFRAME) * lastStartProgress,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  dirTo(dir: Parameters<AnimationInstance['dirTo']>['0']): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      let direction: AnimationInstance['dir'];\n      switch (dir) {\n        case 0:\n          direction = 'normal';\n          break;\n        case 1:\n          direction = 'reverse';\n          break;\n        case 2:\n          direction = 'alternate';\n          break;\n        case 3:\n          direction = 'alternate-reverse';\n          break;\n\n        default:\n          direction = dir;\n          break;\n      }\n      this.dir = direction;\n      updateAnimation(animationAuxiliaryObject);\n    }\n    return this;\n  }\n\n  cancel(): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      removeAnimationFromStack(this.animationId);\n      removeAnimationStyle(animationAuxiliaryObject);\n\n      propagateAnimationEventListener(LISTENERS_NAMES[4], this);\n\n      this.state = ANIMATION_STATES[7];\n    }\n\n    return this;\n  }\n\n  destroy(removeChanges?: true): boolean {\n    if (removeChanges) {\n      this.removeChanges = true;\n    }\n    removeAnimationFromStack(this.animationId);\n\n    destroyAnimation(this);\n\n    propagateAnimationEventListener(LISTENERS_NAMES[5], this);\n\n    return true;\n  }\n\n  on(\n    eventName: ListenersEventsName,\n    callbackfn: (this: this, eventName: string, animation: this) => unknown\n  ): this {\n    addAnimationEventListener(eventName, callbackfn, this);\n    return this;\n  }\n\n  off(\n    eventName: ListenersEventsName,\n    callbackfnOrIndex: Function | number\n  ): this {\n    removeAnimationEventListener(eventName, callbackfnOrIndex, this);\n\n    return this;\n  }\n}\n\nexport default AnimationWS;\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport startAnimationExecutionCycle from '../animation-engine/animation-execution-cycle';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\n\r\n/**\r\n * Resumes the animation that was paused.\r\n */\r\nexport default function resumeAnimation(\r\n  requiredAnimationProperties: Pick<AnimationInstance, 'state' | 'animationId'>\r\n): void {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    requiredAnimationProperties.animationId\r\n  );\r\n  if (animationAuxiliaryObject) {\r\n    const u = animationAuxiliaryObject.animation;\r\n\r\n    if (animationAuxiliaryObject.animation.state === ANIMATION_STATES[3]) {\r\n      u.state = ANIMATION_STATES[1];\r\n\r\n      startAnimationExecutionCycle(animationAuxiliaryObject, true);\r\n    }\r\n  }\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport LoadAnimation, {\r\n  restartAnimationProperties,\r\n  startAnimation,\r\n} from '../animation-mount/load-animation';\r\nimport startAnimationExecutionCycle, {\r\n  resetIterationRelatedProperties,\r\n} from '../animation-engine/animation-execution-cycle';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\n\r\n/**\r\n * Restart animation.\r\n */\r\nexport default function restartAnimation(animation: AnimationInstance): void {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n  const u = animation;\r\n  if (animationAuxiliaryObject) {\r\n    startAnimationExecutionCycle(\r\n      restartAnimationProperties(\r\n        resetIterationRelatedProperties(animationAuxiliaryObject)\r\n      )\r\n    );\r\n  } else {\r\n    u.state = ANIMATION_STATES[0];\r\n    u.count = 0;\r\n\r\n    LoadAnimation(animation, startAnimation);\r\n  }\r\n}\r\n","export default function multiplyValue(value: number, multiply: number): number {\r\n  const duration = Math.abs(multiply) * value;\r\n  return multiply > 0 ? value + duration : Math.max(value - duration, 0);\r\n}\r\n","import {\r\n  addAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\n\r\nimport { ANIMATION_STATES, MAX_KEYFRAME } from './constants';\r\nimport iterationControlMethods from './iteration-control-methods';\r\n\r\nfunction revertAnimationProgress(animation: AnimationInstance) {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n\r\n  if (animationAuxiliaryObject) {\r\n    const lastStartProgress = animationAuxiliaryObject.lastStartProgress || 0;\r\n    iterationControlMethods(\r\n      animationAuxiliaryObject.duration,\r\n      undefined,\r\n      (1 / MAX_KEYFRAME) * lastStartProgress,\r\n      animation,\r\n      true // apply delay\r\n    );\r\n  }\r\n}\r\nfunction runAnimation(animation: AnimationInstance) {\r\n  if (animation.state === ANIMATION_STATES[0]) {\r\n    animation.play();\r\n  } else if (animation.state === ANIMATION_STATES[2]) {\r\n    revertAnimationProgress(animation);\r\n  }\r\n}\r\nfunction runAfter(\r\n  animation: AnimationInstance,\r\n  otherAnimationInstance: AnimationInstance\r\n) {\r\n  animation.on('end', function f() {\r\n    runAnimation(otherAnimationInstance);\r\n    animation.off('end', f);\r\n  });\r\n}\r\n\r\nexport function repeatCycleExecution(\r\n  cycleOptions: PerformerFn['$hidden']['cycleOptions']\r\n): void {\r\n  const cycle = cycleOptions;\r\n\r\n  cycle.countCompleteAnimations += 1;\r\n\r\n  if (\r\n    cycle.animationInstancesInCycle &&\r\n    cycle.countCompleteAnimations >= cycle.numberOfAnimationsToComplete &&\r\n    (cycle.loop === true || cycle.countLoops < (cycle.loop as number))\r\n  ) {\r\n    cycle.loopDirection =\r\n      cycle.loopDirection === 'normal' ? 'reverse' : 'normal';\r\n\r\n    if (cycle.sequence) {\r\n      const sequence =\r\n        cycle.loopDirection === 'normal'\r\n          ? cycle.sequence\r\n          : cycle.sequence.slice().reverse();\r\n\r\n      let runAfterThis: AnimationInstance;\r\n\r\n      cycle.numberOfAnimationsToComplete = 0;\r\n\r\n      sequence.forEach((bucket, index) => {\r\n        if (index === 0) {\r\n          bucket.forEach((i) => {\r\n            if (!i.autoDestroy) {\r\n              runAfterThis = i;\r\n              cycle.numberOfAnimationsToComplete += 1;\r\n\r\n              runAnimation(i);\r\n            }\r\n          });\r\n        } else if (!runAfterThis) {\r\n          bucket.forEach((i) => {\r\n            if (!i.autoDestroy) {\r\n              runAnimation(i);\r\n            }\r\n          });\r\n        } else {\r\n          let rAfterThis = runAfterThis;\r\n          bucket.forEach((i) => {\r\n            if (!i.autoDestroy) {\r\n              rAfterThis = i;\r\n              cycle.numberOfAnimationsToComplete += 1;\r\n              runAfter(runAfterThis, i);\r\n            }\r\n          });\r\n          runAfterThis = rAfterThis;\r\n        }\r\n      });\r\n    }\r\n    cycle.countCompleteAnimations = 0;\r\n    cycle.countLoops += 1;\r\n  }\r\n}\r\n\r\nexport function organizeCycleSequence(\r\n  animationPerformer: PerformerFn,\r\n  animation: AnimationInstance,\r\n  instanceToLink?: AnimationInstance,\r\n  typeOfLink?: 'afterAnimation' | 'together'\r\n): void {\r\n  const cycleOptions = animationPerformer.$hidden.cycleOptions;\r\n  if (cycleOptions && animation.isInCycle) {\r\n    if (!cycleOptions.animationInstancesInCycle) {\r\n      cycleOptions.animationInstancesInCycle = [];\r\n    }\r\n    cycleOptions.numberOfAnimationsToComplete += 1;\r\n    cycleOptions.animationInstancesInCycle.unshift(animation);\r\n\r\n    addAnimationEventListener(\r\n      LISTENERS_NAMES[11],\r\n      () => repeatCycleExecution(cycleOptions),\r\n      animation\r\n    );\r\n\r\n    if (!cycleOptions.sequence) {\r\n      cycleOptions.sequence = [];\r\n    }\r\n    const length = cycleOptions.sequence.length;\r\n\r\n    if (instanceToLink && typeOfLink) {\r\n      for (let index = 0; index < length; index += 1) {\r\n        const bucket = cycleOptions.sequence[index];\r\n        if (typeOfLink === 'together') {\r\n          if (bucket.indexOf(instanceToLink) > -1) {\r\n            bucket.push(animation);\r\n            break;\r\n          }\r\n        } else if (\r\n          typeOfLink === 'afterAnimation' &&\r\n          bucket.indexOf(instanceToLink) > -1\r\n        ) {\r\n          cycleOptions.sequence.splice(index, 0, [animation]);\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      cycleOptions.sequence.push([animation]);\r\n    }\r\n  }\r\n}\r\n","import AnimationWS from './animation';\r\nimport { ANIMATION_STATES } from './constants';\r\nimport { organizeCycleSequence } from './organize-cycle';\r\n\r\nexport default function logicToPlayAnimations(\r\n  animation: AnimationWS,\r\n  animationsThatPerformTogether?: AnimationWS[],\r\n  animationsThatWaitIterations?: {\r\n    animations: AnimationWS[];\r\n    amountOfIterations: number;\r\n  }\r\n): void {\r\n  const performerFn = animation.performer;\r\n  if (\r\n    (!animationsThatPerformTogether || !animationsThatPerformTogether[0]) &&\r\n    (!animationsThatWaitIterations ||\r\n      !animationsThatWaitIterations.animations[0])\r\n  ) {\r\n    if (animation.autoPlay && animation.state === ANIMATION_STATES[0]) {\r\n      animation.play();\r\n    }\r\n  } else {\r\n    if (\r\n      animationsThatWaitIterations &&\r\n      animationsThatWaitIterations.animations[0]\r\n    ) {\r\n      const amountOfIterations =\r\n        animationsThatWaitIterations.amountOfIterations;\r\n      animationsThatWaitIterations.animations.forEach((o) => {\r\n        const i = o;\r\n        let count = 1;\r\n\r\n        animation.on('loopEnd', function f() {\r\n          if (count >= amountOfIterations) {\r\n            animation.off('loopEnd', f);\r\n\r\n            if (performerFn.$hidden.cycleOptions) {\r\n              organizeCycleSequence(performerFn, i, animation, 'together');\r\n              performerFn.$hidden.animationInstances.push(i);\r\n\r\n              i.play();\r\n            } else {\r\n              i.play();\r\n            }\r\n          }\r\n          count += 1;\r\n        });\r\n      });\r\n    }\r\n    if (animationsThatPerformTogether && animationsThatPerformTogether[0]) {\r\n      const length = animationsThatPerformTogether.length;\r\n      let count = 0;\r\n      if (animation.state === ANIMATION_STATES[0]) {\r\n        animation.on('load', function f() {\r\n          animationsThatPerformTogether.forEach((i) => {\r\n            i.on('load', function d() {\r\n              count += 1;\r\n\r\n              if (count >= length) {\r\n                animation.on('ready', function g() {\r\n                  animationsThatPerformTogether.forEach((a) => {\r\n                    organizeCycleSequence(\r\n                      performerFn,\r\n                      a,\r\n                      animation,\r\n                      'together'\r\n                    );\r\n                    performerFn.$hidden.animationInstances.push(a);\r\n                    a.play();\r\n                  });\r\n                  animation.off('ready', g);\r\n                });\r\n                if (animation.autoPlay) {\r\n                  animation.play();\r\n                }\r\n              }\r\n              i.off('load', d);\r\n            });\r\n            i.load();\r\n          });\r\n          animation.off('load', f);\r\n        });\r\n        animation.load();\r\n      } else {\r\n        animation.on('ready', function g() {\r\n          animationsThatPerformTogether.forEach((a) => {\r\n            organizeCycleSequence(performerFn, a, animation, 'together');\r\n            performerFn.$hidden.animationInstances.push(a);\r\n            a.play();\r\n          });\r\n          animation.off('ready', g);\r\n        });\r\n        if (animation.autoPlay) {\r\n          animation.play();\r\n        }\r\n      }\r\n    }\r\n    if (animation.autoPlay && animation.state === ANIMATION_STATES[0]) {\r\n      animation.play();\r\n    }\r\n  }\r\n}\r\n","import AnimationInstanceProperties, {\r\n  AnimationInstance,\r\n  AnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport FunctionForPropertyValueInKeyframe from '../contracts/function-for-property-value-in-keyframe';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport AnimationWS from './animation';\r\nimport logicToPlayAnimations from './logic-to-play-animations';\r\nimport { organizeCycleSequence } from './organize-cycle';\r\nimport parserStringStagger from './parser-string-stagger';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define  */\r\nconst STACK_OF_ANIMATIONS_SKETCHES: {\r\n  animationOptions: AnimationOptions;\r\n  indexOrAnimation?: number | AnimationWS;\r\n  typeOfLink?: 'afterAnimation' | 'together' | 'afterIterations';\r\n  amountOfIterations?: number;\r\n  performerFn: PerformerFn;\r\n}[] = [];\r\n\r\nlet ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS: [\r\n  PerformerFn,\r\n  AnimationOptions\r\n][] = [];\r\n\r\nexport function useAnimationObjectExpectingSideEffects(\r\n  animationPerformer: PerformerFn,\r\n  v?: AnimationOptions\r\n): AnimationOptions | undefined {\r\n  if (v) {\r\n    ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS.unshift([animationPerformer, v]);\r\n    return undefined;\r\n  }\r\n  for (\r\n    let index = 0, l = ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS.length;\r\n    index < l;\r\n    index += 1\r\n  ) {\r\n    if (\r\n      ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS[index][0] === animationPerformer\r\n    ) {\r\n      return ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS[index][1];\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\nfunction createAnimationPropertiesFromStaggers(\r\n  animationOptions: AnimationOptions\r\n) {\r\n  const animationPropertiesObjects: AnimationOptions[] = [];\r\n  if (animationOptions.targets) {\r\n    animationOptions.targets.forEach((targetObject) => {\r\n      const { target, index, originalArrayLength } = targetObject;\r\n      const newAnimationProperties: AnimationOptions = {};\r\n      let checkCreateNewObject = false;\r\n\r\n      ['delay', 'drive', 'endDelay', 'dur', 'loop'].forEach((propertyName) => {\r\n        let fn: string | FunctionForPropertyValueInKeyframe =\r\n          animationOptions[propertyName as never];\r\n\r\n        if (typeof fn === 'string') {\r\n          fn = parserStringStagger(fn);\r\n        }\r\n        if (typeof fn === 'function') {\r\n          newAnimationProperties[propertyName as never] = fn(\r\n            target,\r\n            index,\r\n            originalArrayLength\r\n          ) as never;\r\n          checkCreateNewObject = true;\r\n        }\r\n      });\r\n\r\n      if (checkCreateNewObject) {\r\n        animationPropertiesObjects.push({\r\n          ...animationOptions,\r\n          ...newAnimationProperties,\r\n          targets: [targetObject],\r\n        });\r\n      }\r\n    });\r\n  }\r\n  if (!animationPropertiesObjects[0]) {\r\n    return false;\r\n  }\r\n\r\n  return animationPropertiesObjects;\r\n}\r\n\r\n/**\r\n * Executes the methods and forwards the animations to the construct.\r\n */\r\nexport const runCallbacksAtTheRightTime = (() => {\r\n  const callbacks: Function[] = [];\r\n  let alreadyInProcess = false;\r\n  return (callbackfn: Function) => {\r\n    callbacks.push(callbackfn);\r\n    if (!alreadyInProcess) {\r\n      const setTimeoutId = setTimeout(() => {\r\n        clearTimeout(setTimeoutId);\r\n\r\n        if (STACK_OF_ANIMATIONS_SKETCHES[0]) {\r\n          createAnimationsFromTheStackedSketches();\r\n        }\r\n\r\n        callbacks.forEach((c) => {\r\n          c();\r\n        });\r\n        callbacks.length = 0;\r\n        alreadyInProcess = false;\r\n      }, 0);\r\n      alreadyInProcess = true;\r\n    }\r\n  };\r\n})();\r\n\r\ntype OrganizedAnimations = {\r\n  typeOfLink: typeof STACK_OF_ANIMATIONS_SKETCHES[number]['typeOfLink'];\r\n  linkedAnimation: AnimationWS | undefined;\r\n  animation: AnimationWS;\r\n  playTogether?: AnimationWS[];\r\n  afterIterations?: {\r\n    animations: AnimationWS[];\r\n    amountOfIterations: number;\r\n  };\r\n}[];\r\n\r\nfunction addToLinkedAnimationObject(\r\n  organizedAnimations: OrganizedAnimations,\r\n  animation: AnimationWS,\r\n  linkedAnimation: AnimationWS,\r\n  typeOfLink: typeof STACK_OF_ANIMATIONS_SKETCHES[number]['typeOfLink'],\r\n  amountOfIterations?: number\r\n) {\r\n  const l = organizedAnimations.length;\r\n  for (let index = 0; index < l; index += 1) {\r\n    const o = organizedAnimations[index];\r\n    const a =\r\n      typeOfLink === 'afterIterations' && o.afterIterations\r\n        ? o.afterIterations.animations\r\n        : o.playTogether;\r\n\r\n    if (linkedAnimation === o.animation) {\r\n      if (a) {\r\n        a.push(animation);\r\n      } else if (typeOfLink === 'afterIterations') {\r\n        if (!o.afterIterations) {\r\n          o.afterIterations = {\r\n            animations: [animation],\r\n            amountOfIterations: amountOfIterations as number,\r\n          };\r\n        }\r\n      } else if (typeOfLink === 'together') {\r\n        if (!o.playTogether) {\r\n          o.playTogether = [animation];\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    if (a) {\r\n      const i = a.indexOf(linkedAnimation);\r\n\r\n      if (i > -1) {\r\n        a.splice(i, 0, animation);\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction organizeAnimationsObjects() {\r\n  STACK_OF_ANIMATIONS_SKETCHES.slice().forEach((obj, index) => {\r\n    const o = obj;\r\n    const fromStaggers = createAnimationPropertiesFromStaggers(\r\n      o.animationOptions\r\n    );\r\n    if (fromStaggers) {\r\n      fromStaggers.forEach((a, i) => {\r\n        if (i === 0) {\r\n          o.animationOptions = a;\r\n          STACK_OF_ANIMATIONS_SKETCHES[index] = o;\r\n        } else {\r\n          STACK_OF_ANIMATIONS_SKETCHES.push({\r\n            indexOrAnimation: index,\r\n            typeOfLink: 'together',\r\n            animationOptions: a,\r\n            performerFn: o.performerFn,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  });\r\n  const organizedAnimations: OrganizedAnimations = [];\r\n\r\n  STACK_OF_ANIMATIONS_SKETCHES.map((o) => {\r\n    const performerFn = o.performerFn;\r\n    const creator = performerFn.creator as AnimationInstance['creator'];\r\n\r\n    return {\r\n      ...o,\r\n      animation: new AnimationWS(\r\n        o.animationOptions as AnimationInstanceProperties,\r\n        creator\r\n      ),\r\n    } as Omit<typeof o, 'animationOptions'> & {\r\n      animation: AnimationWS;\r\n    };\r\n  }).forEach((o, _index, array) => {\r\n    const linkedAnimation =\r\n      typeof o.indexOrAnimation === 'number'\r\n        ? array[o.indexOrAnimation].animation\r\n        : o.indexOrAnimation;\r\n\r\n    if (\r\n      !linkedAnimation ||\r\n      o.typeOfLink === 'afterAnimation' ||\r\n      (linkedAnimation &&\r\n        !addToLinkedAnimationObject(\r\n          organizedAnimations,\r\n          o.animation,\r\n          linkedAnimation,\r\n          o.typeOfLink,\r\n          o.amountOfIterations\r\n        ))\r\n    ) {\r\n      organizedAnimations.push({\r\n        typeOfLink: o.typeOfLink,\r\n        linkedAnimation,\r\n        animation: o.animation,\r\n      });\r\n    }\r\n  });\r\n  return organizedAnimations;\r\n}\r\nfunction createAnimationsFromTheStackedSketches(): void {\r\n  organizeAnimationsObjects().forEach((o) => {\r\n    const {\r\n      animation,\r\n      linkedAnimation,\r\n      typeOfLink,\r\n\r\n      playTogether,\r\n      afterIterations,\r\n    } = o;\r\n    const performerFn = animation.performer;\r\n    if (typeOfLink === 'afterAnimation' && linkedAnimation) {\r\n      linkedAnimation.on('end', function f() {\r\n        organizeCycleSequence(performerFn, animation);\r\n        logicToPlayAnimations(animation, playTogether, afterIterations);\r\n\r\n        linkedAnimation.off('end', f);\r\n      });\r\n    } else {\r\n      performerFn.$hidden.animationInstances.push(animation);\r\n\r\n      performerFn.$hidden.independentAnimations.push(animation);\r\n\r\n      organizeCycleSequence(performerFn, animation);\r\n\r\n      logicToPlayAnimations(animation, playTogether, afterIterations);\r\n    }\r\n  });\r\n}\r\n\r\nexport function addInStackForConstruction(\r\n  animationOptions: AnimationOptions,\r\n  performerFn: PerformerFn,\r\n  linkedAnimation?:\r\n    | AnimationOptions\r\n    | AnimationInstanceProperties\r\n    | AnimationWS,\r\n  typeOfLink?: 'afterAnimation' | 'together' | 'afterIterations',\r\n  amountOfIterations?: number\r\n): void {\r\n  const aOptions = animationOptions;\r\n  let lAnimation = linkedAnimation;\r\n  if (performerFn.$hidden.cycleOptions) {\r\n    (aOptions as AnimationInstanceProperties).isInCycle = true;\r\n\r\n    if (lAnimation && !(lAnimation as AnimationInstanceProperties).isInCycle) {\r\n      /**\r\n       * Do not allow link  with out-of-cycle animations.\r\n       */\r\n      lAnimation = undefined;\r\n    }\r\n  }\r\n  if (!STACK_OF_ANIMATIONS_SKETCHES[0]) {\r\n    /**\r\n     * Wait for the stacking to complete.\r\n     */\r\n    runCallbacksAtTheRightTime(() => {\r\n      STACK_OF_ANIMATIONS_SKETCHES.length = 0;\r\n      ANIMATION_OBJECT_EXPECTING_SIDE_EFFECTS = [];\r\n    });\r\n  }\r\n  if (lAnimation) {\r\n    const indexOrAnimation = (lAnimation as AnimationWS).play\r\n      ? (lAnimation as AnimationWS)\r\n      : (() => {\r\n          const l = STACK_OF_ANIMATIONS_SKETCHES.length;\r\n          for (let index = 0; index < l; index += 1) {\r\n            if (\r\n              STACK_OF_ANIMATIONS_SKETCHES[index].animationOptions ===\r\n              lAnimation\r\n            ) {\r\n              return index;\r\n            }\r\n          }\r\n          return null;\r\n        })();\r\n\r\n    if (indexOrAnimation !== null) {\r\n      STACK_OF_ANIMATIONS_SKETCHES.push({\r\n        indexOrAnimation,\r\n        typeOfLink,\r\n        amountOfIterations,\r\n        animationOptions,\r\n        performerFn,\r\n      });\r\n    } else {\r\n      STACK_OF_ANIMATIONS_SKETCHES.push({\r\n        animationOptions,\r\n        performerFn,\r\n      });\r\n    }\r\n  } else {\r\n    STACK_OF_ANIMATIONS_SKETCHES.push({\r\n      animationOptions,\r\n      performerFn,\r\n    });\r\n  }\r\n}\r\n","export default function isDirValue(s: string): boolean {\r\n  switch (s) {\r\n    case 'normal':\r\n    case 'reverse':\r\n    case 'alternate':\r\n    case 'alternate-reverse':\r\n      return true;\r\n\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n","import { AnimationOptions } from '../contracts/animation-inter';\r\nimport { ANIMATION_STATES } from './constants';\r\n\r\nconst DEFAULTS_ANIMATION_PROPERTIES_VALUES = {\r\n  targets: undefined,\r\n  dir: 'normal',\r\n  loop: 1,\r\n  dur: 1,\r\n  easing: 'linear',\r\n  progressValue: undefined,\r\n  progress: undefined,\r\n  delay: -1,\r\n  endDelay: -1,\r\n  state: ANIMATION_STATES[0],\r\n  drive: 'normal',\r\n  autoDestroy: false,\r\n  autoPlay: true,\r\n  removeChanges: false,\r\n  pauseDocHidden: true,\r\n  round: 0,\r\n} as AnimationOptions;\r\nexport default DEFAULTS_ANIMATION_PROPERTIES_VALUES;\r\n","import hasOwnProperty from '../utilities/has-own-property';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport isDirValue from '../animation-mount/is-dir-value';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport Keyframes from '../contracts/key-frames';\r\nimport AnimationInstanceProperties, {\r\n  AnimationOptions,\r\n  UserAnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport DEFAULTS_ANIMATION_PROPERTIES_VALUES from './defaults-animation-properties-values';\r\n\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\nexport const ANIMATION_PERFORMER_PROPERTIES = [\r\n  'dir',\r\n  'loop',\r\n  'dur',\r\n  'easing',\r\n  'delay',\r\n  'endDelay',\r\n  'drive',\r\n  'autoDestroy',\r\n  'autoPlay',\r\n  'pauseDocHidden',\r\n  'round',\r\n  'progress',\r\n];\r\n\r\nfunction parametersToAnimateShortcuts(v: unknown) {\r\n  const obj: AnimationOptions = {};\r\n\r\n  switch (typeof v) {\r\n    case 'string':\r\n      if (isDirValue(v)) {\r\n        obj.dir = v as AnimationOptions['dir'];\r\n      } else {\r\n        obj.easing = v as AnimationOptions['easing'];\r\n      }\r\n      break;\r\n    case 'function':\r\n      obj.easing = v as AnimationOptions['easing'];\r\n\r\n      break;\r\n    case 'number':\r\n      obj.dur = v;\r\n      break;\r\n    case 'boolean':\r\n      obj.autoDestroy = v;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return obj;\r\n}\r\n\r\nexport default function createAnimationPropertiesObject(\r\n  animationPerformer: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | ValuesToAnimateProperty[],\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimateOrDurOrAutoDestroy?:\r\n    | AnimationOptions\r\n    | AnimationOptions['dur']\r\n    | true\r\n) {\r\n  let parametersToAnimationProperties = parametersToAnimateOrPropertyValue;\r\n  let animateProperties: PropertiesToAnimateObject | Keyframes;\r\n\r\n  if (typeof animate === 'string' || typeof animate === 'number') {\r\n    parametersToAnimationProperties =\r\n      typeof parametersToAnimateOrDurOrAutoDestroy === 'object'\r\n        ? parametersToAnimateOrDurOrAutoDestroy\r\n        : parametersToAnimateShortcuts(parametersToAnimateOrDurOrAutoDestroy);\r\n\r\n    animateProperties = (() => {\r\n      const o: PropertiesToAnimateObject = {};\r\n      o[\r\n        animate\r\n      ] = parametersToAnimateOrPropertyValue as ValuesToAnimateProperty;\r\n      return o;\r\n    })();\r\n  } else {\r\n    parametersToAnimationProperties =\r\n      typeof parametersToAnimationProperties === 'object'\r\n        ? parametersToAnimationProperties\r\n        : parametersToAnimateShortcuts(parametersToAnimateOrPropertyValue);\r\n\r\n    animateProperties = animate as PropertiesToAnimateObject | Keyframes;\r\n  }\r\n\r\n  const targets = ((parametersToAnimationProperties as UserAnimationOptions)\r\n    .targets || animationPerformer.$hidden.targets) as HTMLElement[];\r\n\r\n  const length = targets.length;\r\n\r\n  const t: AnimationOptions['targets'] = targets.map((target, i) => {\r\n    return {\r\n      originalArrayLength: length,\r\n      target,\r\n      index: i,\r\n    };\r\n  });\r\n  const animationProperties = {\r\n    keyframes: animateProperties,\r\n    ...(parametersToAnimationProperties as AnimationInstanceProperties),\r\n    targets: t,\r\n    performer: animationPerformer,\r\n  } as AnimationOptions;\r\n\r\n  ANIMATION_PERFORMER_PROPERTIES.forEach((propertyName) => {\r\n    if (!hasOwnProperty(animationProperties, propertyName)) {\r\n      animationProperties[propertyName as never] = animationPerformer.$hidden[\r\n        propertyName as never\r\n      ] as never;\r\n    }\r\n  });\r\n\r\n  if (\r\n    animationProperties.drive &&\r\n    animationProperties.drive !== 'normal' &&\r\n    animationProperties.loop === DEFAULTS_ANIMATION_PROPERTIES_VALUES.loop\r\n  ) {\r\n    if (Array.isArray(animationProperties.drive)) {\r\n      const l = animationProperties.drive.length - 1;\r\n      if (typeof animationProperties.drive[l] === 'string') {\r\n        animationProperties.loop = true;\r\n      } else {\r\n        animationProperties.loop = l;\r\n      }\r\n    } else {\r\n      animationProperties.loop = true;\r\n    }\r\n  }\r\n  if (\r\n    animationProperties.dir &&\r\n    animationProperties.loop === DEFAULTS_ANIMATION_PROPERTIES_VALUES.loop\r\n  ) {\r\n    if (animationProperties.dir.indexOf('alternate') > -1) {\r\n      animationProperties.loop = 2;\r\n    }\r\n  }\r\n\r\n  return animationProperties;\r\n}\r\n","import customForIn from '../utilities/custom-for-in';\r\nimport { ANIMATION_STATES } from './constants';\r\nimport {\r\n  addInStackForConstruction,\r\n  useAnimationObjectExpectingSideEffects,\r\n  runCallbacksAtTheRightTime,\r\n} from './organize-animation-creations';\r\nimport { debugNormal } from './wide-smile-debug';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport createAnimationPropertiesObject from './create-animation-properties-object';\r\nimport PerformerFn, {\r\n  OverloadsForAnimationCreation,\r\n  PerformerFnMethods,\r\n  PerformerFnProperties,\r\n} from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport Keyframes from '../contracts/key-frames';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport {\r\n  AnimationInstance,\r\n  AnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport { ListenersEventsName } from '../contracts/listeners-events-name';\r\n\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n/* eslint-disable @typescript-eslint/no-this-alias  */\r\n\r\nconst createIndependentAnimations: OverloadsForAnimationCreation = function a(\r\n  this: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | string\r\n    | ValuesToAnimateProperty[],\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimate?: AnimationOptions | AnimationOptions['dur'] | true\r\n): PerformerFn {\r\n  /* important!, removes the numeric value stored in the property. */\r\n  this.$hidden.currentAfterIterations = undefined;\r\n\r\n  const animationProperties = createAnimationPropertiesObject(\r\n    this,\r\n    animate as never,\r\n    parametersToAnimateOrPropertyValue as never,\r\n    parametersToAnimate as never\r\n  );\r\n\r\n  useAnimationObjectExpectingSideEffects(this, animationProperties);\r\n  addInStackForConstruction(animationProperties, this);\r\n\r\n  return this;\r\n};\r\n\r\nfunction getAnimationsRunning(performerFn: PerformerFn) {\r\n  const $hidden = performerFn.$hidden;\r\n  const animations = $hidden.animationInstances;\r\n  if ($hidden.cycleOptions) {\r\n    return [\r\n      ...($hidden.cycleOptions\r\n        .animationInstancesInCycle as AnimationInstance[]).filter(\r\n        (a) => a.state === ANIMATION_STATES[1]\r\n      ),\r\n      ...animations.filter((a) => !a.isInCycle),\r\n    ];\r\n  }\r\n  return animations;\r\n}\r\n\r\nconst createDependentAnimations: OverloadsForAnimationCreation = function a(\r\n  this: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | string\r\n    | ValuesToAnimateProperty[],\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimate?: AnimationOptions | AnimationOptions['dur'] | true\r\n): PerformerFn {\r\n  /* important!, removes the numeric value stored in the property. */\r\n  this.$hidden.currentAfterIterations = undefined;\r\n\r\n  const animationProperties = createAnimationPropertiesObject(\r\n    this,\r\n    animate as never,\r\n    parametersToAnimateOrPropertyValue as never,\r\n    parametersToAnimate as never\r\n  );\r\n\r\n  const lastAnimationParametersAdded = useAnimationObjectExpectingSideEffects(\r\n    this\r\n  );\r\n\r\n  useAnimationObjectExpectingSideEffects(this, animationProperties);\r\n  if (lastAnimationParametersAdded) {\r\n    addInStackForConstruction(\r\n      animationProperties,\r\n      this,\r\n      lastAnimationParametersAdded,\r\n      'afterAnimation'\r\n    );\r\n  } else {\r\n    const lastAnimationCreated = this.$hidden.animationInstances[\r\n      this.$hidden.animationInstances.length - 1\r\n    ];\r\n    if (lastAnimationCreated) {\r\n      addInStackForConstruction(\r\n        animationProperties,\r\n        this,\r\n        lastAnimationCreated,\r\n        'afterAnimation'\r\n      );\r\n    } else {\r\n      addInStackForConstruction(animationProperties, this);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nfunction addFinalKeyframeInTheAnimation(\r\n  this: PerformerFn,\r\n\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | ValuesToAnimateProperty[]\r\n    | ValuesToAnimateProperty,\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimateOrDurOrAutoDestroy?:\r\n    | AnimationOptions\r\n    | AnimationOptions['dur']\r\n    | true\r\n) {\r\n  /* important!, removes the numeric value stored in the property. */\r\n  this.$hidden.currentAfterIterations = undefined;\r\n\r\n  const objectExpectingSideEffects = useAnimationObjectExpectingSideEffects(\r\n    this\r\n  );\r\n  if (objectExpectingSideEffects) {\r\n    const lastAnimationParametersAdded = objectExpectingSideEffects;\r\n    let initialKeyframe: PropertiesToAnimateObject | false = false;\r\n\r\n    let animateProps = animate;\r\n\r\n    if (\r\n      typeof animate !== 'object' &&\r\n      parametersToAnimateOrPropertyValue === undefined\r\n    ) {\r\n      animateProps = [animateProps] as ValuesToAnimateProperty[];\r\n    }\r\n    if (Array.isArray(animateProps)) {\r\n      initialKeyframe = {};\r\n      let count = 0;\r\n      customForIn(\r\n        lastAnimationParametersAdded.keyframes as PropertiesToAnimateObject,\r\n        (_propertyValue, propertyName) => {\r\n          const array = animateProps as ValuesToAnimateProperty[];\r\n          const v = array[count];\r\n\r\n          (initialKeyframe as PropertiesToAnimateObject)[propertyName] = v;\r\n          if (typeof array[count + 1] !== 'undefined') {\r\n            count += 1;\r\n          }\r\n        }\r\n      );\r\n    }\r\n    const animationProperties = createAnimationPropertiesObject(\r\n      this,\r\n      (initialKeyframe || animateProps) as PropertiesToAnimateObject,\r\n      parametersToAnimateOrPropertyValue,\r\n      parametersToAnimateOrDurOrAutoDestroy\r\n    );\r\n\r\n    customForIn(animationProperties, (propertyValue, propertyName) => {\r\n      const v = propertyValue as never;\r\n      if (propertyName === 'keyframes') {\r\n        lastAnimationParametersAdded.keyframes = [\r\n          lastAnimationParametersAdded.keyframes as PropertiesToAnimateObject,\r\n          v,\r\n        ];\r\n      } else {\r\n        lastAnimationParametersAdded[propertyName as never] = v;\r\n      }\r\n    });\r\n  } else {\r\n    debugNormal(\r\n      'Call at an improper moment.',\r\n      'To use the \"to\" method you should call it right after the animation call to which it will be applied.'\r\n    );\r\n  }\r\n  return this;\r\n}\r\n\r\nfunction playAnimations(animationPerformer: PerformerFn) {\r\n  animationPerformer.$hidden.animationInstances.forEach((a) => {\r\n    const i = a;\r\n\r\n    if (i.state === ANIMATION_STATES[0] || i.state === ANIMATION_STATES[5]) {\r\n      if (\r\n        animationPerformer.$hidden.independentAnimations &&\r\n        animationPerformer.$hidden.independentAnimations.indexOf(i) > -1\r\n      ) {\r\n        i.play();\r\n      } else {\r\n        i.autoPlay = true;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nconst PERFORMER_FNS_METHODS: PerformerFnMethods = {\r\n  $: createIndependentAnimations,\r\n\r\n  _: createDependentAnimations,\r\n\r\n  to: addFinalKeyframeInTheAnimation,\r\n\r\n  cycle(\r\n    this: PerformerFn,\r\n    loopOrDir: PerformerFnProperties['loop'] | 'normal' | 'alternate',\r\n    dir: 'normal' | 'alternate' = 'normal'\r\n  ) {\r\n    let loop;\r\n    let d: typeof dir;\r\n    if (typeof loopOrDir === 'string') {\r\n      loop = loopOrDir === 'alternate' ? 2 : 1;\r\n      d = loopOrDir as typeof dir;\r\n    } else {\r\n      loop = loopOrDir;\r\n      d = dir;\r\n    }\r\n    this.$hidden.cycleOptions = {\r\n      loop: loop || 2,\r\n      dir: d,\r\n      countCompleteAnimations: 0,\r\n      numberOfAnimationsToComplete: 0,\r\n      countLoops: 1,\r\n      loopDirection: 'normal',\r\n    };\r\n    return this;\r\n  },\r\n\r\n  after(this: PerformerFn, iterations: number) {\r\n    this.$hidden.currentAfterIterations = iterations;\r\n    return this;\r\n  },\r\n\r\n  load(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      this.$hidden.animationInstances.forEach((a) => a.load());\r\n    });\r\n    return this;\r\n  },\r\n\r\n  ready(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      let count = 0;\r\n      const animationPerformer = this;\r\n\r\n      const animationInstances = animationPerformer.$hidden.animationInstances;\r\n      const length = animationInstances.length;\r\n\r\n      animationInstances.forEach((a) => {\r\n        a.on('load', function f() {\r\n          count += 1;\r\n\r\n          if (count >= length) {\r\n            playAnimations(animationPerformer);\r\n          }\r\n          a.off('load', f);\r\n        }).load();\r\n      });\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  play(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      playAnimations(this);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  pause(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.pause());\r\n    });\r\n    return this;\r\n  },\r\n\r\n  resume(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.resume());\r\n    });\r\n    return this;\r\n  },\r\n\r\n  restart(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.restart());\r\n    });\r\n    return this;\r\n  },\r\n\r\n  end(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.end());\r\n    });\r\n    return this;\r\n  },\r\n\r\n  go(this: PerformerFn, part: number) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.go(part));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  back(this: PerformerFn, part: number) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.back(part));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  jump(this: PerformerFn, part: number) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.jump(part));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  speed(this: PerformerFn, multiply: number) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.speed(multiply));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  revert(this: PerformerFn, endIteration: boolean) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.revert(endIteration));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  dirTo(this: PerformerFn, dir: Parameters<AnimationInstance['dirTo']>['0']) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      getAnimationsRunning(this).forEach((a) => a.dirTo(dir));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  cancel(this: PerformerFn) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      this.$hidden.animationInstances.forEach((a) => a.cancel());\r\n    });\r\n    return this;\r\n  },\r\n\r\n  destroy(this: PerformerFn): boolean {\r\n    runCallbacksAtTheRightTime(() => {\r\n      this.$hidden.animationInstances.forEach((a) => a.destroy());\r\n    });\r\n    return true;\r\n  },\r\n\r\n  on(\r\n    this: PerformerFn,\r\n    eventName: ListenersEventsName,\r\n    callbackfn: (\r\n      this: AnimationInstance,\r\n      eventName: string,\r\n      animation: AnimationInstance\r\n    ) => unknown\r\n  ) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      this.$hidden.animationInstances.forEach((a) =>\r\n        a.on(eventName, callbackfn)\r\n      );\r\n    });\r\n    return this;\r\n  },\r\n\r\n  off(\r\n    this: PerformerFn,\r\n    eventName: ListenersEventsName,\r\n    callbackfnOrIndex: Function | number\r\n  ) {\r\n    runCallbacksAtTheRightTime(() => {\r\n      this.$hidden.animationInstances.forEach((a) =>\r\n        a.off(eventName, callbackfnOrIndex)\r\n      );\r\n    });\r\n    return this;\r\n  },\r\n};\r\n\r\nexport default PERFORMER_FNS_METHODS;\r\n","import getElementsInTheDOM from '../animation-mount/get-elements-in-the-dom';\r\nimport {\r\n  addInStackForConstruction,\r\n  useAnimationObjectExpectingSideEffects,\r\n} from './organize-animation-creations';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport createAnimationPropertiesObject, {\r\n  ANIMATION_PERFORMER_PROPERTIES,\r\n} from './create-animation-properties-object';\r\nimport PERFORMER_FNS_METHODS from './performer-fns-methods';\r\nimport PerformerFn, {\r\n  OverloadsForAnimationCreation,\r\n  PerformerFnProperties,\r\n} from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\n\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport Keyframes from '../contracts/key-frames';\r\nimport {\r\n  AnimationInstance,\r\n  AnimationOptions,\r\n  UserAnimationOptions,\r\n} from '../contracts/animation-inter';\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n\r\nconst NewPerformerFn = (\r\n  performerProperties: UserAnimationOptions,\r\n  creator: AnimationInstance['creator']\r\n) => {\r\n  const performerProps = performerProperties;\r\n  const creatorDefaults = creator.dfs;\r\n  const defaults: PerformerFnProperties = {\r\n    creator,\r\n    animationInstances: [],\r\n    independentAnimations: [],\r\n    propertiesUsed: [],\r\n  };\r\n  ANIMATION_PERFORMER_PROPERTIES.forEach((propertyName) => {\r\n    defaults[propertyName as never] = creatorDefaults[propertyName as never];\r\n  });\r\n\r\n  if (performerProps.targets) {\r\n    performerProps.targets = getElementsInTheDOM(performerProps.targets);\r\n  }\r\n\r\n  const animationPerformerProperties = { ...defaults, ...performerProps };\r\n\r\n  const performerFn = Object.assign(\r\n    (PerformerFnFn as unknown) as OverloadsForAnimationCreation,\r\n    PERFORMER_FNS_METHODS,\r\n    {\r\n      $hidden: animationPerformerProperties as Required<PerformerFnProperties>,\r\n      creator,\r\n    }\r\n  ) as PerformerFn;\r\n  function PerformerFnFn(\r\n    animate:\r\n      | PropertiesToAnimateObject\r\n      | Keyframes\r\n      | AllAnimableProperties\r\n      | number,\r\n    parametersToAnimateOrPropertyValue?:\r\n      | AnimationOptions\r\n      | ValuesToAnimateProperty\r\n      | true,\r\n    parametersToAnimate?: AnimationOptions | AnimationOptions['dur'] | true\r\n  ) {\r\n    const animationProperties = createAnimationPropertiesObject(\r\n      performerFn,\r\n      animate as never,\r\n      parametersToAnimateOrPropertyValue as never,\r\n      parametersToAnimate as never\r\n    );\r\n\r\n    const lastAnimationParametersAdded = useAnimationObjectExpectingSideEffects(\r\n      performerFn\r\n    );\r\n\r\n    useAnimationObjectExpectingSideEffects(performerFn, animationProperties);\r\n\r\n    if (performerFn.$hidden.currentAfterIterations) {\r\n      addInStackForConstruction(\r\n        animationProperties,\r\n        performerFn,\r\n        lastAnimationParametersAdded,\r\n        'afterIterations',\r\n        performerFn.$hidden.currentAfterIterations\r\n      );\r\n    } else if (lastAnimationParametersAdded) {\r\n      addInStackForConstruction(\r\n        animationProperties,\r\n        performerFn,\r\n        lastAnimationParametersAdded,\r\n        'together'\r\n      );\r\n    } else {\r\n      addInStackForConstruction(animationProperties, performerFn);\r\n    }\r\n\r\n    return performerFn;\r\n  }\r\n  performerFn.$hidden.index = creator.performers.push(performerFn) - 1;\r\n  return performerFn;\r\n};\r\n\r\nexport default NewPerformerFn;\r\n","import { AnimationInstancePropertiesAllWritable } from '../contracts/animation-inter';\r\n\r\nexport default function getElementsInTheDOM(\r\n  targets: AnimationInstancePropertiesAllWritable['targets']\r\n): HTMLElement[] {\r\n  const elements: object[] = [];\r\n  if (targets) {\r\n    let targetForElements = targets;\r\n\r\n    if (\r\n      typeof targetForElements === 'string' ||\r\n      typeof targetForElements === 'object'\r\n    ) {\r\n      targetForElements = [targetForElements as never];\r\n    } else {\r\n      targetForElements = [].slice.call(targetForElements);\r\n    }\r\n    (targetForElements as (string | object)[]).forEach((elementOrSelector) => {\r\n      if (typeof elementOrSelector === 'string') {\r\n        [].slice\r\n          .call(document.querySelectorAll(elementOrSelector))\r\n          .forEach((elt) => {\r\n            if (elements.indexOf(elt as HTMLElement) === -1) {\r\n              elements.push(elt as HTMLElement);\r\n            }\r\n          });\r\n      } else if (elements.indexOf(elementOrSelector) === -1) {\r\n        if (elementOrSelector && typeof targetForElements === 'object') {\r\n          elements.push(elementOrSelector);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return elements as HTMLElement[];\r\n}\r\n","import './sauce/polyfills';\r\nimport './animation-engine/handle-visibility-change';\r\nimport { WIDE_SMILE_VERSION } from './sauce/constants';\r\nimport {\r\n  createCustomProperty,\r\n  CUSTOM_SPECIAL_PROPERTIES,\r\n  OBSERVER_PROPERTIES,\r\n  removeCustomProperty,\r\n} from './sauce/custom-properties-for-animations';\r\n\r\nimport NewPerformerFn from './sauce/new-performer-fn';\r\nimport EasingsFunctionsList from './contracts/easings-functions-list';\r\nimport isDirValue from './animation-mount/is-dir-value';\r\nimport { registerCustomEasing } from './sauce/custom-easings';\r\nimport {\r\n  AnimationInstance,\r\n  UserAnimationOptions,\r\n} from './contracts/animation-inter';\r\nimport CreateObserverPropertyCallbackfn from './contracts/create-observer-property-callbackfn';\r\nimport CreatorFnProperties from './contracts/creator-fn-properties';\r\nimport CreateSpecialPropertyCallbackfn from './contracts/create-special-property-callbackfn';\r\nimport PerformerFn from './contracts/performer-fn';\r\nimport { ListenersEventsName } from './contracts/listeners-events-name';\r\nimport EasingFunction from './contracts/easing-function';\r\nimport DEFAULTS_ANIMATION_PROPERTIES_VALUES from './sauce/defaults-animation-properties-values';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n\r\nconst CREATORS_FN_METHODS = {\r\n  play(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.play());\r\n    return this;\r\n  },\r\n\r\n  load(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.load());\r\n    return this;\r\n  },\r\n\r\n  ready(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.ready());\r\n    return this;\r\n  },\r\n\r\n  pause(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.pause());\r\n\r\n    return this;\r\n  },\r\n\r\n  resume(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.resume());\r\n\r\n    return this;\r\n  },\r\n\r\n  restart(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.restart());\r\n\r\n    return this;\r\n  },\r\n\r\n  end(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.end());\r\n\r\n    return this;\r\n  },\r\n\r\n  go(this: AnimationInstance['creator'], part: number) {\r\n    this.performers.forEach((i) => i.go(part));\r\n\r\n    return this;\r\n  },\r\n\r\n  back(this: AnimationInstance['creator'], part: number) {\r\n    this.performers.forEach((i) => i.back(part));\r\n\r\n    return this;\r\n  },\r\n\r\n  jump(this: AnimationInstance['creator'], part: number) {\r\n    this.performers.forEach((i) => i.jump(part));\r\n\r\n    return this;\r\n  },\r\n\r\n  revert(this: AnimationInstance['creator'], endIteration?: boolean) {\r\n    this.performers.forEach((i) => i.revert(endIteration));\r\n    return this;\r\n  },\r\n\r\n  speed(this: AnimationInstance['creator'], multiply: number) {\r\n    this.performers.forEach((i) => i.speed(multiply));\r\n    return this;\r\n  },\r\n\r\n  dirTo(\r\n    this: AnimationInstance['creator'],\r\n    dir: Parameters<AnimationInstance['dirTo']>['0']\r\n  ) {\r\n    this.performers.forEach((i) => i.dirTo(dir));\r\n\r\n    return this;\r\n  },\r\n\r\n  destroy(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.destroy());\r\n    this.performers = [];\r\n    return this;\r\n  },\r\n  cancel(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => i.cancel());\r\n    return this;\r\n  },\r\n\r\n  on(\r\n    this: AnimationInstance['creator'],\r\n    eventName: ListenersEventsName,\r\n    callbackfn: (\r\n      this: AnimationInstance,\r\n      eventName: string,\r\n      animation: AnimationInstance\r\n    ) => unknown\r\n  ) {\r\n    this.performers.forEach((i) => i.on(eventName, callbackfn));\r\n\r\n    return this;\r\n  },\r\n\r\n  off(\r\n    this: AnimationInstance['creator'],\r\n    eventName: ListenersEventsName,\r\n    callbackfnOrIndex: Function | number\r\n  ) {\r\n    this.performers.forEach((i) => i.off(eventName, callbackfnOrIndex));\r\n    return this;\r\n  },\r\n};\r\n\r\nconst CREATORS_FN_GLOBAL: CreatorFnProperties['global'] = {\r\n  new() {\r\n    return Object.assign(NewCreatorFn(), GetCreatorFnProperties()) as never;\r\n  },\r\n  version: WIDE_SMILE_VERSION,\r\n\r\n  asyncLoading: false,\r\n\r\n  specials: CUSTOM_SPECIAL_PROPERTIES,\r\n\r\n  observeds: OBSERVER_PROPERTIES,\r\n\r\n  all: [],\r\n\r\n  newEasing(name: string, callback: EasingFunction) {\r\n    registerCustomEasing(name, callback);\r\n    return this;\r\n  },\r\n  newSpecialProperty(\r\n    this: CreatorFnProperties['global'],\r\n    propertyOrProperties:\r\n      | string\r\n      | Record<string, CreateSpecialPropertyCallbackfn>,\r\n    callbackfn?: CreateSpecialPropertyCallbackfn\r\n  ) {\r\n    createCustomProperty(propertyOrProperties, callbackfn, 'special');\r\n    return this;\r\n  },\r\n\r\n  deleteSpecialProperty(\r\n    this: CreatorFnProperties['global'],\r\n    ...propertiesNames: string[]\r\n  ) {\r\n    removeCustomProperty(propertiesNames, 'special');\r\n    return this;\r\n  },\r\n\r\n  newObservedProperty(\r\n    this: CreatorFnProperties['global'],\r\n    propertyOrProperties:\r\n      | string\r\n      | Record<string, CreateObserverPropertyCallbackfn>,\r\n    callbackfn?: CreateObserverPropertyCallbackfn\r\n  ) {\r\n    createCustomProperty(propertyOrProperties, callbackfn, 'observed');\r\n    return this;\r\n  },\r\n\r\n  deleteObservedProperty(\r\n    this: CreatorFnProperties['global'],\r\n    ...propertiesNames: string[]\r\n  ) {\r\n    removeCustomProperty(propertiesNames, 'observed');\r\n    return this;\r\n  },\r\n};\r\n\r\nfunction GetCreatorFnProperties(): Omit<CreatorFnProperties, 'global'> & {\r\n  global: Omit<CreatorFnProperties['global'], 'new'> & {\r\n    new: () => CreatorFn;\r\n  };\r\n} {\r\n  return {\r\n    dfs: { ...DEFAULTS_ANIMATION_PROPERTIES_VALUES },\r\n\r\n    performers: [],\r\n\r\n    global: CREATORS_FN_GLOBAL as never,\r\n    ...CREATORS_FN_METHODS,\r\n  };\r\n}\r\n\r\nfunction NewCreatorFn() {\r\n  const creator = (creatorFn as unknown) as AnimationInstance['creator'];\r\n  function creatorFn(): CreatorFn['global'];\r\n\r\n  function creatorFn(\r\n    performerProperties: UserAnimationOptions | object | string,\r\n    ...props: (\r\n      | EasingsFunctionsList\r\n      | AnimationInstance['dir']\r\n      | number\r\n      | boolean\r\n      | UserAnimationOptions\r\n    )[]\r\n  ): PerformerFn;\r\n\r\n  function creatorFn(\r\n    performerProperties?: unknown,\r\n    ...props: (string | number | boolean | UserAnimationOptions)[]\r\n  ) {\r\n    if (performerProperties) {\r\n      const performerFn = {\r\n        targets: (performerProperties as UserAnimationOptions).targets\r\n          ? (performerProperties as UserAnimationOptions).targets\r\n          : (performerProperties as UserAnimationOptions['targets']),\r\n      } as UserAnimationOptions;\r\n\r\n      if ((performerProperties as UserAnimationOptions).targets) {\r\n        Object.assign(performerFn, performerProperties);\r\n      }\r\n      let countNumbers = 0;\r\n      props.forEach((v) => {\r\n        switch (typeof v) {\r\n          case 'number':\r\n            if (countNumbers === 0) {\r\n              performerFn.dur = v;\r\n              countNumbers += 1;\r\n            } else {\r\n              performerFn.loop = v;\r\n            }\r\n            break;\r\n          case 'string':\r\n            if (isDirValue(v)) {\r\n              performerFn.dir = v as AnimationInstance['dir'];\r\n            } else {\r\n              performerFn.easing = v as never;\r\n            }\r\n            break;\r\n          case 'function':\r\n            performerFn.easing = v as never;\r\n\r\n            break;\r\n          case 'boolean':\r\n            performerFn.autoPlay = v;\r\n            break;\r\n          case 'object':\r\n            Object.assign(performerFn, v);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n\r\n      return NewPerformerFn(performerFn, creator);\r\n    }\r\n    return creator.global;\r\n  }\r\n  CREATORS_FN_GLOBAL.all.push(creator);\r\n  return creatorFn;\r\n}\r\nconst creatorFn = NewCreatorFn();\r\n\r\nexport type CreatorFn = typeof creatorFn &\r\n  ReturnType<typeof GetCreatorFnProperties>;\r\n\r\nObject.assign(creatorFn, GetCreatorFnProperties());\r\n\r\nexport default creatorFn as CreatorFn;\r\n","/*\n  # wide-smile (C) 2021, Diogo Neves. \n\n  # Licensed under the MIT license. See LICENSE file in the project root for details.\n  ___________________________________________________________________________________\n  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n  *                                                                                 *\n  * Thanks to everyone who supported the project directly and indirectly.           *\n  *                                                                                 *\n  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n*/\n\nimport wideSmile from './src/index';\n\ndeclare global {\n  interface Window {\n    wS: typeof wideSmile;\n  }\n}\nexport default wideSmile;\n"],"sourceRoot":""}