{"version":3,"sources":["webpack://wS/webpack/universalModuleDefinition","webpack://wS/./src/sauce/polyfills.ts","webpack://wS/webpack/bootstrap","webpack://wS/webpack/runtime/define property getters","webpack://wS/webpack/runtime/hasOwnProperty shorthand","webpack://wS/./src/sauce/manage-memory-collections.ts","webpack://wS/./src/animation-mount/crud-animation-objects.ts","webpack://wS/./src/sauce/constants.ts","webpack://wS/./src/utilities/has-own-property.ts","webpack://wS/./src/utilities/custom-for-in.ts","webpack://wS/./src/animation-engine/handle-visibility-change.ts","webpack://wS/./src/animation-mount/is-dir-value.ts","webpack://wS/./src/sauce/creators-fns-methods.ts","webpack://wS/./src/sauce/defaults-animation-properties-values.ts","webpack://wS/./src/animation-mount/get-elements-in-the-dom.ts","webpack://wS/./src/utilities/get-random-key.ts","webpack://wS/./src/animation-engine/get-new-animation-progress.ts","webpack://wS/./src/utilities/to-ms.ts","webpack://wS/./src/utilities/handle-string.ts","webpack://wS/./src/based-implementations/easings.ts","webpack://wS/./src/sauce/custom-easings.ts","webpack://wS/./src/animation-mount/create-animation-auxiliary-object.ts","webpack://wS/./src/utilities/ordernate-by-growing-values.ts","webpack://wS/./src/utilities/get-time-now.ts","webpack://wS/./src/utilities-style/to-css-kebab-case.ts","webpack://wS/./src/animation-listeners/animations-listeners-handlers.ts","webpack://wS/./src/utilities/is-empty-object.ts","webpack://wS/./src/animation-engine/mount-animations-stack.ts","webpack://wS/./src/animation-engine/get-new-values-for-animation-intercalation.ts","webpack://wS/./src/utilities-style/hack-to-set-css-property-value.ts","webpack://wS/./src/utilities-style/get-vendor-css-property.ts","webpack://wS/./src/utilities-style/reduce-css-string-rules.ts","webpack://wS/./src/utilities/remove-spaces-char.ts","webpack://wS/./src/utilities-style/css-string-rules-to-object.ts","webpack://wS/./src/utilities-style/get-linked-css-properties.ts","webpack://wS/./src/utilities/dom-attributes.ts","webpack://wS/./src/sauce/wide-smile-debug.ts","webpack://wS/./src/sauce/custom-properties-for-animations.ts","webpack://wS/./src/utilities/get-unit.ts","webpack://wS/./src/animation-mount/property-object-to-animate.ts","webpack://wS/./src/utilities-style/split-css-properties.ts","webpack://wS/./src/utilities/is-dom-element.ts","webpack://wS/./src/animation-engine/crud-animations-style.ts","webpack://wS/./src/animation-engine/calc-next-property-value.ts","webpack://wS/./src/animation-engine/reset-animation-time-properties.ts","webpack://wS/./src/animation-engine/manage-animations-delay.ts","webpack://wS/./src/animation-engine/insert-animation-in-the-queue.ts","webpack://wS/./src/animation-engine/reset-animation-progress.ts","webpack://wS/./src/animation-engine/restart-animation-properties.ts","webpack://wS/./src/animation-engine/remove-animation-style.ts","webpack://wS/./src/animation-engine/new-animation-intercalation.ts","webpack://wS/./src/animation-engine/animation-iteration-completed.ts","webpack://wS/./src/animation-engine/animation-completed.ts","webpack://wS/./src/animation-engine/animation-intercalation-completed.ts","webpack://wS/./src/animation-engine/timeout-for-stack-mounting.ts","webpack://wS/./src/animation-engine/perform-intercalation-of-the-animations.ts","webpack://wS/./src/animation-engine/all-animation-targets-have-been-removed.ts","webpack://wS/./src/animation-engine/start-animation-execution-cycle.ts","webpack://wS/./src/based-implementations/colors.ts","webpack://wS/./src/utilities-style/removes-important-string.ts","webpack://wS/./src/utilities-style/get-applied-style.ts","webpack://wS/./src/animation-mount/elements-canche.ts","webpack://wS/./src/utilities-style/get-easy-computed-style.ts","webpack://wS/./src/utilities-style/get-computed-values-after-change.ts","webpack://wS/./src/utilities-style/apply-css-transition.ts","webpack://wS/./src/utilities-style/css-properties-important.ts","webpack://wS/./src/utilities-style/property-in-style-object.ts","webpack://wS/./src/utilities-style/same-css-property.ts","webpack://wS/./src/animation-mount/css-properties-to-animate.ts","webpack://wS/./src/based-implementations/stagger.ts","webpack://wS/./src/animation-mount/parser-string-stagger.ts","webpack://wS/./src/animation-mount/get-real-property-value.ts","webpack://wS/./src/animation-mount/get-unit-of-measure-properties.ts","webpack://wS/./src/animation-mount/organize-transform-functions-values.ts","webpack://wS/./src/animation-mount/get-property-current-value.ts","webpack://wS/./src/animation-mount/treat-property-current-value.ts","webpack://wS/./src/animation-mount/get-relative-value.ts","webpack://wS/./src/animation-mount/get-css-properties-to-be-animated.ts","webpack://wS/./src/utilities-style/to-css-string-rules.ts","webpack://wS/./src/animation-mount/get-direct-properties-to-be-animated.ts","webpack://wS/./src/animation-mount/get-scroll-values.ts","webpack://wS/./src/animation-mount/get-transform-properties-to-be-animated.ts","webpack://wS/./src/animation-mount/get-attr-properties-to-be-animated.ts","webpack://wS/./src/animation-mount/get-properties-to-be-animated.ts","webpack://wS/./src/animation-mount/load-properties-to-animate.ts","webpack://wS/./src/animation-mount/normalize-animation-object-properties.ts","webpack://wS/./src/animation-mount/flatten-keyframes.ts","webpack://wS/./src/animation-mount/load-animation.ts","webpack://wS/./src/sauce/animation-constructor.ts","webpack://wS/./src/sauce/iteration-control-methods.ts","webpack://wS/./src/animation-actions/progress-animation-go-to.ts","webpack://wS/./src/animation-engine/update-animation.ts","webpack://wS/./src/animation-actions/destroy-animation.ts","webpack://wS/./src/animation-actions/remove-from-animation.ts","webpack://wS/./src/sauce/animation.ts","webpack://wS/./src/sauce/push-performer-again-to-the-creator.ts","webpack://wS/./src/animation-actions/resume-animation.ts","webpack://wS/./src/animation-actions/restart-animation.ts","webpack://wS/./src/utilities/multiply-value.ts","webpack://wS/./src/sauce/remove-reference-in-creator-to-performer.ts","webpack://wS/./src/animation-engine/organize-the-execution-of-cycle-animations.ts","webpack://wS/./src/sauce/logic-to-play-animations.ts","webpack://wS/./src/sauce/last-added-animation-object.ts","webpack://wS/./src/sauce/organize-animation-creations.ts","webpack://wS/./src/sauce/create-animation-objects-from-staggers.ts","webpack://wS/./src/sauce/create-animation-properties-object.ts","webpack://wS/./src/sauce/get-performer-animations-running.ts","webpack://wS/./src/sauce/apply-callback-for-future-animations.ts","webpack://wS/./src/sauce/get-property-name.ts","webpack://wS/./src/sauce/performer-fns-methods.ts","webpack://wS/./src/sauce/fns-to-create-animations.ts","webpack://wS/./src/animation-actions/load-animations-and-play-when-ready.ts","webpack://wS/./src/animation-actions/set-property-value.ts","webpack://wS/./src/animation-actions/get-current-properties-value.ts","webpack://wS/./src/animation-listeners/amount-of-animations-interested-in-event.ts","webpack://wS/./src/sauce/new-performer-fn.ts","webpack://wS/./src/sauce/new-creator-fn.ts","webpack://wS/./src/sauce/creators-global-property.ts","webpack://wS/./wide-smile.ts","webpack://wS/./src/creator-fn.ts"],"names":["root","factory","exports","module","define","amd","self","Array","isArray","arg","Object","prototype","toString","call","assign","defineProperty","enumerable","configurable","writable","value","target","TypeError","to","i","arguments","length","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","CSS_VENDORS","split","x","window","requestAnimationFrame","cancelAnimationFrame","Number","isNaN","input","findIndex","predicate","this","list","thisArg","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","key","o","get","obj","prop","hasOwnProperty","setTimeoutId","REFERENCES_TO_USELESS_OBJECTS","sendToGarbageCollector","u","push","releasesGarbageFromAnimations","clearTimeout","setTimeout","splice","Math","max","floor","ANIMATION_AUXILIARY_OBJECTS","getAnimationAuxiliaryObject","animationId","ANIMATION_STATES","ANIMATION_DIRECTIONS","CSS_VENDORS_LENGTH","MAX_KEYFRAME","WIDE_SMILE_SCROLL_PROPERTIES","WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS","matrix","matrix3d","perspective","rotate","rotate3d","rotateX","rotateY","rotateZ","translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","object","customForIn","objectForLoop","callbackfn","avoid","isInPrototype","avoidItems","jumps","join","pass","getPrototype","indexOf","propertyName","callbackfnCalled","ANIMATIONS_PAUSED","isDirValue","s","document","addEventListener","hidden","c","animation","state","pauseDocHidden","pause","forEach","a","resume","play","performers","load","ready","restart","end","go","part","back","jump","revert","endIteration","speed","multiply","dirTo","dir","destroy","removeChanges","cancel","on","eventName","off","callbackfnUsed","now","set","properties","propertyValue","name","v","remove","names","removeTarget","targets","loop","dur","easing","progressValue","progress","delay","endDelay","drive","autoDestroy","autoPlay","round","reset","getElementsInTheDOM","elements","targetForElements","slice","elementOrSelector","querySelectorAll","elt","getRandomKey","lastkey","selected","random","getNewAnimationProgress","animationAuxiliaryObject","keyframesKeys","countDriveLoops","maxProgress","driveEasy","listOfProgress","takeControlOfTheDrive","direction","iterationsCompleted","count","progressStoppedAt","abs","hasMaxProgress","Infinity","n","toMs","seconds","trimString","string","trim","replace","toCamelCase","_all","letter","toUpperCase","minMax","val","min","mathPow","y","isUnd","parseEasingParameters","match","exec","map","p","parseFloat","steps","stps","t","ceil","eases","functionEasings","penner","linear","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","amplitude","period","amp","per","sin","asin","easeIn","bezier","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","mX1","mY1","mX2","mY2","sampleValues","Float32Array","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","aG","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","ab","aa","binarySubdivide","getTForX","applyArguments","func","args","parserEasings","duration","ease","params","mass","stiffness","damping","velocity","w0","zeta","wd","solver","exp","frame","elapsed","rest","spring","CUSTOM_EASINGS","getCustomEasing","propertiesForAnimationAuxiliaryObject","reverseExecution","ordernateByGrowingValues","array","sort","getTimeNow","Date","getTime","toCSSKebabCase","toLowerCase","EVENTS_IN_OBSERVATION","LISTENERS_NAMES","addAnimationEventListener","callback","animationObjectBuket","eName","removeAnimationEventListener","index","getBucket","eventBucket","propagateAnimationPropertyEventListener","propertyObject","allowedToApplyStyle","bucket","eventCallback","performer","newPropertyValue","propagateAnimationEventListener","useSpecialCallback","isEmptyObject","variable","timeoutForStackMounting","ANIMATIONS_STACK","getCurrentAnimationsStac","resetAnimationsStack","addAnimationToStack","removeAnimationFromStack","getAnimationInTheStack","getNewValuesForAnimationIntercalation","requiredAnimationProperties","iterationInterlacations","startTimeOfTheIteration","timeRunningIteration","toAuxiliaryObject","durationOfTheInterlacation","currentTime","timeConsumed","averageDurationForIntercalation","completed","newProgress","timeBasedProgress","DIV_ELEMENT_STYLE","createElement","style","KNOWN_PROPERTIES","getVendorCSSProperty","cssText","values","HACK_CSS_PROPERTY_VALUES","l","substring","CSSStringRules","removeSpacesChar","str","CSSStringRulesToObject","CSSProperties","styleObject","property","propertyIndex","getLinkedCSSProperties","propertyNameCSS","linkedCSSPropertiesList","counting","item","getAttr","element","attrName","getAttribute","setAttr","attrValue","setAttribute","WideSmileDebug","type","message","callbackTest","Error","CUSTOM_SPECIAL_PROPERTIES","OBSERVER_PROPERTIES","getObject","createCustomProperty","propertyOrProperties","debugHelper","_propertyValue","removeCustomProperty","getCustomProperty","getUnit","POOL_PROPERTY_OBJECTS","recyclePropertyObjectToAnimate","keyframes","lastKey","originalArrayLength","getPropertyObjectToAnimate","propertiesKeyframes","propertiesToBeAnimate","kf","differentValues","shift","keyframeValue","lastIndex","propertiesSplited","filter","isDOMElement","e","nodeType","SVGElement","transformFunctionsToObject","current","transformFunctionsObjectToString","transformFunctionsObject","newValue","animateTargetTransform","beforeAnimating","fnName","transfromFns","animateTargetCSS","animateTargetDirectProps","pName","direct","animateTargetAttributes","attr","animateTargetObserved","percentageCompleted","applyAnimationsStyleToTargets","valuesOfThePropertiesBeforeAnimating","parentElement","parentNode","from","percentageInRelationToKey","ss","result","lastValue","f","fromAndTo","currentPercent","easingFn","startValues","endValues","startValueIndex","unitOfMeasure","fromNumber","toNumber","propertyValues","hasRGB","treatSupportsFloatingValue","calcNextPropertyValue","resetAnimationTimeProperties","timeoutId","ANIMATIONS_DELAY","manageAnimationsDelay","startTime","callbackDelayCompleted","setInterval","clearInterval","remainingDelayAnimation","insertAnimationInTheQueue","jumpTimeout","animationLoadingTime","animationAlreadyStarted","firstRunImmediately","resetAnimationProgress","animationProgressObject","lastStartProgress","restartAnimationProperties","removeAnimationStyle","removeAttribute","resetHTMLElement","newAnimationIntercalation","aAuxiliaryObject","newIntercalationObject","animationIterationCompleted","backRunning","amountOfIterations","backRunningStopped","isInCycle","animationCompleted","animationIntercalationCompleted","STARTED_STACK_MOUNT","timeout","hasRAf","requestAnimationFrameId","id","clearAnimationTimeout","animationTimeout","animationsStack","allAnimationTargetsHaveBeenRemoved","dateLastIntercalation","animationExecutionTime","check","performIntercalationOfTheAnimations","startAnimationExecutionCycle","isHex","test","isRgb","isHsl","isColor","colorToRgb","rgbValue","rgb","hexValue","hex","_m","r","g","parseInt","hexToRgba","hslValue","hsl","h","hue2rgb","q","tt","hslToRgba","removesImportantString","getWidthHeight","elementStyleObject","getBoundingClientRect","boxSizing","sides","fields","augment","field","augmentDimension","getAppliedStyle","computedStyle","bestStyleComputed","elementStyle","elementCSSText","currentComputedStyleForUse","currentComputedStyle","inDisplayNone","getPropertyValue","display","propertiesToBeHandled","computedValue","checkProperty","position","String","computePropertiesValue","appliedStyle","propertyNameInCamelCase","ELEMENTS_CANCHE","bucketId","tagName","nodeName","useElementCanche","elementCancheContainer","data","getElementCanche","view","hasBucket","ownerDocument","defaultView","opener","getComputedStyle","elementCancheObject","startComputedStyle","bestComputedStyle","createElementCanche","getComputedValuesAfterChange","elementCanche","affectedCSSProperties","affectedCSSPropertiesInitialValues","bestCSSStringRules","reduceCSSStringRules","beforeComputedStyle","transitionValue","CSSStyleRules","applyCSSTransition","CSSPropertiesImportant","afterComputedStyle","linkedCSSProperties","_value","propertyVendor","CSSProperty","CSSPropertyVendor","sameCSSProperty","before","after","CANCHE_COLORS_VALUES","stagger","grid","axis","fromIndex","val1","val2","unit","fromCenter","isRange","start","maxValue","el","fIndex","fromX","fromY","distanceX","distanceY","stringToArray","parserStringStagger","stringStagger","splitValue","form","getGrid","getOtherValue","staggerParams","getRealPropertyValue","possibleUnits","possibleUnitsLength","knownProperties","scrollLeft","scrollTop","scrollTo","opacity","getUnitOfMeasureForPropertyValue","valueNumber","organizeTransformFunctionsValues","transformFnValues","unitOfMeasureInUse","lastRealValue","defaultValue","getPropertyCurrentValue","currentValue","transformFunction","getCurrentValueTransformFunction","treatPropertyCurrentValue","operator","getRelativeValue","getCSSPropertiesToBeAnimated","propertyKeyframes","keyframe","v1","v2","consultComputedStyle","propertiesChanged","wrongValue","correctValue","getDirectPropertiesToBeAnimated","targetProperties","scrollProperty","scrollHeight","scrollWidth","clientHeight","clientWidth","scrollValues","getScrollValues","getTransformPropertiesToBeAnimated","transformProperties","transformFnName","k","getUnitOfMeasureForPropertiesValues","getAttrPropertiesToBeAnimated","attrProperties","revealSpecialProperties","specialPropertyCallback","propertiesFound","getPropertiesToBeAnimated","targetObject","props","specials","newPropertyName","organizedProperties","DOMElement","directProperties","observedProperties","isCSSProperty","otherProperties","organizePropertiesToBeAnimate","concat","fn","treatEachTypeProperties","ANIMATIONS_FOR_LOAD","IS_BUSY_LOADER","loadNextAnimation","loadPropertiesToAnimate","callbackLoaded","creator","global","asyncLoading","skip","releaseTheExecutionStack","repeat","timePassed","toArray","normalizePastedProperties","loopObject","splitedPropertyName","normalizePastedAnimationProperties","flattenOffsetProperty","newKeyframes","newKeyframe","arrayKeyframesToObject","keyframesObject","keyframesArray","leftovers","leftoversIndexs","newKeyframesArray","offset","_","LoadAnimation","hasAnimationAuxiliaryObject","initialProgress","dataLoadingState","CreateAnimationAuxiliaryObject","addAnimationAuxiliaryObject","animationArrivalTime","fKeyframes","orderOfThePropertiesUsed","kframes","propertiesToAnimate","propertiesUsed","propertiesUsedForThis","flattenKeyframes","$hidden","_v","getKeyframesKeys","forwardAnimation","startAnimationIfItIsLoaded","ANIMATIONS_ID","iterationControlMethods","realDuration","newDuration","applyDelay","aInstance","toProgress","checkDur","progressAnimationGoTo","updateAnimation","removeInstance","removePropertyFromAnimation","U_A_O","D_A_P","dfs","AnimationConstructor","removedFromTheCreator","resumeAnimation","multiplyValue","performerProperties","cycleOptions","removeAnimationAuxiliaryObject","animationInstances","independentAnimations","animationInstancesInCycle","sequence","performerFn","removeReferenceInCreatorToPerformer","destroyAnimation","removeTargetFromAnimation","runAnimation","revertAnimationProgress","organizeTheExecutionOfCycleAnimations","animationPerformer","instanceToLink","typeOfLink","numberOfAnimationsToComplete","unshift","cycle","countCompletedAnimations","sequenceRunning","loopDirection","countLoops","reverse","find","repeatCycleExecution","checkAmountOfAnimationsCompletedInCycle","playAnimationsTogether","animationToLink","playTogether","countLoadedAnimations","runTogetherAnimations","LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS","getIndex","removeLastAnimationObjectAddedToPerformer","addLastAnimationObjectAddedToPerformer","animationObject","getLastAnimationObjectAddedToPerformer","STACK_OF_ANIMATIONS_SKETCHES","CALLBACKS_CALLED_DURING_STRUCTURING","pushSketcheInPerformerBucket","sketche","performerBucket","sketches","organizeAnimationInstances","organizedAnimations","_index","linkedAnimation","indexOrAnimation","addToLinkedAnimationObject","afterIterations","animations","waitExecutionTime","executionTime","applyRulesForTheExecutionOfAnimations","organizedAnimationInstances","playAfterIterations","countCompletedIterations","playAnimationsAfterIterations","playAnimationsWaitExecutionTime","createAnimationInstances","animationOptions","animationPropertiesObjects","fromStaggers","newAnimationProperties","checkCreateNewObject","newAnimationOptions","originalAnimationOptions","AnimationWS","alreadyInProcess","runCallbacksAfterBuildingAnimations","callbacksCalledDuringStructuring","buildAnimations","addAnimationObjectToTheConstructionStack","amountOfIterationsOrexecutionTime","ignorePerformer","aOptions","lAnimation","getlinkedAnimationIndex","ANIMATION_PERFORMER_PROPERTIES","parametersToAnimateShortcuts","createAnimationPropertiesObject","animate","parametersToAnimateOrPropertyValue","parametersToAnimateOrDurOrAutoDestroy","parametersToAnimationProperties","animationProperties","DEFAULTS_ANIMATION_PROPERTIES_VALUES","getAnimationsRunning","applyCallbackForFutureAnimations","animationSketches","getCurrentAnimationSketches","getPropertyName","applyWhenTheAnimationIsLoaded","$","parametersToAnimate","currentAfterIterations","currentWaitExecutionTime","lastAnimationObjectAdded","lastAnimationCreated","objectExpectingSideEffects","initialKeyframe","animateProps","loopOrDir","amountIterations","wait","setProperties","countFn","readyLogic","loadAnimationsAndPlayWhenReady","newPerformer","setPropertyValue","currentPropertiesValue","propertyObjects","newProperties","newPropertyObject","concatProperties","getCurrentPropertiesValue","countingEventShots","countAnimationsInterestedInEvent","countAnimationsInterested","amountOfAnimationsInterestedInEvent","eventsCallbacks","fns","propertiesNames","COUNT_PERFORMER_ID","performerProps","creatorDefaults","defaults","animationPerformerProperties","lastAnimationParametersAdded","PERFORMER_FNS_METHODS","getNewPerformerFn","NewCreatorFn","Creator","countNumbers","NewPerformerFn","pureCreatorFn","CREATORS_FN_METHODS","creatorFnProperties","all","CREATORS_FN_GLOBAL_PROPERTY","new","version","observeds","newEasing","registerCustomEasing","newSpecialProperty","deleteSpecialProperty","newObservedProperty","deleteObservedProperty"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAY,GAAID,IAEhBD,EAAS,GAAIC,IARf,CASGK,MAAM,WACT,O,iCCRKC,MAAMC,UACTD,MAAMC,QAAU,SAACC,GACf,MAA+C,mBAAxCC,OAAOC,UAAUC,SAASC,KAAKJ,KAIrCC,OAAOI,QACVJ,OAAOK,eAAeL,OAAQ,SAAU,CACtCM,YAAY,EACZC,cAAc,EACdC,UAAU,EACVC,MAJsC,SAIhCC,GACJ,GAAIA,QACF,MAAM,IAAIC,UAAU,2CAItB,IADA,IAAMC,EAAKZ,OAAOU,GACTG,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAaF,UAAUD,GAC3B,GAAIG,QAAJ,CAGAA,EAAahB,OAAOgB,GAGpB,IADA,IAAMC,EAAYjB,OAAOkB,KAAKlB,OAAOgB,IAE/BG,EAAY,EAAGC,EAAMH,EAAUF,OACnCI,EAAYC,EACZD,IACA,CACA,IAAME,EAAUJ,EAAUE,GACpBG,EAAOtB,OAAOuB,yBAAyBP,EAAYK,QAC5CG,IAATF,GAAsBA,EAAKhB,aAC7BM,EAAGS,GAAWL,EAAWK,MAI/B,OAAOT,KAKb,WAEE,IADA,IAAMa,EAAc,kBAAkBC,MAAM,KAEtCC,EAAI,EACRA,EAAIF,EAAYV,SAAWa,OAAOC,sBAClCF,GAAK,EAEDC,OAAO,GAAD,OAAIH,EAAYE,GAAhB,4BACPC,OAAeC,sBACdD,OAAO,GAAD,OAAIH,EAAYE,GAAhB,2BAENC,OAAO,GAAD,OAAIH,EAAYE,GAAhB,yBACPC,OAAeE,qBACdF,OAAO,GAAD,OAAIH,EAAYE,GAAhB,yBAERC,OAAO,GAAD,OAAIH,EAAYE,GAAhB,kCAELC,OAAeE,qBACdF,OAAO,GAAD,OAAIH,EAAYE,GAAhB,iCAlBd,GAuBAI,OAAOC,MACLD,OAAOC,OACP,SAAeC,GACb,MAAwB,iBAAVA,GAAsBA,GAAUA,GAG7CpC,MAAMI,UAAUiC,YACnBrC,MAAMI,UAAUiC,UAAY,SAAUC,GACpC,GAAa,OAATC,KACF,MAAM,IAAIzB,UACR,yDAGJ,GAAyB,mBAAdwB,EACT,MAAM,IAAIxB,UAAU,gCAOtB,IALA,IAGIF,EAHA4B,EAAOrC,OAAOoC,MACdrB,EAASsB,EAAKtB,SAAW,EACzBuB,EAAUxB,UAAU,GAGfD,EAAI,EAAGA,EAAIE,EAAQF,IAE1B,GADAJ,EAAQ4B,EAAKxB,GACTsB,EAAUhC,KAAKmC,EAAS7B,EAAOI,EAAGwB,GACpC,OAAOxB,EAGX,OAAQ,MC7FR0B,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBjB,IAAjBkB,EACH,OAAOA,EAAalD,QAGrB,IAAIC,EAAS8C,EAAyBE,GAAY,CAGjDjD,QAAS,IAOV,OAHAmD,EAAoBF,GAAUhD,EAAQA,EAAOD,QAASgD,GAG/C/C,EAAOD,QCpBfgD,EAAoBI,EAAI,SAASpD,EAASqD,GACzC,IAAI,IAAIC,KAAOD,EACXL,EAAoBO,EAAEF,EAAYC,KAASN,EAAoBO,EAAEvD,EAASsD,IAC5E9C,OAAOK,eAAeb,EAASsD,EAAK,CAAExC,YAAY,EAAM0C,IAAKH,EAAWC,MCJ3EN,EAAoBO,EAAI,SAASE,EAAKC,GAAQ,OAAOlD,OAAOC,UAAUkD,eAAehD,KAAK8C,EAAKC,I,0FCW3FE,EATEC,EAA0C,GAKzC,SAASC,IAA8C,2BAApBC,EAAoB,yBAApBA,EAAoB,gBAC5DF,EAA8BG,KAAKD,GAQ9B,SAASE,IACVJ,EAA8BtC,OAAS,IACzC2C,aAAaN,GACbA,EAAgBO,YAAW,WACzBF,MACC,KAEHJ,EAA8BO,OAC5B,EACAC,KAAKC,IAAI,EAAGD,KAAKE,MAAOV,EAA8BtC,OAAS,IAAO,OClB5E,IAAMiD,EAEF,GAYG,SAASC,EACdC,GAEA,OAAOF,EAA4BE,KAAgB,ECxB9C,IAAMC,EAWT,CACF,UACA,UACA,YACA,SACA,YACA,SACA,UACA,YAGWC,EAWT,CACF,SAEA,UAEA,YAEA,oBAEA,cAEA,gBAEA,oBAEA,uBAKW3C,EAAkC,CAAC,MAAO,KAAM,IAAK,UAErD4C,EAAqB5C,EAAYV,OAEjCuD,EAAe,IAWfC,EAA+B,CAAC,aAAc,aAK9CC,EAET,CACFC,OAAQ,mBACRC,SAAU,iDACVC,YAAa,IACbC,OAAQ,IACRC,SAAU,aACVC,QAAS,IACTC,QAAS,IACTC,QAAS,IACTC,UAAW,OACXC,YAAa,UACbC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,MAAO,OACPC,QAAS,UACTC,OAAQ,IACRC,OAAQ,IACRC,OAAQ,IACRC,KAAM,OACNC,MAAO,IACPC,MAAO,KChGM,SAAS1C,EACtB2C,EACAhD,GAEA,OAAO9C,OAAOC,UAAUkD,eAAehD,KAAK2F,EAAQhD,GCavC,SAASiD,EAOtBC,EACAC,GAOS,IAFTC,EAES,uDAF4B,YACrC5D,EACS,uCACH6D,EAAgBtG,MAAMC,QAAQkG,GAChC,SAAClD,GACC,OAAOf,OAAOC,MAAMD,OAAOe,KAE7B,SAACA,GACC,OAAQK,EAAe6C,EAAelD,IAEtCsD,EAAavG,MAAMC,QAAQoG,GAC3BG,EAAQD,EAAcF,EAAmBI,KAAK,KAAO,GACvDC,EAAOH,IAAeF,GAAmB,cAAVA,EAC7BM,GAA0D,IAA3CN,EAAMhG,WAAWuG,QAAQ,aAG9C,IAAK,IAAMC,KAAgBV,EAAe,CACxC,KACIQ,GAAgBL,EAAcO,KACC,IAAjCL,EAAMI,QAAQC,KACL,IAATH,GACA,CACA,IAAMI,EAAmBV,EAAW9F,KAClCmC,EACA0D,EAAcU,GACdA,EACAV,GAEF,GAAIW,EAAkB,OAAO,EAE1BJ,IAAMA,EAAOG,IAAiBR,GAErC,OAAO,ECzDT,IAAMU,EAAyC,GCLhC,SAASC,EAAWC,GACjC,OAAQA,GACN,IAAK,SACL,IAAK,UACL,IAAK,YACL,IAAK,oBACH,OAAO,EAET,QACE,OAAO,G,6tBDcW,oBAAbC,UACTA,SAASC,iBAAiB,oBAlBb,WACTD,SAASE,OACXlB,EJIK/B,GIJ0C,SAACkD,GAC9C,IAAMC,EAAYD,EAAEC,UAChBA,EAAUC,QAAUjD,EAAiB,IAAMgD,EAAUE,iBACvDF,EAAUG,QACVV,EAAkBpD,KAAK2D,QAI3BP,EAAkBW,SAAQ,SAACC,GACzBA,EAAEC,YAEJb,EAAkB7F,OAAS,MEL/B,IAuMA,EAvM8C,CAC5C2G,KAD4C,WAK1C,OAHAtF,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE6G,UAEGtF,MAGTwF,KAR4C,WAY1C,OAHAxF,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE+G,UAEGxF,MAGTyF,MAf4C,WAmB1C,OAHAzF,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEgH,WAEGzF,MAGTkF,MAtB4C,WA2B1C,OAJAlF,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEyG,WAGGlF,MAGTqF,OA9B4C,WAmC1C,OAJArF,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE4G,YAGGrF,MAGT0F,QAtC4C,WA2C1C,OAJA1F,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEiH,aAGG1F,MAGT2F,IA9C4C,WAmD1C,OAJA3F,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEkH,SAGG3F,MAGT4F,GAtD4C,SAsDLC,GAKrC,OAJA7F,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEmH,GAAGC,MAGA7F,MAGT8F,KA9D4C,SA8DHD,GAKvC,OAJA7F,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEqH,KAAKD,MAGF7F,MAGT+F,KAtE4C,SAsEHF,GAKvC,OAJA7F,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEsH,KAAKF,MAGF7F,MAGTgG,OA9E4C,SA8EDC,GAIzC,OAHAjG,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEuH,OAAOC,MAEJjG,MAGTkG,MArF4C,SAqFFC,GAIxC,OAHAnG,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEyH,MAAMC,MAEHnG,MAGToG,MA5F4C,SA8F1CC,GAMA,OAJArG,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE2H,MAAMC,MAGHrG,MAGTsG,QAvG4C,SAuGAC,GAK1C,OAJAvG,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE6H,QAAQC,MAEZvG,KAAKuF,WAAa,GACXvF,MAETwG,OA9G4C,WAkH1C,OAHAxG,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE+H,YAEGxG,MAGTyG,GArH4C,SAuH1CC,EACA7C,GAUA,OAJA7D,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEgI,GAAGC,EAAW7C,MAGX7D,MAGT2G,IArI4C,SAuI1CD,EACAE,GAKA,OAHA5G,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEkI,IAAID,EAAqBE,MAEtB5G,MAGT6G,IAhJ4C,WAqJ1C,OAJA7G,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEoI,SAGG7G,MAGT8G,IAxJ4C,SA0J1CC,EACAC,GAMA,OAJAhH,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAEqI,IAAIC,EAAqBC,MAGtBhH,MAGTY,IApK4C,SAsK1CqG,GAEA,IAAMF,EAAqC,GAQ3C,OAPA/G,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvB,IAAMyI,EAAIzI,EAAEmC,IAAIqG,GACZC,GACFH,EAAW3F,KAAK8F,MAIbH,GAGTI,OAnL4C,WAsL1C,2BADGC,EACH,yBADGA,EACH,gBAIA,OAHApH,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE0I,OAAF,MAAA1I,EAAC,EAAY2I,OAERpH,MAGTqH,aA7L4C,SA+L1CC,GAKA,OAHAtH,KAAKuF,WAAWJ,SAAQ,SAAC1G,GACvBA,EAAE4I,aAAaC,MAEVtH,OC5LX,EAnB6C,CAC3CsH,aAASlI,EACTiH,IAAK,SACLkB,KAAM,EACNC,IAAK,EACLC,OAAQ,SACRC,mBAAetI,EACfuI,cAAUvI,EACVwI,OAAQ,EACRC,UAAW,EACX7C,MAAOjD,EAAiB,GACxB+F,MAAO,SACPC,aAAa,EACbC,UAAU,EACVzB,eAAe,EACftB,gBAAgB,EAChBgD,MAAO,EACPC,OAAO,G,qOClBM,SAASC,EACtBb,GAEA,IAAMc,EAAqB,GAC3B,GAAId,EAAS,CACX,IAAIe,EAAoBf,GAMtBe,EAJ6B,iBAAtBA,GACuB,WAA7B,EAAOA,KACJA,EAAgC,GAEhB,CAACA,GAED,GAAGC,MAAMvK,KAAKsK,IAGOlD,SAAQ,SAACoD,GACjB,iBAAtBA,EACT,GAAGD,MACAvK,KAAK4G,SAAS6D,iBAAiBD,IAC/BpD,SAAQ,SAACsD,IACsC,IAA1CL,EAAS/D,QAAQoE,IACnBL,EAAShH,KAAKqH,OAG8B,IAAzCL,EAAS/D,QAAQkE,IACtBA,GAAkD,WAA7B,EAAOF,IAC9BD,EAAShH,KAAKmH,MAKtB,OAAOH,EC1BM,SAASM,EAAa5J,GAAqC,IAArB6J,EAAqB,uDAAX,EACvDC,EAAmBnH,KAAKE,MAAMF,KAAKoH,SAAW/J,EAAKH,QACzD,OAAOG,EAAK8J,KAAcD,EACtB7J,EAAK8J,EAAW,GAAK,EAAIA,EAAW,EAAIA,EAAW,GACnD9J,EAAK8J,GCPI,SAASE,EACtBC,GAaA,IAAM3D,EAAI2D,EACFC,EAA6B5D,EAA7B4D,cAAejE,EAAcK,EAAdL,UACjBkE,EAAoB7D,EAApB6D,gBACFC,EAAcnE,EAAUrD,IACxBiG,EAAW5C,EAAU2C,cAEnBI,EAAQ/C,EAAU+C,MAEpBqB,EAA6B,iBAAVrB,EAAqBA,EAAQ,GAE9CsB,EAAkC,iBAAVtB,EAAqB,CAACA,GAASA,EAEvDuB,IAAwB5L,MAAMC,QAAQ0L,IACxCA,EAAeH,IAC4B,iBAApCG,EAAeH,GAGpBK,EAAYvE,EAAUsB,IAEtBkD,EAAsBxE,EAAUyE,MAEhCC,EAAoB9B,GAAY,EAMtC,GAJI0B,IACFF,EAAYC,EAAeH,IAE7BtB,EAAW8B,EACPN,IAAcnH,EAAqB,GACrCkH,EAAcR,EAAaM,EAAeS,QACrC,GAAIN,IAAcnH,EAAqB,GAC5C,GACEkH,EAAczH,KAAKwG,MAAMxG,KAAKoH,SAAW3G,SAClCT,KAAKiI,IAAID,EAAoBP,GAAe,SAErDC,IAAcnH,EAAqB,IACnCmH,IAAcnH,EAAqB,IAEnCkH,EAAcR,EAAaM,EAAeS,GAC1C9B,EAAW,GAEX2B,IAActH,EAAqB,IAClCsH,IAActH,EAAqB,IAAMuH,EAAsB,GAAM,GACrED,IAActH,EAAqB,IAAMuH,EAAsB,GAAM,GAEtE5B,EAAWzF,EACXgH,EAAc,IAEdvB,EAAW,EACXuB,EAAchH,GAGhB,IAAKmH,GAAyB5L,MAAMC,QAAQ0L,GAAiB,CAC3D,IAAMO,EAAiBP,EAAeH,GACtC,GACEA,EAAkBG,EAAezK,QACjCgL,IAAmBC,IACnB,CACID,IAAmBC,MACrBX,EAAkB,GAEpB,IAAMY,EAAIT,EAAeH,GACrBxL,MAAMC,QAAQmM,IAChBX,EAA+B,iBAATW,EAAE,GAAkBA,EAAE,GAAKX,EAEjDvB,EAAWkC,EAAE,KAEbX,EAA4B,iBAANW,EAAiBA,EAAIX,EAE3CvB,EAAW8B,IAGbR,GAAmB,IACIG,EAAezK,SACpCsK,EAAkB,IAKxB,MAAO,CACLA,kBACAtB,WACAuB,eClGW,SAASY,EAAKC,GAC3B,OAAOtI,KAAKE,MAAgB,IAAVoI,GCAb,SAASC,EAAWC,GACzB,OAAIA,EAAOC,KACFD,EAAOC,OAETD,EAAOE,QAAQ,qCAAsC,IAMvD,SAASC,EAAYH,GAG1B,OAAOA,EACJE,QAHe,QAGI,OACnBA,QAHgB,aAGI,SAACE,EAAcC,GAClC,OAAOA,EAAOC,iB,0GCVpB,SAASC,EAAOC,EAAaC,EAAahJ,GACxC,OAAOD,KAAKiJ,IAAIjJ,KAAKC,IAAI+I,EAAKC,GAAMhJ,GAEtC,SAASiJ,EAAQpL,EAAWqL,GAC1B,gBAAOrL,EAAKqL,GAEd,SAASC,EAAM3D,GACb,YAAoB,IAANA,EAKhB,SAAS4D,EAAsBb,GAC7B,IAAMc,EAAQ,cAAcC,KAAKf,GACjC,OAAOc,EACHA,EAAM,GAAGzL,MAAM,KAAK2L,KAAI,SAACC,GACvB,OAAOC,WAAWD,MAEpB,GAsDN,SAASE,EAAMC,GACb,IAAI3G,EAAI2G,EAGR,YAFUjM,IAANsF,IAAiBA,EAAI,IAElB,SAAC4G,GACN,OAAO7J,KAAK8J,KAAKf,EAAOc,EAAG,KAAU,GAAK5G,IAAM,EAAIA,IAIxD,IAGQ8G,EAQAC,EAXFC,GAGEF,EAAkC,CACtCG,OADsC,WAEpC,OAAO,SAACL,GACN,OAAOA,KAKPG,EAA4C,CAChDG,KADgD,WAE9C,OAAO,SAACN,GACN,OAAO,EAAI7J,KAAKoK,IAAKP,EAAI7J,KAAKqK,GAAM,KAGxCC,KANgD,WAO9C,OAAO,SAACT,GACN,OAAO,EAAI7J,KAAKuK,KAAK,EAAIV,EAAIA,KAGjCW,KAXgD,WAY9C,OAAO,SAACX,GACN,OAAOA,EAAIA,GAAK,EAAIA,EAAI,KAG5BY,OAhBgD,WAiB9C,OAAO,SAACZ,GAGN,IAFA,IAAIa,EACAC,EAAI,EACDd,IAAMa,EAAOxB,EAAQ,IAAKyB,IAAM,GAAK,KAC5C,OACE,EAAIzB,EAAQ,EAAG,EAAIyB,GAAK,OAASzB,GAAgB,EAAPwB,EAAW,GAAK,GAAKb,EAAG,KAIxEe,QA1BgD,SA0BxCC,EAAmBC,GACzB,IAAIC,EAAMF,EACNG,EAAMF,OACEnN,IAARoN,IAAmBA,EAAM,QACdpN,IAAXmN,IAAsBE,EAAM,IAEhC,IAAMrH,EAAIoF,EAAOgC,EAAK,EAAG,IACnBtB,EAAIV,EAAOiC,EAAK,GAAK,GAC3B,OAAO,SAACnB,GACN,OAAa,IAANA,GAAiB,IAANA,EACdA,GACClG,EACCuF,EAAQ,EAAG,IAAMW,EAAI,IACrB7J,KAAKiL,KACDpB,EAAI,EAAKJ,GAAe,EAAVzJ,KAAKqK,IAAWrK,KAAKkL,KAAK,EAAIvH,KACjC,EAAV3D,KAAKqK,IACNZ,MAMI,CAAC,OAAQ,QAAS,QAAS,QAAS,QAE5C/F,SAAQ,SAAC8B,EAAMxI,GACzBgN,EAAgBxE,GAAQ,WACtB,OAAO,SAACqE,GACN,OAAOX,EAAQW,EAAG7M,EAAI,QAK5Bb,OAAOkB,KAAK2M,GAAiBtG,SAAQ,SAAC8B,GACpC,IAAM2F,EAASnB,EAAgBxE,GAC/BuE,EAAM,SAAD,OAAUvE,IAAU2F,EACzBpB,EAAM,UAAD,OAAWvE,IAAU,SAAC7B,EAAWgH,GACpC,OAAO,SAACd,GACN,OAAO,EAAIsB,EAAOxH,EAAGgH,EAAVQ,CAAa,EAAItB,KAGhCE,EAAM,YAAD,OAAavE,IAAU,SAAC7B,EAAWgH,GACtC,OAAO,SAACd,GACN,OAAOA,EAAI,GACPsB,EAAOxH,EAAGgH,EAAVQ,CAAiB,EAAJtB,GAAS,EACtB,EAAIsB,EAAOxH,EAAGgH,EAAVQ,EAAkB,EAALtB,EAAS,GAAK,IAGvCE,EAAM,YAAD,OAAavE,IAAU,SAAC7B,EAAWgH,GACtC,OAAO,SAACd,GACN,OAAOA,EAAI,IACN,EAAIsB,EAAOxH,EAAGgH,EAAVQ,CAAa,EAAQ,EAAJtB,IAAU,GAC/BsB,EAAOxH,EAAGgH,EAAVQ,CAAiB,EAAJtB,EAAQ,GAAK,GAAK,OAKnCE,GAKHqB,EAAU,WACd,IACMC,EAAkB,GAExB,SAASC,EAAEC,EAAaC,GACtB,OAAO,EAAM,EAAMA,EAAM,EAAMD,EAEjC,SAASE,EAAEF,EAAaC,GACtB,OAAO,EAAMA,EAAM,EAAMD,EAE3B,SAASG,EAAEH,GACT,OAAO,EAAMA,EAGf,SAASI,EAAWC,EAAYL,EAAaC,GAC3C,QAASF,EAAEC,EAAKC,GAAOI,EAAKH,EAAEF,EAAKC,IAAQI,EAAKF,EAAEH,IAAQK,EAE5D,SAASC,EAASD,EAAYL,EAAaC,GACzC,OAAO,EAAMF,EAAEC,EAAKC,GAAOI,EAAKA,EAAK,EAAMH,EAAEF,EAAKC,GAAOI,EAAKF,EAAEH,GAyGlE,OA3DA,SAAYO,EAAaC,EAAaC,EAAaC,GACjD,GAAMH,GAAO,GAAKA,GAAO,GAAKE,GAAO,GAAKA,GAAO,EAAjD,CAGA,IAAME,EAAe,IAAIC,aAnEF,IAqEvB,GAAIL,IAAQC,GAAOC,IAAQC,EACzB,IAAK,IAAIjP,EAAI,EAAGA,EAtEK,KAsEmBA,EACtCkP,EAAalP,GAAK2O,EAAW3O,EAAIqO,EAAiBS,EAAKE,GAwC3D,OAAO,SAAClO,GACN,OAAIgO,IAAQC,GAAOC,IAAQC,GAGjB,IAANnO,GAAiB,IAANA,EAFNA,EAKF6N,EA3CT,SAAkBS,GAKhB,IAJA,IAAIC,EAAgB,EAChBC,EAAgB,EACDC,KAIjBD,GAAgCJ,EAAaI,IAAkBF,IAC7DE,EAEFD,GAAiBhB,IAGjBiB,EAEF,IAGME,EAAYH,GAFfD,EAAKF,EAAaI,KAClBJ,EAAaI,EAAgB,GAAKJ,EAAaI,IACTjB,EACnCoB,EAAeZ,EAASW,EAAWV,EAAKE,GAE9C,OAAIS,GAAgB,KAnDxB,SACEL,EACAM,EACAZ,EACAE,GAGA,IADA,IAAIW,EAAKD,EACA1P,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAC7B,IAAM4P,EAAef,EAASc,EAAIb,EAAKE,GACvC,GAAqB,IAAjBY,EACF,OAAOD,EAGTA,IADiBhB,EAAWgB,EAAIb,EAAKE,GAAOI,GAC3BQ,EAEnB,OAAOD,EAqCIE,CAAqBT,EAAII,EAAWV,EAAKE,GAE7B,IAAjBS,EACKD,EAhFb,SACEJ,EACAU,EACAC,EACAjB,EACAE,GAEA,IAAIgB,EACAC,EACAjQ,EAAI,EACJkQ,EAAKH,EACLI,EAAKL,EACT,IAEEE,EAAWrB,EADXsB,EAAWE,GAAMD,EAAKC,GAAM,EACIrB,EAAKE,GAAOI,GAC7B,EACbc,EAAKD,EAELE,EAAKF,EAEPjQ,GAAK,QACEgD,KAAKiI,IAAI+E,GAAY,MAAahQ,EAAI,IAC/C,OAAOiQ,EA4DEG,CACLhB,EACAC,EACAA,EAAgBhB,EAChBS,EACAE,GAWgBqB,CAASvP,GAAIiO,EAAKE,MAvH1B,GA8HT,SAASqB,EAAeC,EAAgBC,GAC7C,OAAOD,EAAI,WAAJ,E,+CAAQC,I,ojBAEV,SAASC,EACdzH,EACA0H,GAEA,GAAsB,mBAAX1H,EACT,OAAOA,EAET,IAAMR,EAAOQ,EAAOnI,MAAM,KAAK,GACzB8P,EAAO1D,EAAOtB,EAAYnD,IAC1BgI,EAAOnE,EAAsBrD,GACnC,OAAQR,GACN,IAAK,SACH,OA1SN,SAAgBgD,EAAgBkF,GAC9B,IAAME,EAASvE,EAAsBb,GAC/BqF,EAAO9E,EAAOK,EAAMwE,EAAO,IAAM,EAAIA,EAAO,GAAI,GAAK,KACrDE,EAAY/E,EAAOK,EAAMwE,EAAO,IAAM,IAAMA,EAAO,GAAI,GAAK,KAC5DG,EAAUhF,EAAOK,EAAMwE,EAAO,IAAM,GAAKA,EAAO,GAAI,GAAK,KACzDI,EAAWjF,EAAOK,EAAMwE,EAAO,IAAM,EAAIA,EAAO,GAAI,GAAK,KACzDK,EAAKjO,KAAKuK,KAAKuD,EAAYD,GAC3BK,EAAOH,GAAW,EAAI/N,KAAKuK,KAAKuD,EAAYD,IAC5CM,EAAKD,EAAO,EAAID,EAAKjO,KAAKuK,KAAK,EAAI2D,EAAOA,GAAQ,EAElDvD,EAAIuD,EAAO,GAAKA,EAAOD,EAAMD,GAAYG,GAAMH,EAAWC,EAEhE,SAASG,EAAOvE,GACd,IAAI3D,EAAWwH,EAAYA,EAAW7D,EAAK,IAAOA,EAQlD,OANE3D,EADEgI,EAAO,EAEPlO,KAAKqO,KAAKnI,EAAWgI,EAAOD,IAPxB,EAQCjO,KAAKoK,IAAI+D,EAAKjI,GAAYyE,EAAI3K,KAAKiL,IAAIkD,EAAKjI,KAR7C,EAUUyE,EAAIzE,GAAYlG,KAAKqO,KAAKnI,EAAW+H,GAE7C,IAANpE,GAAiB,IAANA,EACNA,EAEF,EAAI3D,EAqBb,OAAOwH,EAAWU,EAlBlB,WAIE,IAHA,IAAME,EAAQ,EAAI,EACdC,EAAU,EACVC,EAAO,IAGT,GAAwB,IAApBJ,EADJG,GAAWD,IAGT,KADAE,GACY,GACV,WAGFA,EAAO,EAGX,OAAOD,EAAUD,EAAQ,KAgQhBG,CAAOzI,EAAQ0H,GACxB,IAAK,cACH,OAAOJ,EAAelC,EAAQoC,GAChC,IAAK,QACH,OAAOF,EAAe3D,EAAO6D,GAC/B,QACE,OAAOF,EAAeK,EAAMH,IC7UlC,IAAMkB,EAAiD,GAQhD,SAASC,EAAgBnJ,GAC9B,OAAOkJ,EAAelJ,G,sVCDjB,SAASoJ,EACdtL,GAWA,MAAO,CACL0C,OAR4B,iBAArB1C,EAAU0C,QACjB2I,EAAgBrL,EAAU0C,QAEjB2I,EAAgBrL,EAAU0C,QAE1ByH,EAAcnK,EAAU0C,OAAQqC,EAAK/E,EAAUyC,MAKxD2H,SAAUpK,EAAUyC,IAEpB8I,iBAAmB,SAAChH,GAClB,OAAQA,GACN,IAAK,UACL,IAAK,oBACH,OAAO,EAET,QACE,OAAO,GAPM,CAShBvE,EAAUsB,MCjCF,SAASkK,EACtBC,GAEA,OAAOA,EAAMvF,IAAItL,QAAQ8Q,MAAK,SAACrL,EAAGgH,GAChC,OAAOhH,EAAIgH,KCPA,SAASsE,IACtB,OAAOC,KAAK9J,IAAM8J,KAAK9J,OAAQ,IAAI8J,MAAOC,UCE7B,SAASC,EAAe5G,GAErC,OAAOA,EAAOE,QADK,YACe,SAACE,EAAMC,GACvC,MAAO,WAAIA,GAASwG,iBCGxB,IAAMC,EAAoE,GAE7DC,EAaT,CACF,QACA,UACA,MACA,OACA,SACA,UACA,OACA,8BACA,QACA,SACA,YACA,4BAGK,SAASC,EACdhK,EACAiK,EACAnM,GACM,IACEjD,EAAgBiD,EAAhBjD,YACHiP,EAAsBjP,KACzBiP,EAAsBjP,GAAe,IAGvC,IAAMqP,EAAuBJ,EAAsBjP,GAC7CsP,EAAQpH,EAAW/C,EAAKnJ,YAC1BsT,IACED,EAAqBC,GACvBD,EAAqBC,GAAOhQ,KAAK8P,GAEjCC,EAAqBC,GAAS,CAACF,IAK9B,SAASG,EACdpK,EACAL,EACA7B,GAEA,IAAMjD,EAAciD,EAAUjD,YAC9B,GAAKiP,EAAsBjP,GAA3B,CAIA,IAAMqP,EAAuBJ,EAAsBjP,GAE7CsP,EAAQpH,EAAW/C,EAAKnJ,YAC9B,GAAIsT,GAASD,EAAqBC,GAAQ,CACxC,IAAME,EAAQH,EAAqBC,GAAO/M,QAAQuC,GAC9C0K,GAAS,GACXH,EAAqBC,GAAO5P,OAAO8P,EAAO,KAShD,SAASC,GAAUtK,EAAcnF,GAC/B,IAAI4E,EAAYsD,EAAW/C,GAG3B,IAAK8J,EAAsBjP,GACzB,OAAO,EAET,IAAMqP,EAAuBJ,EAAsBjP,GAYnD,MAAO,CAAE0P,YAVLL,EAAqBzK,GACTyK,EAAqBzK,GAC1ByK,EAAqB/G,EAAY1D,IAE5ByK,EADdzK,EAAY0D,EAAY1D,IAIVyK,EADdzK,EAAYmK,EAAenK,IAIPA,aAEjB,SAAS+K,GACdxK,EACAlC,EACA2M,GAEA,IACIC,EADEC,EAASL,GAAUtK,EAAMlC,EAAUjD,aAsBzC,OAnBI8P,GAAUA,EAAOJ,aACCI,EAAOJ,YAGflJ,QAAQnD,SAAQ,SAAC0M,GAC3BF,EAAsBE,EAAc9T,KAClCgH,EAAU+M,UACV,CACExN,aAAcoN,EAAepN,aAC7BjG,MAAOqT,EAAeK,iBACtBzT,OAAQoT,EAAepT,QAEzByG,EAAU+M,eAIY,IAAxBH,IACFA,GAAsB,GAEjBA,EA4BF,SAASK,GACd/K,EACAlC,EACAkN,GAKA,IAAML,EAASL,GAAUtK,EAAKnJ,WAAYiH,EAAUjD,aAEpD,GAAI8P,GAAUA,EAAOJ,YAAa,KACxBA,EAA2BI,EAA3BJ,YAAa9K,EAAckL,EAAdlL,UAGrB8K,EAAYlJ,QAAQnD,SAAQ,SAAC0M,GACvBI,EACFA,EAAmBJ,EAAe9M,GAElC8M,EAAc9T,KAAKgH,EAAU+M,UAAWpL,EAAW3B,EAAU+M,eChLtD,SAASI,GAAcC,GACpC,OAAOvU,OAAOkB,KAAKqT,GAAqCxT,OAAS,ECEnE,IACIyT,GADAC,GAAoE,GAMjE,SAASC,KACd,OAAOD,GAEF,SAASE,KACdF,GAAmB,GAGd,SAASG,GACdzJ,GAEA,SAAKA,IAA6BA,EAAyBhE,YAI3DsN,GACEtJ,EAAyBjH,aACvBiH,EACJqJ,KACO,IAGF,SAASK,GACd3Q,GAEIuQ,GAAiBvQ,KACnBuQ,GAAiBvQ,GAAe,MAM7B,SAAS4Q,GACd5Q,GAKA,MAA2B,iBAAhBA,EACFuQ,GAEFA,GAAiBvQ,GC9CX,SAAS6Q,GACtBC,GAsBA,IAAM7J,EAA2B6J,EACzB7N,EAAuCgE,EAAvChE,UAAW8N,EAA4B9J,EAA5B8J,wBACb3J,EAAcnE,EAAUrD,IAC1BiG,EAAW5C,EAAU2C,cAGvBoL,EAGE/J,EAHF+J,wBACAxC,EAEEvH,EAFFuH,iBACAyC,EACEhK,EADFgK,qBAGI5D,EAAWrF,EAAK/E,EAAUyC,KAEhC,GAAI2H,GAAY,EACd,MAAO,CACL6D,kBAAmB,CACjBH,0BACAC,0BACAxC,mBACAyC,wBAEFpL,SAAUuB,GAId,IAOI+J,EAPEC,EAAcxC,IAKpBJ,EAAmB3I,EAAWuB,EAK5B+J,EADEH,EAA0B,EAE1BI,EAAcJ,EAA0BC,EAEb,EAG/BF,EAAwBM,cAAgBF,EAExC,IAAMG,EACJP,EAAwBQ,UAAY,EAChCR,EAAwBM,aAAeN,EAAwBQ,UAC/D,EAENR,EAAwBQ,WAAa,EAErC,IAGIC,EAHEC,EACHrR,EAAeiN,EAAYiE,EAmB9B,OAZEE,EAHEhD,GAEFgD,GADAA,EAAc3L,EAAW4L,GACG,EAAI,EAAID,GACRpK,EAAcA,EAAcoK,GAGxDA,GADAA,EAAc3L,EAAW4L,GACGrR,EAAeA,EAAeoR,GAC9BpK,EAAcA,EAAcoK,EAQnD,CACLN,kBAAmB,CACjBH,0BACAC,wBALJA,EAA0BI,GAF1BH,EAAwB5D,EAAWjN,GADnCyF,EAAW2L,IASPhD,mBACAyC,wBAEFpL,YC1GJ,IACA,GADiC,CAAC,UAAW,UAAW,MAAO,Q,2GCc/D,IAAM6L,GAAoB7O,SAAS8O,cAAc,OAAOC,MAClDC,GAA2C,GAClC,SAASC,GACtBtP,EACA0C,GAEA,GAAI2M,GAAiBrP,GACnB,OAAOqP,GAAiBrP,GAE1BkP,GAAkBK,QAAU,GAM5B,IAJA,IAAI5M,EAAO3C,EACLwP,EAAS,CAAC9M,GAAJ,O,gDAAsB+M,K,gjBAC5BC,EAAIF,EAAOnV,OAER2S,EAAQ,EAAGA,EAAQ0C,EAAG1C,GAAS,EAAG,CACzC,IAAMjT,EAAQyV,EAAOxC,GACrB,GAAIjT,EAAO,CAKT,GAJ6B,MAAzB4I,EAAKgN,UAAU,EAAG,KACpBhN,EAAOA,EAAKkD,QAAQ,cAAe,KAErCqJ,GAAkBpJ,EAAYnD,IAAkB5I,EAC5CmV,GAAkBK,QAEpB,OADAF,GAAiBrP,GAAgB2C,EAC1BA,EAET,IAAK,IAAIuC,EAAQvH,EAAqB,EAAGuH,GAAS,EAAGA,GAAS,EAAG,CAC/D,IAAMK,EAAI,IAAH,OAAOxK,EAAYmK,GAAnB,YAA6BvC,GAEpC,GADAuM,GAAkBpJ,EAAYP,IAAexL,EACzCmV,GAAkBK,QAEpB,OADAF,GAAiBrP,GAAgBuF,EAC1BA,I,MAOf,OAFA8J,GAAiBrP,GAAgBA,EAE1BA,ECjDT,IAOA,GAP8B,WAC5B,IAAMkP,EAAoB7O,SAAS8O,cAAc,OAAOC,MACxD,OAAO,SAACQ,GAEN,OADAV,EAAkBK,QAAUK,EACrBV,EAAkBK,SAJC,GCAf,SAASM,GAAiBC,GACvC,OAAOA,EAAIjK,QAAQ,QAAS,ICCf,SAASkK,GACtBH,GAEA,IAAMI,EAAgB,UAAGJ,EAAH,KAAqB5U,MAAM,KAC3CiV,EAAsC,GAW5C,OAVAD,EAAcnP,SAAQ,SAAC9G,GACrB,IAAMmW,EAAWnW,EACXoW,EAAgBD,EAASnQ,QAAQ,KAAO,EACxCC,EAAekQ,EAASP,UAAU,EAAGQ,EAAgB,GACvDnQ,IACFiQ,EAAYJ,GAAiB/J,EAAY9F,KAAkB0F,EACzDwK,EAASP,UAAUQ,EAAeD,EAAS7V,aAI1C4V,E,2GCjBT,IAAMf,GAAoB7O,SAAS8O,cAAc,OAAOC,MAClDC,GAA6C,GACpC,SAASe,GACtBpQ,EACA0C,GAEA,GAAI2M,GAAiBrP,GACnB,OAAOqP,GAAiBrP,GAG1BkP,GAAkBK,QAAU,GAW5B,IATA,IAAMc,EAAkB9D,EAAevM,GAEjCsQ,EAAoC,GAEtCC,EAAW,EAETf,EAAS,CAAC9M,GAAJ,O,gDAAsB+M,K,gjBAC5BC,EAAIF,EAAOnV,OACb6V,EAAW,GACNlD,EAAQ,EAAGA,EAAQ0C,EAAG1C,GAAS,EAAG,CACzC,IAAMjT,EAAQyV,EAAOxC,GACrB,GAAIjT,IACFmV,GAAkBmB,GAA4BtW,EAC9CmW,EAAWhB,GAAkBsB,KAAKD,IAEhC,MAKN,I,MAAoB,KAAbL,GACLI,EAAwBxT,KAAKoT,GAE7BK,GAAY,EACZL,EAAWhB,GAAkBsB,KAAKD,GAIpC,OADAlB,GAAiBrP,GAAgBsQ,EAC1BjB,GAAiBrP,GC3CnB,SAASyQ,GAAQC,EAAsBC,GAC5C,OAAOD,EAAQE,aAAaD,GAGvB,SAASE,GACdH,EACAC,EACAG,GAEA,OAAOJ,EAAQK,aAAaJ,EAAUG,GCTzB,SAASE,GACtBC,EACAC,EACAC,GAGA,IADcA,GAAeA,IAE3B,MAAM,IAAIC,MAAJ,yDAC8CH,EAD9C,yBACgEC,EADhE,S,uOCCH,IAAMG,GAGT,GAESC,GAGT,GAEJ,SAASC,GAAUN,GACjB,OAAQA,GACN,IAAK,WACH,OAAOK,GAET,QACE,OAAOD,IAGN,SAASG,GACdC,EAMAlS,EAIA0R,GAEA,IAAM7R,EAASmS,GAAUN,GAEnBS,EAAe,WACnB,GACkC,iBAAzBD,GACPhV,EAAe2C,EAAQqS,GAEvB,OAAOA,EAET,IAAI7K,EAAI,GAQR,OAPAvH,EAAYoS,GAAsB,SAACE,EAAgB3R,GACjD,QAAIvD,EAAe2C,EAAQY,KACzB4G,EAAI5G,GACG,MAIJ4G,EAfY,GAiBrBoK,GACE,wBADY,sDAEkCU,EAFlC,aAGZ,WACE,QAASA,KAGuB,WAAhC,GAAOD,GACTnY,OAAOI,OAAO0F,EAAQqS,GAEtBrS,EACEqS,GACElS,EAID,SAASqS,GACd9O,EACAmO,GAEA,IAAM7R,EAASmS,GAAUN,GACzBnO,EAAMjC,SAAQ,SAAC8B,UACNvD,EAAOuD,MAcX,SAASkP,GACdlP,EACAsO,GAEA,IAAM7R,EAASmS,GAAUN,GACzB,QAAIxU,EAAe2C,EAAQuD,IAClBvD,EAAOuD,GChGH,SAASmP,GAAQ3L,GAC9B,IAAMzD,EAAgBgD,EAAWS,GAE3BZ,EAAIsB,WAAWnE,GACrB,OACErH,OAAOC,MAAMiK,IACb7C,EAAc3C,QAAQ,MAAQ,GAC9B2C,EAAc3C,QAAQ,MAAQ,EAEvB,GAGF2C,EACJ1H,MAAMuK,EAAE/L,YACRoG,KAAK,IACLiG,QAAQ,aAAc,ICd3B,IAAMkM,GAA0C,GAEzC,SAASC,GACd5E,GAEA,IAAMvQ,OAAI/B,EACJuB,EAAI+Q,EACV/Q,EAAErC,OAAS6C,EACXR,EAAE2Q,MAAQnQ,EACVR,EAAE4V,UAAYpV,EACdR,EAAEqI,cAAgB7H,EAClBR,EAAE2D,aAAenD,EACjBR,EAAEoR,iBAAmB5Q,EACrBR,EAAE6V,QAAUrV,EACZR,EAAE4U,KAAOpU,EACTR,EAAE8V,oBAAsBtV,EACxBkV,GAAsBjV,KAAKT,GAyBd,SAAS+V,GACtBC,EACArY,EACAgT,EACAmF,EACAlB,GAEA,IAAMqB,EAA0C,GA8BhD,OA7BAjT,EAAYgT,GAAqB,SAACE,EAAIvS,GACpC,IAhBIuF,EAgBAiN,GAAkB,EAClBnO,EAAU,IASd,GARAhF,EAAYkT,GAAI,SAACxY,EAAOqC,GAEtB,OADAoW,EAAkBzY,IAAUwY,EAAGlO,MAI/BA,EAAUjI,GACH,MAGPK,EAAe8V,EAAI,MACnB9V,EAAe8V,EAAI,QACnBC,EACA,CACA,IAAMnW,EAAK0V,GAAsBU,SAAW,GAC5CpW,EAAErC,OAASA,EACXqC,EAAE2Q,MAAQA,EACV3Q,EAAE4V,WAlCA1M,EAA8B,GACpClG,EAiC6CkT,GAjCtB,SAACG,EAAetW,GALzC,IC/BMuW,EACEC,EACAxD,EDmCJ7J,EAAEnJ,ICrCAuW,EAAY,EACVC,EAA8B,IAC9BxD,EDmCqCsD,ECnCd7M,QAAQ,OAAQ,MAAMA,QAAQ,UAAW,MAChEA,QAAQ,gBAAgB,SAAC/E,EAAWgH,GACxC,IAAM1H,EAAIgP,EAAMO,UAAUgD,EAAW7K,GAQrC,OAPI1H,GACFwS,EAAkB9V,KAAKsD,GAGzBwS,EAAkB9V,KAAKgE,GACvB6R,EAAY7K,EAAI,EAEThH,KAET8R,EAAkB9V,KAAKsS,EAAMO,UAAUgD,EAAWrN,MAE3CsN,EDgBEC,QAAO,SAACjQ,GAAD,MAAa,MAANA,SAOhB2C,GA+BHlJ,EAAEqI,cAAgBuH,EAAyB3S,OAAOkB,KAAK+X,IACvDlW,EAAE2D,aAAeA,EACjB3D,EAAE4U,KAAOA,EACT5U,EAAE8V,oBAAsBA,EAExBG,EAAsBxV,KAAKT,OAIxBiW,EEpFM,SAASQ,GAAaC,GACnC,QAAQA,EAAkBC,UAA2BD,aAAaE,WCc7D,SAASC,GACdlZ,GAEA,IAAMgN,EAAIsI,GAAqB,aACzB6D,EAAUnZ,EAAOoV,MAAMpI,GAC7B,QAAImM,GACKpD,GACLoD,EAAQtN,QAAQ,OAAQ,KAAKA,QAAQ,OAAQ,MAK5C,SAASuN,GACdC,GAEA,IAAIC,EAAW,GAUf,OATAjU,EAAYgU,GAA0B,SAACzQ,EAAG2C,GACpC3C,IACF0Q,GAAY,GAAJ,OAAO/N,EAAP,YAAYG,EAAW9C,GAC5BiD,QAAQ,UAAW,KACnBA,QAAQ,KAAM,MACdA,QAAQ,MAAO,KAHV,SAOLyN,EAGT,SAASC,GACPvZ,EACAgG,EACA0C,EACA8Q,GAEA,IAAMC,EAASzT,EACTyC,EAAa+Q,EAAgBE,aAC7BvP,EAAMnK,EACNgN,EAAIsI,GAAqB,aACzB+D,EAA2BH,GAA2BlZ,IAAW,GAElEyC,EAAegG,EAAYgR,KAC9BhR,EAAWgR,GAAUJ,EAAyBI,IAAW,IAE3DJ,EAAyBI,GAAU/Q,EAEnCyB,EAAIiL,MAAMpI,GAAKoM,GAAiCC,GAGlD,SAASM,GACP3Z,EACAgG,EACA0C,EACA8Q,GAEA,IAAM/Q,EAAa+Q,EAAgBpE,MAC7BjL,EAAMnK,EAEPyC,EAAegG,EAAYzC,KAC9ByC,EAAWzC,GAAgBmE,EAAIiL,MAAMpP,IAEvCmE,EAAIiL,MAAMpP,GAAyB0C,EAGrC,SAASkR,GACP5Z,EACAgG,EACA0C,EACA8Q,GAEA,IAAMK,EAAQ7T,EACRmE,EAAMnK,EACNyI,EAAa+Q,EAAgBM,OAC9BrX,EAAe+W,EAAiBK,KACnCpR,EAAWoR,GAAS1P,EAAI0P,IAE1B1P,EAAI0P,GAASnR,EAGf,SAASqR,GACP/Z,EACAgG,EACA0C,EACA8Q,GAEA,IAAMK,EAAQtH,EAAevM,GAEvByC,EAAa+Q,EAAgBQ,KAC9BvX,EAAegG,EAAYzC,KAC9ByC,EAAWzC,GAAgByQ,GAAQzW,EAAQ6Z,IAG7ChD,GAAQ7W,EAAQ6Z,EAAOnR,GAGzB,SAASuR,GACPja,EACAgG,EACAjG,EACAma,EACAlH,GAEA,OAAO6E,GAAkB7R,EAAc,WAAhC6R,CACL9X,EACAma,EACAla,EACAgT,GAIG,SAASmH,GACd7B,EACA7N,GACmD,IAEjD2P,EAGE3P,EAHF2P,qCACApI,EAEEvH,EAFFuH,iBACAvL,EACEgE,EADFhE,UAEI4C,EAAW5C,EAAU2C,cAqJ3B,OAnJAkP,EAAsBtO,QAAQnD,SAAQ,SAACxE,EAAG2Q,GACxC,IAAMI,EAAiB/Q,EACjBrC,EAASoT,EAAepT,OAE9B,IACG8Y,GAAa9Y,MAAW,kBAAmBA,IAC1CA,EAAuBqa,eACvBra,EAAuBsa,WAIpB,CACAF,EAAqChH,EAAeJ,SACvDoH,EAAqChH,EAAeJ,OAAS,CAC3DoC,MAAO,GACP4E,KAAM,GACNF,OAAQ,GACRJ,aAAc,KAGlB,IAAIa,EAAO,EACPra,EAAK0D,EAET,GAAIwP,EAAe1I,cAEjB,IADA,IAAMgL,EAAItC,EAAe1I,cAAcrK,OAC9BF,EAAI,EAAGA,EAAIuV,EAAGvV,GAAK,EAAG,CAC7B,IAAMiC,EAAMgR,EAAe1I,cAAcvK,GACzC,GAAIkJ,GAAYjH,EAAK,CACnBlC,EAAKkC,EACL,MAEFmY,EAAOnY,EAGX,IAAIoY,EACFta,EAAKqa,EAAO,EACP3W,GAAgB1D,EAAKqa,IAAUlR,EAAWkR,GAC3C3W,EAEN,GACoC,iBAA3BwP,EAAe8E,SACtB9E,EAAe8E,UAAYhY,GAC1B8R,EAQDoB,EAAe8E,QAAUhY,MAPzB,CACA,IAAMkG,EAAIlG,EACVsa,EAA4BxI,EAAmB,EAAIpO,EACnD1D,EAAKkT,EAAe8E,QACpB9E,EAAe8E,QAAU9R,EACzBmU,EAAOra,EAKT,GAAI8R,EAAkB,CACpB,IAAMyI,EAAKF,EACXA,EAAOra,EACPA,EAAKua,EACLD,EAA4BxI,EACxBpO,EAAe4W,EACfA,EAGN,GAA4B,aAAxBpH,EAAe6D,KAAqB,CACtC,IAAMyD,EAASjQ,EAAyBtB,OACrC,IAAWqR,EACZxa,EACAoT,EAAeJ,MACfI,EAAe+E,qBAGXwC,EACJvH,EAAeK,mBACdzB,EACGoB,EAAe6E,UAAU,KACzB7E,EAAe6E,UAAU,IAE/B7E,EAAeK,iBAAmBwG,GAChCja,EACAoT,EAAepN,aAEfgM,EACIoB,EAAe6E,UAAUsC,GACzBnH,EAAe6E,UAAU/X,GAE7B,EAAa,IAATwa,EACJtH,EAAeJ,OAIdG,GACCC,EAAepN,aACfS,EACA2M,KAGFA,EAAeK,iBAAmBwG,GAChCja,EACAoT,EAAepN,aACf2U,EACA,IACAvH,EAAeJ,YAGd,CASL,IAAI4H,EAQJ,GAhBAxH,EAAeK,iBC5NR,SACbL,EACAyH,EACAC,EACAC,EACApR,GAEA,IAAMqR,EAAc5H,EAAe6E,UAAU4C,EAAU,IAEjDI,EAAY7H,EAAe6E,UAAU4C,EAAU,IAE/CvB,EAAqB,GAgC3B,OA9BA2B,EAAUpU,SAAQ,SAAC9G,EAAOiT,GACxB,IAGI0H,EAHEQ,EAAkBF,EAAYhI,GAChCtH,EAAWsP,EAAYhI,IACvB,IAGJ,GAAK3R,OAAOC,MAAMuL,WAAW9M,IAoB3B2a,EAAS3a,MApB2B,CACpC,IAAMob,EAAgBrD,GAAQ/X,IAAU+X,GAAQoD,IAAoB,GAE9DE,EAAavO,WAAWqO,GACxBG,EAAWxO,WAAWnB,EAAW3L,IAQvC2a,EAASU,GAPTV,EAASK,EACN,IAAWD,EACZ1H,EAAepT,OACfoT,EAAeJ,MACfI,EAAe+E,uBAGekD,EAAWD,GAEvCzR,IACF+Q,EAASvX,KAAKwG,MAAM+Q,EAAS/Q,GAASA,GAGxC+Q,EAAS,IAAH,OAAOA,EAAOlb,WAAa2b,GAInC7B,EAASxW,KAAK4X,MAEThP,EA1DT,SAAoC4P,GAClC,IAAM9F,EAAS8F,EACTC,EAAS/F,EAAOhU,WAAU,SAACoH,GAAD,OAAOA,EAAE7C,QAAQ,QAAU,KAC3D,GAAIwV,GAAU,EAAG,CACf,IAAIvI,EAAQuI,EACZ,EAAG,CACD,IAAM3S,EAAIvH,OAAOqK,EAAW8J,EAAOxC,KAC9B3R,OAAOC,MAAMsH,KAChB4M,EAAOxC,GAAS7P,KAAKwG,MAAMf,IAAMkP,GAAQtC,EAAOxC,KAAW,KAE7DA,GAAS,QACgB,MAAlBwC,EAAOxC,IAElB,OAAOwC,EA6CWgG,CAA2BlC,GAAU1T,KAAK,KDiLpB6V,CAChCrI,EACA,CAACmH,EAAMra,GACPsa,EACA/P,EAAyBtB,OACzB1C,EAAUkD,OAKgBwJ,GAC1BC,EAAepN,aACfS,EACA2M,GAGuB,CACvB,OAAQA,EAAe6D,MACrB,IAAK,YACH2D,EAAIrB,GACJ,MACF,IAAK,OACHqB,EAAIb,GACJ,MACF,IAAK,SACHa,EAAIhB,GACJ,MACF,QACEgB,EAAIjB,GAIRiB,EACExH,EAAepT,OACfoT,EAAepN,aACfoN,EAAeK,iBACf2G,EAAqChH,EAAeJ,eAnI1DgF,GAA+B5E,GAC/BkF,EAAsBpV,OAAO8P,EAAO,MAyIjCsF,EExRM,SAASoD,GACtBjR,GAEA,IAAM3D,EAAI2D,EAOV,OANA3D,EAAEyN,wBAA0B,CAC1BM,aAAc,EACdE,UAAW,GAEbjO,EAAE0N,wBAA0B,EAC5B1N,EAAE2N,qBAAuB,EAClB3N,ECPT,IAOI6U,GAPAC,GAKE,GAmCS,SAASC,GACtBpR,EACAnB,EACAwS,EACAC,GAEAH,GAAiB9Y,KAAK,CACpB2H,2BACAnB,QACAwS,YACAC,2BAEGJ,KA1CLA,GAAYK,aAAY,WACtB,GAAgC,IAA5BJ,GAAiBvb,OAGnB,OAFA4b,cAAcN,SACdA,QAAY7a,GAGd8a,GAAmBA,GAAiB/C,QAAO,SAACrD,GAC1C,IAAM5M,EAAI4M,EACJhP,EAAI4L,IAAexJ,EAAEkT,UACrBpV,EAAQkC,EAAE6B,yBAAyBhE,UAAUC,MACnD,OAAIA,IAAUjD,EAAiB,IACzB+C,GAAKoC,EAAEU,OACTV,EAAE6B,yBAAyByR,wBAA0BtT,EAAEU,MAAQ9C,EAC/DkV,GAA6B9S,EAAE6B,0BAC/B7B,EAAE6B,yBAAyByR,wBAA0B,EAErDtT,EAAEmT,uBAAuBnT,EAAE6B,2BACpB,GAIP/D,IAAUjD,EAAiB,IAAMiD,IAAUjD,EAAiB,QAMjE,IC3BU,SAAS0Y,GACtB1R,GAGM,IAFN2R,EAEM,wDADNC,EACM,uDADiB,EAEjBvV,EAAI2D,EACFhE,EAAuCK,EAAvCL,UAAWyV,EAA4BpV,EAA5BoV,wBAEdpV,EAAEwV,yBACL5I,GAAgChB,EAAgB,GAAIjM,GAGtD,IAAM6C,EAAQnG,KAAKC,IAAIoI,EAAK/E,EAAU6C,OAAS+S,EAAsB,GAEjE/S,EAAQ,IAAM4S,IAA4BE,GAC5CP,GACE/U,EACAoV,GAA2B5S,EAC3B8I,KACA,WACEsB,GAAgChB,EAAgB,IAAKjM,GACrDyN,GAAoBpN,OAIxB4U,GAA6B5U,GAE7BA,EAAEoV,wBAA0B,EAE5BxI,GAAgChB,EAAgB,IAAKjM,GAEjDK,EAAEL,UAAU8V,sBAAwBzV,EAAEwV,0BACxCxV,EAAEwR,sBAAwB6B,GACxBrT,EAAEwR,sBACFxR,GAEFA,EAAEL,UAAU8V,qBAAsB,GAEpCrI,GAAoBpN,ICjDT,SAAS0V,GACtB/R,GAEA,IAAMhE,EAAYgE,EAAyBhE,UAC3CnH,OAAOI,OAAO+K,EAA0B,CACtCE,gBAAiB,EACjB2R,yBAAyB,IAG3Bhd,OAAOI,OAAO+G,EAAW,CACvBC,MAAOjD,EAAiB,GACxByH,MAAO,IAET,IAAMuR,EAA0BjS,EAC9BC,GAaF,OAVAnL,OAAOI,OAAO+K,EAA0B,CACtCiS,kBAAmBjW,EAAU2C,cAC7BuB,gBAAiB8R,EAAwB9R,kBAG3CrL,OAAOI,OAAO+G,EAAW,CACvB2C,cAAeqT,EAAwBpT,SACvCjG,IAAKqZ,EAAwB7R,cAGxBH,EC3BM,SAASkS,GACtBlS,GAWA,OATAA,EAAyB6N,sBAAsBzR,SAAQ,SAACuM,GAC5CA,EAIR8E,aAAUpX,KAEd4a,GAA6BjR,GAC7B+R,GAAuB/R,GAChBA,E,6rBC8CM,SAASmS,GACtBtI,GAMM,IAEJ7N,EAEE6N,EAFF7N,UACA2T,EACE9F,EADF8F,qCAEF,GAAK3T,EAAUwB,cAAf,CA5BF,IAEQwC,KAA2BlH,EA6BbkD,EA5BRjD,gBAGVmZ,GAA2BlS,GAC3B0P,GACE1P,EAAyB6N,sBACzB7N,IAyBJ,IAFA,IAAMzB,EAAUvC,EAAUuC,QATpB,WAWGgK,GACP,IACQhT,EADagJ,EAAQgK,GACrBhT,OAEFwZ,EAAkBY,EAAqCpH,GACzD8F,GAAa9Y,IAtErB,SACEA,EACAwZ,GAEA,IAAMxM,EAAIhN,EACVqF,EAAYmU,EAAgBQ,MAAM,SAACja,EAAO4I,GdRrC,IAA0CgO,EcSzC5W,EACF8W,GAAQ7J,EAAGrE,EAAM5I,IdV0B4W,EcY7BhO,EAAHqE,EdXA6P,gBAAgBlG,Occ/BtR,EAAYmU,EAAgBpE,OAAO,SAACrV,EAAO4I,GAEvCqE,EAAEoI,MAAMzM,GADN5I,GAGuB,MAI7B,IAAMsZ,EAA2BH,GAA2BlM,GAE5D,IAAK4G,GAAc4F,EAAgBE,cAAe,CAChD,IAAM9M,EAAI0I,GAAqB,aAC/BtI,EAAEoI,MAAMxI,GAAKwM,GAAiC,SACzCC,GACAG,EAAgBE,gBA6CnBoD,CAAiB9c,EAAuBwZ,GAE1CnU,EAAYmU,EAAgBM,QAAQ,SAAC/Z,EAAO4I,GAC1C3I,EAAO2I,GAAiB5I,MATnBiT,EAAQhK,EAAQ3I,OAAS,EAAG2S,GAAS,EAAGA,GAAS,EAAG,EAApDA,IC3EI,SAAS+J,GACtBtS,GAEA,IAAMuS,EAAmBvS,EACzB,GAAIuS,EAAiBd,wBAA0B,EAC7CC,GAA0Ba,OAD5B,CAIA,IAAMC,EAAyB5I,GAC7B2I,GAGF1d,OAAOI,OAAOsd,EAAkBC,EAAuBvI,mBAEvDsI,EAAiBvW,UAAU2C,cAAgB6T,EAAuB5T,SAElE6K,GAAoB8I,ICTP,SAASE,GACtBzS,GAEA,IAAM3D,EAAI2D,EACFhE,EAAcK,EAAdL,UACF0W,EAAgBrW,EAAhBqW,YACFvS,EAAcnE,EAAUrD,IAEtBga,EAAqB3W,EAAUwC,KACjCgC,EAAsBxE,EAAUyE,MAEhCmS,GAAsB,EAc1B,GAZAvW,EAAEwR,sBAAsBzR,SAAQ,SAACtE,GACrBA,EACR2V,aAAUpX,KAKTqc,IACHlS,GAAuB,GAEzBxE,EAAUyE,MAAQD,EAGhBmS,EAAqBnS,GACrBmS,IAAuB9R,MACA,IAAvB8R,EACA,CACID,IACFE,EAAqB5W,EAAU2C,cAC/B+T,GAAc,EACdzJ,GAAgChB,EAAgB,GAAIjM,IAGtD,IAAMgW,EAA0BjS,EAAwB1D,GAiBxD,GAfAA,EAAE6D,gBAAkB8R,EAAwB9R,gBAC5C7D,EAAE4V,kBAAoBD,EAAwBpT,SAE9CuB,EAAc6R,EAAwB7R,YAEtC8I,GAAgChB,EAAgB,GAAIjM,GACpDiN,GAAgChB,EAAgB,GAAIjM,GAEpDiV,GAA6B5U,GAE7BA,EAAEqW,YAAcA,EAEhB1W,EAAUrD,IAAMwH,EAChBnE,EAAU2C,cAAgBqT,EAAwBpT,SAE9CgU,GAAsB,EAIxB5W,EAAU2C,cAAgBiU,EAE1BN,GAA0BjW,OACrB,CACL,IAAMmW,EAAyB5I,GAAsCvN,GAErExH,OAAOI,OAAOoH,EAAGmW,EAAuBvI,mBACxCjO,EAAU2C,cAAgB6T,EAAuB5T,SACjD8S,GAA0BrV,SAG5B4M,GAAgChB,EAAgB,GAAIjM,GCxEzC,SACbgE,GAEA,IAAMuS,EAAmBvS,EACjBhE,EAAcgE,EAAdhE,UAUR,GATAA,EAAUC,MAAQjD,EAAiB,GACnCiQ,GAAgChB,EAAgB,GAAIjM,GAEpDiN,GAAgChB,EAAgB,GAAIjM,GAEhDA,EAAU6W,WACZ5J,GAAgChB,EAAgB,IAAKjM,GAGnDA,EAAUgD,YACZhD,EAAUuB,eACL,GAAIvB,EAAUmD,MAAO,CAC1B,IAAM3B,EAAgBxB,EAAUwB,cAChCxB,EAAUwB,eAAgB,EAE1B2U,GAAqBI,GAErBvW,EAAUwB,cAAgBA,GDmD1BsV,CAAmBzW,GEtER,SAAS0W,GACtB/S,GAEA1H,IAEA,IAAMia,EAAmBvS,EACjBhE,EAAcuW,EAAdvW,UAER,GAAIA,EAAUC,QAAUjD,EAAiB,GAAI,KACnCuO,EAAqBgL,EAArBhL,iBACFpH,EAAcnE,EAAUrD,IACxBiG,EAAW5C,EAAU2C,cAC3B,GACG4I,GAAoB3I,EAAWuB,IAC9BoH,GAAoB3I,EAAWuB,GACjCvB,IAAauB,EACb,CACAnE,EAAU2C,cAAgBwB,EAE1B,IAAMrB,EAAWpG,KAAKC,IAAIoI,EAAK/E,EAAU8C,WAErCA,EAAW,EACbsS,GACEmB,EACAzT,EACA6I,IACA8K,IAGFA,GAA4BF,QAG9BD,GAA0BC,IC3BhC,IAAIS,IAAsB,EAKX,SAAS3J,KACtB,IAAI2J,GAAJ,CAGA,IAAM1J,EAAmBC,KAIzByJ,IAAsB,EAEtB3J,KAwCF,SACElB,EACA8K,GAEA,GAAIC,GAAQ,CACV,IAAMC,EAA0B1c,OAAOC,uBAAsB,WAC3DyR,IAbN,SAA+BiL,GAC7B,GAAIF,GACF,OAAOzc,OAAOE,qBAAqByc,GAE9B3c,OAAO8B,aAAa6a,GAUvBC,CAAsBF,MAExB,OAAOA,EAED3a,YAAW,WACjB2P,MACY,GApDdmL,EAAiB,WACf,GAAInK,GAAcG,GAChB0J,IAAsB,MADxB,CAKA,IAAMO,EAA4D,GAElE3Y,EAAY0O,GAAkB,SAACrL,EAAe1C,GACxC0C,IACFsV,EAAgBhY,GAAgB0C,MAIpC9F,EAAuBob,EAAiBjK,GAKxC0J,IAAsB,EACtBxJ,KCnCW,SACb+J,GAEA3Y,EACE2Y,GACA,SAACvT,GACC,IAAMuS,EAAmBvS,EAEjBhE,EAAqCuW,EAArCvW,UAAW6R,EAA0B0E,EAA1B1E,sBACbgE,EAA4BU,EAA5BV,wBAEDhE,EAAsB,IC1BlB,SACb7R,GAEAA,EAAUuB,UDwBJiW,CAAmCxX,GAGjCA,EAAUC,QAAUjD,EAAiB,IAAM6U,EAAsB,KACnE0E,EAAiB1E,sBAAwB6B,GACvC7B,EACA0E,GAGGV,IACH5I,GAAgChB,EAAgB,GAAIjM,GACpD6V,GAA0B,EAC1BU,EAAiBV,yBAA0B,GAGX,mBAAvB7V,EAAU4C,UACnB5C,EAAU4C,SAAS5C,EAAU2C,eAG/BsK,GAAgCjN,EAAU2C,cAAe3C,GACzDiN,GAAgChB,EAAgB,GAAIjM,OAK1D,IAAMyX,EAAwB9L,IAC9B/M,EACE2Y,GACA,SAACvT,GACC,I9B+EJ0T,EACA1X,EAEMjD,E8BlFIsD,EAAI2D,EAEV3D,EAAEqX,uBACArX,EAAEL,UAAUyE,MAAQM,EAAK1E,EAAE+J,UAAY/J,EAAE2N,qB9B4E/C0J,E8BzEMrX,EAAEqX,uB9B4EF3a,GAFNiD,E8BzEMK,EAAEL,W9B2EsBjD,YACzBiP,EAAsBjP,IAI3B6B,EAD6BoN,EAAsBjP,IACjB,SAAC0P,EAAa9K,GAC9C,IAAMgW,EAAQvR,WAAWzE,GACpB/G,OAAOC,MAAM8c,IACZD,GAA0B3S,EAAK4S,IACjClL,EAAYlJ,QAAQnD,SAAQ,SAAC0M,GAC3BA,EAAc9T,KACZgH,EAAU+M,UACVpL,EACA3B,EAAU+M,WAEZT,EAA6B3K,EAAWmL,EAAe9M,S8BxF3DK,EAAEoX,sBAAwBA,EAC1BV,GAAgC1W,MDflCuX,CAAoCL,QAIxChC,aAAY,WACVlI,O/CM8B,I+CHhCA,KAEA,IAAM6J,GAAiD,mBAAjCzc,OAAOC,sBG5Cd,SAASmd,GACtB7T,GAEM,IADN2R,EACM,wDACAtV,EAAI2D,EAEV,IAAI2J,GAAuBtN,EAAEtD,aAA7B,CAHM,IAUE6Y,EAAyBvV,EAAzBuV,qBAEFY,EAAyB5I,GAAsCvN,GACrExH,OAAOI,OAAOoH,EAAGmW,EAAuBvI,mBAExC5N,EAAEuV,qBAAuB,EAEzBvV,EAAEL,UAAUC,MAAQjD,EAAiB,GACrCqD,EAAEL,UAAU2C,cAAgB6T,EAAuB5T,SAEnD8S,GAA0BrV,EAAGsV,EAAaC,ICpCrC,SAASkC,GAAMzX,GACpB,MAAO,qCAAqC0X,KAAK1X,GAE5C,SAAS2X,GAAM3X,GACpB,MAAO,OAAO0X,KAAK1X,GAEd,SAAS4X,GAAM5X,GACpB,MAAO,OAAO0X,KAAK1X,GAEd,SAAS6X,GAAQ7X,GACtB,IAAMN,EAAIqP,GAAiB/O,GAAG9F,MAAM,KACpC,QAAIwF,EAAEnG,OAAS,GAAc,KAATmG,EAAE,MAGf+X,GAAMzX,IAAM2X,GAAM3X,IAAM4X,GAAM5X,IAoEhC,SAAS8X,GAAW7e,GACzB,IAlEwB8e,EAClBC,EAiEA3S,EAAM0J,GAAiB9V,GAC7B,OAAI0e,GAAMtS,IAlEJ2S,EAAM,kCAAkCpS,KADtBmS,EAoEL1S,IAlEN,QAAH,OAAW2S,EAAI,GAAf,OAAyBD,EAoE/BN,GAAMpS,GAjEL,SAAmB4S,GACxB,IACMC,EAAMD,EAASlT,QADT,oCACsB,SAACoT,EAAIC,EAAGC,EAAGrR,GAC3C,OAAOoR,EAAIA,EAAIC,EAAIA,EAAIrR,EAAIA,KAEvBgR,EAAM,4CAA4CpS,KACtDsS,GAEIE,EAAIE,SAASN,EAAI,GAAI,IACrBK,EAAIC,SAASN,EAAI,GAAI,IACrBhR,EAAIsR,SAASN,EAAI,GAAI,IAC3B,qBAAeI,EAAf,YAAoBC,EAApB,YAAyBrR,EAAzB,OAuDSuR,CAAUlT,GAEfuS,GAAMvS,GAtDL,SAAmBmT,GACxB,IA4BIJ,EACAC,EACArR,EA9BEyR,EACJ,0CAA0C7S,KAAK4S,IAC9C,uDAAuD5S,KACtD4S,GAEEE,EAAIJ,SAASG,EAAI,GAAI,IAAM,IAC3BnZ,EAAIgZ,SAASG,EAAI,GAAI,IAAM,IAC3B7J,EAAI0J,SAASG,EAAI,GAAI,IAAM,IAC3BzY,EAAIyY,EAAI,IAAM,EACpB,SAASE,EAAQ7S,EAAW8S,EAAW1S,GACrC,IAAI2S,EAAK3S,EAOT,OANI2S,EAAK,IACPA,GAAM,GAEJA,EAAK,IACPA,GAAM,GAEJA,EAAK,EAAI,EACJ/S,EAAc,GAAT8S,EAAI9S,GAAS+S,EAEvBA,EAAK,GACAD,EAELC,EAAK,EAAI,EACJ/S,GAAK8S,EAAI9S,IAAM,EAAI,EAAI+S,GAAM,EAE/B/S,EAKT,GAAU,IAANxG,EACF8Y,EAAIxJ,EACJyJ,EAAIzJ,EACJ5H,EAAI4H,MACC,CACL,IAAMgK,EAAIhK,EAAI,GAAMA,GAAK,EAAItP,GAAKsP,EAAItP,EAAIsP,EAAItP,EACxCwG,EAAI,EAAI8I,EAAIgK,EAClBR,EAAIO,EAAQ7S,EAAG8S,EAAGF,EAAI,EAAI,GAC1BL,EAAIM,EAAQ7S,EAAG8S,EAAGF,GAClB1R,EAAI2R,EAAQ7S,EAAG8S,EAAGF,EAAI,EAAI,GAE5B,qBAAmB,IAAJN,EAAf,YAA8B,IAAJC,EAA1B,YAAyC,IAAJrR,EAArC,YAAgDhH,EAAhD,KAYS8Y,CAAUzT,GAEZA,EChGM,SAAS0T,GAAuBjK,GAC7C,OAAOA,EAAe5U,MAAM,cAAc4E,KAAK,IC2BjD,SAASka,GACPpJ,EACAR,EACA6J,GAEA,gBACErJ,EAAQsJ,wBAAwB9J,GAnCpC,SACEvN,EACAoX,GAKA,GAF4D,eAA1DA,EAAmBE,UAAUzgB,WAAWgT,cAEzB,CACf,IAAM0N,EAAiB,UAATvX,EAAmB,CAAC,OAAQ,SAAW,CAAC,MAAO,UACvDwX,EAAS,CAAC,UAAD,OACHD,EAAM,IADH,iBAEHA,EAAM,IAFH,gBAGJA,EAAM,GAHF,yBAIJA,EAAM,GAJF,UAMXE,EAAU,EAQd,OANAD,EAAOtZ,SAAQ,SAACwZ,GACd,IAAMtgB,EAAQ8M,WAAWkT,EAAmBM,IACvChf,OAAOC,MAAMvB,KAChBqgB,GAAWrgB,OAGPqgB,EAGV,OAAO,EAULE,CAAiBpK,EAAU6J,GAF7B,MAqHa,SAASQ,GACtB7J,EACA8J,GAOA,IALA,IAAMC,EA7GR,SACE/J,EACA8J,GAEA,IAAME,EAAehK,EAAQtB,MACvBuL,EAAiBD,EAAanL,QAE9BqL,EAA6BJ,EAE7BK,EAAuBD,EAEvBE,EACiD,SAArDD,EAAqBE,iBAAiB,WAEpCD,IACFJ,EAAaM,QAAU,UACvBN,EAAanL,QAAUoL,GAEzB,IAAMM,EAAgD,GAiFtD,MA/EA,CAAC,MAAO,OAAQ,SAAU,QAAS,QAAS,UAAUpa,SACpD,SAACb,GACC,IAAIkb,EAAiC,EAErC,IACEJ,GACkB,UAAjB9a,GAA6C,WAAjBA,EAaxB,CAOL,IANAkb,EAAgBL,EAAqB7a,MAGnCkb,EAAgBxK,EAAQtB,MAAOpP,IAGX,SAAlBkb,EACF,GAAqB,UAAjBlb,GAA6C,WAAjBA,EAC9Bkb,EAAgBpB,GACdpJ,EACA1Q,EACA6a,OAEG,CACL,IAAIM,EACJ,OAAQnb,GACN,IAAK,MACL,IAAK,OACHmb,EAAgB,EAChB,MAEF,IAAK,QACL,IAAK,SACHA,EAAgB,EAChB,MAEF,QACEA,EAAgB,EAGpB,GAAIA,EAAe,KACTC,EAAaP,EAAbO,SAGO,UAAbA,GACmB,IAAlBD,GAAoC,aAAbC,GAEpBN,IACFJ,EAAaM,QAAU,WAEzBE,EAAgB,GAAH,OACXxK,EAAQsJ,wBACNha,GAFS,MAMb0a,EAAanL,QAAUoL,GAEvBO,EAAgB,OAKxBD,EAAsBjb,GAAgBkb,EAClCG,OAAOH,GACP,QAnEJR,EAAaM,QAAU,UAEvBE,EAAgBpB,GACdpJ,EACA1Q,EACA4a,GAGFF,EAAanL,QAAUoL,EAEvBM,EAAsBjb,GAAgBqb,OAAOH,MA6D5CD,EAUmBK,CAAuB5K,EAAS8J,GACpDe,EAAuC,GACzChL,EAAW,EACXvQ,EAAewa,EAAchK,KAAKD,GAEd,KAAjBvQ,GAAqB,CAC1B,IAAMwb,EAA0B1V,EAAY9F,GACtC0C,EAAgB8X,EAAcO,iBAAiB/a,GAC/B,KAAlB0C,IACF6Y,EAAaC,GACXf,EAAkBe,IAA4B9Y,GAElD6N,GAAY,EACZvQ,EAAewa,EAAchK,KAAKD,GAGpC,OAAOgL,EjCnKPzN,G8BOyBA,GIA3B,IAAM2N,GAAkC,GAExC,SAASC,GAAS1hB,GAChB,OAAQA,EAAO2hB,SAAW3hB,EAAO4hB,UAAUpP,cAuDtC,SAASqP,GAAiB7hB,GAC/B,IAAM8hB,EApDR,SACE9hB,GAQA,IAAMsT,EAASmO,GAAgBC,GAAS1hB,IAExC,IAAKsT,EACH,OAAO,EAGT,IACM,IAAAiD,EAAW,EAAKlW,EAAWiT,EAAXjT,OACpBkW,EAAWlW,EACXkW,GAAY,EAEZ,GAAIjD,EAAOiD,GAAUvW,SAAWA,EAC9B,MAAO,CAAE+hB,KAAMzO,EAAOiD,GAAUwL,KAAM/O,MAAOuD,EAAUjD,UAG3D,OAAO,EA4BwB0O,CAAiBhiB,GAKhD,OAJoB8hB,EAChBA,EAAuBC,KA3B7B,SAA6B/hB,GAC3B,IChDA0W,EAEIuL,ED8CEC,EAAYR,GAAS1hB,GACrBsT,EAASmO,GAAgBS,GACzB1B,IChDFyB,GAFJvL,EDkD2C1W,GC/CjCmiB,cAAcC,cACVH,EAAKI,SACjBJ,EAAO/gB,QAEF+gB,EAAKK,iBAAiB5L,ID4CvB6L,EAAsB,CAC1BviB,SACA+hB,KAAM,CACJvB,gBACAgC,mBAAoBjC,GAAgBvgB,EAAQwgB,GAC5CiC,kBAAmB,kBAAMlC,GAAgBvgB,EAAQwgB,MAUrD,OANIlN,EACFA,EAAOxQ,KAAKyf,GAEZd,GAAgBS,GAAa,CAACK,GAGzBA,EAAoBR,KASvBW,CAAoB1iB,GErDX,SAAS2iB,GACtBjM,EACAd,GAOA,IAAM+K,EAAiBjK,EAAQtB,MAAMG,QAC/BmL,EAAehK,EAAQtB,MACvBwN,EAAgBf,GAAiBnL,GAEjCmM,EAAgD,GAChDC,EAA6D,GAE7DC,EAAqBC,GAAqBpN,GAE1CqN,EAAsBL,EAAcH,qBCjC7B,SACb/L,EACAwM,EACAC,GAEA,IAAMzC,EAAehK,EAAQtB,MAE7BsL,EAAanL,QAAb,UACEmL,EAAanL,QAAUD,GAAqB,aAAc4N,GAD5D,YAEIA,EAFJ,YAEuBC,GD0BvBC,CACE1M,EACA,gBE5CW,SAAgCd,GAC7C,OAAOiK,GAAuBjK,GAAgB5U,MAAM,KAAK4E,KAAK,gBF4C5Dyd,CAAuB,GAAD,OAAIN,KAG5B,IAAMO,EAAqBV,EAAcH,oBAEnCc,EAAiD,GAmCvD,OAlCAle,EACE0Q,GAAuBgN,IACvB,SAACra,EAAe1C,GACdoQ,GACEpQ,EACA0C,GACA7B,SAAQ,SAACqP,GACTqN,EAAoBzX,EAAYoK,IAAaxN,QAKnDrD,EAAYke,GAAqB,SAACC,EAAQxd,GACxC,IG5DFkQ,EH4DQ2D,EAAS7T,EG5DjBkQ,EH6D6B2D,EGxDtBxU,EHwD6Bwd,GGxDJ,SAACW,EAAQxd,GACvC,QCRW,SACbkQ,EACAuN,GAEA,IAAMC,EAAcnR,EAAe2D,GAC7ByN,EAAoBpR,EAAekR,GACzC,GAAIC,IAAgBC,EAClB,OAAO,EAGT,IAAK,IAAIpN,EAAW5S,EAAqB,EAAG4S,GAAY,EAAGA,GAAY,EACrE,GAAI,WAAIxV,EAAYwV,GAAhB,YAA6BmN,KAAkBC,EACjD,OAAO,EAGX,OAAO,EDPDC,CAAgB5d,EAAckQ,OHwD5BoN,EAAmBzJ,IAAoB,YAAVA,IAC/BgJ,EAAsBhJ,GAASyJ,EAAmBzJ,GAElDiJ,EAAmCjJ,GAASoJ,EAAoBpJ,OAKtExU,EAAYwd,GAAuB,SAACna,EAAe1C,GACjD6c,EAAsB7c,GAAgB6Z,GACpCnX,GAGFoa,EAAmC9c,GAAgB6Z,GACjDoD,EAAoBjd,OAIxB0a,EAAanL,QAAUoL,EAChB,CACLkD,OAAQf,EACRgB,MAAOjB,EACPI,sBACAK,sBFNJtH,aAAY,WACV3W,EAAYoc,IAAiB,SAACnO,GAC5BA,EAAOtJ,QAAQnD,SAAQ,SAACxE,EAAG2Q,GAAU,IAC3BhT,EAAWqC,EAAXrC,OACHA,EAAOqa,eAAkBra,EAAOsa,YACnChH,EAAOpQ,OAAO8P,EAAO,WAI1B,KO1FH,IAAM+Q,GAA+C,GAC/C7O,GAAoB7O,SAAS8O,cAAc,OAAOC,M,2GCEzC,SAAS4O,GACtBjT,GAEA,IAOI5H,EAPEpJ,EAAQgR,EAAOhR,MAEf6M,EAAmBmE,EAEnB5E,EAAwB,iBAAVpM,EAAqBA,EAAMP,WAAaO,EAKtDkkB,EAAOrX,EAAEqX,KACTC,EAAOtX,EAAEsX,KACXC,EAAYvX,EAAE2N,MAAQ,EACR,UAAd4J,IACFA,EAAY,SACPvX,EAAE7E,KAAiB,WAAV6E,EAAE7E,IAGd6E,EAAE7E,IAAM,SAFR6E,EAAE7E,IAAM,WAKZ,IAGIqc,EACAC,EACAC,EALEvc,EAAM6E,EAAE7E,KAAO,SACfwc,EAA2B,WAAdJ,EACbK,EAAUrlB,MAAMC,QAAQ+M,GAM5BhD,EADE4H,GAAUA,EAAO5H,QAAmC,iBAAlB4H,EAAO5H,OAClC2I,EAAgBf,EAAO5H,SAAWyH,EAAcG,EAAO5H,QAEvD,KAGPhK,MAAMC,QAAQ+M,IAChBiY,EAAOvX,WAAWV,EAAI,IACtBkY,EAAOxX,WAAWV,EAAI,IAEtBmY,EAAOxM,GAAQ3L,EAAI,KAAO,KAE1BiY,EAAOvX,WAAWV,GAClBkY,EAAO,EAEPC,EAAOxM,GAAQ3L,IAAQ,IAGzB,IAAMsY,EAAQ5X,WAAWD,EAAE6X,QAAoB,GAAKD,EAAUJ,EAAO,GACjE5O,EAAmB,GACnBkP,EAAW,EACf,OAAO,SAACC,EAAYxkB,EAAW6M,GAC7B,IAAI4X,E,EACJ,OAAQT,GACN,IAAK,QACHS,EAAS,EACT,MACF,IAAK,SACHA,GAAU5X,EAAI,GAAK,EAEnB,MACF,IAAK,OACH4X,EAAS5X,EAAI,EAEb,MACF,IAAK,SACH4X,EAASzhB,KAAKE,MAAMF,KAAKoH,UAAYyC,EAAI,IACzC,MACF,QACE4X,EAAST,EAIb,IAAK3O,EAAOnV,OAAQ,CAClB,IAAK,IAAI2S,EAAQ,EAAGA,EAAQhG,EAAGgG,GAAS,EAAG,CACzC,GAAKiR,EAEE,CACL,IAAMY,EAASN,GAAiCN,EAAK,GAAK,GAAK,EAAnCW,EAASX,EAAK,GACpCa,EAASP,GAEVN,EAAK,GAAK,GAAK,EADhB9gB,KAAKE,MAAMuhB,EAASX,EAAK,IAIvBc,EAAYF,EAFN7R,EAAQiR,EAAK,GAGnBe,EAAYF,EAFN3hB,KAAKE,MAAM2P,EAAQiR,EAAK,IAGhC/E,EAAI/b,KAAKuK,KAAKqX,EAAYA,EAAYC,EAAYA,GACzC,MAATd,IACFhF,GAAK6F,GAEM,MAATb,IACFhF,GAAK8F,GAEPxP,EAAO1S,KAAKoc,QAjBZ1J,EAAO1S,KAAKK,KAAKiI,IAAIwZ,EAAS5R,IAmBhC0R,EAAWvhB,KAAKC,IAAL,MAAAD,K,gDAAYqS,I,gjBAErBrM,IACFqM,EAASA,EAAO7I,KAAI,SAAC/D,GACnB,OAAQO,EAA0BP,EAAI8b,EAAUC,EAAIxkB,EAAG6M,GAAK0X,MAGpD,YAAR3c,IACFyN,EAASA,EAAO7I,KAAI,SAAC/D,GACnB,OAAIsb,EACKtb,EAAI,GAAS,EAALA,GAAUA,EAEpBzF,KAAKiI,IAAIsZ,EAAW9b,OAKjC,IAEMsW,EAAIuF,GAFMD,GAAWH,EAAOD,GAAQM,EAAWN,IAExBjhB,KAAKwG,MAAkB,IAAZ6L,EAAOrV,IAAY,KAC3D,OAAOmkB,EAAOpF,EAAIoF,EAAOpF,GCtH7B,SAAS+F,GAAcrc,GACrB,OAAOA,EAAE5H,MAAM,KAAK2L,KAAI,SAACpB,GAAD,OAAOsB,WAAWnB,EAAWH,OASxC,SAAS2Z,GACtBC,GAEA,IAAMplB,EAAQ2L,EAAWyZ,GAEzB,GAAIplB,EAAMgG,QAAQ,MAAQ,GAAKhG,EAAMgG,QAAQ,MAAQ,EAAG,CACtD,IAAMqf,EAAarlB,EAAMiB,MAAM,KACzB0H,EAdV,SAA0BE,GACxB,IAAM7I,EAAQ,WAAW2M,KAAK9D,GAC9B,OAAI7I,GAASA,EAAM,GACVklB,GAAcllB,EAAM,IAEtB6I,EASiBmY,CAAiBrV,EAAW0Z,EAAW,KAEvDC,EAAO,SAAS3Y,KAAK3M,GACrBulB,EAAU,WAAW5Y,KAAK0Y,EAAW,IACrCG,EAAgBH,EAAW,GAC9BvZ,QAAQ,QAAS,IACjBA,QAAQ,WAAY,IAEjBoY,IAAOqB,GACRL,GAAcvZ,EAAW4Z,EAAQ,KAEhCE,EAAgB,GAItB,GAHIvB,IACFuB,EAAcvB,KAAOA,GAEnBoB,GAAQ3Z,EAAW2Z,EAAK,IAAK,CAC/B,IAAMzc,EAAIiE,WAAWnB,EAAW2Z,EAAK,KAErCG,EAAcjL,KAAQlZ,OAAOC,MAAMsH,GAC/B8C,EAAW2Z,EAAK,IAChBzc,EA8BN,OA5BA2c,EAAcvkB,MAAM,KAAK6F,SAAQ,SAACC,GAChC,IAAM8B,EAAI8C,EAAW5E,GACrB,GAAI8B,EACF,GAAIvH,OAAOC,MAAMuL,WAAWjE,IAC1B,OAAQA,GACN,IAAK,IACL,IAAK,IACL,IAAK,OACH4c,EAActB,KAAOtb,EACrB,MACF,IAAK,SACL,IAAK,UACH4c,EAAczd,IAAMa,EACpB,MAEF,QACE4c,EAAcrc,OAASP,OAI3B4c,EAAcf,MAAQ5O,GAAiBjN,MAK7C4c,EAAczlB,MAAQZ,MAAMC,QAAQsJ,GAChCA,EAAciE,KAAI,SAAC/D,GAAD,OAAOA,EAAEpJ,cAC3BkJ,EACG8c,EAET,OAAOL,E,uOC3DF,SAASM,GACd/c,EACA1I,EACAgT,EACA3S,GAEA,IAEQuI,EAFF7I,EACqB,iBAAlB2I,EACmB,WAAb,GAAPE,EACAsc,GAAoBxc,IADWsb,GAAQpb,GAAKA,EAG9CF,EACN,UAAe3I,IACb,IAAK,SACH,OAAQA,EAAiBP,WAE3B,IAAK,WACH,OAAQO,EAAmBC,EAAQgT,EAAO3S,GAAQb,WAEpD,QACE,OAAQO,GC9Bd,IAAMmV,GAAoB7O,SAAS8O,cAAc,OAAOC,MAClDsQ,GAAgB,CAAC,KAAM,OACvBC,GAAsBD,GAAcrlB,OACpCulB,GAA0C,CAC9C3hB,YAAa,KACbC,OAAQ,MACRC,SAAU,GACVC,QAAS,MACTC,QAAS,MACTC,QAAS,MACTC,UAAW,KACXC,YAAa,KACbC,WAAY,KACZC,WAAY,KACZC,WAAY,KACZC,MAAO,GACPC,QAAS,GACTC,OAAQ,GACRC,OAAQ,GACRC,OAAQ,GACRC,KAAM,MACNC,MAAO,MACPC,MAAO,MACP0gB,WAAY,GACZC,UAAW,GACXC,SAAU,GACVC,QAAS,IAEJ,SAASC,GACdjgB,EACA0C,GAEA,IAAM2N,EAAkB9D,EAAevM,GACvC,MAA6B,iBAAlB0C,EACFA,EACJ1H,MAAM,KACN2L,KAAI,SAAC5M,GACJ,IAAM6I,EAAI8C,EAAW3L,GACfmmB,EAAcrZ,WAAWjE,GAE/B,IACGkP,GAAQlP,IACc,iBAAhBsd,IACN7kB,OAAOC,MAAM4kB,GACd,CACA,GAAIzjB,EAAemjB,GAAiB5f,GAClC,OACEkgB,EACAN,GAAgB5f,IACf4C,EAAE7C,QAAQ,MAAQ,EAAI,IAAM,IAIjC,IAAK,IAAIiN,EAAQ,EAAGA,EAAQ2S,GAAqB3S,GAAS,EAAG,CAC3D,IAAMnQ,EAAI6iB,GAAc1S,GAIxB,GAFAkC,GAAkBmB,GAAmBzN,EAAI/F,EAErCqS,GAAkBsB,KAAK,GAIzB,OAHAoP,GAAgB5f,GAAgBnD,EAChCqS,GAAkBmB,GAAmB,GAE9BzN,EAAI/F,EAIfqS,GAAkBmB,GAAmB,GAGvC,OAAOtW,KAER6F,KAAK,KAGH8C,EC7EM,SAASyd,GACtBngB,EACA0C,GAEA,IAAM4S,EAAiB5S,EAAc1H,MAAM,KAErColB,EAAoBtiB,EACxBkC,GACAhF,MAAM,KAEJqlB,EAAqB,GACrBC,EAAgB,GAapB,OAZ0BF,EAAkBzZ,KAAI,SAAC4Z,EAAcvT,GAC7D,IAAIjT,EAAQub,EAAetI,GAS3B,OARIjT,EACFumB,EAAgBvmB,EAEhBA,EAAQumB,GAAiBC,EAG3BF,EAAqBtmB,EAAQ+X,GAAQ/X,GAASsmB,EAEvCtmB,KAEgB6F,KAAK,KAAKiG,QAAQ,UAAW,KCQzC,SAAS2a,GACtBxmB,EACAgG,EACAiR,GAEA,IAAIwP,EACJ,OAAQxP,GACN,IAAK,OACHwP,EAAehQ,GAAQzW,EAAQgG,IAAiB,IAChD,MACF,IAAK,SACHygB,EAAgBzmB,EAAOgG,GAAkCxG,WACzD,MACF,IAAK,YACHinB,EAAeR,GACbjgB,EACAmgB,GACEngB,EAnCV,SACEhG,EACA0mB,GAEA,IAAMvN,EAAUnZ,EAAOoV,MAAME,GAAqB,cAElD,GAAI6D,GAAWA,EAAQpT,QAAQ2gB,IAAsB,EAAG,CACtD,IAAMrN,EAA2BH,GAA2BlZ,IAAW,GACvE,GACEyC,EAAe4W,EAA0BqN,IACzCrN,EAAyBqN,GAEzB,OAAOrN,EAAyBqN,GAIpC,OAAO5iB,EAAmC4iB,GAoBlCC,CAAiC3mB,EAAQgG,KAG7C,MAEF,QACEygB,EAjDN,SAAuBzmB,GACrB,OAAQ6hB,GAAiB7hB,GAAQwgB,cAgDdA,CAAcxgB,GAAQgG,IAAiB,GAI1D,OAAOygB,EC3DM,SAASG,GACtBle,EACA1C,EACAiR,EACAjX,GAEA,IAAI4I,EAaJ,MAZ6B,iBAAlBF,KACTE,EAAIF,GACE3C,QAAQ,MAAQ,IACpB6C,EAAIA,EAAEiD,QACJ,KACA2a,GAAwBxmB,EAAQgG,EAAciR,KAIlDrO,EChBW,SACb1I,EACA8F,EACAiR,EACAjX,GAEA,IAAM6mB,EAAW,gBAAgBna,KAAKxM,GACtC,IAAK2mB,EACH,OAAO3mB,EAET,IAII0I,EAJE2R,EAAOiM,GAAwBxmB,EAAQgG,EAAciR,GACrDpU,EAAIiV,GAAQ5X,IAAO,GACnBe,EAAI4L,WAAW0N,GACfjO,EAAIO,WAAW3M,EAAG2L,QAAQgb,EAAS,GAAI,KAE7C,OAAQA,EAAS,GAAG,IAClB,IAAK,IACHje,EAAI3H,EAAIqL,EACR,MACF,IAAK,IACH1D,EAAI3H,EAAIqL,EACR,MACF,QACE1D,EAAI3H,EAAIqL,EAEZ,OAAO1D,EAAI/F,EDTLikB,CAAiBle,EAAa5C,EAAciR,EAAMjX,IAGhD4I,EEHK,SAASme,GACtB/Q,EACAhW,EACAgT,EACA3S,GAEA,IAAM4X,EAAoD,GAE1D5S,EAAY2Q,GAAe,SAACgR,EAAmBhhB,GAC7C,IAAM6T,EAAQ/N,EAAY9F,GAC1BX,EAAY2hB,GAAmB,SAACjnB,EAAOqC,GAChC6V,EAAU7V,KACb6V,EAAU7V,GAAO,IAGnB,IAAMwG,EAAIqd,GACRjgB,EACA4gB,GACEnB,GAAqB1lB,EAAOC,EAAQgT,EAAO3S,GAC3C2F,EACA,MACAhG,IAIJoW,GAAuBpQ,GAAca,SAAQ,SAAC0E,GAC5C,IAAM5C,EAAOmD,EAAYP,GACzB,GAAqB,iBAAVxL,GAAsBA,EAAMgG,QAAQ,MAAQ,EAAG,CACxD,IAAM0gB,EAAeR,GACnBtd,EACAie,GAA0B7mB,EAAO4I,EAAM,MAAO3I,IAEhDiY,EAAU7V,GAAKuG,GAAQgW,GAAQ8H,GAC3B7H,GAAW6H,GACXA,OAEJxO,EAAU7V,GAAKuG,GAAQC,KAGtBqP,EAAU7V,GAAKyX,KAClB5B,EAAU7V,GAAKyX,GAASjR,SAK9B,IAAMyP,EAA8D,GAiDpE,OA/CAhT,EAAY4S,GAAW,SAACgP,EAAU7kB,GAChC,IAAMmW,EAAK0O,EAEX5hB,EAAYkT,GAAI,SAAC7P,EAAe1C,GTvD7B,IAAiCjG,ESwDlCwY,EAAGvS,GTvDHvD,EAAeshB,GADmBhkB,ESwDS2I,GTtDtCqb,GAAqBhkB,GAEvBA,KSuDL,ICpEqCkW,EACnCtK,EDqEEtJ,EAFEoG,GCnEJkD,EAAS,GACbtG,EAFuC4Q,EDoEDsC,GClEb,SAACiL,EAAQxd,GAChC2F,EAAS,GAAH,OAAMA,EAAN,YAAgB3F,EAAhB,aAAiCiQ,EAAYjQ,GAA7C,QAEDuM,EAAe5G,IDmEpB,GAAIlD,GTxDD,SAA8B8P,GACnC,OAAOlT,EAAYkT,GAAI,SAAC7P,EAAe1C,GACrC,GAAI0C,EAAe,CACjBwM,GAAkBK,QAAU,GAC5B,IAAMhK,EAAIO,EAAY9F,GAChBse,EAAOxM,GAAQpP,GAErBwM,GAAkB3J,GAAK7C,EAEvB,IAAMwe,EAAKhS,GAAkB3J,GACzBlK,OAAOqK,EAAWwJ,GAAkB3J,KACpC2J,GAAkB3J,GAChB4b,EAAK9lB,OAAOqK,EAAWhD,IAC7B,GACEwM,GAAkB3J,KACR,OAAT+Y,GACC3F,GAAQjW,IACPwM,GAAkB3J,KAAO7C,IACvBrH,OAAOC,MAAM4lB,IACdA,IAAOC,GAGX,OADAjS,GAAkB3J,GAAK,IAChB,EAET2J,GAAkB3J,GAAK,GAGzB,OAAO,KS6BW6b,CAAqB7O,GAAK,CAC1C,IAAM8O,EAAoB1E,GACxB3iB,EACAyI,GAGFpG,EAAIuR,GAAcyT,EAAkBvD,OAChCuD,EAAkBxD,OAClBwD,EAAkBvD,WAEtBzhB,EAAIkW,EAGNlT,EAAYhD,GAAG,SAACqG,EAAe1C,GTlF5B,IACLshB,EACAC,ESiFSlP,EAAoBrS,KACvBqS,EAAoBrS,GAAgB,IAGtCqS,EAAoBrS,GAAc5D,GAAOuc,GAAQjW,GAC7CkW,GAAWlW,GACXA,EAGFiW,GAAQtG,EAAoBrS,GAAc5D,KAC1CiW,EAAoBrS,GAAc5D,KAASmW,EAAGvS,IACK,IAAnD0F,EAAW6M,EAAGvS,IAAehF,MAAM,KAAKX,QACV,KAA9ByX,GAAQS,EAAGvS,MT9FjBshB,ESiGQ/O,EAAGvS,GThGXuhB,ESiGQlP,EAAoBrS,GAAc5D,GT/F1C2hB,GAAqBuD,GAAcC,SSqG5BnP,GACLC,EACArY,EACAgT,EACA3S,EACA,OE9GW,SAASmnB,GACtBC,EACAznB,EACAgT,EACA3S,GAEA,IAAM4X,EAAoD,GAE1D5S,EAAYoiB,GAAkB,SAACT,EAAmBhhB,GAChD,IAAM0hB,EAAiB1hB,EACvBX,EAAY2hB,GAAmB,SAACjnB,EAAOqC,GAChC6V,EAAU7V,KACb6V,EAAU7V,GAAO,IAEnB,IAAMwG,EAAIge,GACRnB,GAAqB1lB,EAAOC,EAAQgT,EAAO3S,GAC3CqnB,EACA,SACA1nB,GAGFiY,EAAU7V,GAAK4D,GAAgB4C,QAInC,IAAMyP,EAA8D,GAmBpE,OAjBAhT,EAAY4S,GAAW,SAACgP,EAAU7kB,GAGhCiD,EAFmB4hB,GAEK,SAACve,EAAe1C,GACjCqS,EAAoBrS,KACvBqS,EAAoBrS,GAAgB,IAElCnC,EAA6BkC,QAAQC,IAA2B,EAClEqS,EAAoBrS,GAAc5D,GC5C3B,SACbpC,EACAE,GAKA,IAAMynB,EAAe3nB,EAAO2nB,aACtBC,EAAc5nB,EAAO4nB,YACrBC,EAAe7nB,EAAO6nB,aACtBC,EAAc9nB,EAAO8nB,YACrBC,EAAe,SAAChoB,EAAwB2kB,GAC5C,IAAI9b,EAAI7I,EACR6I,EAAiB,iBAANA,EAAiBA,EAAEpJ,WAAaoJ,EAC3C,IAAIsW,EAAIrS,WAAWjE,GAQnB,OANIA,EAAE7C,QAAQ,MAAQ,IACpBmZ,EAAKwF,EAAW,IAAOvhB,KAAKE,MAAMwJ,WAAWjE,MAG/CA,EAAIsW,EAAIwF,GAAY9b,EAAE7C,QAAQ,QAAU,EAAI2e,EAAWxF,GAE9C1f,YAGX,MAAO,CACLsmB,UAAWiC,EAAa7nB,EAAIynB,EAAeE,GAC3ChC,WAAYkC,EAAa7nB,EAAI0nB,EAAcE,IDiBEE,CACvChoB,EACA0I,GACA1C,GAEFqS,EAAoBrS,GAAc5D,GAAOsG,QAIxC0P,GACLC,EACArY,EACAgT,EACA3S,EACA,UEjDW,SAAS4nB,GACtBC,EACAloB,EACAgT,EACA3S,GAEA,IAAM4X,EAAoD,GAE1D5S,EAAY6iB,GAAqB,SAAClB,EAAmBhhB,GACnD,IAAMmiB,EAAkBniB,EACxBX,EAAY2hB,GAAmB,SAACjnB,EAAOqC,GAChC6V,EAAU7V,KACb6V,EAAU7V,GAAO,IAEnB,IAAMwG,EAAIge,GACRnB,GAAqB1lB,EAAOC,EAAQgT,EAAO3S,GAC3C8nB,EACA,YACAnoB,GAGFiY,EAAU7V,GAAK4D,GAAgB4C,QAGnC,IAAMyP,EAA8D,GAmBpE,OAjBAhT,EAAY4S,GAAW,SAACgP,EAAU7kB,GAChC,IAAMqG,ET8CH,SACLwe,GAEA,IAAMmB,EAAInB,EAOV,OANA5hB,EAAY+iB,GAAG,SAAC1f,EAAe1C,GAC7BoiB,EAAEpiB,GAAgBigB,GAChBjgB,EACA0C,MAGI0f,ESxDaC,CAAoCpB,GAKvD5hB,EAAYoD,GAAY,SAACC,EAAe1C,GACjCqS,EAAoBrS,KACvBqS,EAAoBrS,GAAgB,IAGtCqS,EAAoBrS,GAAc5D,GAAO+jB,GACvCngB,EACA0C,SAIC0P,GACLC,EACArY,EACAgT,EACA3S,EACA,aCjDW,SAASioB,GACtBC,EACAvoB,EACAgT,EACA3S,GAEA,IAAM4X,EAAoD,GAE1D5S,EAAYkjB,GAAgB,SAACvB,EAAmBhhB,GAC9C,IAAM2Q,EAAWpE,EAAevM,GAChCX,EAAY2hB,GAAmB,SAACjnB,EAAOqC,GAChC6V,EAAU7V,KACb6V,EAAU7V,GAAO,IAEnB,IAAMwG,EAAIge,GACRnB,GAAqB1lB,EAAOC,EAAQgT,EAAO3S,GAC3CsW,EACA,OACA3W,GAEFiY,EAAU7V,GAAK4D,GAAgB4C,QAInC,IAAMyP,EAA8D,GAapE,OAXAhT,EAAY4S,GAAW,SAACgP,EAAU7kB,GAGhCiD,EAFmB4hB,GAEK,SAACve,EAAe1C,GACjCqS,EAAoBrS,KACvBqS,EAAoBrS,GAAgB,IAEtCqS,EAAoBrS,GAAc5D,GAAOsG,QAItC0P,GACLC,EACArY,EACAgT,EACA3S,EACA,Q,wVCxBJ,SAASmoB,GACPxiB,EACA0C,EACA1I,EACAgT,GAEA,IACMyV,EAA0B5Q,GADlB7R,EAC2C,WAEnD0iB,EAA2C,GAejD,OAdID,GAEFpjB,EADUojB,EAAwB/f,EAAwB1I,EAAQgT,IACnD,SAACjT,EAAO4I,GACjBkP,GAAkBlP,EAAM,WAC1BrJ,OAAOI,OACLgpB,EACAF,GAAwB7f,EAAM5I,EAAOC,EAAQgT,IAG/C0V,EAAgB/f,GAAQ5I,KAKvB2oB,EA+FM,SAASC,GACtBC,EACAC,EACAC,GAEA,IAAIxQ,EAA0C,GACxC7P,EAAaogB,EAEX7oB,EAAuC4oB,EAAvC5oB,OAAQgT,EAA+B4V,EAA/B5V,MAAOmF,EAAwByQ,EAAxBzQ,oBAEvB9S,EAAYyjB,GAAU,SAACzmB,EAAG2D,GACxBX,EAAYhD,GAAG,SAACtC,EAAOqC,GACrBiD,EACEmjB,GAAwBxiB,EAAwBjG,EAAOC,EAAQgT,IAC/D,SAACpK,EAAG2C,GACF,IAAMwd,EAAkBxd,EACnB9C,EAAWsgB,KACdtgB,EAAWsgB,GAAmB,IAG9BtgB,EAAWsgB,GAAiB3mB,GADhB,MAAVrC,EACiC6I,EAEA7I,WAM7C,IAAMipB,EAvFR,SACEvgB,EACAzI,EACAgT,EACAmF,GAEA,IAAM8Q,EAAanQ,GAAa9Y,GAC1BgW,EAA4B,GAC5BuS,EAA6B,GAC7BL,EAAkC,GAClCgB,EAA+B,GAC/BC,EAAuC,GA8C7C,OA7CA9jB,EAAYoD,GAAY,SAACC,EAAe1C,GACtC,IAAMiS,E,kWAAY,IAAKvP,GACjB0gB,IAAgBH,GAClB7S,GAAuBd,GAAqBtP,IAAyB,GAGrE6R,GAAkB7R,EAAc,aACb,MAAjBiS,EAAU,KACZA,EAAU,QAAKnX,GAEM,MAAnBmX,EAAU,OACZA,EAAU,KAAOA,EAAU,IAG7BkR,EAAmBrmB,KAAK,CACtBmV,YACAvN,cAAeuH,EAAyB3S,OAAOkB,KAAKyX,IACpDjY,SACAgT,QACAhN,aAAcA,EACdiR,KAAM,WACNkB,yBAGF1V,EAAeqB,EAAoCkC,GAEnDkiB,EAAoBliB,GAAgBiS,GAEpCgR,GACkD,OAAjDxS,GAAQzW,EAAuBgG,IAA2BojB,EAGlDA,EACTpT,EAAcV,GAAqBtP,IAA2BiS,EACrDjS,KAAgBhG,IACzBkpB,EAAiBljB,GAAgBiS,GAJjCsQ,EAAeviB,GAAgBiS,KAc5B,CAAEkR,qBAAoBE,gBAN4C,CACvE,CAACrT,EAAe,OAChB,CAACuS,EAAgB,QACjB,CAACL,EAAqB,aACtB,CAACgB,EAAkB,YAgCOI,CAC1B7gB,EACAzI,EACAgT,EACAmF,GAmBF,OAhBAG,EAAwBA,EAAsBiR,OAC5CP,EAAoBG,oBAGtBH,EAAoBK,gBAAgBxiB,SAAQ,SAACxE,GAC3C,IAAMuK,EApIV,SACEnE,EACAwO,EACAjX,EACAgT,EACA3S,GAEA,IAAKuT,GAAcnL,GAAa,CAC9B,IAAI+gB,EACJ,OAAQvS,GACN,IAAK,OACHuS,EAAKlB,GACL,MACF,IAAK,YACHkB,EAAKvB,GACL,MACF,IAAK,SACHuB,EAAKhC,GACL,MACF,QACEgC,EAAKzC,GAGT,OAAOyC,EACL/gB,EACAzI,EACAgT,EACA3S,GAGJ,OAAO,EAsGKopB,CACRpnB,EAAE,GACFA,EAAE,GACFrC,EACAgT,EACAmF,GAEEvL,IACF0L,EAAwBA,EAAsBiR,OAAO3c,OAGlD0L,E,mcCpLT,IAAMoR,GAAoE,GACtEC,IAAiB,EACfC,GAAoB,SAAC9iB,G,MACrBA,GACF+iB,GAAuB,WAAvB,E,gDAA2B/iB,I,ijBAGhB,SAAS+iB,GACtBpf,EACAoe,EACAiB,GAIM,IACErjB,EAAcgE,EAAdhE,UACFuC,EAAUvC,EAAUuC,QAQ1B,GAPIvC,EAAUsjB,QAAQC,OAAOC,eAC3BN,IAAiB,IAMfA,IAAmBljB,EAAUyjB,KAAjC,CAMAP,IAAiB,EAEjB,IAGQtnB,EAHFhC,EAAS2I,EAAQ3I,OACjBoI,E,kWAAa,IAAKogB,GAClBC,GACEzmB,EAAuB,GAC7BgD,EAAYoD,GAAY,SAACC,EAAe1C,GAClC6R,GAAkB7R,EAAwB,aAC5C3D,EAAE2D,GAAgB0C,MAGfrG,GAGLiW,EAA0C,GAE1CpN,EAAQ,EACR4Q,EAAY1J,IAEZ+X,GAA2B,GAE/B,SAAUC,IACR9R,EAAwBA,EAAsBiR,OAC5CZ,GAA0B3f,EAAQkC,GAAQzC,EAAYqgB,IAExD,IAAMuB,EAAajY,IAAe0J,EAIlC,OAFA5Q,GAAS,EAEDzE,EAAUC,OAChB,KAAKjD,EAAiB,GACtB,KAAKA,EAAiB,GACtB,KAAKA,EAAiB,GACtB,KAAKA,EAAiB,GAIpB,OAHAkmB,IAAiB,EACjBG,GAAe,EAAOxR,QACtBsR,GAAkBF,GAAoBjR,SAExC,QACE,GAAIvN,EAAQ7K,EACV,GACEoG,EAAUyjB,OACRC,GzD/CJvW,GAAcG,KyDgDZsW,E7EvB8B,G6EyB9BF,GAA2B,EAC3BC,QACK,CACLD,GAA2B,EAC3BrO,EAAY1J,IACZ,IAAM1P,EAAeO,YAAW,WAC9BD,aAAaN,GACb0nB,MACC,QAGLT,IAAiB,EACjBG,GAAe,EAAMxR,GACrBsR,GAAkBF,GAAoBjR,UArC9C,QA1BEiR,GAAoB5mB,KAAK,CAAC2H,EAA0Boe,EAAOiB,I,uOCtC/D,SAASQ,GAA6BjoB,GACpC,IAAKA,GAAkB,WAAb,GAAOA,GACf,OAAO,EAET,IAAMmE,EAAIrH,MAAMC,QAAQiD,GAAKA,EAAI,GAAG2H,MAAMvK,KAAK4C,GAC/C,SAAOmE,GAAKA,EAAEnG,OAAS,IAAKmG,EAGvB,SAAS+jB,GACdhoB,EACAioB,GAEA,IAAMnoB,EAAIE,EA+BV,OA7BA8C,EAAY9C,GAAK,SAACmG,EAAe1C,GAC/B,IAAMykB,EAAuBzkB,EAAwBhF,MAAM,KACvDypB,EAAoBpqB,OAAS,IAC/BoqB,EAAoB5jB,SAAQ,SAACgT,GAC3B,IAAMtO,EAAIsO,EACV,GAAIA,EACF,GAAIxX,EAAEkJ,IAA+B,WAAzB,GAAO7C,GAA4B,CAC7C,IAAME,EAAI0hB,GAAQ5hB,GACdE,EACFvG,EAAEkJ,GAAMlJ,EAAEkJ,GAAiBge,OAAO3gB,GAElCtJ,OAAOI,OAAO2C,EAAEkJ,GAAI7C,QAGtBrG,EAAEkJ,GAAK7C,YAINrG,EAAE2D,IAGTwkB,GACA9hB,GACyB,WAAzB,GAAOA,KACN4hB,GAAQ5hB,IAET6hB,GAA0B7hB,MAGvBrG,EAeM,SAASqoB,GACtBjkB,GAMA,OAJmB8jB,GACjB9jB,G,+5CCxDJ,SAASkkB,GACP3kB,EACAihB,GAEA,IAAM2D,EAA0B,GAchC,OAbC3D,EAASjhB,GAA2Ba,SAAQ,SAAC9G,GAC5C,IACQqoB,EADFyC,GACEzC,EAAqB,GAC3B/iB,EAAY4hB,GAAU,SAACve,EAAeC,GAChCA,IAAS3C,IACXoiB,EAAEzf,GAAQD,MAGP0f,GAETyC,EAAY7kB,GAAgBjG,EAC5B6qB,EAAa9nB,KAAK+nB,MAEbD,EAKT,SAASE,GAAuB7S,GAC9B,IAAM8S,EAAqD,GACrDC,EAAiB/S,EAAUjO,QAC7BihB,EAAY,IACZ/S,EAAU,EAEVgT,EADyBjT,EAAU5X,OAEjC8qB,EAA2C,GA0CjD,OAxCAH,EAAehhB,QAAQnD,SAAQ,SAACogB,EAAUjU,GACpCvQ,EAAewkB,EAAU,WAAa9nB,MAAMC,QAAQ6nB,EAASmE,SAC/DJ,EAAe9nB,OAAO8P,EAAO,GAC7BmY,EAAkBroB,KAAlB,MAAAqoB,EAAiB,GAASR,GAAsB,SAAU1D,MACjDxkB,EAAewkB,EAAU,MAAQ9nB,MAAMC,QAAQ6nB,EAASoE,IACjEL,EAAe9nB,OAAO8P,EAAO,GAC7BmY,EAAkBroB,KAAlB,MAAAqoB,EAAiB,GAASR,GAAsB,IAAK1D,MAErDkE,EAAkBroB,KAAKmkB,MAI3BkE,EAAkBtkB,SAAQ,SAACogB,EAAUjU,GACnC,IAzBqBjT,EAyBfwY,EAAK0O,EAwBX,OAvBIxkB,EAAewkB,EAAU,WA1BRlnB,EA2BOwY,EAAG6S,OAA7BlT,EA1BG/U,KAAKC,IAAID,KAAKiJ,IAAK,IAAWrM,EAAO,KAAM,UA2BvCwY,EAAG6S,QACD3oB,EAAewkB,EAAU,MAClC/O,EAAU/U,KAAKC,IAAImV,EAAG8S,EAAa,UAC5B9S,EAAG8S,GAEVnT,EAAUlF,EAAQ,EAAIiY,EAAYC,EAAkBhT,EAAU,EAG5DzV,EAAesoB,EAAiB7S,GAClC6S,EAAgB7S,GAAhB,SACK6S,EAAgB7S,IACfK,GAGNwS,EAAgB7S,GAAWK,EAG7B0S,EAAY,IAAM/S,EAElBgT,GAAmB,GAEZ,KAGFH,ECKM,SAASO,GACtB7kB,EACAqjB,GAEA,IAAMyB,EAA8BhoB,EAClCkD,EAAUjD,aAOZ,GAJK+nB,GACH7X,GAAgChB,EAAgB,GAAIjM,GAGlDA,EAAUC,QAAUjD,EAAiB,KAAM8nB,IACzCA,EADN,CAqBA,IAAM3W,EAAcxC,IAEd3H,ElElFO,SACbhE,GAEA,O,+VAAA,EACE6R,sBAAuB,GAEvB5N,cAAe,GAEfwR,wBAAyB1Q,EAAK/E,EAAU6C,OAExCkiB,gBAAiB/kB,EAAU2C,cAE3BsT,kBAAmB,EAEnBlZ,YAAaiD,EAAUjD,YAEvBmH,gBAAiB,EAEjB8gB,iBAAkB,UAElBtO,aAAa,EAEb3I,wBAAyB,EAEzBC,qBAAsB,EAEtB0J,uBAAwB,EAExB/D,qCAAsC,GAEtCkC,yBAAyB,EAEzB/H,wBAAyB,CACvBM,aAAc,EACdE,UAAW,GAEbsH,qBAAsB,EAEtB6B,sBAAuB,EAEvBzX,aACGsL,EAAsCtL,IkEyCVilB,CAA+BjlB,IjF3G3D,SACLgE,GAEAnH,EACEmH,EAAyBjH,aACvBiH,EiFwGJkhB,CAA4BlhB,GAE5BnL,OAAOI,OAAO+K,EAAyBhE,UAAW,CAChDC,MAAOjD,EAAiB,GACxB6F,MAAO7C,EAAU6C,QA1FrB,SACEmB,EACAmhB,EACA9B,GAEA,IAAM9M,EAAmBvS,EACjBhE,EAAcuW,EAAdvW,UAEFolB,EDsCO,SACb5T,EACA6T,GAKA,IAsBU7E,EAtBN8E,EAAU9T,EACV2S,EAAkD,GAChDoB,EAA0D,GAC1DC,EAAiBH,EACnBA,EAAyB9hB,QACzB,GACEkiB,EAAkC,GAoFxC,OAlFI/sB,MAAMC,QAAQ2sB,GAChBnB,EAAeE,GAAuBiB,IAGtC1mB,EADA0mB,EAAU,MAAK9T,IACM,SAACvP,EAAe1C,GAC/B7G,MAAMC,QAAQsJ,KAChBsjB,EAAoBhmB,GAAgB8kB,GACjCpiB,UAEIqjB,EAAQ/lB,OAInB4kB,EAAa,IACL3D,EAAsC,GAC5C5hB,EAAY0mB,GAAS,SAACpU,EAAgB3R,GAEpCihB,EAASjhB,GAAgB,OAEpBihB,GAET2D,EAAa,KAAOmB,GAGtB1mB,EAAYulB,GAAc,SAAC3D,EAAU7kB,GACnCwoB,EAAaxoB,GAAOsoB,GAAmCzD,MAGzD5hB,EAAY2mB,GAAqB,SAACtjB,EAAe1C,GAC/C,IAAIuF,EAAIvF,EAEH3E,OAAOC,MAAMuL,WAAWtB,MAC3BA,EAAI0gB,EAAe5qB,OAAOkK,IAC1BygB,EAAoBzgB,GAAK7C,SAClBsjB,EAAoBhmB,KAEM,IAA/BimB,EAAelmB,QAAQwF,IACzB0gB,EAAenpB,KAAKyI,MAIxBlG,EAAYulB,GAAc,SAAC3D,GACzB5hB,EAAY4hB,GAAU,SAACve,EAAe1C,GACpC,IAAM4U,EAAIqM,EACN1b,EAAIvF,EAEH3E,OAAOC,MAAMuL,WAAWtB,MAM3BqP,EALArP,EAAI0gB,EAAe5qB,OAAOkK,KAKV7C,SAETkS,EAAE5U,KAEwB,IAA/BimB,EAAelmB,QAAQwF,IACzB0gB,EAAenpB,KAAKyI,IAEoB,IAAtC2gB,EAAsBnmB,QAAQwF,IAChC2gB,EAAsBppB,KAAKyI,SAKjClG,EAAYulB,GAAc,SAAC3D,EAAU7kB,GACnC8pB,EAAsBrlB,SAAQ,SAACb,GAC7B,IAAM4C,EAAIqe,EAASjhB,GAEdgmB,EAAoBhmB,KACvBgmB,EAAoBhmB,GAAgB,IAE1B,MAAR5D,GAAuB,QAARA,EACb6kB,EAASjhB,KACXgmB,EAAoBhmB,GAAc5D,GAAOwG,GAG3CojB,EAAoBhmB,GAAc5D,QACnB,IAANwG,EAAoB,IAAMA,QAIlC,CACLqP,UAAW+T,EACXF,yBAA0BG,GCzITE,CACjB1lB,EAAUwR,UACVxR,EAAU+M,UAAU4Y,QAAQN,0BAG9BrlB,EAAU+M,UAAU4Y,QAAQN,yBAC1BD,EAAWC,yBACb,IAAM7T,EAAY4T,EAAW5T,UAE7B+E,EAAiBtS,cA/BnB,SACEuN,GAEA,IAAMzX,EAAiB,GASvB,OARA6E,EAAY4S,GAAW,SAAC+O,GACtB3hB,EAAY2hB,GAAmB,SAACqF,EAAIjqB,IACP,IAAvB5B,EAAKuF,QAAQ3D,IACf5B,EAAKsC,KAAKV,SAKT6P,EAAyBzR,GAmBC8rB,CAAiBrU,GAClD,IAAMwE,EAA0BjS,EAAwBwS,GAExDA,EAAiBN,kBAAoBD,EAAwBpT,SAC7D2T,EAAiBrS,gBAAkB8R,EAAwB9R,gBAC3DlE,EAAU2C,cAAgBqT,EAAwBpT,SAClD5C,EAAUrD,IAAMqZ,EAAwB7R,YAExCif,GACE7M,EACA/E,GACA,SAACyC,EAAQsR,GACP,IACM3P,EADcjK,IACuBwZ,EAE3C5O,EAAiByO,iBAAmB/Q,EAAS,OAAS,SACtDsC,EAAiBX,qBAAuBA,EACxCW,EAAiB1E,sBAAwB0T,EAEzClC,EAAe9M,GAEftJ,GACEhB,EAAgB,GAChBsK,EAAiBvW,cAqDvB8lB,CAAiB9hB,EAA0BmK,EAAakV,QA9BpD,GAAqD,YAAjDyB,EAA4BE,iBAC9B,IAAM/oB,EAAeO,YAAW,WAC9BD,aAAaN,GAET+D,EAAUC,QAAUjD,EAAiB,IACvC6nB,GAAc7kB,EAAWqjB,WAI7BxL,GACE9B,GAAuB+O,IACvB,GAsBH,SAASiB,GACd/hB,GAGgD,SAA9CA,EAAyBghB,kBACzBhhB,EAAyBhE,UAAUC,QAAUjD,EAAiB,KAEpDgH,EACRhE,UAAUC,MAAQjD,EAAiB,GAErC6a,GAA6B7T,I,6rBCvIjC,IAAIgiB,IAAiB,ECEN,SAASC,GACtBC,EACAC,EACArlB,EACAd,EACAomB,GAEA,IAAMC,EAAYrmB,EACZgE,EAA2BlH,EAC/BupB,EAAUtpB,aAGNupB,EAAcnpB,IAAoBT,KAAKiJ,IAAIjJ,KAAKC,IAAImE,EAAM,GAAI,GAEpE,GAAIkD,EAA0B,CAC5B,IAAIvB,EAAM0jB,EACJI,EAA0B,iBAAR9jB,EAClBkiB,EAASjoB,KAAKiI,IAAI0hB,EAAU1jB,cAAgB2jB,GAElD,GAAIC,GAAY9jB,EAAM,EAAG,CACvB,IAAM1C,EAAI,IAAM4kB,EAChBliB,GAAO1C,EAAKA,EAAI,KAAQ,KAAO,IAAM4kB,GAAU,GAGjDzY,EACED,EAAgB,IAChB,SAAS5L,IACHoC,IAAQzC,EAAUyC,MACpB4jB,EAAU5jB,IAAMyjB,GAElB5Z,EAA6BL,EAAgB,GAAI5L,EAAGL,KAEtDA,GAGEumB,GAAY9jB,GAAO,EACrB4jB,EAAUrlB,KAAKslB,IAEXC,IACFF,EAAU5jB,IAAMA,GC5CT,SACb1F,EACAwR,EACA6X,GAEA,IAAMpiB,EAA2BlH,EAA4BC,GAC7D,GAAIiH,EAA0B,CAC5B,IAAMhE,EAAYgE,EAAyBhE,UAE3C0N,GAAyB1J,EAAyBjH,aAElDiH,EAAyBiS,kBAAoBjW,EAAU2C,cAEvD3C,EAAUrD,IAAM4R,EAEZvO,EAAUwC,OAASxC,EAAUyE,QAC/BzE,EAAUyE,OAAS,GAEjB2hB,EACFvO,GACE5C,GAA6BjR,IAG/B6T,GACE5C,GAA6BjR,IAC7B,IDqBFwiB,CAAsBH,EAAUtpB,YAAaupB,EAAYF,KE1ChD,SAASK,GACtBziB,GAC0B,IAClBhE,EAAcgE,EAAdhE,UAEJ4C,EAAW5C,EAAU2C,cACzBC,EAAWlG,KAAKC,IAAIiG,EAAU,GAC9BA,EAAWlG,KAAKiJ,IAAI/C,EAAUzF,GAE9B,IAAM6Q,EACHtR,KAAKC,IAAIoI,EAAK/E,EAAUyC,KAAM,GAAK,IAAOG,EAE7C/J,OAAOI,OAAO+K,EAA0B,CACtC+J,wBAAyBpC,IAAeqC,EAExCA,uBAEAF,wBAAyB,CACvBM,aAAcJ,EAEdM,UAAW5R,KAAKE,MAAMoR,EpFiCM,OoF7BhC,IAAMgI,EAA0BjS,EAC9BC,GAkBF,OAfAnL,OAAOI,OAAO+K,EAA0B,CACtCiS,kBAAmBrT,EACnBsB,gBAAiBF,EAAyBE,gBAAkB,IAG9DrL,OAAOI,OAAO+G,EAAW,CACvB4C,WACAjG,IAAKqZ,EAAwB7R,cAG/BtL,OAAOI,OACL+K,EACAsH,EAAsCtL,IAGjCgE,ECzCT,SAAS0iB,GAAkBjb,EAAUzL,GACnC,OAAUyL,EAAgC2G,QACxC,SAAC1Y,GAAD,OAAOA,IAAMsG,K,uOCJjB,SAASoC,GAAO2N,EAAgC/P,GAC9C,IAAMjE,EAAuB,WAAhB,GAAOgU,GAAoB,SAAW,eAC7C/L,EAA2BlH,EAC/BkD,EAAUjD,aAGRiH,IACFA,EAAyB6N,sBAAwB7N,EAAyB6N,sBAAsBO,QAC9F,SAACzF,GACC,IAAMgL,EAAQhL,EAAe5Q,KAAUgU,EAIvC,OAHK4H,GACHpG,GAA+B5E,GAE1BgL,MAKR,SAASgP,GACdtkB,EACArC,GAEAqC,EAAMjC,SAAQ,SAAC8B,GAEbE,GADqBiD,EAAYnD,EAAKnJ,YACjBiH,M,2KC6TzB,G,WAjTE,WACEA,EAIAsjB,I,4FACA,SACA,IC/CIvW,ED+CE6Z,EAAQ3C,GACZjkB,GAMF,OAJAnH,OAAOI,OAAOgC,KN7CH,SACb+E,EAGAsjB,GAEA,IAAMuD,EAAQvD,EAAQwD,IAEtB,OADAd,IAAiB,EACjB,YACKa,GACA7mB,GACA,CACDsjB,UAEA/gB,QAASvC,EAAUuC,QAEnBC,KAAMxC,EAAUwC,KAEhBiC,MAAO,EAEP1H,YAAaipB,KMyBKe,CAAqBH,EAAOtD,KClD5CvW,EDoD2B9R,KCpDG8R,WACtB4Y,QAAQqB,wBDmDW/rB,KClDbqoB,QAAQ9iB,WAAWnE,KAAK0Q,GAC1CA,EAAU4Y,QAAQqB,uBAAwB,GDmDnC/rB,K,yCAGT,WAiBE,OAhBiC6B,EAC/B7B,KAAK8B,cAIL8nB,GAAc5pB,MAAM,SAACsb,GACnB,IAAMlW,EAAIkW,EAEe,SAAvBlW,EAAE2kB,kBACF3kB,EAAEL,UAAUC,QAAUjD,EAAiB,KAEvCqD,EAAEL,UAAUC,MAAQjD,EAAiB,OAKpC/B,O,kBAGT,WACE,IAAM6pB,EAA8BhoB,EAClC7B,KAAK8B,aAeP,OAXE+nB,GACiD,SAAjDA,EAA4BE,kBAC5BF,EAA4B9kB,UAAUC,QAAUjD,EAAiB,GAEjE6a,GAA6BiN,GAE7B7pB,KAAKgF,QAAUjD,EAAiB,IAChC/B,KAAKgF,QAAUjD,EAAiB,IAEhC6nB,GAAc5pB,KAAM8qB,IAEf9qB,O,mBAGT,WAOE,OANIA,KAAKgF,QAAUjD,EAAiB,KAClC/B,KAAKgF,MAAQjD,EAAiB,GAE9B0Q,GAAyBzS,KAAK8B,cAGzB9B,O,oBAGT,WAKE,OAJIA,KAAKgF,QAAUjD,EAAiB,IEzGzB,SACb6Q,GAEA,IAAM7J,EAA2BlH,EAC/B+Q,EAA4B9Q,aAE9B,GAAIiH,EAA0B,CAC5B,IAAM5H,EAAI4H,EAAyBhE,UAE/BgE,EAAyBhE,UAAUC,QAAUjD,EAAiB,KAChEZ,EAAE6D,MAAQjD,EAAiB,GAE3B6a,GAA6B7T,GAA0B,KF8FvDijB,CAAgBhsB,MAGXA,O,qBAGT,WG5Ga,IACP+I,EAGA5H,EH4GJ,OAHAsR,GAAyBzS,KAAK8B,aGzG1BX,EH0GanB,MG7Gb+I,EAA2BlH,EH6Gd7B,KG5GP8B,cAIV8a,GACE3B,GAA2BlS,KAG7B5H,EAAE6D,MAAQjD,EAAiB,GAC3BZ,EAAEqI,MAAQ,EACVogB,GHkGiB5pB,KGlGQ8qB,KHoGlB9qB,O,iBAGT,WAAY,WACJ+I,EAA2BlH,EAC/B7B,KAAK8B,aAEP,GAAI9B,KAAKgF,QAAUjD,EAAiB,GAAI,CACtC,GAAI/B,KAAKgF,QAAUjD,EAAiB,GAClC,IAAMf,EAAeO,YAAW,WAC9BD,aAAaN,GACb,EAAK2E,QACJ,GAEL,OAAO3F,KAET,GAAI+I,EAA0B,CAC5B,GAAyB,iBAAd/I,KAAKuH,KAAmB,CACjCvH,KAAKwJ,MAAQxJ,KAAKuH,KAAO,EACzB,IAAMwT,EAA0BjS,EAC9BC,GAEFA,EAAyBE,gBACvB8R,EAAwB9R,gBAC1BjJ,KAAK0B,IAAMqZ,EAAwB7R,YAGrClJ,KAAK0H,cAAgB1H,KAAK0B,IAE1B8pB,GAAgBziB,GAGlB,OAAO/I,O,gBAGT,SAAG6F,GACD,IAAMkD,EAA2BlH,EAC/B7B,KAAK8B,aAWP,OATIiH,GACFiiB,GACEjiB,EAAyBoG,cACzB/P,EACAyG,EACA7F,MAIGA,O,kBAGT,SAAK6F,GACH,IAAMkD,EAA2BlH,EAC/B7B,KAAK8B,aAaP,OAXIiH,IACFA,EAAyB0S,aAAc,EAEvCuP,GACEjiB,EAAyBoG,cACzB/P,EACAyG,EACA7F,OAIGA,O,kBAGT,SAAK6F,GACH,IAAMkD,EAA2BlH,EAC/B7B,KAAK8B,aAEDupB,EAAcnpB,IAAoBT,KAAKiJ,IAAIjJ,KAAKC,IAAImE,EAAM,GAAI,GAEpE,GAAIkD,EAA0B,CAC5B,IACMuK,EADmBvK,EAAyBuH,iBAE9CpO,EAAempB,EACfA,EAEJrrB,KAAK0H,cAAgB4L,EACrBtT,KAAK0B,IAAM4R,EAEXkY,GAAgBziB,GAGlB,OAAO/I,O,mBAGT,SAAMmG,GACJ,IAAM4C,EAA2BlH,EAC/B7B,KAAK8B,aAWP,OATIiH,GACFiiB,GACEjiB,EAAyBoG,SI5NlB,SAAuB9Q,EAAe8H,GACnD,IAAMgJ,EAAW1N,KAAKiI,IAAIvD,GAAY9H,EACtC,OAAO8H,EAAW,EAAI9H,EAAQ8Q,EAAW1N,KAAKC,IAAIrD,EAAQ8Q,EAAU,GJ2N9D8c,CAAcjsB,KAAKwH,IAAKrB,GACvB,IAAoBnG,KAAK0B,IAC1B1B,MAIGA,O,oBAGT,SAAOiG,GACL,IAAM8C,EAA2BlH,EAC/B7B,KAAK8B,aAGP,GAAIiH,EAA0B,CAC5B,IAAMiS,EAAoBjS,EAAyBiS,mBAAqB,EAEnE/U,IACH8C,EAAyB0S,aAAc,GAEzCuP,GACEjiB,EAAyBoG,cACzB/P,EACC,IAAoB4b,EACrBhb,MAIJ,OAAOA,O,mBAGT,SAAMqG,GACJ,IAAM0C,EAA2BlH,EAC/B7B,KAAK8B,aAEP,GAAIiH,EAA0B,CAC5B,IAAIO,EACJ,OAAQjD,GACN,KAAK,EACHiD,EAAY,SACZ,MACF,KAAK,EACHA,EAAY,UACZ,MACF,KAAK,EACHA,EAAY,YACZ,MACF,KAAK,EACHA,EAAY,oBACZ,MAEF,QACEA,EAAYjD,EAGhBrG,KAAKqG,IAAMiD,EACXkiB,GAAgBziB,GAElB,OAAO/I,O,oBAGT,WACE,IAAM+I,EAA2BlH,EAC/B7B,KAAK8B,aAEP,GAAIiH,EAA0B,CAC5B,IAAMxC,EAAgBvG,KAAKuG,cAC3BkM,GAAyBzS,KAAK8B,aAE9B9B,KAAKuG,eAAgB,EACrB2U,GAAqBnS,GACrB/I,KAAKuG,cAAgBA,EAErByL,GAAgChB,EAAgB,GAAIhR,MAItD,OAFAA,KAAKgF,MAAQjD,EAAiB,GAEvB/B,O,qBAGT,SAAQuG,GAeN,OAdIA,IACFvG,KAAKuG,eAAgB,GAEvBkM,GAAyBzS,KAAK8B,aAE9BkQ,GAAgChB,EAAgB,GAAIhR,MFhSzC,SAA0BoF,GACvC,IAAML,EAAYK,EACZ8mB,EAAsBnnB,EAAU+M,UAAU4Y,QAC1CyB,EAAeD,EAAoBC,aAEzC,GAAKpnB,EAAUC,MAAf,CAEAD,EAAUC,MAAQjD,EAAiB,GAEnC,IrDHA6U,EdwD+C9U,EmErDzCiH,EAA2BlH,EAC/BkD,EAAUjD,aAmBZ,GAhBIiH,IACFmS,GAAqBnS,GtFNlB,SACLjH,GAEA,IAAMiH,EAA2BnH,EAA4BE,GACzDiH,WACKnH,EAA4BE,GACnCZ,EAAuB6H,IsFCvBqjB,CAA+BrnB,EAAUjD,arDT3C8U,EqDYI7N,EAAyB6N,sBrDT3BP,GAAsB1X,OAAS,KAE/BiY,EAAsBzR,SAAQ,SAACtE,GAC7ByV,GAA+BzV,OqDSnCqrB,EAAoBG,mBAAqBZ,GACvCS,EAAoBG,mBACpBtnB,GAEFmnB,EAAoBI,sBAAwBb,GAC1CS,EAAoBI,sBACpBvnB,GAEEonB,IACEA,EAAaI,4BACfJ,EAAaI,0BAA4Bd,GACvCU,EAAaI,0BACbxnB,IAIAonB,EAAaK,UAAU,CAIzB,IAHA,IAAMA,EAAWL,EAAaK,SACxBxY,EAAIwY,EAAS7tB,OAEV2S,EAAQ,EAAGA,EAAQ0C,EAAG1C,GAAS,EACtCkb,EAASlb,GAASma,GAAee,EAASlb,GAAQvM,GAGpDonB,EAAaK,SAAWA,EAASrV,QAAO,SAAC1Y,GAAD,OAAOA,EAAEE,OAAS,MO9DjD,SACb8tB,GAEA,IAAM3a,EAAY2a,EAElB,GAAoD,IAAhD3a,EAAU4Y,QAAQ2B,mBAAmB1tB,OAAc,CACrD,IAAM2S,EAAQQ,EAAUuW,QAAQ9iB,WAAWlB,QAAQyN,GAC/CR,GAAS,IACXQ,EAAUuW,QAAQ9iB,WAAW/D,OAAO8P,EAAO,GAC3CQ,EAAU4Y,QAAQqB,uBAAwB,IPyD9CW,CAAoC3nB,EAAU+M,WnEaChQ,EmEXdiD,EAAUjD,mBnEYpCiP,EAAsBjP,IqEmO3B6qB,CAAiB3sB,MAKjBA,KAAKgF,MAAQjD,EAAiB,IAEvB,I,gBAGT,SACE2E,EACA7C,GAOA,OADAoN,EAA0BvK,EAAW7C,EAAY7D,MAC1CA,O,iBAGT,SACE0G,EACAE,GAGA,OADAyK,EAA6B3K,EAAWE,EAAgB5G,MACjDA,O,oBAGT,WAA2D,2BAAjDoH,EAAiD,yBAAjDA,EAAiD,gBAEzD,OADAskB,GAA4BtkB,EAAOpH,MAC5BA,O,0BAGT,SAAasH,GAEX,ODrTG,SACLA,EACAvC,GAEAoD,EAAoBb,GAASnC,SAAQ,SAACxE,GACpCwG,GAAOxG,EAAGoE,MC+SV6nB,CAA0BtlB,EAAStH,MAC5BA,U,uBM3TX,SAAS6sB,GACP9nB,EACAuE,GAEIvE,EAAUC,QAAUjD,EAAiB,GACvCgD,EAAUO,OACa,WAAdgE,EACTvE,EAAUW,UACDX,EAAUC,QAAUjD,EAAiB,IAxBlD,SAAiCgD,GAC/B,IAAMgE,EAA2BlH,EAC/BkD,EAAUjD,aAGZ,GAAIiH,EAA0B,CAC5B,IAAMiS,EAAoBjS,EAAyBiS,mBAAqB,EACxEgQ,GACEjiB,EAAyBoG,cACzB/P,EACC,IAAoB4b,EACrBjW,GACA,IAaF+nB,CAAwB/nB,GA6Eb,SAASgoB,GACtBC,EACAjoB,EACAkoB,EACAC,GAEA,IAAMf,EAAea,EAAmBtC,QAAQyB,aAChD,GAAIA,GAAgBpnB,EAAU6W,UAAW,CAClCuQ,EAAaI,4BAChBJ,EAAaI,0BAA4B,IAE3CJ,EAAagB,8BAAgC,EAC7ChB,EAAaI,0BAA0Ba,QAAQroB,GAE/CkM,EACED,EAAgB,KAChB,kBA9BC,SACLmb,GAEA,IAAMkB,EAAQlB,EAEdkB,EAAMC,0BAA4B,EAEhCD,EAAMd,2BACNc,EAAMC,0BAA4BD,EAAMF,8BAnE5C,SACEhB,GAEA,IAAMkB,EAAQlB,EACR7iB,EAAY6iB,EAAa9lB,IAc/B,KAXGgnB,EAAME,iBACNF,EAAME,kBAAoBF,EAAME,gBAAgB,MAEjDF,EAAMG,cACoB,WAAxBH,EAAMG,cAA6B,UAAY,SAEjDH,EAAMC,yBAA2B,EAEjCD,EAAMI,YAAc,MAGH,IAAfJ,EAAM9lB,MAAiB8lB,EAAMI,YAAeJ,EAAM9lB,MAAtD,CAIA,IAAIgmB,EAAkBF,EAAME,gBAS5B,IARIF,EAAMb,UAAce,GAAoBA,EAAgB,KAC1DA,EACgB,WAAdF,EAAMhnB,KAA4C,WAAxBgnB,EAAMG,cAC5BH,EAAMb,SAASlkB,QACf+kB,EAAMb,SAASlkB,QAAQolB,UAE7BL,EAAMF,6BAA+B,GAEnCI,GAAmBA,EAAgB,GAAI,CAKzC,IAJA,IAAM5uB,EAAS4uB,EAAgB5uB,OACzByG,EAAImoB,EAAgBjlB,QACtBqlB,GAAO,EACPrc,EAAQ,EACLA,EAAQ3S,IACEyG,EAAEkM,GAEVnM,SAAQ,SAAC1G,GACTA,EAAEsJ,cACL4lB,GAAO,EACPN,EAAMF,8BAAgC,EAEtCN,GAAapuB,EAAG6K,OAIpBikB,EAAgB/rB,OAAO,EAAG8P,EAAQ,IAE9Bqc,GAdiBrc,GAAS,GAmBhC+b,EAAME,gBAAkBA,IAcxBK,CAAqBP,GAoBbQ,CAAwC1B,KAC9CpnB,GAGGonB,EAAaK,WAChBL,EAAaK,SAAW,IAE1B,IAAM7tB,EAASwtB,EAAaK,SAAS7tB,OAErC,GAAIsuB,GAAkBC,EACpB,IAAK,IAAI5b,EAAQ,EAAGA,EAAQ3S,EAAQ2S,GAAS,EAAG,CAC9C,IAAMM,EAASua,EAAaK,SAASlb,GAErC,GAAmB,aAAf4b,GACF,GAAItb,EAAOvN,QAAQ4oB,IAAmB,EAAG,CACvCrb,EAAOxQ,KAAK2D,GACZ,YAEG,GACU,mBAAfmoB,GACAtb,EAAOvN,QAAQ4oB,IAAmB,EAClC,CACAd,EAAaK,SAAShrB,OAAO8P,EAAO,EAAG,CAACvM,IACxC,YAIJonB,EAAaK,SAASprB,KAAK,CAAC2D,KCvI3B,SAAS+oB,GACdC,EACAC,GAEA,GAAKA,EAAL,CAGA,IAAMvB,EAAcsB,EAAgBjc,UAC9BnT,EAASqvB,EAAarvB,OACxBsvB,EAAwB,EACxBF,EAAgB/oB,QAAUjD,EAAiB,IAC7CgsB,EAAgBtnB,GAAG,QAAQ,SAASyS,IAClC8U,EAAa7oB,SAAQ,SAACJ,GACpBA,EAAU0B,GAAG,QAAQ,SAASjG,KAC5BytB,GAAyB,IACItvB,GApCvC,SACEovB,EACAC,GAEA,IAAMvB,EAAcsB,EAAgBjc,UACpCic,EAAgBtnB,GAAG,SAAS,SAASgX,IACnCuQ,EAAa7oB,SAAQ,SAACC,GACpB2nB,GACEN,EACArnB,EACA2oB,EACA,YAEF3oB,EAAEE,UAEJyoB,EAAgBpnB,IAAI,QAAS8W,MAE3BsQ,EAAgB/lB,UAClB+lB,EAAgBzoB,OAmBR4oB,CAAsBH,EAAiBC,GAEzCjpB,EAAU4B,IAAI,OAAQnG,MAExBuE,EAAUS,UAEZuoB,EAAgBpnB,IAAI,OAAQuS,MAE1B6U,EAAgB/lB,UAClB+lB,EAAgBvoB,SAGlBuoB,EAAgBtnB,GAAG,SAAS,SAASgX,IACnCuQ,EAAa7oB,SAAQ,SAACJ,GACpBgoB,GACEN,EACA1nB,EACAgpB,EACA,YAEFhpB,EAAUO,UAEZyoB,EAAgBpnB,IAAI,QAAS8W,MAE3BsQ,EAAgB/lB,UAClB+lB,EAAgBzoB,S,o6BC/DtB,IAAM6oB,GAGA,GAEN,SAASC,GAASpB,GAChB,IACE,IAAI1b,EAAQ,EAAG0C,EAAIma,GAA2CxvB,OAC9D2S,EAAQ0C,EACR1C,GAAS,EAET,GACE6c,GAA2C7c,GAAO,KAClD0b,EAEA,OAAO1b,EAGX,OAAQ,EAOH,SAAS+c,GACdrB,GAEA,IAAM1b,EAAQ8c,GAASpB,GACnB1b,GAAS,GACX6c,GAA2C3sB,OAAO8P,EAAO,GAGtD,SAASgd,GACdtB,EACAuB,GAEAJ,GAA2Cf,QAAQ,CACjDJ,EACAuB,IAGG,SAASC,GACdxB,GAEA,IAAM1b,EAAQ8c,GAASpB,GACvB,OAAO1b,GAAS,EACZ6c,GAA2C7c,GAAO,QAClDlS,E,6rBCZN,IAAIqvB,GAOA,GAEEC,GAAkD,GAExD,SAASC,GACP7c,EACA8c,GAEA,IAAMC,EAAkBJ,GAA6B3c,EAAUqK,IAC3D0S,EACFA,EAAgBC,SAAS1tB,KAAKwtB,GAE9BH,GAA6B3c,EAAUqK,IAAM,CAC3C2S,SAAU,CAACF,GACXnC,YAAa3a,GAqGnB,SAASid,GACP1C,GAEA,IAAM2C,EAA2C,GAkDjD,OAhDA3C,EAAmBlnB,SAAQ,SAACxE,EAAGsuB,EAAQze,GACrC,IAAM0e,EAC0B,iBAAvBvuB,EAAEwuB,iBACL3e,EAAM7P,EAAEwuB,kBAAkBpqB,UAC1BpE,EAAEwuB,mBAGLD,GACgB,mBAAjBvuB,EAAEusB,YACe,oBAAjBvsB,EAAEusB,YACe,sBAAjBvsB,EAAEusB,YACDgC,IAjDP,SACEF,EACAjqB,EACAmqB,GAGA,IADA,IAAMlb,EAAIgb,EAAoBrwB,OACrB2S,EAAQ,EAAGA,EAAQ0C,EAAG1C,GAAS,EAAG,CACzC,IAAM3Q,EAAIquB,EAAoB1d,GAE9B,GAAI4d,IAAoBvuB,EAAEoE,UAOxB,OANIpE,EAAEqtB,aACJrtB,EAAEqtB,aAAa5sB,KAAK2D,GAEpBpE,EAAEqtB,aAAe,CAACjpB,IAGb,EAET,IAAItG,GAAK,EACH2G,EAAIzE,EAAEqtB,aAKZ,GAJI5oB,IACF3G,EAAI2G,EAAEf,QAAQ6qB,IAGZzwB,GAAK,GAAK2G,EAEZ,OADAA,EAAE5D,OAAO/C,EAAG,EAAGsG,IACR,EAIX,OAAO,EAoBAqqB,CACCJ,EACAruB,EAAEoE,UACFmqB,MAGiB,oBAAjBvuB,EAAEusB,WACJ8B,EAAoB5tB,KAAK,CACvB8rB,WAAYvsB,EAAEusB,WACdgC,kBACAnqB,UAAWpE,EAAEoE,UACbsqB,gBAAiB,CACfC,WAAY,CAAC3uB,EAAEoE,WACf2W,mBAAoB/a,EAAE+a,sBAGA,sBAAjB/a,EAAEusB,WACX8B,EAAoB5tB,KAAK,CACvB8rB,WAAYvsB,EAAEusB,WACdgC,kBACAnqB,UAAWpE,EAAEoE,UACbwqB,kBAAmB,CACjBD,WAAY,CAAC3uB,EAAEoE,WACfyqB,cAAe7uB,EAAE6uB,iBAIrBR,EAAoB5tB,KAAK,CACvB8rB,WAAYvsB,EAAEusB,WACdgC,kBACAnqB,UAAWpE,EAAEoE,gBAMdiqB,EAET,SAASS,GACPC,GAEAA,EAA4BvqB,SAAQ,SAACxE,GAAM,IAEvCoE,EAMEpE,EANFoE,UACAmqB,EAKEvuB,EALFuuB,gBACAhC,EAIEvsB,EAJFusB,WACAc,EAGErtB,EAHFqtB,aACAqB,EAEE1uB,EAFF0uB,gBACAE,EACE5uB,EADF4uB,kBAGI9C,EAAc1nB,EAAU+M,UACX,oBAAfob,GAAoCgC,GAClClB,GAAgBqB,IAClBA,EAAgBC,WAAaD,EAAgBC,WAAWzH,OACtDmG,IFpIH,SACLD,EACA4B,GAKA,GAAKA,EAAL,CAGA,IAAMlD,EAAcsB,EAAgBjc,UAE9B4J,EAAqBiU,EAAoBjU,mBAC/CiU,EAAoBL,WAAWnqB,SAAQ,SAACC,GACtC,IAAML,EAAYK,EACdwqB,EAA2B,EAE/B7B,EAAgBtnB,GAAG,WAAW,SAASyS,IACjC0W,GAA4BlU,IAC9BqS,EAAgBpnB,IAAI,UAAWuS,GAE3BuT,EAAY/B,QAAQyB,cACtBY,GACEN,EACA1nB,EACAgpB,EACA,YAGJhpB,EAAUO,QAEZsqB,GAA4B,SEwG5BC,CAA8BX,EAAiBG,IACvB,sBAAfnC,GAAsCgC,GAC3ClB,GAAgBuB,IAClBA,EAAkBD,WAAaC,EAAkBD,WAAWzH,OAC1DmG,IFzKH,SACLD,EACAwB,GAKA,GAAKA,EAAL,CAIA,IAAM9C,EAAcsB,EAAgBjc,UAE9B0d,EAAgBD,EAAkBC,cAExCD,EAAkBD,WAAWnqB,SAAQ,SAACC,GACpC,IAAML,EAAYK,EAClB2oB,EAAgBtnB,GAAG+oB,GAAe,WAC5B/C,EAAY/B,QAAQyB,cACtBY,GACEN,EACA1nB,EACAgpB,EACA,YAGJhpB,EAAUO,cEkJVwqB,CAAgCZ,EAAiBK,IACzB,mBAAfrC,GAAmCgC,EAC5CA,EAAgBzoB,GAAG,OAAO,SAASyS,IACjC6T,GAAsCN,EAAa1nB,GAE/CipB,EACFF,GAAuB/oB,EAAWipB,GACzBjpB,EAAUiD,UACnBjD,EAAUO,OAGZ4pB,EAAgBvoB,IAAI,MAAOuS,OAG7BuT,EAAY/B,QAAQ4B,sBAAsBlrB,KAAK2D,GAC/CgoB,GAAsCN,EAAa1nB,GAE/CipB,GACFF,GAAuB/oB,EAAWipB,IAInCkB,GACClB,GAAiBA,EAAa,IAC9BqB,GAAoBA,EAAgBC,WAAW,IAE7CvqB,EAAUiD,UAAYjD,EAAUC,QAAUjD,EAAiB,IAC7DgD,EAAUO,UAMlB,SAASyqB,GACPje,EACAgd,GAEA,IAAMpqB,EAAIoqB,EA0CV,OAzCApqB,EAAE4D,QAAQnD,SAAQ,SAACtE,EAAKyQ,GACtB,ICpRF0e,EAEMC,EDkREtvB,EAAIE,EACJqvB,GCrRRF,EDqR0DrvB,EAAEqvB,iBCnRtDC,EAA4D,GAC9DD,EAAiB1oB,SACnB0oB,EAAiB1oB,QAAQnC,SAAQ,SAAC+hB,GAAiB,IACzC5oB,EAAuC4oB,EAAvC5oB,OAAQgT,EAA+B4V,EAA/B5V,MAAOmF,EAAwByQ,EAAxBzQ,oBACjB0Z,EAAsD,GACxDC,GAAuB,EAE3B,CAAC,QAAS,QAAS,WAAY,MAAO,QAAQjrB,SAAQ,SAACb,GACrD,IAAIwjB,EACFkI,EAAiB1rB,GAEnB,GAAkB,iBAAPwjB,EAAiB,CAC1B,IAAMhjB,EAAI0e,GAAoBsE,GACb,WAAb,GAAOhjB,KACTgjB,EAAKxF,GAAQxd,IAGC,mBAAPgjB,IACTqI,EAAuB7rB,GAAyBwjB,EAC9CxpB,EACAgT,EACAmF,GAEF2Z,GAAuB,MAIvBA,GACFH,EAA2B7uB,KAA3B,YACK4uB,GACAG,GAFL,IAGE7oB,QAAS,CAAC4f,WAKb+I,EAA2B,IAIzBA,GD4ODC,GACFA,EAAa/qB,SAAQ,SAACkrB,EAAqB5xB,GACzC,IAAM2G,EAAIirB,EACA,IAAN5xB,GACFkC,EAAEqvB,iBAAmB5qB,EACrBV,EAAE4M,GAAS3Q,GAEX+D,EAAEtD,KAAK,CACL+tB,iBAAkB7d,EAClB4b,WAAY,WACZ8C,iBAAkB5qB,EAClBkrB,yBAA0B3vB,EAAEqvB,yBAOXtrB,EAAEuG,KAAI,SAACtK,GAChC,IAAM0nB,EAAUvW,EAAUuW,QACpBtjB,EAAY,IAAIwrB,GACpB5vB,EAAEqvB,iBACF3H,GASF,OANAtjB,EAAUurB,yBAA2B3vB,EAAE2vB,yBACnC3vB,EAAE2vB,yBACF3vB,EAAEqvB,iBAENle,EAAU4Y,QAAQ2B,mBAAmBjrB,KAAK2D,GAE1C,SACKpE,GADL,IAEEoE,iBA8BC,IACDyrB,GADOC,IACPD,IAAmB,EAChB,SAAC3sB,EAAsBiO,GAC5B,GAAKA,EAEE,CACL,IAAM+c,EAAkBJ,GAA6B3c,EAAUqK,IAC3D0S,IACGA,EAAgB6B,mCACnB7B,EAAgB6B,iCAAmC,IAErD7B,EAAgB6B,iCAAiCtvB,KAAKyC,SAPxD6qB,GAAoCttB,KAAKyC,GAW3C,IAAK2sB,GAAkB,CACrB,IAAMxvB,EAAeO,YAAW,WAC9B,IAAMmuB,EAvCd,WACE,IAAIA,EAEA,GAiBJ,OAfKxd,GAAcuc,KACjB9qB,EAAY8qB,IAA8B,SAAC7c,GACzC8d,EAA8BA,EAA4B7H,OACxDkH,GACEgB,GAAyBne,EAAO6a,YAAa7a,EAAOkd,YAGpDld,EAAO8e,kCACT9e,EAAO8e,iCAAiCvrB,SAAQ,SAAC2iB,GAC/CA,UAMD4H,EAmBmCiB,GAEpCjC,GAAoCvpB,SAAQ,SAACC,GAC3CA,OAGEsqB,GACFD,GAAsCC,GAGxChB,GAAoC/vB,OAAS,EAC7C6xB,IAAmB,EACnBlvB,aAAaN,KACZ,GAEHwvB,IAAmB,KA6BlB,SAASI,GACdnE,EACAuD,EACAd,EAIAhC,EACA2D,GAEA,GAAIpE,EAAY/B,QAAQoG,gBACtBrE,EAAY/B,QAAQ2B,mBAAmBjrB,KACrC,IAAImvB,GAAYP,EAAkBvD,EAAYpE,cAFlD,CAjCInW,GAAcuc,KAChBgC,IAAoC,WAClChC,GAA+B,GD1WnCN,GAA2CxvB,OAAS,KCiZpD,IAAMoyB,EAAWf,EACbgB,EAAa9B,EAYjB,GAXIzC,EAAY/B,QAAQyB,eACtB4E,EAASnV,WAAY,EAEjBoV,IAAeA,EAAWpV,YAI5BoV,OAAa5xB,IAIb4xB,EAAY,CACd,IAAM7B,EAAoB6B,EAA2B1rB,KAChD0rB,EAjDT,SACElf,EAEAod,GAKA,IAAML,EAAkBJ,GAA6B3c,EAAUqK,IAC/D,GAAI0S,EACF,OAAOA,EAAgBC,SAAShvB,WAC9B,SAACa,GAAD,OAAOA,EAAEqvB,mBAAqBd,KAuC5B+B,CAAwBxE,EAAauE,GAEzC,GAAyB,OAArB7B,EAA2B,CAC7B,IAAMxuB,EAA4B,CAChCwuB,mBACAjC,aACA8C,oBAEF,OAAQ9C,GACN,IAAK,kBACHvsB,EAAE+a,mBAAqBmV,EACvB,MAEF,IAAK,oBACHlwB,EAAE6uB,cAAgBqB,EAMtB,YADAlC,GAA6BlC,EAAa9rB,IAI9CguB,GAA6BlC,EAAa,CACxCuD,sB,o6BEncG,IAAMkB,GAAiC,CAC5C,MACA,OACA,MACA,SACA,QACA,WACA,QACA,cACA,WACA,iBACA,QACA,WACA,QACA,QAGF,SAASC,GAA6BjqB,GACpC,IAAMrG,EAAwB,GAE9B,UAAeqG,IACb,IAAK,SACCzC,EAAWyC,GACbrG,EAAIwF,IAAMa,EAEVrG,EAAI4G,OAASP,EAEf,MACF,IAAK,WACHrG,EAAI4G,OAASP,EAEb,MACF,IAAK,SACHrG,EAAI2G,IAAMN,EACV,MACF,IAAK,UACHrG,EAAIkH,YAAcb,EAKtB,OAAOrG,EAGM,SAASuwB,GACtBpE,EACAqE,EAKAC,EAKAC,GAKA,IACI3a,EASMjW,EAVN6wB,EAAkCF,EAGf,iBAAZD,GAA2C,iBAAZA,GACxCG,EACmD,WAAjD,GAAOD,GACHA,EACAJ,GAA6BI,IAG3B5wB,EAA+B,IAEnC0wB,GACEC,EAJN1a,EAKSjW,IAGT6wB,EAC6C,WAA3C,GAAOA,GACHA,EACAL,GAA6BG,GAEnC1a,EAAwBya,GAG1B,IAAM/pB,EAAYkqB,EACflqB,QACCa,EACGqpB,EAAyDlqB,SAE5D0lB,EAAmBtC,QAAQpjB,QAEzB3I,EAAS2I,EAAQ3I,OAEjB2M,EAAIhE,EAAQ2D,KAAI,SAAC3M,EAAQG,GAC7B,MAAO,CACLgY,oBAAqB9X,EACrBL,SACAgT,MAAO7S,MAGLgzB,EAAsB,OAC1Blb,UAAWK,GACP4a,GAFmB,IAGvBlqB,QAASgE,EACTwG,UAAWkb,IAWb,GARAkE,GAA+B/rB,SAAQ,SAACb,GACjCvD,EAAe0wB,EAAqBntB,KACvCmtB,EAAoBntB,GAAyB0oB,EAAmBtC,QAC9DpmB,OAMJmtB,EAAoB3pB,OACU,WAA9B2pB,EAAoB3pB,OACpB2pB,EAAoBlqB,OAASmqB,OAE7B,GAAIj0B,MAAMC,QAAQ+zB,EAAoB3pB,OAAQ,CAC5C,IAAMkM,EAAIyd,EAAoB3pB,MAAMnJ,OACY,iBAArC8yB,EAAoB3pB,MAAMkM,EAAI,GACvCyd,EAAoBlqB,MAAO,EAE3BkqB,EAAoBlqB,KAAOyM,OAG7Byd,EAAoBlqB,MAAO,EAa/B,OAREkqB,EAAoBprB,KACpBorB,EAAoBlqB,OAASmqB,QAEzBD,EAAoBprB,IAAIhC,QAAQ,cAAgB,IAClDotB,EAAoBlqB,KAAO,GAIxBkqB,E,kuBC1JM,SAASE,GACtBlF,GAEA,IAAM/B,EAAU+B,EAAY/B,QACtB4E,EAAa5E,EAAQ2B,mBAC3B,OAAI3B,EAAQyB,aACV,aACMzB,EAAQyB,aACTI,0BAAkDpV,QACnD,SAAC/R,GAAD,OAAOA,EAAEJ,QAAUjD,EAAiB,OAHxC,GAKKutB,EAAWnY,QAAO,SAAC/R,GAAD,OAAQA,EAAEwW,eAG5B0T,E,uOCXM,SAASsC,GACtB9f,EACAZ,GAEA,IAAM2gB,EJ4FD,SACL/f,GAEA,IAAM+c,EAAkBJ,GAA6B3c,EAAUqK,IAC/D,GAAI0S,EACF,OAAOA,EAAgBC,SAAS7jB,KAAI,SAACtK,GAAD,OAAOA,EAAEqvB,oBIjGrB8B,CAA4BhgB,GAClD+f,GACFpB,IAAoC,WAClC3e,EAAU4Y,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GAE1CA,EAAUurB,0BACVuB,EAAkBxtB,QAAQU,EAAUurB,2BAA6B,GAEjEpf,EAASnM,QAGZ+M,GCnBQ,SAASigB,GACtBjgB,EACA7K,GAEA,IAAKmP,GAAQnP,GAAO,CAClB,IAAM4C,EAAIsB,WAAWlE,GACrB,GAAI6K,EAAU4Y,QAAQN,yBAAyBvgB,GAC7C,OAAOiI,EAAU4Y,QAAQN,yBAAyBvgB,GAGtD,OAAO5C,E,y8BCiCT,SAAS+qB,GACPjtB,EACAmM,GAEInM,EAAUC,QAAUjD,EAAiB,GACvCgD,EACG0B,GAAG,QAAQ,SAASqhB,IACnB5W,IACAnM,EAAU4B,IAAI,OAAQmhB,MAEvBtiB,OAEH0L,IAIJ,IAgXA,GAhXkD,CAChD+gB,EC5CwE,SAExEZ,EAMAC,EAKAY,GAGAlyB,KAAK0qB,QAAQyH,4BAAyB/yB,EACtCY,KAAK0qB,QAAQ0H,8BAA2BhzB,EAExC,IAAMqyB,EAAsBL,GAC1BpxB,KACAqxB,EACAC,EACAY,GAMF,OAHA5D,GAAuCtuB,KAAMyxB,GAC7Cb,GAAyC5wB,KAAMyxB,GAExCzxB,MDiBP2pB,ECdsE,SAEtE0H,EAMAC,EAKAY,GAGAlyB,KAAK0qB,QAAQyH,4BAAyB/yB,EACtCY,KAAK0qB,QAAQ0H,8BAA2BhzB,EAExC,IAAMqyB,EAAsBL,GAC1BpxB,KACAqxB,EACAC,EACAY,GAGIG,EAA2B7D,GAAuCxuB,MAGxE,GADAsuB,GAAuCtuB,KAAMyxB,GACzCY,EACFzB,GACE5wB,KACAyxB,EAEAY,EACA,sBAEG,CACL,IAAMC,EAAuBtyB,KAAK0qB,QAAQ2B,mBACxCrsB,KAAK0qB,QAAQ2B,mBAAmB1tB,OAAS,GAEvC2zB,EACF1B,GACE5wB,KACAyxB,EAEAa,EACA,kBAGF1B,GAAyC5wB,KAAMyxB,GAInD,OAAOzxB,MDtCPxB,GCyCK,SAEL6yB,EAMAC,EAKAC,GAMAvxB,KAAK0qB,QAAQyH,4BAAyB/yB,EACtCY,KAAK0qB,QAAQ0H,8BAA2BhzB,EAExC,IAAMmzB,EAA6B/D,GACjCxuB,MAEF,GAAIuyB,EAA4B,CAC9B,IAAMF,EAA2BE,EAC7BC,GAAqD,EAErDC,EAAepB,EAQnB,GALqB,WAAnB,GAAOA,SACgCjyB,IAAvCkyB,IAEAmB,EAAe,CAACA,IAEdh1B,MAAMC,QAAQ+0B,GAAe,CAC/BD,EAAkB,GAClB,IAAIhpB,EAAQ,EACZ7F,EACE0uB,EAAyB9b,WACzB,SAACN,EAAgB3R,GACf,IAAMkM,EAAQiiB,EACRvrB,EAAIsJ,EAAMhH,GAEfgpB,EAA8CluB,GAAgB4C,OAC/B,IAArBsJ,EAAMhH,EAAQ,KACvBA,GAAS,MAYjB7F,EAP4BytB,GAC1BpxB,KACCwyB,GAAmBC,EACpBnB,EACAC,IAG+B,SAACvqB,EAAe1C,GAC/C,IAAM4C,EAAIF,EACW,cAAjB1C,EACF+tB,EAAyB9b,UAAY,CACnC8b,EAAyB9b,UACzBrP,GAGFmrB,EAAyB/tB,GAAyB4C,UAItDoO,GACE,8BACA,yGAGJ,OAAOtV,MDpHPqtB,MAPgD,SAS9CqF,GAEA,IAEInrB,EACA/G,EAJJ6F,EACA,uDAD8B,SAoB9B,OAlBAgoB,GAA0CruB,MAGjB,iBAAd0yB,GACTnrB,EAAO,EACP/G,EAAIkyB,IAEJnrB,EAAOmrB,EACPlyB,EAAI6F,GAENrG,KAAK0qB,QAAQyB,aAAe,CAC1B5kB,KAAMA,GAAQ,EACdlB,IAAK7F,EACL8sB,yBAA0B,EAC1BH,6BAA8B,EAC9BM,WAAY,EACZD,cAAe,UAEVxtB,MAGToiB,MAjCgD,WAiCD,IAAtBuQ,EAAsB,uDAAH,EAE1C,OADA3yB,KAAK0qB,QAAQyH,uBAAyBQ,EAC/B3yB,MAGT4yB,KAtCgD,SAsCxB7oB,GAEtB,OADA/J,KAAK0qB,QAAQ0H,yBAA2BroB,EACjC/J,MAGT6G,IA3CgD,WNG3C,IAELgsB,EAEInD,EAIEb,EMuCJ,OANAR,GAA0CruB,MNvC5C6yB,EMyC4C,CACxCrK,MAAM,EACN3N,qBAAqB,GNzCrB6U,EAEA,GAEEb,EAAkBJ,GMmCczuB,KNnCyBmc,WAExDsS,GMiC+BzuB,KNjCQmc,IAE1C0S,IACEgE,GACFhE,EAAgBC,SAAS3pB,SAAQ,SAACypB,GAChChxB,OAAOI,OAAO4wB,EAAQoB,iBAAkB6C,MAI5CnD,EAA8BA,EAA4B7H,OACxDkH,GACEgB,GMsBgC/vB,KNtBI6uB,EAAgBC,YAGpDD,EAAgB6B,kCAClB7B,EAAgB6B,iCAAiCvrB,SAAQ,SAAC2iB,GACxDA,QAIN4G,GAAoCvpB,SAAQ,SAACC,GAC3CA,OAEEsqB,GACFD,GAAsCC,GMa/B1vB,MAGTyF,MArDgD,WAwD9C,OEjHW,SACbqM,GAEA,IAAI9Q,GAAgB,EACdqrB,EAA0C,GAoChDuF,GAAiC9f,GAAW,SAAC1M,GAC3C,IAAML,EAAYK,EAClBinB,EAAmBjrB,KAAK2D,GACxBA,EAAUiD,UAAW,EACjBhH,EAAe,IACjBA,EAAgBO,YAAW,YAxC/B,WACE,IAAIiI,EAAQ,EACN7K,EAAS0tB,EAAmB1tB,OAElC,SAASm0B,EAAQ1tB,GACGA,EACR4C,UAAW,GAErBwB,GAAS,IACI7K,GACX0tB,EAAmBlnB,SAAQ,SAAC1G,GAExB2G,EAAEJ,QAAUjD,EAAiB,IAC7B+P,EAAU4Y,QAAQ4B,sBAAsBjoB,QAAQ5F,IAAM,GAEtDA,EAAE6G,UAMV+mB,EAAmBlnB,SAAQ,SAACJ,GACtBA,EAAUC,QAAUjD,EAAiB,GACvCgD,EACG0B,GAAG,QAAQ,SAASyS,IACnB4Z,EAAQ/tB,GACRA,EAAU4B,IAAI,OAAQuS,MAEvB1T,OAEHstB,EAAQ/tB,MAWRguB,GACAzxB,aAAaN,KACZ,OF+DLgyB,CAA+BhzB,MAExBA,MAGT8G,IA3DgD,SA6D9CC,EACAC,GAKA,OGzHW,SACb8K,EACA/K,EACAC,GAEA,IAAMM,EAAUwK,EAAU4Y,QAAQpjB,QAE5B2rB,EAAenhB,EAAUuW,QAAQ/gB,GAEvC2rB,EAAavI,QAAQoG,iBAAkB,EAEvCmC,EAAavI,QAAQN,yBAA2BtY,EAAU4Y,QAAQN,yBAAyB9hB,QAE3F,IAAM0nB,EAAgD,CACpDxH,MAAM,EACNxgB,UAAU,EACVR,IAAK,GAGmB,iBAAfT,EACTksB,EAAahB,EACXlrB,EACAC,EACAgpB,GAE6B,WAAtB,GAAOjpB,IAChBksB,EAAahB,EAAElrB,EAAYipB,GAE7BiD,EACGxsB,GAAG,QAAQ,WACV,IAAM1B,EAAYkuB,EAAavI,QAAQ2B,mBAAmB,GACpDtjB,EAA2BlH,EAC/BkD,EAAUjD,aAGRiH,IACFhE,EAAU2C,cAAgB,IAC1B3C,EAAUrD,IAAM,IAEhB+W,GACE1P,EAAyB6N,sBACzB7N,GAGFkqB,EAAa3sB,cAGhBd,OHyED0tB,CAAiBlzB,KAAM+G,EAAYC,GAFbhH,MAMxBY,IAtEgD,SAsEzBqG,GACrB,OIjGW,SACb6K,EACA7K,GAWA,IATA,IAAM3C,EAAeytB,GAAgBjgB,EAAW1H,EAAYnD,EAAKnJ,aAE3DuuB,EAAqBva,EAAU4Y,QAAQ2B,mBAC1C/jB,QACAolB,UAEG/uB,EAAS0tB,EAAmB1tB,OAE9Bw0B,EAAsD,GATxB,WAUzB7hB,GACP,IACMvI,EAA2BlH,EADfwqB,EAAmB/a,GAEzBxP,aAEZ,GAAIiH,EAA0B,CAC5B,IAAMqqB,EAA+CrqB,EAAyB6N,sBAC3EO,QAAO,SAACzF,GACP,OAAOA,EAAepN,eAAiBA,KAExC2G,KAAI,SAACtK,GACJ,MAAO,CACLrC,OAAQqC,EAAErC,OACVD,MAAOsC,EAAEoR,iBACTzN,eACAkY,sBACEzT,EAAyByT,0BAI7B4W,EAAgB,KAClBD,EA1DR,SACEA,EACAE,GAoBA,OAlBAA,EAAcluB,SAAQ,SAACmuB,GACrB,IAAMhiB,EAAQ6hB,EAAuBrzB,WACnC,SAACoL,GAAD,OACEooB,EAAkBhvB,eAAiB4G,EAAE5G,cACrCgvB,EAAkBh1B,SAAW4M,EAAE5M,UAE/BgT,GAAS,EAETgiB,EAAkB9W,sBAClB2W,EAAuB7hB,GAAOkL,wBAE9B2W,EAAuB3xB,OAAO8P,EAAO,GACrC6hB,EAAuB/xB,KAAKkyB,IAG9BH,EAAuB/xB,KAAKkyB,MAGzBH,EAoCwBI,CACvBJ,EACAC,MAvBC9hB,EAAQ,EAAGA,EAAQ3S,EAAQ2S,GAAS,EAAG,EAAvCA,GA6BT,GAAI6hB,EAAuB,GACzB,MAAO,CACL70B,OAAQ60B,EAAuB,GAAG70B,OAClCD,MAAO80B,EAAuB,GAAG90B,MACjCiG,aAAc6uB,EAAuB,GAAG7uB,cJmDnCkvB,CAA0BxzB,KAAMiH,IAGzCzB,KA1EgD,WAiF9C,OANAxF,KAAK0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GACvCA,EAAUS,UAEZosB,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAUS,UAELxF,MAGTsF,KApFgD,WAoFxB,IAnHF0nB,EAmHE,OAetB,OAlIoBA,EAoHLhtB,MAnHE0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GACrD,IAAMtG,EAAIsG,EACNtG,EAAEuG,QAAUjD,EAAiB,IAAMtD,EAAEuG,QAAUjD,EAAiB,KAEhEirB,EAAmBtC,QAAQ4B,uBAC3BU,EAAmBtC,QAAQ4B,sBAAsBjoB,QAAQ5F,IAAM,EAE/DA,EAAE6G,OAEF7G,EAAEuJ,UAAW,MA2GjB4pB,GAAiC5xB,MAAM,SAAC+E,GACtC,IAAMK,EAAIL,EACNK,EAAEJ,QAAUjD,EAAiB,IAAMqD,EAAEJ,QAAUjD,EAAiB,KAEhE,EAAK2oB,QAAQ4B,uBACb,EAAK5B,QAAQ4B,sBAAsBjoB,QAAQe,IAAM,EAEjDA,EAAEE,OAEFF,EAAE4C,UAAW,MAIZhI,MAGTkF,MAtGgD,WA6G9C,OANAysB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUG,WAC5D0sB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUG,cAGPlF,MAGTqF,OAhHgD,WAuH9C,OANAssB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUM,YAC5DusB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUM,eAGPrF,MAGT0F,QA1HgD,WAiI9C,OANAisB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUW,aAC5DksB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUW,gBAGP1F,MAGT2F,IApIgD,WA4I9C,OAPAgsB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUY,SAE5DisB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUY,YAGP3F,MAGT4F,GA/IgD,SA+I1BC,GAOpB,OANA8rB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUa,GAAGC,MAC/D+rB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUa,GAAGC,SAGV7F,MAGT8F,KAzJgD,SAyJxBD,GAOtB,OANA8rB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUe,KAAKD,MACjE+rB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUe,KAAKD,SAGZ7F,MAGT+F,KAnKgD,SAmKxBF,GAOtB,OANA8rB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUgB,KAAKF,MACjE+rB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUgB,KAAKF,SAGZ7F,MAGTkG,MA7KgD,SA6KvBC,GAWvB,OAVAkoB,GAA0CruB,MAE1C2xB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OACjCA,EAAUmB,MAAMC,MAElByrB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUmB,MAAMC,SAGbnG,MAGTgG,OA3LgD,SA2LtBC,GASxB,OARA0rB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OACjCA,EAAUiB,OAAOC,MAEnB2rB,GAAiC5xB,MAAM,SAAC+E,GACtCitB,GAA8BjtB,GAAW,WACvCA,EAAUiB,OAAOC,SAGdjG,MAGToG,MAvMgD,SAuMvBC,GAMvB,OALAsrB,GAAqB3xB,MAAMmF,SAAQ,SAACJ,GAAD,OAAeA,EAAUqB,MAAMC,MAElEurB,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAUqB,MAAMC,MAEXrG,MAGTwG,OAhNgD,WA0N9C,OATA6nB,GAA0CruB,MAE1CA,KAAK0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GACvCA,EAAUyB,YAGZorB,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAUyB,YAELxG,MAGTsG,QA7NgD,SA6NrBC,GAWzB,OAVA8nB,GAA0CruB,MAE1CA,KAAK0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GACvCA,EAAUuB,QAAQC,MAGpBqrB,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAUuB,QAAQC,MAGbvG,MAGTyG,GA3OgD,SA6O9CC,EACA7C,GAMA,IAAMuN,EAAQ2gB,GAAgB/xB,KAAMoK,EAAY1D,EAAU5I,aACpDgU,EAAY9R,KAEdyzB,EAAqB,EACrBC,EAAmC,EACnCrH,EAAqBva,EAAU4Y,QAAQ2B,mBAAmB/jB,QACxDuJ,EAAgB,SAACiD,GAOrB,GANA2e,GAAsB,EAEtBC,EKzTS,SACbrH,GAEA,IAAIsH,EAA4B,EAYhC,OAXAtH,EAAmBlnB,SAAQ,SAACC,GAC1B,OAAQA,EAAEJ,OACR,IAAK,WACL,IAAK,YACH,MAEF,QACE2uB,GAA6B,MAI5BA,EL0SgCC,CACjCvH,GAGEoH,GAAsBC,EAAkC,CAG1D,OAFAA,EAAmC,EACnCD,EAAqB,EACbriB,GACN,IAAK,OACL,IAAK,QACL,IAAK,OACHU,EAAUnL,IAAIyK,EAAOvN,GAKzB,OAAOA,EAAW9F,KAAK+T,EAAWgD,EAAMhD,MAM5Cua,EAAqBva,EAAU4Y,QAAQ2B,mBAAmB/jB,SAEvCnD,SAAQ,SAACJ,GAC1B2uB,GAAoC,EACpC3uB,EAAU0B,GAAGC,EAAWmL,MAG1B+f,GAAiC5xB,MAAM,SAAC+E,GACtCsnB,EAAmBjrB,KAAK2D,GAExBA,EAAU0B,GAAGC,EAAWmL,MAGrB7R,KAAK0qB,QAAQmJ,kBAChB7zB,KAAK0qB,QAAQmJ,gBAAkB,IAEjC,IAAMriB,EAAcxR,KAAK0qB,QAAQmJ,gBAAgBziB,IAAU,GAQ3D,OANKpR,KAAK0qB,QAAQmJ,gBAAgBziB,KAChCpR,KAAK0qB,QAAQmJ,gBAAgBziB,GAASI,GAGxCA,EAAYpQ,KAAK,CAACyC,EAAYgO,IAEvB7R,MAGT2G,IA9SgD,SAgT9CD,EACAE,GAEA,IAAMwK,EAAQ2gB,GAAgB/xB,KAAMoK,EAAY1D,EAAU5I,aAE1D,GAAIkC,KAAK0qB,QAAQmJ,iBAAmB7zB,KAAK0qB,QAAQmJ,gBAAgBziB,GAAQ,CACvE,IAAMI,EAAcxR,KAAK0qB,QAAQmJ,gBAAgBziB,GAK7CS,GAAkC,EACtC7R,KAAK0qB,QAAQmJ,gBAAgBziB,GAASI,EAAY2F,QAAO,SAAC2c,GACxD,OAAIA,EAAI,KAAOltB,IAGfiL,EAAgBiiB,EAAI,IACb,MAGLjiB,IACF7R,KAAK0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GAAD,OACtCA,EAAU4B,IAAIyK,EAAOS,MAGvB+f,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAU4B,IAAIyK,EAAOS,OAK3B,OAAO7R,MAGTmH,OAlVgD,WAkVwB,kCAA3CC,EAA2C,yBAA3CA,EAA2C,gBACtE,IAAM2sB,EAAkB3sB,EAAM6D,KAAI,SAAChE,GACjC,IAAM4C,EAAIsB,WAAWlE,EAAKnJ,YAC1B,OAAI,EAAK4sB,QAAQN,yBAAyBvgB,GACjC,EAAK6gB,QAAQN,yBAAyBvgB,GAExC5C,KAUT,OAPAjH,KAAK0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GACvCA,EAAUoC,OAAV,MAAApC,EAAS,GAAWgvB,OAGtBnC,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAUoC,OAAV,MAAApC,EAAS,GAAWgvB,OAEf/zB,MAGTqH,aArWgD,SAqWhBC,GAQ9B,OAPAtH,KAAK0qB,QAAQ2B,mBAAmBlnB,SAAQ,SAACJ,GACvCA,EAAUsC,aAAaC,MAGzBsqB,GAAiC5xB,MAAM,SAAC+E,GACtCA,EAAUsC,aAAaC,MAElBtH,O,6rBMpZX,IAAIg0B,GAAqB,EAyGzB,GA7BuB,SACrB9H,EACA7D,GAEA,IAAM4L,EAAiB/H,EACjBgI,EAAkB7L,EAAQwD,IAC1BsI,EAAkC,CACtC9H,mBAAoB,GACpBC,sBAAuB,GACvBlC,yBAA0B,IAE5B8G,YAAuC,SAAC5sB,GACtC6vB,EAAS7vB,GAAyB4vB,EAAgB5vB,MAGhD2vB,EAAe3sB,UACjB2sB,EAAe3sB,QAAUa,EAAoB8rB,EAAe3sB,UAG9D,IAAMmlB,EA9FR,SACEpE,EACA+L,GAEA,IAAM3H,EAAe,SACnB4E,EAKAC,EAIAY,GAEA,IAAMT,EAAsBL,GAC1B3E,EACA4E,EACAC,EACAY,GAGImC,EAA+B7F,GACnC/B,GAsCF,OAnCA6B,GAAuC7B,EAAagF,GAEhDhF,EAAY/B,QAAQyH,wBACtBvB,GACEnE,EACAgF,EACA4C,EACA,kBACA5H,EAAY/B,QAAQyH,wBAEtB1F,EAAY/B,QAAQyH,4BAAyB/yB,GACpCqtB,EAAY/B,QAAQ0H,0BAC7BxB,GACEnE,EACAgF,EACA4C,EACA,oBACA5H,EAAY/B,QAAQ0H,0BAEtB3F,EAAY/B,QAAQ0H,8BAA2BhzB,GACtCi1B,EACTzD,GACEnE,EACAgF,EAEA4C,EACA,YAGFzD,GACEnE,EACAgF,GAIGhF,GAWT,OARAuH,IAAsB,EAEtBp2B,OAAOI,OAAOyuB,EAAa6H,GAAuB,CAChDnY,GAAI6X,GACJtJ,QAAS0J,EACT/L,YAGKoE,EAqBa8H,CAAkBlM,EAAD,GAAC,MACjC8L,GACAF,IAKL,OAFA5L,EAAQ9iB,WAAWnE,KAAKqrB,GAEjBA,G,o6BC9BM,SAAS+H,GAAalM,GACnC,IAAMD,EAAUzqB,OAAOI,OAtEzB,WACE,IAAMqqB,EAAWoM,EAejB,SAASA,EACPvI,GAGA,GAAIA,EAAqB,CACvB,IAAMO,EAAc,CAClBnlB,QAAU4kB,EAA6C5kB,QAClD4kB,EAA6C5kB,QAC7C4kB,GAGFA,EAA6C5kB,SAChD1J,OAAOI,OAAOyuB,EAAaP,GARN,IAUvB,IAAIwI,EAAe,EAVI,mBAFtBvN,EAEsB,iCAFtBA,EAEsB,kBA2CvB,OAhCAA,EAAMhiB,SAAQ,SAAC+B,GACb,UAAeA,IACb,IAAK,SACkB,IAAjBwtB,GACFjI,EAAYjlB,IAAMN,EAClBwtB,GAAgB,GAEhBjI,EAAYllB,KAAOL,EAErB,MACF,IAAK,SACCzC,EAAWyC,GACbulB,EAAYpmB,IAAMa,EAElBulB,EAAYhlB,OAASP,EAEvB,MACF,IAAK,WACHulB,EAAYhlB,OAASP,EAErB,MACF,IAAK,UACHulB,EAAYzkB,SAAWd,EACvB,MACF,IAAK,SACHtJ,OAAOI,OAAOyuB,EAAavlB,OAO1BytB,GAAelI,EAAapE,GAErC,OAAOA,EAAQC,OAEjB,OAAOmM,EAGuBG,GAjFhC,SAA6BtM,GAC3B,WACEuD,IAAK,MAAK6F,GAEVnsB,WAAY,GAEZ+iB,UAEGuM,GAyE0CC,CAAoBxM,IAEnE,OADAD,IAAU0M,IAAI3zB,KAAKinB,GACZA,ECpFT,IAAM2M,GAAmD,CACvDC,IADuD,WAErD,IAAMnwB,EAAI0vB,GAAaQ,IAIvB,OAFAA,GAA4BD,IAAI3zB,KAAK0D,GAE9BA,GAETowB,Q9G6BgC,Q8G3BhC3M,cAAc,EAEdnB,SAAUzR,GAEVwf,UAAWvf,GAEXmf,IAAK,GAELK,UAlBuD,SAkB7CnuB,EAAciK,GAEtB,OjG/BG,SACLjK,EACAiK,GAEAf,EAAelJ,GAAQiK,EiG0BrBmkB,CAAqBpuB,EAAMiK,GACpBlR,MAETs1B,mBAtBuD,SAwBrDvf,EAGAlS,GAGA,OADAiS,GAAqBC,EAAsBlS,EAAY,WAChD7D,MAGTu1B,sBAjCuD,WAoCrD,2BADGxB,EACH,yBADGA,EACH,gBAEA,OADA7d,GAAqB6d,EAAiB,WAC/B/zB,MAGTw1B,oBAzCuD,SA2CrDzf,EAGAlS,GAGA,OADAiS,GAAqBC,EAAsBlS,EAAY,YAChD7D,MAGTy1B,uBApDuD,WAuDrD,2BADG1B,EACH,yBADGA,EACH,gBAEA,OADA7d,GAAqB6d,EAAiB,YAC/B/zB,OCpDX,GCZew0B,GFoEf,I","file":"wide-smile.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wS\"] = factory();\n\telse\n\t\troot[\"wS\"] = factory();\n})(self, function() {\nreturn ","/* eslint-disable */\n\nif (!Array.isArray) {\n  Array.isArray = (arg: unknown): arg is unknown[] => {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\nif (!Object.assign) {\n  Object.defineProperty(Object, 'assign', {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value(target: any) {\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert first argument to object');\n      }\n\n      const to = Object(target);\n      for (let i = 1; i < arguments.length; i++) {\n        let nextSource = arguments[i];\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n        nextSource = Object(nextSource);\n\n        const keysArray = Object.keys(Object(nextSource));\n        for (\n          let nextIndex = 0, len = keysArray.length;\n          nextIndex < len;\n          nextIndex++\n        ) {\n          const nextKey = keysArray[nextIndex];\n          const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n          if (desc !== undefined && desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      return to;\n    },\n  });\n}\n\n(() => {\n  const CSS_VENDORS = 'ms moz webkit o'.split(' ');\n  for (\n    let x = 0;\n    x < CSS_VENDORS.length && !window.requestAnimationFrame;\n    x += 1\n  ) {\n    if (window[`${CSS_VENDORS[x]}RequestAnimationFrame` as never]) {\n      (window as any).requestAnimationFrame =\n        window[`${CSS_VENDORS[x]}RequestAnimationFrame` as never];\n    }\n    if (window[`${CSS_VENDORS[x]}CancelAnimationFrame` as never]) {\n      (window as any).cancelAnimationFrame =\n        window[`${CSS_VENDORS[x]}CancelAnimationFrame` as never];\n    } else if (\n      window[`${CSS_VENDORS[x]}CancelRequestAnimationFrame` as never]\n    ) {\n      (window as any).cancelAnimationFrame =\n        window[`${CSS_VENDORS[x]}CancelRequestAnimationFrame` as never];\n    }\n  }\n})();\n\nNumber.isNaN =\n  Number.isNaN ||\n  function isNaN(input: unknown) {\n    return typeof input === 'number' && input !== input;\n  };\n\nif (!Array.prototype.findIndex) {\n  Array.prototype.findIndex = function (predicate) {\n    if (this === null) {\n      throw new TypeError(\n        'Array.prototype.findIndex called on null or undefined'\n      );\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    let list = Object(this);\n    let length = list.length >>> 0;\n    let thisArg = arguments[1];\n    let value;\n\n    for (let i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return i;\n      }\n    }\n    return -1;\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","/* eslint-disable prefer-rest-params */\r\n\r\nconst REFERENCES_TO_USELESS_OBJECTS: object[] = [];\r\n\r\n/**\r\n * Is sent to a memory that is maintained to prevent the garbage collector from occupy thread for long periods.\r\n */\r\nexport function sendToGarbageCollector(...u: unknown[]): void {\r\n  REFERENCES_TO_USELESS_OBJECTS.push(u);\r\n}\r\n\r\nlet setTimeoutId: undefined | number;\r\n\r\n/**\r\n * Removes the few elements of the array that keeps references to objects that are no longer in use.\r\n */\r\nexport function releasesGarbageFromAnimations(): void {\r\n  if (REFERENCES_TO_USELESS_OBJECTS.length > 0) {\r\n    clearTimeout(setTimeoutId);\r\n    setTimeoutId = (setTimeout(() => {\r\n      releasesGarbageFromAnimations();\r\n    }, 400) as unknown) as number;\r\n\r\n    REFERENCES_TO_USELESS_OBJECTS.splice(\r\n      0,\r\n      Math.max(1, Math.floor((REFERENCES_TO_USELESS_OBJECTS.length / 100) * 50))\r\n    );\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { sendToGarbageCollector } from '../sauce/manage-memory-collections';\r\n\r\n/**\r\n * A container for animations that saves the dedicated objects to each in pairs (the user animation instance and the built-in animation instance).\r\n */\r\n\r\nconst ANIMATION_AUXILIARY_OBJECTS: {\r\n  [animationId: string]: AnimationAuxiliaryObject;\r\n} = {};\r\n\r\nexport function getAllAnimationAuxiliaryObjects(): typeof ANIMATION_AUXILIARY_OBJECTS {\r\n  return ANIMATION_AUXILIARY_OBJECTS;\r\n}\r\nexport function addAnimationAuxiliaryObject(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  ANIMATION_AUXILIARY_OBJECTS[\r\n    animationAuxiliaryObject.animationId\r\n  ] = animationAuxiliaryObject;\r\n}\r\nexport function getAnimationAuxiliaryObject(\r\n  animationId: number\r\n): false | AnimationAuxiliaryObject {\r\n  return ANIMATION_AUXILIARY_OBJECTS[animationId] || false;\r\n}\r\n\r\nexport function removeAnimationAuxiliaryObject(\r\n  animationId: number\r\n): AnimationAuxiliaryObject | false {\r\n  const animationAuxiliaryObject = ANIMATION_AUXILIARY_OBJECTS[animationId];\r\n  if (animationAuxiliaryObject) {\r\n    delete ANIMATION_AUXILIARY_OBJECTS[animationId];\r\n    sendToGarbageCollector(animationAuxiliaryObject);\r\n    return animationAuxiliaryObject;\r\n  }\r\n  return false;\r\n}\r\n","export const ANIMATION_STATES: Readonly<\n  [\n    waiting: 'waiting',\n    running: 'running',\n    completed: 'completed',\n    paused: 'paused',\n    destroyed: 'destroyed',\n    loaded: 'loaded',\n    loading: 'loading',\n    canceled: 'canceled'\n  ]\n> = [\n  'waiting',\n  'running',\n  'completed',\n  'paused',\n  'destroyed',\n  'loaded',\n  'loading',\n  'canceled',\n];\n\nexport const ANIMATION_DIRECTIONS: Readonly<\n  [\n    normal: 'normal',\n    reverse: 'reverse',\n    alternate: 'alternate',\n    alternateReverse: 'alternate-reverse',\n    randomKeys: 'random-keys',\n    randomOffset: 'random-offset',\n    fluidRandomKeys: 'fluid-random-keys',\n    fluidRandomOffset: 'fluid-random-offset'\n  ]\n> = [\n  'normal',\n\n  'reverse',\n\n  'alternate',\n\n  'alternate-reverse',\n\n  'random-keys',\n\n  'random-offset',\n\n  'fluid-random-keys',\n\n  'fluid-random-offset',\n];\n\nexport const WIDE_SMILE_VERSION = '0.1.4';\n\nexport const CSS_VENDORS: Readonly<string[]> = ['moz', 'ms', 'o', 'webkit'];\n\nexport const CSS_VENDORS_LENGTH = CSS_VENDORS.length;\n\nexport const MAX_KEYFRAME = 100;\n\n/**\n * Defines the time taken for each animation intercalation.\n */\nexport const INTERCALATION_TIME = 18;\n\nexport const BEST_FPS_TIMEOUT = 13;\n\nexport const TIME_OUT_FOR_SMART_LOADING = 50;\n\nexport const WIDE_SMILE_SCROLL_PROPERTIES = ['scrollLeft', 'scrollTop'];\n\n/**\n * Initial values of the transformation functions.\n */\nexport const WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS: Readonly<\n  Record<string, string>\n> = {\n  matrix: '1, 0, 0, 1, 0, 0',\n  matrix3d: '1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1',\n  perspective: '0',\n  rotate: '0',\n  rotate3d: '0, 0, 0, 0',\n  rotateX: '0',\n  rotateY: '0',\n  rotateZ: '0',\n  translate: '0, 0',\n  translate3d: '0, 0, 0',\n  translateX: '0',\n  translateY: '0',\n  translateZ: '0',\n  scale: '1, 1',\n  scale3d: '1, 1, 1',\n  scaleX: '1',\n  scaleY: '1',\n  scaleZ: '1',\n  skew: '0, 0',\n  skewX: '0',\n  skewY: '0',\n};\n","export default function hasOwnProperty(\r\n  object: object,\r\n  key: string | number | symbol\r\n): boolean {\r\n  return Object.prototype.hasOwnProperty.call(object, key);\r\n}\r\n","import hasOwnProperty from './has-own-property';\r\n\r\n/**\r\n * Very similar to a \"for in\", however, it is optional go through the \"prototype\" and is more controllable.\r\n * @param objectForLoop\r\n * The object.\r\n *\r\n * @param callbackfn\r\n * A function that accepts up to three arguments. Calls the callbackfn function one time for each element in the array. If callbackfn returns any value that, if converted to boolean equals \"true\" the looping and terminating.\r\n *\r\n * @param avoid\r\n * A drive of \"key\" to jump or the key to start counting. The default value is \"prototype\" - ( avoiding the object's prototype reading ).\r\n *\r\n * @param thisArg\r\n * An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n */\r\n\r\nexport default function customForIn<\r\n  Type extends\r\n    | {\r\n        [K in keyof Type]: Type[keyof Type];\r\n      }\r\n    | Type[]\r\n>(\r\n  objectForLoop: Type,\r\n  callbackfn: (\r\n    value: Type[keyof Type],\r\n    index: keyof Type,\r\n    objectInLoop: typeof objectForLoop\r\n  ) => unknown,\r\n  avoid: string | number | unknown[] = 'prototype',\r\n  thisArg?: unknown\r\n): boolean {\r\n  const isInPrototype = Array.isArray(objectForLoop)\r\n    ? (key: string | number) => {\r\n        return Number.isNaN(Number(key));\r\n      }\r\n    : (key: string | number) => {\r\n        return !hasOwnProperty(objectForLoop, key);\r\n      };\r\n  const avoidItems = Array.isArray(avoid);\r\n  const jumps = avoidItems ? (avoid as string[]).join(' ') : '';\r\n  let pass = avoidItems || !avoid || avoid === 'prototype';\r\n  const getPrototype = avoid.toString().indexOf('prototype') !== -1;\r\n\r\n  // eslint-disable-next-line\r\n  for (const propertyName in objectForLoop) {\r\n    if (\r\n      !(getPrototype && isInPrototype(propertyName)) &&\r\n      jumps.indexOf(propertyName) === -1 &&\r\n      pass === true\r\n    ) {\r\n      const callbackfnCalled = callbackfn.call(\r\n        thisArg,\r\n        objectForLoop[propertyName as never],\r\n        propertyName as keyof Type,\r\n        objectForLoop\r\n      );\r\n      if (callbackfnCalled) return true;\r\n    }\r\n    if (!pass) pass = propertyName === avoid;\r\n  }\r\n  return false;\r\n}\r\n","import { getAllAnimationAuxiliaryObjects } from '../animation-mount/crud-animation-objects';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport customForIn from '../utilities/custom-for-in';\r\n\r\nconst ANIMATIONS_PAUSED: AnimationInstance[] = [];\r\nexport default function handleVisibilityChange(): void {\r\n  if (document.hidden) {\r\n    customForIn(getAllAnimationAuxiliaryObjects(), (c) => {\r\n      const animation = c.animation;\r\n      if (animation.state !== ANIMATION_STATES[3] && animation.pauseDocHidden) {\r\n        animation.pause();\r\n        ANIMATIONS_PAUSED.push(animation);\r\n      }\r\n    });\r\n  } else {\r\n    ANIMATIONS_PAUSED.forEach((a) => {\r\n      a.resume();\r\n    });\r\n    ANIMATIONS_PAUSED.length = 0;\r\n  }\r\n}\r\n\r\nif (typeof document !== 'undefined') {\r\n  document.addEventListener('visibilitychange', handleVisibilityChange);\r\n}\r\n","export default function isDirValue(s: string): boolean {\r\n  switch (s) {\r\n    case 'normal':\r\n    case 'reverse':\r\n    case 'alternate':\r\n    case 'alternate-reverse':\r\n      return true;\r\n\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n","import AllAnimableProperties from '../contracts/animable-properties';\r\nimport {\r\n  AnimationInstance,\r\n  AnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport { CreatorFnMethods } from '../contracts/creator-fn';\r\nimport CurrentPropertyValue from '../contracts/current-property-value';\r\nimport { ListenersEventsName } from '../contracts/listeners-events-name';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\n\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n\r\nconst CREATORS_FN_METHODS: CreatorFnMethods = {\r\n  play(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.play();\r\n    });\r\n    return this;\r\n  },\r\n\r\n  load(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.load();\r\n    });\r\n    return this;\r\n  },\r\n\r\n  ready(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.ready();\r\n    });\r\n    return this;\r\n  },\r\n\r\n  pause(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.pause();\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  resume(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.resume();\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  restart(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.restart();\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  end(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.end();\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  go(this: AnimationInstance['creator'], part: number) {\r\n    this.performers.forEach((i) => {\r\n      i.go(part);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  back(this: AnimationInstance['creator'], part: number) {\r\n    this.performers.forEach((i) => {\r\n      i.back(part);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  jump(this: AnimationInstance['creator'], part: number) {\r\n    this.performers.forEach((i) => {\r\n      i.jump(part);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  revert(this: AnimationInstance['creator'], endIteration?: boolean) {\r\n    this.performers.forEach((i) => {\r\n      i.revert(endIteration);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  speed(this: AnimationInstance['creator'], multiply: number) {\r\n    this.performers.forEach((i) => {\r\n      i.speed(multiply);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  dirTo(\r\n    this: AnimationInstance['creator'],\r\n    dir: Parameters<AnimationInstance['dirTo']>['0']\r\n  ) {\r\n    this.performers.forEach((i) => {\r\n      i.dirTo(dir);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  destroy(this: AnimationInstance['creator'], removeChanges?: true) {\r\n    this.performers.forEach((i) => {\r\n      i.destroy(removeChanges);\r\n    });\r\n    this.performers = [];\r\n    return this;\r\n  },\r\n  cancel(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.cancel();\r\n    });\r\n    return this;\r\n  },\r\n\r\n  on(\r\n    this: AnimationInstance['creator'],\r\n    eventName: ListenersEventsName | string | AllAnimableProperties,\r\n    callbackfn: (\r\n      this: PerformerFn,\r\n      item: unknown,\r\n      performerFn: PerformerFn\r\n    ) => unknown\r\n  ) {\r\n    this.performers.forEach((i) => {\r\n      i.on(eventName, callbackfn);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  off(\r\n    this: AnimationInstance['creator'],\r\n    eventName: ListenersEventsName | string | AllAnimableProperties,\r\n    callbackfnUsed: Function\r\n  ) {\r\n    this.performers.forEach((i) => {\r\n      i.off(eventName as string, callbackfnUsed);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  now(this: AnimationInstance['creator']) {\r\n    this.performers.forEach((i) => {\r\n      i.now();\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  set(\r\n    this: AnimationInstance['creator'],\r\n    properties: AllAnimableProperties | string | PropertiesToAnimateObject,\r\n    propertyValue?: ValuesToAnimateProperty | ValuesToAnimateProperty[]\r\n  ) {\r\n    this.performers.forEach((i) => {\r\n      i.set(properties as never, propertyValue as never);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  get(\r\n    this: AnimationInstance['creator'],\r\n    name: AllAnimableProperties | string\r\n  ) {\r\n    const properties: CurrentPropertyValue[] = [];\r\n    this.performers.forEach((i) => {\r\n      const v = i.get(name as string);\r\n      if (v) {\r\n        properties.push(v);\r\n      }\r\n    });\r\n\r\n    return properties;\r\n  },\r\n\r\n  remove(\r\n    this: AnimationInstance['creator'],\r\n    ...names: (AllAnimableProperties | string)[]\r\n  ) {\r\n    this.performers.forEach((i) => {\r\n      i.remove(...(names as string[]));\r\n    });\r\n    return this;\r\n  },\r\n\r\n  removeTarget(\r\n    this: AnimationInstance['creator'],\r\n    targets: AnimationOptions['targets']\r\n  ) {\r\n    this.performers.forEach((i) => {\r\n      i.removeTarget(targets);\r\n    });\r\n    return this;\r\n  },\r\n};\r\nexport default CREATORS_FN_METHODS;\r\n","import { AnimationOptions } from '../contracts/animation-inter';\r\nimport { ANIMATION_STATES } from './constants';\r\n\r\nconst DEFAULTS_ANIMATION_PROPERTIES_VALUES = {\r\n  targets: undefined,\r\n  dir: 'normal',\r\n  loop: 1,\r\n  dur: 1,\r\n  easing: 'linear',\r\n  progressValue: undefined,\r\n  progress: undefined,\r\n  delay: -1,\r\n  endDelay: -1,\r\n  state: ANIMATION_STATES[0],\r\n  drive: 'normal',\r\n  autoDestroy: false,\r\n  autoPlay: true,\r\n  removeChanges: false,\r\n  pauseDocHidden: true,\r\n  round: 0,\r\n  reset: false,\r\n} as AnimationOptions;\r\nexport default DEFAULTS_ANIMATION_PROPERTIES_VALUES;\r\n","import { AnimationOptions } from '../contracts/animation-inter';\r\n\r\nexport default function getElementsInTheDOM(\r\n  targets: AnimationOptions['targets']\r\n): HTMLElement[] {\r\n  const elements: object[] = [];\r\n  if (targets) {\r\n    let targetForElements = targets;\r\n    if (\r\n      typeof targetForElements === 'string' ||\r\n      (typeof targetForElements === 'object' &&\r\n        !(targetForElements as unknown[])[0])\r\n    ) {\r\n      targetForElements = [targetForElements as never];\r\n    } else {\r\n      targetForElements = [].slice.call(targetForElements);\r\n    }\r\n\r\n    (targetForElements as (string | object)[]).forEach((elementOrSelector) => {\r\n      if (typeof elementOrSelector === 'string') {\r\n        [].slice\r\n          .call(document.querySelectorAll(elementOrSelector))\r\n          .forEach((elt) => {\r\n            if (elements.indexOf(elt as HTMLElement) === -1) {\r\n              elements.push(elt as HTMLElement);\r\n            }\r\n          });\r\n      } else if (elements.indexOf(elementOrSelector) === -1) {\r\n        if (elementOrSelector && typeof targetForElements === 'object') {\r\n          elements.push(elementOrSelector);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return elements as HTMLElement[];\r\n}\r\n","/**\n * Gets a random key.\n * @param keys\n * The array of numeric values.\n *\n * @param lastkey\n * The array of numeric values.\n */\nexport default function getRandomKey(keys: number[], lastkey = 0): number {\n  const selected: number = Math.floor(Math.random() * keys.length);\n  return keys[selected] === lastkey\n    ? keys[selected - 1 >= 0 ? selected - 1 : selected + 1]\n    : keys[selected];\n}\n","import { MAX_KEYFRAME, ANIMATION_DIRECTIONS } from '../sauce/constants';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { getRandomKey } from '../utilities/index';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\n\r\nexport default function getNewAnimationProgress(\r\n  animationAuxiliaryObject: Pick<\r\n    AnimationAuxiliaryObject,\r\n    'countDriveLoops' | 'keyframesKeys' | 'lastStartProgress'\r\n  > & {\r\n    animation: Pick<\r\n      AnimationInstance,\r\n      'dir' | 'count' | 'drive' | 'dur' | 'max' | 'progressValue'\r\n    >;\r\n  }\r\n): Pick<AnimationAuxiliaryObject, 'countDriveLoops'> & {\r\n  maxProgress: AnimationInstance['max'];\r\n  progress: AnimationInstance['progressValue'];\r\n} {\r\n  const a = animationAuxiliaryObject;\r\n  const { keyframesKeys, animation } = a;\r\n  let { countDriveLoops } = a;\r\n  let maxProgress = animation.max;\r\n  let progress = animation.progressValue;\r\n\r\n  const drive = animation.drive as Exclude<typeof animation.drive, Function>;\r\n\r\n  let driveEasy = typeof drive === 'string' ? drive : '';\r\n\r\n  const listOfProgress = typeof drive === 'number' ? [drive] : drive;\r\n\r\n  const takeControlOfTheDrive = Array.isArray(listOfProgress)\r\n    ? listOfProgress[countDriveLoops] &&\r\n      typeof listOfProgress[countDriveLoops] === 'string'\r\n    : false;\r\n\r\n  const direction = animation.dir;\r\n\r\n  const iterationsCompleted = animation.count;\r\n\r\n  const progressStoppedAt = progress || 0;\r\n\r\n  if (takeControlOfTheDrive) {\r\n    driveEasy = listOfProgress[countDriveLoops] as string;\r\n  }\r\n  progress = progressStoppedAt;\r\n  if (driveEasy === ANIMATION_DIRECTIONS[6]) {\r\n    maxProgress = getRandomKey(keyframesKeys, progressStoppedAt);\r\n  } else if (driveEasy === ANIMATION_DIRECTIONS[7]) {\r\n    do {\r\n      maxProgress = Math.round(Math.random() * MAX_KEYFRAME);\r\n    } while (Math.abs(progressStoppedAt - maxProgress) < 20);\r\n  } else if (\r\n    driveEasy === ANIMATION_DIRECTIONS[4] ||\r\n    driveEasy === ANIMATION_DIRECTIONS[5]\r\n  ) {\r\n    maxProgress = getRandomKey(keyframesKeys, progressStoppedAt);\r\n    progress = 0;\r\n  } else if (\r\n    direction === ANIMATION_DIRECTIONS[1] ||\r\n    (direction === ANIMATION_DIRECTIONS[2] && iterationsCompleted % 2 === 1) ||\r\n    (direction === ANIMATION_DIRECTIONS[3] && iterationsCompleted % 2 === 0)\r\n  ) {\r\n    progress = MAX_KEYFRAME;\r\n    maxProgress = 0;\r\n  } else {\r\n    progress = 0;\r\n    maxProgress = MAX_KEYFRAME;\r\n  }\r\n\r\n  if (!takeControlOfTheDrive && Array.isArray(listOfProgress)) {\r\n    const hasMaxProgress = listOfProgress[countDriveLoops];\r\n    if (\r\n      countDriveLoops < listOfProgress.length ||\r\n      hasMaxProgress === Infinity\r\n    ) {\r\n      if (hasMaxProgress === Infinity) {\r\n        countDriveLoops = 0;\r\n      }\r\n      const n = listOfProgress[countDriveLoops];\r\n      if (Array.isArray(n)) {\r\n        maxProgress = (typeof n[1] === 'number' ? n[1] : maxProgress) as number;\r\n\r\n        progress = n[0] as number;\r\n      } else {\r\n        maxProgress = (typeof n === 'number' ? n : maxProgress) as number;\r\n\r\n        progress = progressStoppedAt;\r\n      }\r\n\r\n      countDriveLoops += 1;\r\n      if (countDriveLoops >= listOfProgress.length) {\r\n        countDriveLoops = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    countDriveLoops,\r\n    progress,\r\n    maxProgress,\r\n  };\r\n}\r\n","/** Converts seconds to milliseconds. */\n\nexport default function toMs(seconds: number): number {\n  return Math.floor(seconds * 1000);\n}\n","/**\n * Removes the leading and trailing white space and line terminator characters from a string.\n */\nexport function trimString(string: string): string {\n  if (string.trim) {\n    return string.trim();\n  }\n  return string.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n}\n\n/**\n * Converts to camelCase the string.\n */\nexport function toCamelCase(string: string): string {\n  const rmsPrefix = /^-ms-/;\n  const rdashAlpha = /-([a-z])/g;\n  return string\n    .replace(rmsPrefix, 'ms-')\n    .replace(rdashAlpha, (_all: string, letter: string): string => {\n      return letter.toUpperCase();\n    });\n}\n","/* The code below is based on the implementation of anime.js v3.2.1 Copyright (c) 2020 Julian Garnier  */\r\n\r\n/* eslint-disable no-plusplus  */\r\n/* eslint-disable no-cond-assign */\r\n/* eslint-disable no-constant-condition */\r\n\r\nimport EasingFunction from '../contracts/easing-function';\r\nimport { toCamelCase } from '../utilities/handle-string';\r\n\r\nfunction minMax(val: number, min: number, max: number) {\r\n  return Math.min(Math.max(val, min), max);\r\n}\r\nfunction mathPow(x: number, y: number) {\r\n  return x ** y;\r\n}\r\nfunction isUnd(v: unknown) {\r\n  return typeof v === 'undefined';\r\n}\r\n\r\n// Easings\r\n\r\nfunction parseEasingParameters(string: string) {\r\n  const match = /\\(([^)]+)\\)/.exec(string);\r\n  return match\r\n    ? match[1].split(',').map((p) => {\r\n        return parseFloat(p);\r\n      })\r\n    : [];\r\n}\r\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\r\n\r\nfunction spring(string: string, duration: number) {\r\n  const params = parseEasingParameters(string);\r\n  const mass = minMax(isUnd(params[0]) ? 1 : params[0], 0.1, 100);\r\n  const stiffness = minMax(isUnd(params[1]) ? 100 : params[1], 0.1, 100);\r\n  const damping = minMax(isUnd(params[2]) ? 10 : params[2], 0.1, 100);\r\n  const velocity = minMax(isUnd(params[3]) ? 0 : params[3], 0.1, 100);\r\n  const w0 = Math.sqrt(stiffness / mass);\r\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\r\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\r\n  const a = 1;\r\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\r\n\r\n  function solver(t: number) {\r\n    let progress = duration ? (duration * t) / 1000 : t;\r\n    if (zeta < 1) {\r\n      progress =\r\n        Math.exp(-progress * zeta * w0) *\r\n        (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\r\n    } else {\r\n      progress = (a + b * progress) * Math.exp(-progress * w0);\r\n    }\r\n    if (t === 0 || t === 1) {\r\n      return t;\r\n    }\r\n    return 1 - progress;\r\n  }\r\n\r\n  function getDuration() {\r\n    const frame = 1 / 6;\r\n    let elapsed = 0;\r\n    let rest = 0;\r\n    while (true) {\r\n      elapsed += frame;\r\n      if (solver(elapsed) === 1) {\r\n        rest++;\r\n        if (rest >= 16) {\r\n          break;\r\n        }\r\n      } else {\r\n        rest = 0;\r\n      }\r\n    }\r\n    return elapsed * frame * 1000;\r\n  }\r\n\r\n  return duration ? solver : getDuration;\r\n}\r\n\r\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\r\n\r\nfunction steps(stps: number) {\r\n  let s = stps;\r\n  if (s === undefined) s = 10;\r\n\r\n  return (t: number) => {\r\n    return Math.ceil(minMax(t, 0.000001, 1) * s) * (1 / s);\r\n  };\r\n}\r\n\r\nconst penner = (() => {\r\n  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)\r\n\r\n  const eases: Record<string, Function> = {\r\n    linear() {\r\n      return (t: number) => {\r\n        return t;\r\n      };\r\n    },\r\n  };\r\n\r\n  const functionEasings: Record<string, Function> = {\r\n    Sine() {\r\n      return (t: number) => {\r\n        return 1 - Math.cos((t * Math.PI) / 2);\r\n      };\r\n    },\r\n    Circ() {\r\n      return (t: number) => {\r\n        return 1 - Math.sqrt(1 - t * t);\r\n      };\r\n    },\r\n    Back() {\r\n      return (t: number) => {\r\n        return t * t * (3 * t - 2);\r\n      };\r\n    },\r\n    Bounce() {\r\n      return (t: number) => {\r\n        let pow2;\r\n        let b = 4;\r\n        while (t < ((pow2 = mathPow(2, --b)) - 1) / 11);\r\n        return (\r\n          1 / mathPow(4, 3 - b) - 7.5625 * mathPow((pow2 * 3 - 2) / 22 - t, 2)\r\n        );\r\n      };\r\n    },\r\n    Elastic(amplitude: number, period: number) {\r\n      let amp = amplitude;\r\n      let per = period;\r\n      if (amp === undefined) amp = 1;\r\n      if (period === undefined) per = 0.5;\r\n\r\n      const a = minMax(amp, 1, 10);\r\n      const p = minMax(per, 0.1, 2);\r\n      return (t: number) => {\r\n        return t === 0 || t === 1\r\n          ? t\r\n          : -a *\r\n              mathPow(2, 10 * (t - 1)) *\r\n              Math.sin(\r\n                ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) *\r\n                  (Math.PI * 2)) /\r\n                  p\r\n              );\r\n      };\r\n    },\r\n  };\r\n\r\n  const baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];\r\n\r\n  baseEasings.forEach((name, i) => {\r\n    functionEasings[name] = () => {\r\n      return (t: number) => {\r\n        return mathPow(t, i + 2);\r\n      };\r\n    };\r\n  });\r\n\r\n  Object.keys(functionEasings).forEach((name) => {\r\n    const easeIn = functionEasings[name];\r\n    eases[`easeIn${name}`] = easeIn;\r\n    eases[`easeOut${name}`] = (a: number, b: number) => {\r\n      return (t: number) => {\r\n        return 1 - easeIn(a, b)(1 - t);\r\n      };\r\n    };\r\n    eases[`easeInOut${name}`] = (a: number, b: number) => {\r\n      return (t: number) => {\r\n        return t < 0.5\r\n          ? easeIn(a, b)(t * 2) / 2\r\n          : 1 - easeIn(a, b)(t * -2 + 2) / 2;\r\n      };\r\n    };\r\n    eases[`easeOutIn${name}`] = (a: number, b: number) => {\r\n      return (t: number) => {\r\n        return t < 0.5\r\n          ? (1 - easeIn(a, b)(1 - t * 2)) / 2\r\n          : (easeIn(a, b)(t * 2 - 1) + 1) / 2;\r\n      };\r\n    };\r\n  });\r\n\r\n  return eases;\r\n})();\r\n\r\n// BezierEasing https://github.com/gre/bezier-easing\r\n\r\nconst bezier = (() => {\r\n  const kSplineTableSize = 11;\r\n  const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n  function A(aA1: number, aA2: number) {\r\n    return 1.0 - 3.0 * aA2 + 3.0 * aA1;\r\n  }\r\n  function B(aA1: number, aA2: number) {\r\n    return 3.0 * aA2 - 6.0 * aA1;\r\n  }\r\n  function C(aA1: number) {\r\n    return 3.0 * aA1;\r\n  }\r\n\r\n  function calcBezier(aT: number, aA1: number, aA2: number) {\r\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n  }\r\n  function getSlope(aT: number, aA1: number, aA2: number) {\r\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n  }\r\n\r\n  function binarySubdivide(\r\n    aX: number,\r\n    aA: number,\r\n    aB: number,\r\n    mX1: number,\r\n    mX2: number\r\n  ) {\r\n    let currentX;\r\n    let currentT;\r\n    let i = 0;\r\n    let ab = aB;\r\n    let aa = aA;\r\n    do {\r\n      currentT = aa + (ab - aa) / 2.0;\r\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n      if (currentX > 0.0) {\r\n        ab = currentT;\r\n      } else {\r\n        aa = currentT;\r\n      }\r\n      i += 1;\r\n    } while (Math.abs(currentX) > 0.0000001 && i < 10);\r\n    return currentT;\r\n  }\r\n\r\n  function newtonRaphsonIterate(\r\n    aX: number,\r\n    aGuessT: number,\r\n    mX1: number,\r\n    mX2: number\r\n  ) {\r\n    let aG = aGuessT;\r\n    for (let i = 0; i < 4; i += 1) {\r\n      const currentSlope = getSlope(aG, mX1, mX2);\r\n      if (currentSlope === 0.0) {\r\n        return aG;\r\n      }\r\n      const currentX = calcBezier(aG, mX1, mX2) - aX;\r\n      aG -= currentX / currentSlope;\r\n    }\r\n    return aG;\r\n  }\r\n\r\n  function bz(mX1: number, mY1: number, mX2: number, mY2: number) {\r\n    if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1)) {\r\n      return undefined;\r\n    }\r\n    const sampleValues = new Float32Array(kSplineTableSize);\r\n\r\n    if (mX1 !== mY1 || mX2 !== mY2) {\r\n      for (let i = 0; i < kSplineTableSize; ++i) {\r\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n      }\r\n    }\r\n\r\n    function getTForX(aX: number) {\r\n      let intervalStart = 0;\r\n      let currentSample = 1;\r\n      const lastSample = kSplineTableSize - 1;\r\n\r\n      for (\r\n        ;\r\n        currentSample !== lastSample && sampleValues[currentSample] <= aX;\r\n        ++currentSample\r\n      ) {\r\n        intervalStart += kSampleStepSize;\r\n      }\r\n\r\n      --currentSample;\r\n\r\n      const dist =\r\n        (aX - sampleValues[currentSample]) /\r\n        (sampleValues[currentSample + 1] - sampleValues[currentSample]);\r\n      const guessForT = intervalStart + dist * kSampleStepSize;\r\n      const initialSlope = getSlope(guessForT, mX1, mX2);\r\n\r\n      if (initialSlope >= 0.001) {\r\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n      }\r\n      if (initialSlope === 0.0) {\r\n        return guessForT;\r\n      }\r\n      return binarySubdivide(\r\n        aX,\r\n        intervalStart,\r\n        intervalStart + kSampleStepSize,\r\n        mX1,\r\n        mX2\r\n      );\r\n    }\r\n\r\n    return (x: number) => {\r\n      if (mX1 === mY1 && mX2 === mY2) {\r\n        return x;\r\n      }\r\n      if (x === 0 || x === 1) {\r\n        return x;\r\n      }\r\n      return calcBezier(getTForX(x), mY1, mY2);\r\n    };\r\n  }\r\n\r\n  return bz;\r\n})();\r\n\r\nexport function applyArguments(func: Function, args: number[]): EasingFunction {\r\n  return func(...args) as EasingFunction;\r\n}\r\nexport function parserEasings(\r\n  easing: string | Function,\r\n  duration?: number\r\n): EasingFunction {\r\n  if (typeof easing === 'function') {\r\n    return easing as EasingFunction;\r\n  }\r\n  const name = easing.split('(')[0];\r\n  const ease = penner[toCamelCase(name)];\r\n  const args = parseEasingParameters(easing);\r\n  switch (name) {\r\n    case 'spring':\r\n      return spring(easing, duration as number);\r\n    case 'cubicBezier':\r\n      return applyArguments(bezier, args);\r\n    case 'steps':\r\n      return applyArguments(steps, args);\r\n    default:\r\n      return applyArguments(ease, args);\r\n  }\r\n}\r\n","import EasingFunction from '../contracts/easing-function';\r\n\r\nconst CUSTOM_EASINGS: Record<string, EasingFunction> = {};\r\nexport function registerCustomEasing(\r\n  name: string,\r\n  callback: EasingFunction\r\n): void {\r\n  CUSTOM_EASINGS[name] = callback;\r\n}\r\n\r\nexport function getCustomEasing(name: string): EasingFunction | undefined {\r\n  return CUSTOM_EASINGS[name];\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { toMs } from '../utilities/index';\r\nimport { parserEasings } from '../based-implementations/easings';\r\nimport { getCustomEasing } from '../sauce/custom-easings';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport EasingFunction from '../contracts/easing-function';\r\n\r\n/**\r\n * Sets the value of some properties For `AnimationAuxiliaryObject` from a `AnimationInstance`.\r\n */\r\nexport function propertiesForAnimationAuxiliaryObject(\r\n  animation: AnimationInstance\r\n): Pick<AnimationAuxiliaryObject, 'easing' | 'reverseExecution' | 'duration'> {\r\n  let easing: EasingFunction;\r\n  if (\r\n    typeof animation.easing === 'string' &&\r\n    getCustomEasing(animation.easing)\r\n  ) {\r\n    easing = getCustomEasing(animation.easing) as EasingFunction;\r\n  } else {\r\n    easing = parserEasings(animation.easing, toMs(animation.dur));\r\n  }\r\n  return {\r\n    easing,\r\n\r\n    duration: animation.dur,\r\n\r\n    reverseExecution: ((direction: AnimationInstance['dir']) => {\r\n      switch (direction) {\r\n        case 'reverse':\r\n        case 'alternate-reverse':\r\n          return true;\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    })(animation.dir),\r\n  };\r\n}\r\nexport default function CreateAnimationAuxiliaryObject(\r\n  animation: AnimationInstance\r\n): AnimationAuxiliaryObject {\r\n  return {\r\n    propertiesToBeAnimate: [],\r\n\r\n    keyframesKeys: [],\r\n\r\n    remainingDelayAnimation: toMs(animation.delay),\r\n\r\n    initialProgress: animation.progressValue,\r\n\r\n    lastStartProgress: 0,\r\n\r\n    animationId: animation.animationId,\r\n\r\n    countDriveLoops: 0,\r\n\r\n    dataLoadingState: 'loading',\r\n\r\n    backRunning: false,\r\n\r\n    startTimeOfTheIteration: 0,\r\n\r\n    timeRunningIteration: 0,\r\n\r\n    animationExecutionTime: 0,\r\n\r\n    valuesOfThePropertiesBeforeAnimating: [],\r\n\r\n    animationAlreadyStarted: false,\r\n\r\n    iterationInterlacations: {\r\n      timeConsumed: 0,\r\n      completed: 0,\r\n    },\r\n    animationLoadingTime: 0,\r\n\r\n    dateLastIntercalation: 0,\r\n\r\n    animation,\r\n    ...propertiesForAnimationAuxiliaryObject(animation),\r\n  } as AnimationAuxiliaryObject;\r\n}\r\n","/**\n * Orders the array by growth values.\n */\nexport default function ordernateByGrowingValues(\n  array: (string | number)[]\n): number[] {\n  return array.map(Number).sort((a, b) => {\n    return a - b;\n  });\n}\n","export default function getTimeNow(): number {\r\n  return Date.now ? Date.now() : new Date().getTime();\r\n}\r\n","/**\n * Converts the string to a CSS valid.\n */\nexport default function toCSSKebabCase(string: string): string {\n  const rdashAlpha = /([A-Z])/g;\n  return string.replace(rdashAlpha, (_all, letter: string) => {\n    return `-${letter}`.toLowerCase();\n  });\n}\n","import AllAnimableProperties from '../contracts/animable-properties';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport CurrentPropertyValue from '../contracts/current-property-value';\r\nimport toCSSKebabCase from '../utilities-style/to-css-kebab-case';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport { toCamelCase, trimString } from '../utilities/handle-string';\r\nimport toMs from '../utilities/to-ms';\r\n\r\nconst EVENTS_IN_OBSERVATION: Record<string, Record<string, Function[]>> = {};\r\n\r\nexport const LISTENERS_NAMES: [\r\n  'start',\r\n  'loopEnd',\r\n  'end',\r\n  'load',\r\n  'cancel',\r\n  'destroy',\r\n  'play',\r\n  '$-iteration-control-methods',\r\n  'ready',\r\n  'change',\r\n  'loopStart',\r\n  '$-end-animation-in-cycle'\r\n] = [\r\n  'start',\r\n  'loopEnd',\r\n  'end',\r\n  'load',\r\n  'cancel',\r\n  'destroy',\r\n  'play',\r\n  '$-iteration-control-methods',\r\n  'ready',\r\n  'change',\r\n  'loopStart',\r\n  '$-end-animation-in-cycle',\r\n];\r\n\r\nexport function addAnimationEventListener(\r\n  name: string | AllAnimableProperties,\r\n  callback: Function,\r\n  animation: AnimationInstance\r\n): void {\r\n  const { animationId } = animation;\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    EVENTS_IN_OBSERVATION[animationId] = {};\r\n  }\r\n\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n  const eName = trimString(name.toString());\r\n  if (eName) {\r\n    if (animationObjectBuket[eName]) {\r\n      animationObjectBuket[eName].push(callback);\r\n    } else {\r\n      animationObjectBuket[eName] = [callback];\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeAnimationEventListener(\r\n  name: typeof LISTENERS_NAMES[number] | AllAnimableProperties | string,\r\n  callbackfnUsed: Function,\r\n  animation: AnimationInstance\r\n): void {\r\n  const animationId = animation.animationId;\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    return;\r\n  }\r\n\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n\r\n  const eName = trimString(name.toString());\r\n  if (eName && animationObjectBuket[eName]) {\r\n    const index = animationObjectBuket[eName].indexOf(callbackfnUsed);\r\n    if (index >= 0) {\r\n      animationObjectBuket[eName].splice(index, 1);\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeAllAnimationEventListeners(animationId: number): void {\r\n  delete EVENTS_IN_OBSERVATION[animationId];\r\n}\r\n\r\nfunction getBucket(name: string, animationId: number) {\r\n  let eventName = trimString(name);\r\n  let eventBucket: typeof EVENTS_IN_OBSERVATION[string][string];\r\n\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    return false;\r\n  }\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n\r\n  if (animationObjectBuket[eventName]) {\r\n    eventBucket = animationObjectBuket[eventName];\r\n  } else if (animationObjectBuket[toCamelCase(eventName)]) {\r\n    eventName = toCamelCase(eventName);\r\n    eventBucket = animationObjectBuket[eventName];\r\n  } else {\r\n    eventName = toCSSKebabCase(eventName);\r\n    eventBucket = animationObjectBuket[eventName];\r\n  }\r\n\r\n  return { eventBucket, eventName };\r\n}\r\nexport function propagateAnimationPropertyEventListener(\r\n  name: string,\r\n  animation: AnimationInstance,\r\n  propertyObject: AnimationAuxiliaryObject['propertiesToBeAnimate'][number]\r\n): boolean {\r\n  const bucket = getBucket(name, animation.animationId);\r\n  let allowedToApplyStyle: boolean | undefined;\r\n\r\n  if (bucket && bucket.eventBucket) {\r\n    const eventBucket = bucket.eventBucket;\r\n\r\n    // Copy the array to avoid side effects of the methods.\r\n    eventBucket.slice().forEach((eventCallback) => {\r\n      allowedToApplyStyle = eventCallback.call(\r\n        animation.performer,\r\n        {\r\n          propertyName: propertyObject.propertyName,\r\n          value: propertyObject.newPropertyValue,\r\n          target: propertyObject.target,\r\n        } as CurrentPropertyValue,\r\n        animation.performer\r\n      ) as boolean | undefined;\r\n    });\r\n  }\r\n  if (allowedToApplyStyle !== false) {\r\n    allowedToApplyStyle = true;\r\n  }\r\n  return allowedToApplyStyle;\r\n}\r\n\r\nexport function propagateAnimationExecutionTimeEventListener(\r\n  animationExecutionTime: number,\r\n  animation: AnimationInstance\r\n): void {\r\n  const animationId = animation.animationId;\r\n  if (!EVENTS_IN_OBSERVATION[animationId]) {\r\n    return;\r\n  }\r\n  const animationObjectBuket = EVENTS_IN_OBSERVATION[animationId];\r\n  customForIn(animationObjectBuket, (eventBucket, eventName) => {\r\n    const check = parseFloat(eventName);\r\n    if (!Number.isNaN(check)) {\r\n      if (animationExecutionTime >= toMs(check)) {\r\n        eventBucket.slice().forEach((eventCallback) => {\r\n          eventCallback.call(\r\n            animation.performer,\r\n            eventName,\r\n            animation.performer\r\n          );\r\n          removeAnimationEventListener(eventName, eventCallback, animation);\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\nexport function propagateAnimationEventListener(\r\n  name: typeof LISTENERS_NAMES[number] | number,\r\n  animation: AnimationInstance,\r\n  useSpecialCallback?: (\r\n    eventCallback: Function,\r\n    animation: AnimationInstance\r\n  ) => unknown\r\n): void {\r\n  const bucket = getBucket(name.toString(), animation.animationId);\r\n\r\n  if (bucket && bucket.eventBucket) {\r\n    const { eventBucket, eventName } = bucket;\r\n\r\n    // Copy the array to avoid side effects of the methods.\r\n    eventBucket.slice().forEach((eventCallback) => {\r\n      if (useSpecialCallback) {\r\n        useSpecialCallback(eventCallback, animation);\r\n      } else {\r\n        eventCallback.call(animation.performer, eventName, animation.performer);\r\n      }\r\n    });\r\n  }\r\n}\r\n","/**\n * Check if a variable is an empty object.\n */\nexport default function isEmptyObject(variable: unknown): boolean {\n  return Object.keys(variable as Record<string, unknown>).length < 1;\n}\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport isEmptyObject from '../utilities/is-empty-object';\r\n\r\n/**\r\n * That's where the animations are queued before they're executed.\r\n */\r\nlet ANIMATIONS_STACK: Record<string, AnimationAuxiliaryObject | null> = {};\r\nlet timeoutForStackMounting: Function;\r\n\r\nexport function useTimeoutForStackMounting(callback: Function): void {\r\n  timeoutForStackMounting = callback;\r\n}\r\nexport function getCurrentAnimationsStac(): typeof ANIMATIONS_STACK {\r\n  return ANIMATIONS_STACK;\r\n}\r\nexport function resetAnimationsStack(): void {\r\n  ANIMATIONS_STACK = {};\r\n}\r\n\r\nexport function addAnimationToStack(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): boolean {\r\n  if (!animationAuxiliaryObject || !animationAuxiliaryObject.animation) {\r\n    return false;\r\n  }\r\n\r\n  ANIMATIONS_STACK[\r\n    animationAuxiliaryObject.animationId\r\n  ] = animationAuxiliaryObject;\r\n  timeoutForStackMounting();\r\n  return true;\r\n}\r\n\r\nexport function removeAnimationFromStack(\r\n  animationId: AnimationAuxiliaryObject['animationId']\r\n): void {\r\n  if (ANIMATIONS_STACK[animationId]) {\r\n    ANIMATIONS_STACK[animationId] = null;\r\n  }\r\n}\r\nexport function hasAnimationInTheStack(): boolean {\r\n  return !isEmptyObject(ANIMATIONS_STACK);\r\n}\r\nexport function getAnimationInTheStack(\r\n  animationId?: number\r\n):\r\n  | AnimationAuxiliaryObject\r\n  | Record<string, AnimationAuxiliaryObject | null>\r\n  | null {\r\n  if (typeof animationId !== 'number') {\r\n    return ANIMATIONS_STACK;\r\n  }\r\n  return ANIMATIONS_STACK[animationId];\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { MAX_KEYFRAME } from '../sauce/constants';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport toMs from '../utilities/to-ms';\r\n\r\nexport default function getNewValuesForAnimationIntercalation(\r\n  requiredAnimationProperties: Pick<\r\n    AnimationAuxiliaryObject,\r\n    | 'iterationInterlacations'\r\n    | 'startTimeOfTheIteration'\r\n    | 'reverseExecution'\r\n    | 'timeRunningIteration'\r\n  > & {\r\n    animation: Pick<\r\n      AnimationInstance,\r\n      'dur' | 'delay' | 'progressValue' | 'max'\r\n    >;\r\n  }\r\n): {\r\n  toAuxiliaryObject: Pick<\r\n    AnimationAuxiliaryObject,\r\n    | 'iterationInterlacations'\r\n    | 'startTimeOfTheIteration'\r\n    | 'reverseExecution'\r\n    | 'timeRunningIteration'\r\n  >;\r\n  progress: number;\r\n} {\r\n  const animationAuxiliaryObject = requiredAnimationProperties;\r\n  const { animation, iterationInterlacations } = animationAuxiliaryObject;\r\n  const maxProgress = animation.max;\r\n  let progress = animation.progressValue;\r\n\r\n  let {\r\n    startTimeOfTheIteration,\r\n    reverseExecution,\r\n    timeRunningIteration,\r\n  } = animationAuxiliaryObject;\r\n\r\n  const duration = toMs(animation.dur);\r\n\r\n  if (duration <= 0) {\r\n    return {\r\n      toAuxiliaryObject: {\r\n        iterationInterlacations,\r\n        startTimeOfTheIteration,\r\n        reverseExecution,\r\n        timeRunningIteration,\r\n      },\r\n      progress: maxProgress,\r\n    };\r\n  }\r\n\r\n  const currentTime = getTimeNow();\r\n\r\n  /**\r\n   * Checks how the animation's progress should behave.\r\n   */\r\n  reverseExecution = progress > maxProgress;\r\n\r\n  let durationOfTheInterlacation: number;\r\n\r\n  if (startTimeOfTheIteration > 0) {\r\n    durationOfTheInterlacation =\r\n      currentTime - startTimeOfTheIteration - timeRunningIteration;\r\n  } else {\r\n    durationOfTheInterlacation = 0;\r\n  }\r\n\r\n  iterationInterlacations.timeConsumed += durationOfTheInterlacation;\r\n\r\n  const averageDurationForIntercalation =\r\n    iterationInterlacations.completed > 0\r\n      ? iterationInterlacations.timeConsumed / iterationInterlacations.completed\r\n      : 0;\r\n\r\n  iterationInterlacations.completed += 1;\r\n\r\n  const timeBasedProgress =\r\n    (MAX_KEYFRAME / duration) * averageDurationForIntercalation;\r\n\r\n  let newProgress: number;\r\n\r\n  if (reverseExecution) {\r\n    newProgress = progress - timeBasedProgress;\r\n    newProgress = newProgress < 0 ? 0 : newProgress;\r\n    newProgress = newProgress < maxProgress ? maxProgress : newProgress;\r\n  } else {\r\n    newProgress = progress + timeBasedProgress;\r\n    newProgress = newProgress > MAX_KEYFRAME ? MAX_KEYFRAME : newProgress;\r\n    newProgress = newProgress > maxProgress ? maxProgress : newProgress;\r\n  }\r\n\r\n  progress = newProgress;\r\n  timeRunningIteration = (duration / MAX_KEYFRAME) * progress;\r\n\r\n  startTimeOfTheIteration = currentTime - timeRunningIteration;\r\n\r\n  return {\r\n    toAuxiliaryObject: {\r\n      iterationInterlacations,\r\n      startTimeOfTheIteration,\r\n      reverseExecution,\r\n      timeRunningIteration,\r\n    },\r\n    progress,\r\n  };\r\n}\r\n","const HACK_CSS_PROPERTY_VALUES = ['inherit', 'initial', '1px', '#000'];\r\nexport default HACK_CSS_PROPERTY_VALUES;\r\n","import { CSS_VENDORS_LENGTH, CSS_VENDORS } from '../sauce/constants';\nimport { toCamelCase } from '../utilities/index';\nimport HACK_CSS_PROPERTY_VALUES from './hack-to-set-css-property-value';\n\n/**\n * Gets the vendor for a determined CSS property.\n *\n * @param propertyName\n * The propertyName\n *\n * @returns {string}\n *\n * The CSS property( with the vendor prefix).\n */\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\nconst KNOWN_PROPERTIES: Record<string, string> = {};\nexport default function getVendorCSSProperty(\n  propertyName: string,\n  propertyValue?: string\n): string {\n  if (KNOWN_PROPERTIES[propertyName]) {\n    return KNOWN_PROPERTIES[propertyName];\n  }\n  DIV_ELEMENT_STYLE.cssText = '';\n\n  let name = propertyName;\n  const values = [propertyValue, ...HACK_CSS_PROPERTY_VALUES];\n  const l = values.length;\n\n  for (let index = 0; index < l; index += 1) {\n    const value = values[index];\n    if (value) {\n      if (name.substring(0, 1) === '-') {\n        name = name.replace(/-[^>](.*?)-/, '');\n      }\n      DIV_ELEMENT_STYLE[toCamelCase(name) as never] = value;\n      if (DIV_ELEMENT_STYLE.cssText) {\n        KNOWN_PROPERTIES[propertyName] = name;\n        return name;\n      }\n      for (let count = CSS_VENDORS_LENGTH - 1; count >= 0; count -= 1) {\n        const n = `-${CSS_VENDORS[count]}-${name}`;\n        DIV_ELEMENT_STYLE[toCamelCase(n) as never] = value;\n        if (DIV_ELEMENT_STYLE.cssText) {\n          KNOWN_PROPERTIES[propertyName] = n;\n          return n;\n        }\n      }\n    }\n  }\n  KNOWN_PROPERTIES[propertyName] = propertyName;\n\n  return propertyName;\n}\n","/**\n * Attempts to reduce CSS string rules by applying to an element outside of the document and returning the result.\n */\nconst reduceCSSStringRules = (() => {\n  const DIV_ELEMENT_STYLE = document.createElement('div').style;\n  return (CSSStringRules: string) => {\n    DIV_ELEMENT_STYLE.cssText = CSSStringRules;\n    return DIV_ELEMENT_STYLE.cssText;\n  };\n})();\nexport default reduceCSSStringRules;\n","/**\n * Removes the spaces between the characters in the string.\n */\nexport default function removeSpacesChar(str: string): string {\n  return str.replace(/[ ]+/g, '');\n}\n","import { removeSpacesChar, toCamelCase, trimString } from '../utilities/index';\n\n/**\n * Converts CSS string rules to object.\n */\nexport default function CSSStringRulesToObject(\n  CSSStringRules: string\n): Record<string, string> {\n  const CSSProperties = `${CSSStringRules};`.split(';');\n  const styleObject: Record<string, string> = {};\n  CSSProperties.forEach((value) => {\n    const property = value;\n    const propertyIndex = property.indexOf(':') + 1;\n    const propertyName = property.substring(0, propertyIndex - 1);\n    if (propertyName) {\n      styleObject[removeSpacesChar(toCamelCase(propertyName))] = trimString(\n        property.substring(propertyIndex, property.length)\n      );\n    }\n  });\n  return styleObject;\n}\n","import HACK_CSS_PROPERTY_VALUES from './hack-to-set-css-property-value';\r\nimport toCSSKebabCase from './to-css-kebab-case';\r\n\r\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\r\nconst KNOWN_PROPERTIES: Record<string, string[]> = {};\r\nexport default function getLinkedCSSProperties(\r\n  propertyName: string,\r\n  propertyValue?: string\r\n): string[] {\r\n  if (KNOWN_PROPERTIES[propertyName]) {\r\n    return KNOWN_PROPERTIES[propertyName];\r\n  }\r\n\r\n  DIV_ELEMENT_STYLE.cssText = '';\r\n\r\n  const propertyNameCSS = toCSSKebabCase(propertyName);\r\n\r\n  const linkedCSSPropertiesList: string[] = [];\r\n\r\n  let counting = 0;\r\n\r\n  const values = [propertyValue, ...HACK_CSS_PROPERTY_VALUES];\r\n  const l = values.length;\r\n  let property = '';\r\n  for (let index = 0; index < l; index += 1) {\r\n    const value = values[index];\r\n    if (value) {\r\n      DIV_ELEMENT_STYLE[propertyNameCSS as never] = value;\r\n      property = DIV_ELEMENT_STYLE.item(counting);\r\n      if (property) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  while (property !== '') {\r\n    linkedCSSPropertiesList.push(property);\r\n\r\n    counting += 1;\r\n    property = DIV_ELEMENT_STYLE.item(counting);\r\n  }\r\n\r\n  KNOWN_PROPERTIES[propertyName] = linkedCSSPropertiesList;\r\n  return KNOWN_PROPERTIES[propertyName];\r\n}\r\n","export function getAttr(element: HTMLElement, attrName: string): string | null {\r\n  return element.getAttribute(attrName);\r\n}\r\n\r\nexport function setAttr(\r\n  element: HTMLElement,\r\n  attrName: string,\r\n  attrValue: string\r\n): void {\r\n  return element.setAttribute(attrName, attrValue);\r\n}\r\n\r\nexport function removeAttr(element: HTMLElement, attrName: string): void {\r\n  return element.removeAttribute(attrName);\r\n}\r\n","export default function WideSmileDebug(\n  type: string,\n  message: string,\n  callbackTest?: () => boolean\n): void {\n  const check = callbackTest ? callbackTest() : true;\n  if (check)\n    throw new Error(\n      `\\n\\n<WideSmile>: \\n\\n| Where or what happened: ${type} | \\n\\n--> ${message}\\n\\n`\n    );\n}\n","import WideSmileDebug from './wide-smile-debug';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport CreateSpecialPropertyCallbackfn from '../contracts/create-special-property-callbackfn';\r\nimport CreateObserverPropertyCallbackfn from '../contracts/create-observer-property-callbackfn';\r\n\r\ntype CustomProperties = 'special' | 'observed';\r\n\r\nexport const CUSTOM_SPECIAL_PROPERTIES: Record<\r\n  string,\r\n  CreateSpecialPropertyCallbackfn\r\n> = {};\r\n\r\nexport const OBSERVER_PROPERTIES: Record<\r\n  string,\r\n  CreateObserverPropertyCallbackfn\r\n> = {};\r\n\r\nfunction getObject(type: CustomProperties) {\r\n  switch (type) {\r\n    case 'observed':\r\n      return OBSERVER_PROPERTIES;\r\n\r\n    default:\r\n      return CUSTOM_SPECIAL_PROPERTIES;\r\n  }\r\n}\r\nexport function createCustomProperty(\r\n  propertyOrProperties:\r\n    | string\r\n    | Record<\r\n        string,\r\n        CreateSpecialPropertyCallbackfn | CreateObserverPropertyCallbackfn\r\n      >,\r\n  callbackfn:\r\n    | CreateSpecialPropertyCallbackfn\r\n    | CreateObserverPropertyCallbackfn\r\n    | undefined,\r\n  type: CustomProperties\r\n): void {\r\n  const object = getObject(type);\r\n\r\n  const debugHelper = (() => {\r\n    if (\r\n      typeof propertyOrProperties === 'string' &&\r\n      hasOwnProperty(object, propertyOrProperties)\r\n    ) {\r\n      return propertyOrProperties;\r\n    }\r\n    let p = '';\r\n    customForIn(propertyOrProperties, (_propertyValue, propertyName) => {\r\n      if (hasOwnProperty(object, propertyName)) {\r\n        p = propertyName;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    return p;\r\n  })();\r\n  WideSmileDebug(\r\n    'createProperty Method',\r\n    `There's already a property with that name \"${debugHelper}\" on it.`,\r\n    () => {\r\n      return !!debugHelper;\r\n    }\r\n  );\r\n  if (typeof propertyOrProperties === 'object') {\r\n    Object.assign(object, propertyOrProperties);\r\n  } else {\r\n    object[\r\n      propertyOrProperties\r\n    ] = callbackfn as CreateSpecialPropertyCallbackfn;\r\n  }\r\n}\r\n\r\nexport function removeCustomProperty(\r\n  names: string[],\r\n  type: CustomProperties\r\n): void {\r\n  const object = getObject(type);\r\n  names.forEach((name) => {\r\n    delete object[name];\r\n  });\r\n}\r\n\r\nexport function getCustomProperty(\r\n  name: string,\r\n  type: 'special'\r\n): CreateSpecialPropertyCallbackfn;\r\n\r\nexport function getCustomProperty(\r\n  name: string,\r\n  type: 'observed'\r\n): CreateObserverPropertyCallbackfn;\r\n\r\nexport function getCustomProperty(\r\n  name: string,\r\n  type: CustomProperties\r\n): unknown {\r\n  const object = getObject(type);\r\n  if (hasOwnProperty(object, name)) {\r\n    return object[name];\r\n  }\r\n  return false;\r\n}\r\n","import { trimString } from './handle-string';\n\n/**\n * Gets the unit of measure present in the string.\n */\nexport default function getUnit(val: string): string {\n  const propertyValue = trimString(val);\n\n  const n = parseFloat(propertyValue);\n  if (\n    Number.isNaN(n) ||\n    propertyValue.indexOf(',') > -1 ||\n    propertyValue.indexOf(' ') > -1\n  ) {\n    return '';\n  }\n\n  return propertyValue\n    .split(n.toString())\n    .join('')\n    .replace(/([0-9 .])/g, '');\n}\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport splitCSSProperties from '../utilities-style/split-css-properties';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport ordernateByGrowingValues from '../utilities/ordernate-by-growing-values';\r\n\r\nconst POOL_PROPERTY_OBJECTS: PropertyObject[] = [];\r\n\r\nexport function recyclePropertyObjectToAnimate(\r\n  propertyObject: PropertyObject\r\n): void {\r\n  const u = undefined as never;\r\n  const o = propertyObject;\r\n  o.target = u;\r\n  o.index = u;\r\n  o.keyframes = u;\r\n  o.keyframesKeys = u;\r\n  o.propertyName = u;\r\n  o.newPropertyValue = u;\r\n  o.lastKey = u;\r\n  o.type = u;\r\n  o.originalArrayLength = u;\r\n  POOL_PROPERTY_OBJECTS.push(o);\r\n}\r\nexport function recyclePropertyObjectsToAnimate(\r\n  propertiesToBeAnimate: PropertyObject[]\r\n): void {\r\n  if (\r\n    POOL_PROPERTY_OBJECTS.length < 2000 /** Maximum objects in the dumpster. */\r\n  ) {\r\n    propertiesToBeAnimate.forEach((obj) => {\r\n      recyclePropertyObjectToAnimate(obj);\r\n    });\r\n  }\r\n}\r\n\r\nfunction removeSpaces(a: string[]) {\r\n  return a.filter((v) => v !== ' ');\r\n}\r\nfunction splitKeyframePropertyValue(keyframes: Record<string, string>) {\r\n  const n: Record<string, string[]> = {};\r\n  customForIn(keyframes, (keyframeValue, key) => {\r\n    n[key] = removeSpaces(splitCSSProperties(keyframeValue));\r\n  });\r\n  return n;\r\n}\r\ntype PropertyObject = AnimationAuxiliaryObject['propertiesToBeAnimate'][number];\r\nexport default function getPropertyObjectToAnimate(\r\n  propertiesKeyframes: Record<string, Record<string, string>>,\r\n  target: object,\r\n  index: number,\r\n  originalArrayLength: number,\r\n  type: PropertyObject['type']\r\n): PropertyObject[] {\r\n  const propertiesToBeAnimate: PropertyObject[] = [];\r\n  customForIn(propertiesKeyframes, (kf, propertyName) => {\r\n    let differentValues = false;\r\n    let lastkey = '0';\r\n    customForIn(kf, (value, key) => {\r\n      differentValues = value !== kf[lastkey];\r\n      if (differentValues) {\r\n        return true;\r\n      }\r\n      lastkey = key;\r\n      return false;\r\n    });\r\n    if (\r\n      hasOwnProperty(kf, '0') &&\r\n      hasOwnProperty(kf, '100') &&\r\n      differentValues\r\n    ) {\r\n      const o = (POOL_PROPERTY_OBJECTS.shift() || {}) as PropertyObject;\r\n      o.target = target;\r\n      o.index = index;\r\n      o.keyframes = splitKeyframePropertyValue(kf);\r\n      o.keyframesKeys = ordernateByGrowingValues(Object.keys(kf));\r\n      o.propertyName = propertyName;\r\n      o.type = type;\r\n      o.originalArrayLength = originalArrayLength;\r\n\r\n      propertiesToBeAnimate.push(o);\r\n    }\r\n  });\r\n\r\n  return propertiesToBeAnimate;\r\n}\r\n","/**\n * Splits the CSS properties and their values into a array.\n */\n\nexport default function splitCSSProperties(CSSStringRules: string): string[] {\n  let lastIndex = 0;\n  const propertiesSplited: string[] = [];\n  const style = CSSStringRules.replace(/(;)/g, '; ').replace(/( {2})/g, ' ');\n  style.replace(/[:()[\\] ,=]/g, (a: string, b: number) => {\n    const s = style.substring(lastIndex, b);\n    if (s) {\n      propertiesSplited.push(s);\n    }\n\n    propertiesSplited.push(a);\n    lastIndex = b + 1;\n\n    return a;\n  });\n  propertiesSplited.push(style.substring(lastIndex, Infinity));\n\n  return propertiesSplited;\n}\n","export default function isDOMElement(e: object): boolean {\r\n  return (e as HTMLElement).nodeType ? true : false || e instanceof SVGElement;\r\n}\r\n","import {\r\n  CSSStringRulesToObject,\r\n  getVendorCSSProperty,\r\n  toCSSKebabCase,\r\n} from '../utilities-style/index';\r\nimport { customForIn, hasOwnProperty, trimString } from '../utilities/index';\r\nimport { setAttr, getAttr } from '../utilities/dom-attributes';\r\nimport { getCustomProperty } from '../sauce/custom-properties-for-animations';\r\nimport calcNextPropertyValue from './calc-next-property-value';\r\nimport { MAX_KEYFRAME } from '../sauce/constants';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { propagateAnimationPropertyEventListener } from '../animation-listeners/animations-listeners-handlers';\r\nimport { recyclePropertyObjectToAnimate } from '../animation-mount/property-object-to-animate';\r\nimport isDOMElement from '../utilities/is-dom-element';\r\n\r\nexport function transformFunctionsToObject(\r\n  target: HTMLElement\r\n): Record<string, string> | false {\r\n  const t = getVendorCSSProperty('transform') as never;\r\n  const current = target.style[t];\r\n  if (current) {\r\n    return CSSStringRulesToObject(\r\n      current.replace(/[(]/g, ':').replace(/[)]/g, ';')\r\n    );\r\n  }\r\n  return false;\r\n}\r\nexport function transformFunctionsObjectToString(\r\n  transformFunctionsObject: Record<string, string>\r\n): string {\r\n  let newValue = '';\r\n  customForIn(transformFunctionsObject, (v, n) => {\r\n    if (v) {\r\n      newValue += `${n}(${trimString(v)\r\n        .replace(/( {2})/g, ' ')\r\n        .replace(/ /g, ', ')\r\n        .replace(/,,/g, ',')})`;\r\n    }\r\n  });\r\n\r\n  return newValue;\r\n}\r\n\r\nfunction animateTargetTransform(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const fnName = propertyName;\r\n  const properties = beforeAnimating.transfromFns;\r\n  const elt = target;\r\n  const t = getVendorCSSProperty('transform') as never;\r\n  const transformFunctionsObject = transformFunctionsToObject(target) || {};\r\n\r\n  if (!hasOwnProperty(properties, fnName)) {\r\n    properties[fnName] = transformFunctionsObject[fnName] || '';\r\n  }\r\n  transformFunctionsObject[fnName] = propertyValue;\r\n\r\n  elt.style[t] = transformFunctionsObjectToString(transformFunctionsObject);\r\n}\r\n\r\nfunction animateTargetCSS(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const properties = beforeAnimating.style;\r\n  const elt = target;\r\n\r\n  if (!hasOwnProperty(properties, propertyName)) {\r\n    properties[propertyName] = elt.style[propertyName as never];\r\n  }\r\n  elt.style[propertyName as never] = propertyValue;\r\n}\r\n\r\nfunction animateTargetDirectProps(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n): void {\r\n  const pName = propertyName as never;\r\n  const elt = target;\r\n  const properties = beforeAnimating.direct;\r\n  if (!hasOwnProperty(beforeAnimating, pName)) {\r\n    properties[pName] = elt[pName];\r\n  }\r\n  elt[pName] = propertyValue as never;\r\n}\r\n\r\nfunction animateTargetAttributes(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  propertyValue: string,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const pName = toCSSKebabCase(propertyName);\r\n\r\n  const properties = beforeAnimating.attr;\r\n  if (!hasOwnProperty(properties, propertyName)) {\r\n    properties[propertyName] = getAttr(target, pName);\r\n  }\r\n\r\n  setAttr(target, pName, propertyValue);\r\n}\r\n\r\nfunction animateTargetObserved(\r\n  target: object,\r\n  propertyName: string,\r\n  value: unknown,\r\n  percentageCompleted: number,\r\n  index: number\r\n) {\r\n  return getCustomProperty(propertyName, 'observed')(\r\n    value,\r\n    percentageCompleted,\r\n    target,\r\n    index\r\n  );\r\n}\r\n\r\nexport function applyAnimationsStyleToTargets(\r\n  propertiesToBeAnimate: AnimationAuxiliaryObject['propertiesToBeAnimate'],\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject['propertiesToBeAnimate'] {\r\n  const {\r\n    valuesOfThePropertiesBeforeAnimating,\r\n    reverseExecution,\r\n    animation,\r\n  } = animationAuxiliaryObject;\r\n  const progress = animation.progressValue;\r\n\r\n  propertiesToBeAnimate.slice().forEach((o, index) => {\r\n    const propertyObject = o;\r\n    const target = propertyObject.target;\r\n\r\n    if (\r\n      (isDOMElement(target) || 'parentElement' in target) &&\r\n      !(target as HTMLElement).parentElement &&\r\n      !(target as HTMLElement).parentNode\r\n    ) {\r\n      recyclePropertyObjectToAnimate(propertyObject);\r\n      propertiesToBeAnimate.splice(index, 1);\r\n    } else {\r\n      if (!valuesOfThePropertiesBeforeAnimating[propertyObject.index]) {\r\n        valuesOfThePropertiesBeforeAnimating[propertyObject.index] = {\r\n          style: {},\r\n          attr: {},\r\n          direct: {},\r\n          transfromFns: {},\r\n        };\r\n      }\r\n      let from = 0;\r\n      let to = MAX_KEYFRAME;\r\n\r\n      if (propertyObject.keyframesKeys) {\r\n        const l = propertyObject.keyframesKeys.length;\r\n        for (let i = 0; i < l; i += 1) {\r\n          const key = propertyObject.keyframesKeys[i];\r\n          if (progress <= key) {\r\n            to = key;\r\n            break;\r\n          }\r\n          from = key;\r\n        }\r\n      }\r\n      let percentageInRelationToKey =\r\n        to - from > 0\r\n          ? (MAX_KEYFRAME / (to - from)) * (progress - from)\r\n          : MAX_KEYFRAME;\r\n\r\n      if (\r\n        typeof propertyObject.lastKey === 'number' &&\r\n        propertyObject.lastKey !== to &&\r\n        !reverseExecution\r\n      ) {\r\n        const s = to;\r\n        percentageInRelationToKey = reverseExecution ? 0 : MAX_KEYFRAME;\r\n        to = propertyObject.lastKey;\r\n        propertyObject.lastKey = s;\r\n        from = to;\r\n      } else {\r\n        propertyObject.lastKey = to;\r\n      }\r\n\r\n      if (reverseExecution) {\r\n        const ss = from;\r\n        from = to;\r\n        to = ss;\r\n        percentageInRelationToKey = reverseExecution\r\n          ? MAX_KEYFRAME - percentageInRelationToKey\r\n          : percentageInRelationToKey;\r\n      }\r\n\r\n      if (propertyObject.type === 'observed') {\r\n        const result = animationAuxiliaryObject.easing(\r\n          (1 / 100) * percentageInRelationToKey,\r\n          target,\r\n          propertyObject.index,\r\n          propertyObject.originalArrayLength\r\n        );\r\n\r\n        const lastValue =\r\n          propertyObject.newPropertyValue ||\r\n          (reverseExecution\r\n            ? propertyObject.keyframes[100]\r\n            : propertyObject.keyframes[0]);\r\n\r\n        propertyObject.newPropertyValue = animateTargetObserved(\r\n          target,\r\n          propertyObject.propertyName,\r\n\r\n          reverseExecution\r\n            ? propertyObject.keyframes[from]\r\n            : propertyObject.keyframes[to],\r\n\r\n          0 + result * (100 - 0),\r\n          propertyObject.index\r\n        );\r\n\r\n        if (\r\n          !propagateAnimationPropertyEventListener(\r\n            propertyObject.propertyName,\r\n            animation,\r\n            propertyObject\r\n          )\r\n        ) {\r\n          propertyObject.newPropertyValue = animateTargetObserved(\r\n            target,\r\n            propertyObject.propertyName,\r\n            lastValue,\r\n            100,\r\n            propertyObject.index\r\n          );\r\n        }\r\n      } else {\r\n        propertyObject.newPropertyValue = calcNextPropertyValue(\r\n          propertyObject,\r\n          [from, to],\r\n          percentageInRelationToKey,\r\n          animationAuxiliaryObject.easing,\r\n          animation.round\r\n        );\r\n\r\n        let f: Function;\r\n\r\n        const allowedToApplyStyle = propagateAnimationPropertyEventListener(\r\n          propertyObject.propertyName,\r\n          animation,\r\n          propertyObject\r\n        );\r\n\r\n        if (allowedToApplyStyle) {\r\n          switch (propertyObject.type) {\r\n            case 'transform':\r\n              f = animateTargetTransform;\r\n              break;\r\n            case 'attr':\r\n              f = animateTargetAttributes;\r\n              break;\r\n            case 'direct':\r\n              f = animateTargetDirectProps;\r\n              break;\r\n            default:\r\n              f = animateTargetCSS;\r\n              break;\r\n          }\r\n\r\n          f(\r\n            propertyObject.target,\r\n            propertyObject.propertyName,\r\n            propertyObject.newPropertyValue,\r\n            valuesOfThePropertiesBeforeAnimating[propertyObject.index]\r\n          );\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return propertiesToBeAnimate;\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { trimString } from '../utilities/handle-string';\r\n\r\nfunction treatSupportsFloatingValue(propertyValues: string[]) {\r\n  const values = propertyValues;\r\n  const hasRGB = values.findIndex((v) => v.indexOf('rgb') > -1);\r\n  if (hasRGB > -1) {\r\n    let index = hasRGB;\r\n    do {\r\n      const v = Number(trimString(values[index]));\r\n      if (!Number.isNaN(v)) {\r\n        values[index] = Math.round(v) + (getUnit(values[index]) || '');\r\n      }\r\n      index += 1;\r\n    } while (values[index] !== ')');\r\n  }\r\n  return values;\r\n}\r\nexport default function calcNextPropertyValue(\r\n  propertyObject: AnimationAuxiliaryObject['propertiesToBeAnimate'][number],\r\n  fromAndTo: [from: number, to: number],\r\n  currentPercent: number,\r\n  easingFn: AnimationAuxiliaryObject['easing'],\r\n  round: number\r\n): string {\r\n  const startValues = propertyObject.keyframes[fromAndTo[0]] as string[];\r\n\r\n  const endValues = propertyObject.keyframes[fromAndTo[1]] as string[];\r\n\r\n  const newValue: string[] = [];\r\n\r\n  endValues.forEach((value, index) => {\r\n    const startValueIndex = startValues[index]\r\n      ? trimString(startValues[index] as string)\r\n      : '0';\r\n    let result;\r\n\r\n    if (!Number.isNaN(parseFloat(value))) {\r\n      const unitOfMeasure = getUnit(value) || getUnit(startValueIndex) || '';\r\n\r\n      const fromNumber = parseFloat(startValueIndex);\r\n      const toNumber = parseFloat(trimString(value));\r\n      result = easingFn(\r\n        (1 / 100) * currentPercent,\r\n        propertyObject.target,\r\n        propertyObject.index,\r\n        propertyObject.originalArrayLength\r\n      );\r\n\r\n      result = fromNumber + result * (toNumber - fromNumber);\r\n\r\n      if (round) {\r\n        result = Math.round(result * round) / round;\r\n      }\r\n\r\n      result = ` ${result.toString() + unitOfMeasure}`;\r\n    } else {\r\n      result = value;\r\n    }\r\n    newValue.push(result);\r\n  });\r\n  return trimString(treatSupportsFloatingValue(newValue).join(''));\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\n\r\nexport default function resetAnimationTimeProperties(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  const a = animationAuxiliaryObject;\r\n  a.iterationInterlacations = {\r\n    timeConsumed: 0,\r\n    completed: 0,\r\n  };\r\n  a.startTimeOfTheIteration = 0;\r\n  a.timeRunningIteration = 0;\r\n  return a;\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport resetAnimationTimeProperties from './reset-animation-time-properties';\r\n\r\nlet ANIMATIONS_DELAY: {\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject;\r\n  delay: number;\r\n  startTime: number;\r\n  callbackDelayCompleted: (a: AnimationAuxiliaryObject) => void;\r\n}[] = [];\r\n\r\nlet timeoutId: number | NodeJS.Timeout | undefined;\r\n\r\nfunction processAnimationsDelays() {\r\n  timeoutId = setInterval(() => {\r\n    if (ANIMATIONS_DELAY.length === 0) {\r\n      clearInterval(timeoutId as number);\r\n      timeoutId = undefined;\r\n      return;\r\n    }\r\n    ANIMATIONS_DELAY = ANIMATIONS_DELAY.filter((values) => {\r\n      const v = values;\r\n      const c = getTimeNow() - v.startTime;\r\n      const state = v.animationAuxiliaryObject.animation.state;\r\n      if (state === ANIMATION_STATES[1]) {\r\n        if (c >= v.delay) {\r\n          v.animationAuxiliaryObject.remainingDelayAnimation = v.delay - c;\r\n          resetAnimationTimeProperties(v.animationAuxiliaryObject);\r\n          v.animationAuxiliaryObject.remainingDelayAnimation = 0;\r\n\r\n          v.callbackDelayCompleted(v.animationAuxiliaryObject);\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (state === ANIMATION_STATES[7] || state === ANIMATION_STATES[4]) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }, 0);\r\n}\r\n\r\nexport default function manageAnimationsDelay(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  delay: number,\r\n  startTime: number,\r\n  callbackDelayCompleted: (a: AnimationAuxiliaryObject) => void\r\n): void {\r\n  ANIMATIONS_DELAY.push({\r\n    animationAuxiliaryObject,\r\n    delay,\r\n    startTime,\r\n    callbackDelayCompleted,\r\n  });\r\n  if (!timeoutId) {\r\n    processAnimationsDelays();\r\n  }\r\n}\r\n","import {\r\n  LISTENERS_NAMES,\r\n  propagateAnimationEventListener,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport toMs from '../utilities/to-ms';\r\nimport { applyAnimationsStyleToTargets } from './crud-animations-style';\r\nimport manageAnimationsDelay from './manage-animations-delay';\r\nimport { addAnimationToStack } from './mount-animations-stack';\r\nimport resetAnimationTimeProperties from './reset-animation-time-properties';\r\n\r\n/**\r\n * Delegates the animation to be executed.\r\n */\r\nexport default function insertAnimationInTheQueue(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  jumpTimeout = false,\r\n  animationLoadingTime = 0\r\n): void {\r\n  const a = animationAuxiliaryObject;\r\n  const { animation, remainingDelayAnimation } = a;\r\n\r\n  if (!a.animationAlreadyStarted) {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[8], animation);\r\n  }\r\n\r\n  const delay = Math.max(toMs(animation.delay) - animationLoadingTime, 0);\r\n\r\n  if (delay > 0 && (remainingDelayAnimation || !jumpTimeout)) {\r\n    manageAnimationsDelay(\r\n      a,\r\n      remainingDelayAnimation || delay,\r\n      getTimeNow(),\r\n      () => {\r\n        propagateAnimationEventListener(LISTENERS_NAMES[10], animation);\r\n        addAnimationToStack(a);\r\n      }\r\n    );\r\n  } else {\r\n    resetAnimationTimeProperties(a);\r\n\r\n    a.remainingDelayAnimation = 0;\r\n\r\n    propagateAnimationEventListener(LISTENERS_NAMES[10], animation);\r\n\r\n    if (a.animation.firstRunImmediately && !a.animationAlreadyStarted) {\r\n      a.propertiesToBeAnimate = applyAnimationsStyleToTargets(\r\n        a.propertiesToBeAnimate,\r\n        a\r\n      );\r\n      a.animation.firstRunImmediately = false;\r\n    }\r\n    addAnimationToStack(a);\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport getNewAnimationProgress from './get-new-animation-progress';\r\n\r\nexport default function resetAnimationProgress(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  const animation = animationAuxiliaryObject.animation;\r\n  Object.assign(animationAuxiliaryObject, {\r\n    countDriveLoops: 0,\r\n    animationAlreadyStarted: false,\r\n  });\r\n\r\n  Object.assign(animation, {\r\n    state: ANIMATION_STATES[1],\r\n    count: 0,\r\n  });\r\n  const animationProgressObject = getNewAnimationProgress(\r\n    animationAuxiliaryObject\r\n  );\r\n\r\n  Object.assign(animationAuxiliaryObject, {\r\n    lastStartProgress: animation.progressValue,\r\n    countDriveLoops: animationProgressObject.countDriveLoops,\r\n  });\r\n\r\n  Object.assign(animation, {\r\n    progressValue: animationProgressObject.progress,\r\n    max: animationProgressObject.maxProgress,\r\n  });\r\n\r\n  return animationAuxiliaryObject;\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport resetAnimationProgress from './reset-animation-progress';\r\nimport resetAnimationTimeProperties from './reset-animation-time-properties';\r\n\r\nexport default function restartAnimationProperties(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  animationAuxiliaryObject.propertiesToBeAnimate.forEach((propertyObject) => {\r\n    const o = propertyObject;\r\n    /**\r\n     * Important to reset the property(lastKey).\r\n     */\r\n    o.lastKey = undefined;\r\n  });\r\n  resetAnimationTimeProperties(animationAuxiliaryObject);\r\n  resetAnimationProgress(animationAuxiliaryObject);\r\n  return animationAuxiliaryObject;\r\n}\r\n","import { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport isEmptyObject from '../utilities/is-empty-object';\r\nimport getVendorCSSProperty from '../utilities-style/get-vendor-css-property';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport { removeAttr, setAttr } from '../utilities/dom-attributes';\r\nimport isDOMElement from '../utilities/is-dom-element';\r\nimport {\r\n  applyAnimationsStyleToTargets,\r\n  transformFunctionsObjectToString,\r\n  transformFunctionsToObject,\r\n} from './crud-animations-style';\r\nimport restartAnimationProperties from './restart-animation-properties';\r\n\r\nfunction resetHTMLElement(\r\n  target: HTMLElement,\r\n  beforeAnimating: AnimationAuxiliaryObject['valuesOfThePropertiesBeforeAnimating'][number]\r\n) {\r\n  const t = target;\r\n  customForIn(beforeAnimating.attr, (value, name) => {\r\n    if (value) {\r\n      setAttr(t, name, value);\r\n    } else {\r\n      removeAttr(t, name);\r\n    }\r\n  });\r\n  customForIn(beforeAnimating.style, (value, name) => {\r\n    if (value) {\r\n      t.style[name as never] = value;\r\n    } else {\r\n      t.style[name as never] = '';\r\n    }\r\n  });\r\n\r\n  const transformFunctionsObject = transformFunctionsToObject(t);\r\n\r\n  if (!isEmptyObject(beforeAnimating.transfromFns)) {\r\n    const p = getVendorCSSProperty('transform') as never;\r\n    t.style[p] = transformFunctionsObjectToString({\r\n      ...transformFunctionsObject,\r\n      ...beforeAnimating.transfromFns,\r\n    });\r\n  }\r\n}\r\n\r\nfunction resetAnimationStyle(a: AnimationInstance): void {\r\n  const animation = a;\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n  if (animationAuxiliaryObject) {\r\n    restartAnimationProperties(animationAuxiliaryObject);\r\n    applyAnimationsStyleToTargets(\r\n      animationAuxiliaryObject.propertiesToBeAnimate,\r\n      animationAuxiliaryObject\r\n    );\r\n  }\r\n}\r\n/**\r\n * Removes the style added by the animation.\r\n */\r\nexport default function removeAnimationStyle(\r\n  requiredAnimationProperties: Pick<\r\n    AnimationAuxiliaryObject,\r\n    'animationId' | 'valuesOfThePropertiesBeforeAnimating'\r\n  > & {\r\n    animation: AnimationInstance;\r\n  }\r\n): void {\r\n  const {\r\n    animation,\r\n    valuesOfThePropertiesBeforeAnimating,\r\n  } = requiredAnimationProperties;\r\n  if (!animation.removeChanges) {\r\n    return;\r\n  }\r\n  resetAnimationStyle(animation);\r\n  const targets = animation.targets;\r\n\r\n  for (let index = targets.length - 1; index > -1; index -= 1) {\r\n    const targetObject = targets[index];\r\n    const { target } = targetObject;\r\n\r\n    const beforeAnimating = valuesOfThePropertiesBeforeAnimating[index];\r\n    if (isDOMElement(target)) {\r\n      resetHTMLElement(target as HTMLElement, beforeAnimating);\r\n    }\r\n    customForIn(beforeAnimating.direct, (value, name) => {\r\n      target[name as never] = value as never;\r\n    });\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport getNewValuesForAnimationIntercalation from './get-new-values-for-animation-intercalation';\r\nimport insertAnimationInTheQueue from './insert-animation-in-the-queue';\r\nimport { addAnimationToStack } from './mount-animations-stack';\r\n\r\nexport default function newAnimationIntercalation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  if (aAuxiliaryObject.remainingDelayAnimation > 0) {\r\n    insertAnimationInTheQueue(aAuxiliaryObject);\r\n    return;\r\n  }\r\n  const newIntercalationObject = getNewValuesForAnimationIntercalation(\r\n    aAuxiliaryObject\r\n  );\r\n\r\n  Object.assign(aAuxiliaryObject, newIntercalationObject.toAuxiliaryObject);\r\n\r\n  aAuxiliaryObject.animation.progressValue = newIntercalationObject.progress;\r\n\r\n  addAnimationToStack(aAuxiliaryObject);\r\n}\r\n","import {\r\n  LISTENERS_NAMES,\r\n  propagateAnimationEventListener,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport animationCompleted from './animation-completed';\r\nimport getNewValuesForAnimationIntercalation from './get-new-values-for-animation-intercalation';\r\nimport insertAnimationInTheQueue from './insert-animation-in-the-queue';\r\nimport newAnimationIntercalation from './new-animation-intercalation';\r\nimport resetAnimationTimeProperties from './reset-animation-time-properties';\r\nimport getNewAnimationProgress from './get-new-animation-progress';\r\n\r\nexport default function animationIterationCompleted(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const a = animationAuxiliaryObject;\r\n  const { animation } = a;\r\n  let { backRunning } = a;\r\n  let maxProgress = animation.max;\r\n\r\n  const amountOfIterations = animation.loop;\r\n  let iterationsCompleted = animation.count;\r\n\r\n  let backRunningStopped = -1;\r\n\r\n  a.propertiesToBeAnimate.forEach((obj) => {\r\n    const o = obj;\r\n    o.lastKey = undefined;\r\n  });\r\n  /**\r\n   * Checks that the completion of the iteration was not an animation return action(methods: `go` and `back`).\r\n   */\r\n  if (!backRunning) {\r\n    iterationsCompleted += 1;\r\n  }\r\n  animation.count = iterationsCompleted;\r\n\r\n  if (\r\n    amountOfIterations > iterationsCompleted ||\r\n    amountOfIterations === Infinity ||\r\n    amountOfIterations === true\r\n  ) {\r\n    if (backRunning) {\r\n      backRunningStopped = animation.progressValue;\r\n      backRunning = false;\r\n      propagateAnimationEventListener(LISTENERS_NAMES[7], animation);\r\n    }\r\n\r\n    const animationProgressObject = getNewAnimationProgress(a);\r\n\r\n    a.countDriveLoops = animationProgressObject.countDriveLoops;\r\n    a.lastStartProgress = animationProgressObject.progress;\r\n\r\n    maxProgress = animationProgressObject.maxProgress;\r\n\r\n    propagateAnimationEventListener(LISTENERS_NAMES[7], animation);\r\n    propagateAnimationEventListener(LISTENERS_NAMES[1], animation);\r\n\r\n    resetAnimationTimeProperties(a);\r\n\r\n    a.backRunning = backRunning;\r\n\r\n    animation.max = maxProgress;\r\n    animation.progressValue = animationProgressObject.progress;\r\n\r\n    if (backRunningStopped > -1) {\r\n      /**\r\n       * Maintain the value of the last progress.\r\n       */\r\n      animation.progressValue = backRunningStopped;\r\n\r\n      newAnimationIntercalation(a);\r\n    } else {\r\n      const newIntercalationObject = getNewValuesForAnimationIntercalation(a);\r\n\r\n      Object.assign(a, newIntercalationObject.toAuxiliaryObject);\r\n      animation.progressValue = newIntercalationObject.progress;\r\n      insertAnimationInTheQueue(a);\r\n    }\r\n  } else {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[1], animation);\r\n    animationCompleted(a);\r\n  }\r\n}\r\n","import {\r\n  LISTENERS_NAMES,\r\n  propagateAnimationEventListener,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport removeAnimationStyle from './remove-animation-style';\r\n\r\nexport default function animationCompleted(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  const { animation } = animationAuxiliaryObject;\r\n  animation.state = ANIMATION_STATES[2];\r\n  propagateAnimationEventListener(LISTENERS_NAMES[7], animation);\r\n\r\n  propagateAnimationEventListener(LISTENERS_NAMES[2], animation);\r\n\r\n  if (animation.isInCycle) {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[11], animation);\r\n  }\r\n\r\n  if (animation.autoDestroy) {\r\n    animation.destroy();\r\n  } else if (animation.reset) {\r\n    const removeChanges = animation.removeChanges;\r\n    animation.removeChanges = true;\r\n\r\n    removeAnimationStyle(aAuxiliaryObject);\r\n\r\n    animation.removeChanges = removeChanges;\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport { releasesGarbageFromAnimations } from '../sauce/manage-memory-collections';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport toMs from '../utilities/to-ms';\r\nimport animationIterationCompleted from './animation-iteration-completed';\r\nimport manageAnimationsDelay from './manage-animations-delay';\r\nimport newAnimationIntercalation from './new-animation-intercalation';\r\n/**\r\n * Checks whether the animation iteration has been completed or there should be more intercalations.\r\n */\r\nexport default function animationIntercalationCompleted(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  releasesGarbageFromAnimations();\r\n\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  const { animation } = aAuxiliaryObject;\r\n\r\n  if (animation.state === ANIMATION_STATES[1]) {\r\n    const { reverseExecution } = aAuxiliaryObject;\r\n    const maxProgress = animation.max;\r\n    const progress = animation.progressValue;\r\n    if (\r\n      (reverseExecution && progress < maxProgress) ||\r\n      (!reverseExecution && progress > maxProgress) ||\r\n      progress === maxProgress\r\n    ) {\r\n      animation.progressValue = maxProgress;\r\n\r\n      const endDelay = Math.max(toMs(animation.endDelay));\r\n\r\n      if (endDelay > 0) {\r\n        manageAnimationsDelay(\r\n          aAuxiliaryObject,\r\n          endDelay,\r\n          getTimeNow(),\r\n          animationIterationCompleted\r\n        );\r\n      } else {\r\n        animationIterationCompleted(aAuxiliaryObject);\r\n      }\r\n    } else {\r\n      newAnimationIntercalation(aAuxiliaryObject);\r\n    }\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { BEST_FPS_TIMEOUT } from '../sauce/constants';\r\nimport { sendToGarbageCollector } from '../sauce/manage-memory-collections';\r\nimport isEmptyObject from '../utilities/is-empty-object';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport {\r\n  getCurrentAnimationsStac,\r\n  resetAnimationsStack,\r\n} from './mount-animations-stack';\r\nimport performIntercalationOfTheAnimations from './perform-intercalation-of-the-animations';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n\r\n/**\r\n * Indicates whether the stack mount is already started.\r\n */\r\nlet STARTED_STACK_MOUNT = false;\r\n\r\n/**\r\n * Adds the execution queue  a \"callbackfn\" (through requestAnimationFrame or setTimeout). When invoked the same calls the function that unmount the stack and completes the cycle.\r\n */\r\nexport default function timeoutForStackMounting(): void {\r\n  if (STARTED_STACK_MOUNT) {\r\n    return;\r\n  }\r\n  const ANIMATIONS_STACK = getCurrentAnimationsStac();\r\n  /**\r\n   * Waits for animations so that each style is added together.\r\n   */\r\n  STARTED_STACK_MOUNT = true;\r\n\r\n  timeoutForStackMounting();\r\n  animationTimeout(() => {\r\n    if (isEmptyObject(ANIMATIONS_STACK)) {\r\n      STARTED_STACK_MOUNT = false;\r\n      return;\r\n    }\r\n\r\n    const animationsStack: Record<string, AnimationAuxiliaryObject> = {};\r\n\r\n    customForIn(ANIMATIONS_STACK, (propertyValue, propertyName) => {\r\n      if (propertyValue) {\r\n        animationsStack[propertyName] = propertyValue;\r\n      }\r\n    });\r\n\r\n    sendToGarbageCollector(animationsStack, ANIMATIONS_STACK);\r\n\r\n    /*\r\n     * Restarts the values of the mount stack.\r\n     */\r\n    STARTED_STACK_MOUNT = false;\r\n    resetAnimationsStack();\r\n    performIntercalationOfTheAnimations(animationsStack);\r\n  });\r\n}\r\n\r\nsetInterval(() => {\r\n  timeoutForStackMounting();\r\n}, BEST_FPS_TIMEOUT);\r\n\r\ntimeoutForStackMounting();\r\n\r\nconst hasRAf = typeof window.requestAnimationFrame === 'function';\r\nfunction clearAnimationTimeout(id: number): void {\r\n  if (hasRAf) {\r\n    return window.cancelAnimationFrame(id);\r\n  }\r\n  return window.clearTimeout(id);\r\n}\r\n\r\nfunction animationTimeout(\r\n  callback: () => void,\r\n  timeout?: number | undefined\r\n): number {\r\n  if (hasRAf) {\r\n    const requestAnimationFrameId = window.requestAnimationFrame(() => {\r\n      callback();\r\n      clearAnimationTimeout(requestAnimationFrameId);\r\n    });\r\n    return requestAnimationFrameId;\r\n  }\r\n  return (setTimeout(() => {\r\n    callback();\r\n  }, timeout || 0) as unknown) as number;\r\n}\r\n","import {\r\n  LISTENERS_NAMES,\r\n  propagateAnimationEventListener,\r\n  propagateAnimationExecutionTimeEventListener,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport toMs from '../utilities/to-ms';\r\nimport allAnimationTargetsHaveBeenRemoved from './all-animation-targets-have-been-removed';\r\nimport animationIntercalationCompleted from './animation-intercalation-completed';\r\nimport { applyAnimationsStyleToTargets } from './crud-animations-style';\r\n\r\n/**\r\n * Calls the functions that traverse the stack and applies the style to the elements, restarts the values of the mount stack, removes the items from the stack, and forwards the animation objects to be audited.\r\n */\r\nexport default function performIntercalationOfTheAnimations(\r\n  animationsStack: Record<string, AnimationAuxiliaryObject>\r\n): void {\r\n  customForIn(\r\n    animationsStack,\r\n    (animationAuxiliaryObject: AnimationAuxiliaryObject) => {\r\n      const aAuxiliaryObject = animationAuxiliaryObject;\r\n\r\n      const { animation, propertiesToBeAnimate } = aAuxiliaryObject;\r\n      let { animationAlreadyStarted } = aAuxiliaryObject;\r\n\r\n      if (!propertiesToBeAnimate[0]) {\r\n        allAnimationTargetsHaveBeenRemoved(animation);\r\n      }\r\n\r\n      if (animation.state === ANIMATION_STATES[1] && propertiesToBeAnimate[0]) {\r\n        aAuxiliaryObject.propertiesToBeAnimate = applyAnimationsStyleToTargets(\r\n          propertiesToBeAnimate,\r\n          aAuxiliaryObject\r\n        );\r\n\r\n        if (!animationAlreadyStarted) {\r\n          propagateAnimationEventListener(LISTENERS_NAMES[0], animation);\r\n          animationAlreadyStarted = true;\r\n          aAuxiliaryObject.animationAlreadyStarted = true;\r\n        }\r\n\r\n        if (typeof animation.progress === 'function') {\r\n          animation.progress(animation.progressValue);\r\n        }\r\n\r\n        propagateAnimationEventListener(animation.progressValue, animation);\r\n        propagateAnimationEventListener(LISTENERS_NAMES[9], animation);\r\n      }\r\n    }\r\n  );\r\n\r\n  const dateLastIntercalation = getTimeNow();\r\n  customForIn(\r\n    animationsStack,\r\n    (animationAuxiliaryObject: AnimationAuxiliaryObject) => {\r\n      const a = animationAuxiliaryObject;\r\n\r\n      a.animationExecutionTime =\r\n        a.animation.count * toMs(a.duration) + a.timeRunningIteration;\r\n\r\n      propagateAnimationExecutionTimeEventListener(\r\n        a.animationExecutionTime,\r\n        a.animation\r\n      );\r\n      a.dateLastIntercalation = dateLastIntercalation;\r\n      animationIntercalationCompleted(a);\r\n    }\r\n  );\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\r\n\r\nexport default function allAnimationTargetsHaveBeenRemoved(\r\n  animation: AnimationInstance\r\n): void {\r\n  animation.destroy();\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\nimport {\r\n  getAnimationInTheStack,\r\n  useTimeoutForStackMounting,\r\n} from './mount-animations-stack';\r\nimport getNewValuesForAnimationIntercalation from './get-new-values-for-animation-intercalation';\r\nimport insertAnimationInTheQueue from './insert-animation-in-the-queue';\r\nimport timeoutForStackMounting from './timeout-for-stack-mounting';\r\n\r\n/* \r\n  eslint-disable @typescript-eslint/no-use-before-define \r\n*/\r\n\r\n/**\r\n * Defines the function that will process the stack.\r\n */\r\nuseTimeoutForStackMounting(timeoutForStackMounting);\r\n\r\nexport default function startAnimationExecutionCycle(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  jumpTimeout = false\r\n): void {\r\n  const a = animationAuxiliaryObject;\r\n\r\n  if (getAnimationInTheStack(a.animationId)) {\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Gets the time that the animation took to complete the load.\r\n   */\r\n  const { animationLoadingTime } = a;\r\n\r\n  const newIntercalationObject = getNewValuesForAnimationIntercalation(a);\r\n  Object.assign(a, newIntercalationObject.toAuxiliaryObject);\r\n\r\n  a.animationLoadingTime = 0;\r\n\r\n  a.animation.state = ANIMATION_STATES[1];\r\n  a.animation.progressValue = newIntercalationObject.progress;\r\n\r\n  insertAnimationInTheQueue(a, jumpTimeout, animationLoadingTime);\r\n}\r\n","/* The code below is based on the implementation of anime.js v3.2.1 Copyright (c) 2020 Julian Garnier  */\r\n\r\nimport removeSpacesChar from '../utilities/remove-spaces-char';\r\n\r\n// Colors\r\n\r\nexport function isHex(a: string): boolean {\r\n  return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a);\r\n}\r\nexport function isRgb(a: string): boolean {\r\n  return /^rgb/.test(a);\r\n}\r\nexport function isHsl(a: string): boolean {\r\n  return /^hsl/.test(a);\r\n}\r\nexport function isColor(a: string): boolean {\r\n  const c = removeSpacesChar(a).split(')');\r\n  if (c.length > 1 && c[1] !== '') {\r\n    return false;\r\n  }\r\n  return isHex(a) || isRgb(a) || isHsl(a);\r\n}\r\n\r\nexport function rgbToRgba(rgbValue: string): string {\r\n  const rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\r\n  return rgb ? `rgba(${rgb[1]},1)` : rgbValue;\r\n}\r\n\r\nexport function hexToRgba(hexValue: string): string {\r\n  const rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  const hex = hexValue.replace(rgx, (_m, r, g, b) => {\r\n    return r + r + g + g + b + b;\r\n  });\r\n  const rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(\r\n    hex\r\n  ) as RegExpExecArray;\r\n  const r = parseInt(rgb[1], 16);\r\n  const g = parseInt(rgb[2], 16);\r\n  const b = parseInt(rgb[3], 16);\r\n  return `rgba(${r},${g},${b},1)`;\r\n}\r\n\r\nexport function hslToRgba(hslValue: string): string {\r\n  const hsl =\r\n    /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) ||\r\n    (/hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(\r\n      hslValue\r\n    ) as RegExpExecArray);\r\n  const h = parseInt(hsl[1], 10) / 360;\r\n  const s = parseInt(hsl[2], 10) / 100;\r\n  const l = parseInt(hsl[3], 10) / 100;\r\n  const a = hsl[4] || 1;\r\n  function hue2rgb(p: number, q: number, t: number) {\r\n    let tt = t;\r\n    if (tt < 0) {\r\n      tt += 1;\r\n    }\r\n    if (tt > 1) {\r\n      tt -= 1;\r\n    }\r\n    if (tt < 1 / 6) {\r\n      return p + (q - p) * 6 * tt;\r\n    }\r\n    if (tt < 1 / 2) {\r\n      return q;\r\n    }\r\n    if (tt < 2 / 3) {\r\n      return p + (q - p) * (2 / 3 - tt) * 6;\r\n    }\r\n    return p;\r\n  }\r\n  let r;\r\n  let g;\r\n  let b;\r\n  if (s === 0) {\r\n    r = l;\r\n    g = l;\r\n    b = l;\r\n  } else {\r\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n    const p = 2 * l - q;\r\n    r = hue2rgb(p, q, h + 1 / 3);\r\n    g = hue2rgb(p, q, h);\r\n    b = hue2rgb(p, q, h - 1 / 3);\r\n  }\r\n  return `rgba(${r * 255},${g * 255},${b * 255},${a})`;\r\n}\r\n\r\nexport function colorToRgb(value: string): string {\r\n  const val = removeSpacesChar(value);\r\n  if (isRgb(val)) {\r\n    return rgbToRgba(val);\r\n  }\r\n  if (isHex(val)) {\r\n    return hexToRgba(val);\r\n  }\r\n  if (isHsl(val)) {\r\n    return hslToRgba(val);\r\n  }\r\n  return val;\r\n}\r\n","/**\n * Removes the CSS string \"!important\" from all properties.\n */\nexport default function removesImportantString(CSSStringRules: string): string {\n  return CSSStringRules.split('!important').join('');\n}\n","import { toCamelCase } from '../utilities/index';\n\nfunction augmentDimension(\n  name: 'width' | 'height',\n  elementStyleObject: CSSStyleDeclaration\n): number {\n  const isBorderBox =\n    elementStyleObject.boxSizing.toString().toLowerCase() === 'border-box';\n\n  if (isBorderBox) {\n    const sides = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n    const fields = [\n      `padding${sides[0]}`,\n      `padding${sides[1]}`,\n      `border${sides[0]}Width`,\n      `border${sides[1]}Width`,\n    ];\n    let augment = 0;\n\n    fields.forEach((field) => {\n      const value = parseFloat(elementStyleObject[field as never]);\n      if (!Number.isNaN(value)) {\n        augment += value;\n      }\n    });\n    return -augment;\n  }\n\n  return 0;\n}\n\nfunction getWidthHeight(\n  element: HTMLElement,\n  property: 'width' | 'height',\n  elementStyleObject: CSSStyleDeclaration\n): string {\n  return `${\n    element.getBoundingClientRect()[property] +\n    augmentDimension(property, elementStyleObject)\n  }px`;\n}\n\n/**\n * Normalizes some CSS properties that have not had a set value.\n *\n * @example\n * [ 'top', 'left', 'bottom', 'right', 'width', 'height' ]\n */\nfunction computePropertiesValue(\n  element: HTMLElement,\n  computedStyle: CSSStyleDeclaration\n): Record<string, string> {\n  const elementStyle = element.style;\n  const elementCSSText = elementStyle.cssText;\n\n  const currentComputedStyleForUse = computedStyle;\n\n  const currentComputedStyle = currentComputedStyleForUse;\n\n  const inDisplayNone =\n    currentComputedStyle.getPropertyValue('display') === 'none';\n\n  if (inDisplayNone) {\n    elementStyle.display = 'initial';\n    elementStyle.cssText = elementCSSText;\n  }\n  const propertiesToBeHandled: Record<string, string> = {};\n\n  ['top', 'left', 'bottom', 'right', 'width', 'height'].forEach(\n    (propertyName) => {\n      let computedValue: string | number = 0;\n\n      if (\n        inDisplayNone &&\n        (propertyName === 'width' || propertyName === 'height')\n      ) {\n        elementStyle.display = 'initial';\n\n        computedValue = getWidthHeight(\n          element,\n          propertyName as 'width' | 'height',\n          currentComputedStyleForUse\n        );\n\n        elementStyle.cssText = elementCSSText;\n\n        propertiesToBeHandled[propertyName] = String(computedValue);\n      } else {\n        computedValue = currentComputedStyle[propertyName as never];\n\n        if (!computedValue) {\n          computedValue = element.style[(propertyName as unknown) as number];\n        }\n\n        if (computedValue === 'auto') {\n          if (propertyName === 'width' || propertyName === 'height') {\n            computedValue = getWidthHeight(\n              element,\n              propertyName,\n              currentComputedStyle\n            );\n          } else {\n            let checkProperty: number;\n            switch (propertyName) {\n              case 'top':\n              case 'left':\n                checkProperty = 1;\n                break;\n\n              case 'right':\n              case 'bottom':\n                checkProperty = 2;\n                break;\n\n              default:\n                checkProperty = 0;\n                break;\n            }\n            if (checkProperty) {\n              const { position } = currentComputedStyle;\n\n              if (\n                position === 'fixed' ||\n                (checkProperty === 1 && position === 'absolute')\n              ) {\n                if (inDisplayNone) {\n                  elementStyle.display = 'initial';\n                }\n                computedValue = `${\n                  element.getBoundingClientRect()[\n                    propertyName as 'top' | 'left' | 'bottom' | 'right'\n                  ]\n                }px`;\n\n                elementStyle.cssText = elementCSSText;\n              } else {\n                computedValue = '0px';\n              }\n            }\n          }\n        }\n        propertiesToBeHandled[propertyName] = computedValue\n          ? String(computedValue)\n          : '';\n      }\n    }\n  );\n  return propertiesToBeHandled;\n}\n\n/**\n * Gets the computed style of the element. Only properties that actually have value, shorthand properties, or with empty value are discarded.\n */\nexport default function getAppliedStyle(\n  element: HTMLElement,\n  computedStyle: CSSStyleDeclaration\n): Record<string, string> {\n  const bestStyleComputed = computePropertiesValue(element, computedStyle);\n  const appliedStyle: Record<string, string> = {};\n  let counting = 0;\n  let propertyName = computedStyle.item(counting);\n\n  while (propertyName !== '') {\n    const propertyNameInCamelCase = toCamelCase(propertyName);\n    const propertyValue = computedStyle.getPropertyValue(propertyName);\n    if (propertyValue !== '') {\n      appliedStyle[propertyNameInCamelCase] =\n        bestStyleComputed[propertyNameInCamelCase] || propertyValue;\n    }\n    counting += 1;\n    propertyName = computedStyle.item(counting);\n  }\n\n  return appliedStyle;\n}\n","import getEasyComputedStyle from '../utilities-style/get-easy-computed-style';\r\nimport getAppliedStyle from '../utilities-style/get-applied-style';\r\nimport customForIn from '../utilities/custom-for-in';\r\n/* eslint-disable  import/prefer-default-export */\r\n\r\ntype ElementsCanche = Record<\r\n  string,\r\n  {\r\n    target: HTMLElement;\r\n    data: {\r\n      computedStyle: CSSStyleDeclaration;\r\n      bestComputedStyle: () => Record<string, string>;\r\n      startComputedStyle: Record<string, string>;\r\n    };\r\n  }[]\r\n>;\r\n\r\nconst ELEMENTS_CANCHE: ElementsCanche = {};\r\n\r\nfunction bucketId(target: HTMLElement) {\r\n  return (target.tagName || target.nodeName).toLowerCase();\r\n}\r\ntype ElementData = typeof ELEMENTS_CANCHE[string][number]['data'];\r\n\r\nfunction getElementCanche(\r\n  target: HTMLElement\r\n):\r\n  | false\r\n  | {\r\n      data: ElementData;\r\n      index: number;\r\n      bucket: typeof ELEMENTS_CANCHE[string];\r\n    } {\r\n  const bucket = ELEMENTS_CANCHE[bucketId(target)];\r\n\r\n  if (!bucket) {\r\n    return false;\r\n  }\r\n\r\n  for (\r\n    let counting = 0, { length } = bucket;\r\n    counting < length;\r\n    counting += 1\r\n  ) {\r\n    if (bucket[counting].target === target) {\r\n      return { data: bucket[counting].data, index: counting, bucket };\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction createElementCanche(target: HTMLElement): ElementData {\r\n  const hasBucket = bucketId(target);\r\n  const bucket = ELEMENTS_CANCHE[hasBucket];\r\n  const computedStyle = getEasyComputedStyle(target);\r\n  const elementCancheObject = {\r\n    target,\r\n    data: {\r\n      computedStyle,\r\n      startComputedStyle: getAppliedStyle(target, computedStyle),\r\n      bestComputedStyle: () => getAppliedStyle(target, computedStyle),\r\n    },\r\n  };\r\n\r\n  if (bucket) {\r\n    bucket.push(elementCancheObject);\r\n  } else {\r\n    ELEMENTS_CANCHE[hasBucket] = [elementCancheObject];\r\n  }\r\n\r\n  return elementCancheObject.data;\r\n}\r\n\r\ntype ElementDataWithMethods = Required<ElementData>;\r\n\r\nexport function useElementCanche(target: HTMLElement): ElementDataWithMethods {\r\n  const elementCancheContainer = getElementCanche(target);\r\n  const elementData = elementCancheContainer\r\n    ? elementCancheContainer.data\r\n    : createElementCanche(target);\r\n\r\n  return (elementData as unknown) as ElementDataWithMethods;\r\n}\r\n\r\n/**\r\n * Auto removes elements removed from the DOM.\r\n */\r\nsetInterval(() => {\r\n  customForIn(ELEMENTS_CANCHE, (bucket) => {\r\n    bucket.slice().forEach((o, index) => {\r\n      const { target } = o;\r\n      if (!target.parentElement && !target.parentNode) {\r\n        bucket.splice(index, 1);\r\n      }\r\n    });\r\n  });\r\n}, 500);\r\n","/**\n * Gets the calculated style of the element.\n */\nexport default function getEasyComputedStyle(\n  element: HTMLElement\n): CSSStyleDeclaration {\n  let view: (Window & typeof globalThis) | null =\n    element.ownerDocument.defaultView;\n  if (!view || !view.opener) {\n    view = window;\n  }\n  return view.getComputedStyle(element);\n}\n","import applyCSSTransition from './apply-css-transition';\nimport propertyInStyleObject from './property-in-style-object';\nimport removesImportantString from './removes-important-string';\nimport CSSPropertiesImportant from './css-properties-important';\nimport { customForIn, toCamelCase } from '../utilities/index';\nimport { useElementCanche } from '../animation-mount/elements-canche';\nimport CSSStringRulesToObject from './css-string-rules-to-object';\nimport getLinkedCSSProperties from './get-linked-css-properties';\nimport reduceCSSStringRules from './reduce-css-string-rules';\n\n/**\n * Gets the CSS properties that would be changed in the element if there was the application of a determined style.\n *\n * @param element\n * An HTML element.\n *\n * @param CSSStringRules\n * The style to be applied.\n *\n * @param getTheseProperties\n * Indicates which properties should be read.\n *\n * @param initialStyle\n * Save the style as the initial style for the properties.\n */\n\nexport default function getComputedValuesAfterChange(\n  element: HTMLElement,\n  CSSStringRules: string\n): {\n  before: Record<string, string>;\n  after: Record<string, string>;\n  beforeComputedStyle: Record<string, string>;\n  afterComputedStyle: Record<string, string>;\n} {\n  const elementCSSText = element.style.cssText;\n  const elementStyle = element.style;\n  const elementCanche = useElementCanche(element);\n\n  const affectedCSSProperties: Record<string, string> = {};\n  const affectedCSSPropertiesInitialValues: Record<string, string> = {};\n\n  const bestCSSStringRules = reduceCSSStringRules(CSSStringRules);\n\n  const beforeComputedStyle = elementCanche.bestComputedStyle();\n\n  applyCSSTransition(\n    element,\n    'all linear 0s',\n    CSSPropertiesImportant(`${bestCSSStringRules}`)\n  );\n\n  const afterComputedStyle = elementCanche.bestComputedStyle();\n\n  const linkedCSSProperties: typeof afterComputedStyle = {};\n  customForIn(\n    CSSStringRulesToObject(bestCSSStringRules),\n    (propertyValue, propertyName) => {\n      getLinkedCSSProperties(\n        propertyName as string,\n        propertyValue as string\n      ).forEach((property) => {\n        linkedCSSProperties[toCamelCase(property)] = propertyValue as string;\n      });\n    }\n  );\n\n  customForIn(linkedCSSProperties, (_value, propertyName) => {\n    const pName = (propertyName as unknown) as string;\n    if (!propertyInStyleObject(pName, affectedCSSProperties)) {\n      if (afterComputedStyle[pName] && pName !== 'cssText') {\n        affectedCSSProperties[pName] = afterComputedStyle[pName];\n\n        affectedCSSPropertiesInitialValues[pName] = beforeComputedStyle[pName];\n      }\n    }\n  });\n\n  customForIn(affectedCSSProperties, (propertyValue, propertyName) => {\n    affectedCSSProperties[propertyName] = removesImportantString(\n      propertyValue as string\n    );\n\n    affectedCSSPropertiesInitialValues[propertyName] = removesImportantString(\n      beforeComputedStyle[propertyName as string]\n    );\n  });\n\n  elementStyle.cssText = elementCSSText;\n  return {\n    before: affectedCSSPropertiesInitialValues,\n    after: affectedCSSProperties,\n    beforeComputedStyle,\n    afterComputedStyle,\n  };\n}\n","import getVendorCSSProperty from './get-vendor-css-property';\n/**\n * Applies a transition to certain CSS properties.\n * @param element\n * An HTML element\n *\n * @param transitionValue\n *\n * @param CSSStyleRules\n * A value for the \"transition\" CSS property.\n */\nexport default function applyCSSTransition(\n  element: HTMLElement,\n  transitionValue: string,\n  CSSStyleRules: string\n): void {\n  const elementStyle = element.style;\n\n  elementStyle.cssText = `${\n    elementStyle.cssText + getVendorCSSProperty('transition', transitionValue)\n  }:${transitionValue};${CSSStyleRules}`;\n}\n","import removesImportantString from './removes-important-string';\n/**\n * Adds the CSS string \"!important\" to all properties.\n */\nexport default function CSSPropertiesImportant(CSSStringRules: string): string {\n  return removesImportantString(CSSStringRules).split(';').join(' !important;');\n}\n","import { customForIn } from '../utilities/index';\nimport sameCSSProperty from './same-css-property';\n\n/**\n * Checks that a specific property exists in a style object, vendors are not taken into account\n * ([moz, ms, webkit, o]-opacity is equal opacity).\n */\nexport default function propertyInStyleObject(\n  property: string,\n  styleObject:\n    | Record<keyof HTMLElement['style'], unknown>\n    | Record<string, unknown>\n): boolean {\n  return customForIn(styleObject, (_value, propertyName) => {\n    if (sameCSSProperty(propertyName, property)) {\n      return true;\n    }\n    return false;\n  });\n}\n","import { CSS_VENDORS, CSS_VENDORS_LENGTH } from '../sauce/constants';\nimport toCSSKebabCase from './to-css-kebab-case';\n\n/**\n * Compares whether the properties are the same despite the vendor.\n */\nexport default function sameCSSProperty(\n  property: string,\n  propertyVendor: string\n): boolean {\n  const CSSProperty = toCSSKebabCase(property);\n  const CSSPropertyVendor = toCSSKebabCase(propertyVendor);\n  if (CSSProperty === CSSPropertyVendor) {\n    return true;\n  }\n\n  for (let counting = CSS_VENDORS_LENGTH - 1; counting > -1; counting -= 1) {\n    if (`-${CSS_VENDORS[counting]}-${CSSProperty}` === CSSPropertyVendor) {\n      return true;\n    }\n  }\n  return false;\n}\n","import { isColor } from '../based-implementations/colors';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { toCamelCase, trimString } from '../utilities/handle-string';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\n\r\nconst CANCHE_COLORS_VALUES: Record<string, string> = {};\r\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\r\n\r\nexport function addToCancheColorValue(\r\n  wrongValue: string,\r\n  correctValue: string\r\n): void {\r\n  CANCHE_COLORS_VALUES[wrongValue] = correctValue;\r\n}\r\nexport function getColorValueFromCanche(value: string): string {\r\n  if (hasOwnProperty(CANCHE_COLORS_VALUES, value)) {\r\n    return CANCHE_COLORS_VALUES[value];\r\n  }\r\n  return value;\r\n}\r\n\r\nexport function consultComputedStyle(kf: Record<string, string>): boolean {\r\n  return customForIn(kf, (propertyValue, propertyName) => {\r\n    if (propertyValue) {\r\n      DIV_ELEMENT_STYLE.cssText = '';\r\n      const n = toCamelCase(propertyName) as never;\r\n      const unit = getUnit(propertyValue);\r\n\r\n      DIV_ELEMENT_STYLE[n] = propertyValue;\r\n\r\n      const v1 = DIV_ELEMENT_STYLE[n]\r\n        ? Number(trimString(DIV_ELEMENT_STYLE[n]))\r\n        : DIV_ELEMENT_STYLE[n];\r\n      const v2 = Number(trimString(propertyValue));\r\n      if (\r\n        DIV_ELEMENT_STYLE[n] &&\r\n        (unit === 'px' ||\r\n          isColor(propertyValue) ||\r\n          (DIV_ELEMENT_STYLE[n] === propertyValue &&\r\n            !Number.isNaN(v1) &&\r\n            v1 === v2))\r\n      ) {\r\n        DIV_ELEMENT_STYLE[n] = '';\r\n        return false;\r\n      }\r\n      DIV_ELEMENT_STYLE[n] = '';\r\n    }\r\n\r\n    return true;\r\n  });\r\n}\r\n","/* The code below is based on the implementation of anime.js v3.2.1 Copyright (c) 2020 Julian Garnier  */\r\n\r\nimport EasingFunction from '../contracts/easing-function';\r\nimport FunctionForPropertyValueInKeyframe from '../contracts/function-for-property-value-in-keyframe';\r\nimport { StaggerParams } from '../contracts/stagger-params';\r\nimport { getCustomEasing } from '../sauce/custom-easings';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { parserEasings } from './easings';\r\n\r\nexport default function stagger(\r\n  params: StaggerParams\r\n): FunctionForPropertyValueInKeyframe {\r\n  const value = params.value;\r\n\r\n  const p: StaggerParams = params;\r\n\r\n  const val = (typeof value === 'number' ? value.toString() : value) as\r\n    | string\r\n    | string[];\r\n  let easing: EasingFunction | null;\r\n\r\n  const grid = p.grid;\r\n  const axis = p.axis;\r\n  let fromIndex = p.from || 0;\r\n  if (fromIndex === 'edges') {\r\n    fromIndex = 'center';\r\n    if (!p.dir || p.dir === 'normal') {\r\n      p.dir = 'reverse';\r\n    } else {\r\n      p.dir = 'normal';\r\n    }\r\n  }\r\n  const dir = p.dir || 'normal';\r\n  const fromCenter = fromIndex === 'center';\r\n  const isRange = Array.isArray(val);\r\n  let val1: number;\r\n  let val2: number;\r\n  let unit: string;\r\n\r\n  if (params && params.easing && typeof params.easing === 'string') {\r\n    easing = getCustomEasing(params.easing) || parserEasings(params.easing);\r\n  } else {\r\n    easing = null;\r\n  }\r\n\r\n  if (Array.isArray(val)) {\r\n    val1 = parseFloat(val[0]);\r\n    val2 = parseFloat(val[1]);\r\n\r\n    unit = getUnit(val[1]) || '';\r\n  } else {\r\n    val1 = parseFloat(val as string);\r\n    val2 = 0;\r\n\r\n    unit = getUnit(val) || '';\r\n  }\r\n\r\n  const start = parseFloat(p.start as string) || 0 + (isRange ? val1 : 0);\r\n  let values: number[] = [];\r\n  let maxValue = 0;\r\n  return (el: object, i: number, t: number) => {\r\n    let fIndex: number;\r\n    switch (fromIndex) {\r\n      case 'first':\r\n        fIndex = 0;\r\n        break;\r\n      case 'center':\r\n        fIndex = (t - 1) / 2;\r\n\r\n        break;\r\n      case 'last':\r\n        fIndex = t - 1;\r\n\r\n        break;\r\n      case 'random':\r\n        fIndex = Math.floor(Math.random() * (t + 1));\r\n        break;\r\n      default:\r\n        fIndex = fromIndex as number;\r\n        break;\r\n    }\r\n\r\n    if (!values.length) {\r\n      for (let index = 0; index < t; index += 1) {\r\n        if (!grid) {\r\n          values.push(Math.abs(fIndex - index));\r\n        } else {\r\n          const fromX = !fromCenter ? fIndex % grid[0] : (grid[0] - 1) / 2;\r\n          const fromY = !fromCenter\r\n            ? Math.floor(fIndex / grid[0])\r\n            : (grid[1] - 1) / 2;\r\n          const toX = index % grid[0];\r\n          const toY = Math.floor(index / grid[0]);\r\n          const distanceX = fromX - toX;\r\n          const distanceY = fromY - toY;\r\n          let r = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\r\n          if (axis === 'x') {\r\n            r = -distanceX;\r\n          }\r\n          if (axis === 'y') {\r\n            r = -distanceY;\r\n          }\r\n          values.push(r);\r\n        }\r\n        maxValue = Math.max(...values);\r\n      }\r\n      if (easing) {\r\n        values = values.map((v) => {\r\n          return (easing as EasingFunction)(v / maxValue, el, i, t) * maxValue;\r\n        });\r\n      }\r\n      if (dir === 'reverse') {\r\n        values = values.map((v) => {\r\n          if (axis) {\r\n            return v < 0 ? v * -1 : -v;\r\n          }\r\n          return Math.abs(maxValue - v);\r\n        });\r\n      }\r\n    }\r\n\r\n    const spacing = isRange ? (val2 - val1) / maxValue : val1;\r\n\r\n    const r = start + spacing * (Math.round(values[i] * 100) / 100);\r\n    return unit ? r + unit : r;\r\n  };\r\n}\r\n","import EasingsFunctionsList from '../contracts/easings-functions-list';\r\n\r\nimport { trimString } from '../utilities/handle-string';\r\nimport { StaggerParams } from '../contracts/stagger-params';\r\nimport removeSpacesChar from '../utilities/remove-spaces-char';\r\n\r\nfunction stringToArray(v: string) {\r\n  return v.split(',').map((n) => parseFloat(trimString(n)));\r\n}\r\nfunction getPropertyValue(v: string) {\r\n  const value = /\\[(.*)\\]/.exec(v);\r\n  if (value && value[1]) {\r\n    return stringToArray(value[1]);\r\n  }\r\n  return v;\r\n}\r\nexport default function parserStringStagger(\r\n  stringStagger: string\r\n): string | StaggerParams {\r\n  const value = trimString(stringStagger);\r\n\r\n  if (value.indexOf('<') > -1 && value.indexOf('>') > -1) {\r\n    const splitValue = value.split('<');\r\n    const propertyValue = getPropertyValue(trimString(splitValue[0]));\r\n\r\n    const form = /<(.*)>/.exec(value);\r\n    const getGrid = /\\[(.*)\\]/.exec(splitValue[1]);\r\n    const getOtherValue = splitValue[1]\r\n      .replace(/(.*)>/, '')\r\n      .replace(/\\[(.*)\\]/, '');\r\n\r\n    const grid = getGrid\r\n      ? (stringToArray(trimString(getGrid[1])) as StaggerParams['grid'])\r\n      : false;\r\n    const staggerParams = {} as StaggerParams;\r\n    if (grid) {\r\n      staggerParams.grid = grid;\r\n    }\r\n    if (form && trimString(form[1])) {\r\n      const v = parseFloat(trimString(form[1]));\r\n\r\n      staggerParams.from = (Number.isNaN(v)\r\n        ? trimString(form[1])\r\n        : v) as StaggerParams['from'];\r\n    }\r\n    getOtherValue.split(' ').forEach((a) => {\r\n      const v = trimString(a);\r\n      if (v) {\r\n        if (Number.isNaN(parseFloat(v))) {\r\n          switch (v) {\r\n            case 'x':\r\n            case 'y':\r\n            case 'both':\r\n              staggerParams.axis = v;\r\n              break;\r\n            case 'normal':\r\n            case 'reverse':\r\n              staggerParams.dir = v;\r\n              break;\r\n\r\n            default:\r\n              staggerParams.easing = v as EasingsFunctionsList;\r\n              break;\r\n          }\r\n        } else {\r\n          staggerParams.start = removeSpacesChar(v);\r\n        }\r\n      }\r\n    });\r\n\r\n    staggerParams.value = Array.isArray(propertyValue)\r\n      ? propertyValue.map((v) => v.toString())\r\n      : propertyValue;\r\n    return staggerParams;\r\n  }\r\n  return stringStagger;\r\n}\r\n","import stagger from '../based-implementations/stagger';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport parserStringStagger from './parser-string-stagger';\r\n\r\nexport function getRealPropertyValue(\r\n  propertyValue: ValuesToAnimateProperty,\r\n  target: object,\r\n  index: number,\r\n  length: number\r\n): string;\r\nexport function getRealPropertyValue(\r\n  propertyValue: ValuesToAnimateProperty,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n): string;\r\nexport function getRealPropertyValue(\r\n  propertyValue: ValuesToAnimateProperty,\r\n  target: unknown,\r\n  index: number,\r\n  length: number\r\n): string {\r\n  const value =\r\n    typeof propertyValue === 'string'\r\n      ? ((v) => (typeof v === 'object' ? stagger(v) : v))(\r\n          parserStringStagger(propertyValue)\r\n        )\r\n      : propertyValue;\r\n  switch (typeof value) {\r\n    case 'number':\r\n      return (value as number).toString() as string;\r\n\r\n    case 'function':\r\n      return (value as Function)(target, index, length).toString() as string;\r\n\r\n    default:\r\n      return (value as unknown) as string;\r\n  }\r\n}\r\n","import toCSSKebabCase from '../utilities-style/to-css-kebab-case';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getUnit from '../utilities/get-unit';\r\nimport { trimString } from '../utilities/handle-string';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\n\r\nconst DIV_ELEMENT_STYLE = document.createElement('div').style;\r\nconst possibleUnits = ['px', 'deg'];\r\nconst possibleUnitsLength = possibleUnits.length;\r\nconst knownProperties: Record<string, string> = {\r\n  perspective: 'px',\r\n  rotate: 'deg',\r\n  rotate3d: '',\r\n  rotateX: 'deg',\r\n  rotateY: 'deg',\r\n  rotateZ: 'deg',\r\n  translate: 'px',\r\n  translate3d: 'px',\r\n  translateX: 'px',\r\n  translateY: 'px',\r\n  translateZ: 'px',\r\n  scale: '',\r\n  scale3d: '',\r\n  scaleX: '',\r\n  scaleY: '',\r\n  scaleZ: '',\r\n  skew: 'deg',\r\n  skewX: 'deg',\r\n  skewY: 'deg',\r\n  scrollLeft: '',\r\n  scrollTop: '',\r\n  scrollTo: '',\r\n  opacity: '',\r\n};\r\nexport function getUnitOfMeasureForPropertyValue(\r\n  propertyName: string,\r\n  propertyValue: string\r\n): string {\r\n  const propertyNameCSS = toCSSKebabCase(propertyName) as never;\r\n  if (typeof propertyValue === 'string') {\r\n    return propertyValue\r\n      .split(' ')\r\n      .map((value) => {\r\n        const v = trimString(value);\r\n        const valueNumber = parseFloat(v);\r\n\r\n        if (\r\n          !getUnit(v) &&\r\n          typeof valueNumber === 'number' &&\r\n          !Number.isNaN(valueNumber)\r\n        ) {\r\n          if (hasOwnProperty(knownProperties, propertyName)) {\r\n            return (\r\n              valueNumber +\r\n              knownProperties[propertyName] +\r\n              (v.indexOf(',') > -1 ? ',' : '')\r\n            );\r\n          }\r\n\r\n          for (let index = 0; index < possibleUnitsLength; index += 1) {\r\n            const u = possibleUnits[index];\r\n\r\n            DIV_ELEMENT_STYLE[propertyNameCSS] = v + u;\r\n\r\n            if (DIV_ELEMENT_STYLE.item(0)) {\r\n              knownProperties[propertyName] = u;\r\n              DIV_ELEMENT_STYLE[propertyNameCSS] = '';\r\n\r\n              return v + u;\r\n            }\r\n          }\r\n\r\n          DIV_ELEMENT_STYLE[propertyNameCSS] = '';\r\n        }\r\n\r\n        return value;\r\n      })\r\n      .join(' ');\r\n  }\r\n\r\n  return propertyValue;\r\n}\r\nexport function getUnitOfMeasureForPropertiesValues<T>(\r\n  keyframe: Record<string, string>\r\n): T {\r\n  const k = keyframe;\r\n  customForIn(k, (propertyValue, propertyName) => {\r\n    k[propertyName] = getUnitOfMeasureForPropertyValue(\r\n      propertyName,\r\n      propertyValue\r\n    );\r\n  });\r\n  return (k as unknown) as T;\r\n}\r\n","import { WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS } from '../sauce/constants';\r\nimport getUnit from '../utilities/get-unit';\r\n\r\nexport default function organizeTransformFunctionsValues(\r\n  propertyName: keyof typeof WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS,\r\n  propertyValue: string\r\n): string {\r\n  const propertyValues = propertyValue.split(',');\r\n\r\n  const transformFnValues = WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS[\r\n    propertyName\r\n  ].split(',');\r\n\r\n  let unitOfMeasureInUse = '';\r\n  let lastRealValue = '';\r\n  const newPropertyValues = transformFnValues.map((defaultValue, index) => {\r\n    let value = propertyValues[index];\r\n    if (value) {\r\n      lastRealValue = value;\r\n    } else {\r\n      value = lastRealValue || defaultValue;\r\n    }\r\n\r\n    unitOfMeasureInUse = value ? getUnit(value) : unitOfMeasureInUse;\r\n\r\n    return value;\r\n  });\r\n  return newPropertyValues.join(',').replace(/( {2})/g, ' ');\r\n}\r\n","import { transformFunctionsToObject } from '../animation-engine/crud-animations-style';\r\nimport TypeOfPropertiesToAnimate from '../contracts/type-of-properties-to-animate';\r\nimport { WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS } from '../sauce/constants';\r\nimport getVendorCSSProperty from '../utilities-style/get-vendor-css-property';\r\nimport { getAttr } from '../utilities/dom-attributes';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport { useElementCanche } from './elements-canche';\r\nimport { getUnitOfMeasureForPropertyValue } from './get-unit-of-measure-properties';\r\nimport organizeTransformFunctionsValues from './organize-transform-functions-values';\r\n\r\nfunction computedStyle(target: HTMLElement) {\r\n  return (useElementCanche(target).computedStyle as unknown) as Record<\r\n    string,\r\n    string\r\n  >;\r\n}\r\n\r\nfunction getCurrentValueTransformFunction(\r\n  target: HTMLElement,\r\n  transformFunction: string\r\n) {\r\n  const current = target.style[getVendorCSSProperty('transform') as never];\r\n\r\n  if (current && current.indexOf(transformFunction) > -1) {\r\n    const transformFunctionsObject = transformFunctionsToObject(target) || {};\r\n    if (\r\n      hasOwnProperty(transformFunctionsObject, transformFunction) &&\r\n      transformFunctionsObject[transformFunction]\r\n    ) {\r\n      return transformFunctionsObject[transformFunction];\r\n    }\r\n  }\r\n\r\n  return WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS[transformFunction];\r\n}\r\nexport default function getPropertyCurrentValue(\r\n  target: HTMLElement,\r\n  propertyName: string,\r\n  type: TypeOfPropertiesToAnimate\r\n): string {\r\n  let currentValue: string;\r\n  switch (type) {\r\n    case 'attr':\r\n      currentValue = getAttr(target, propertyName) || '0';\r\n      break;\r\n    case 'direct':\r\n      currentValue = (target[propertyName as never] as number).toString();\r\n      break;\r\n    case 'transform':\r\n      currentValue = getUnitOfMeasureForPropertyValue(\r\n        propertyName,\r\n        organizeTransformFunctionsValues(\r\n          propertyName,\r\n          getCurrentValueTransformFunction(target, propertyName)\r\n        )\r\n      );\r\n      break;\r\n\r\n    default:\r\n      currentValue = computedStyle(target)[propertyName] || '';\r\n\r\n      break;\r\n  }\r\n  return currentValue;\r\n}\r\n","import TypeOfPropertiesToAnimate from '../contracts/type-of-properties-to-animate';\r\nimport getPropertyCurrentValue from './get-property-current-value';\r\nimport getRelativeValue from './get-relative-value';\r\n\r\nexport default function treatPropertyCurrentValue<T>(\r\n  propertyValue: T,\r\n  propertyName: string,\r\n  type: TypeOfPropertiesToAnimate,\r\n  target: HTMLElement\r\n): T {\r\n  let v;\r\n  if (typeof propertyValue === 'string') {\r\n    v = propertyValue;\r\n    if (v.indexOf('?') > -1) {\r\n      v = v.replace(\r\n        /\\?/,\r\n        getPropertyCurrentValue(target, propertyName, type)\r\n      ) as unknown;\r\n    }\r\n\r\n    v = getRelativeValue(v as string, propertyName, type, target);\r\n  }\r\n\r\n  return (v as unknown) as T;\r\n}\r\n","import TypeOfPropertiesToAnimate from '../contracts/type-of-properties-to-animate';\r\nimport getUnit from '../utilities/get-unit';\r\nimport getPropertyCurrentValue from './get-property-current-value';\r\n\r\nexport default function getRelativeValue(\r\n  to: string,\r\n  propertyName: string,\r\n  type: TypeOfPropertiesToAnimate,\r\n  target: HTMLElement\r\n): string {\r\n  const operator = /^(\\*=|\\+=|-=)/.exec(to);\r\n  if (!operator) {\r\n    return to;\r\n  }\r\n  const from = getPropertyCurrentValue(target, propertyName, type);\r\n  const u = getUnit(to) || '';\r\n  const x = parseFloat(from);\r\n  const y = parseFloat(to.replace(operator[0], ''));\r\n  let v;\r\n  switch (operator[0][0]) {\r\n    case '-':\r\n      v = x - y;\r\n      break;\r\n    case '*':\r\n      v = x * y;\r\n      break;\r\n    default:\r\n      v = x + y;\r\n  }\r\n  return v + u;\r\n}\r\n","import { colorToRgb, isColor } from '../based-implementations/colors';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport isEmptyObject from '../utilities/is-empty-object';\r\nimport getComputedValuesAfterChange from '../utilities-style/get-computed-values-after-change';\r\nimport getLinkedCSSProperties from '../utilities-style/get-linked-css-properties';\r\nimport toCSSStringRules from '../utilities-style/to-css-string-rules';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport { toCamelCase, trimString } from '../utilities/handle-string';\r\nimport {\r\n  addToCancheColorValue,\r\n  consultComputedStyle,\r\n  getColorValueFromCanche,\r\n} from './css-properties-to-animate';\r\nimport getPropertyObjectToAnimate from './property-object-to-animate';\r\nimport { getRealPropertyValue } from './get-real-property-value';\r\nimport { getUnitOfMeasureForPropertyValue } from './get-unit-of-measure-properties';\r\nimport treatPropertyCurrentValue from './treat-property-current-value';\r\nimport getUnit from '../utilities/get-unit';\r\n\r\nexport default function getCSSPropertiesToBeAnimated(\r\n  CSSProperties: Record<string, Record<string, ValuesToAnimateProperty>>,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n): AnimationAuxiliaryObject['propertiesToBeAnimate'][number][] {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(CSSProperties, (propertyKeyframes, propertyName) => {\r\n    const pName = toCamelCase(propertyName);\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n\r\n      const v = getUnitOfMeasureForPropertyValue(\r\n        propertyName,\r\n        treatPropertyCurrentValue(\r\n          getRealPropertyValue(value, target, index, length),\r\n          propertyName,\r\n          'css',\r\n          target\r\n        )\r\n      );\r\n\r\n      getLinkedCSSProperties(propertyName).forEach((n) => {\r\n        const name = toCamelCase(n);\r\n        if (typeof value === 'string' && value.indexOf('?') > -1) {\r\n          const currentValue = getUnitOfMeasureForPropertyValue(\r\n            name,\r\n            treatPropertyCurrentValue(value, name, 'css', target)\r\n          );\r\n          keyframes[key][name] = isColor(currentValue)\r\n            ? colorToRgb(currentValue)\r\n            : currentValue;\r\n        } else {\r\n          keyframes[key][name] = v;\r\n        }\r\n      });\r\n      if (!keyframes[key][pName]) {\r\n        keyframes[key][pName] = v;\r\n      }\r\n    });\r\n  });\r\n\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const kf = keyframe;\r\n\r\n    customForIn(kf, (propertyValue, propertyName) => {\r\n      kf[propertyName] = getColorValueFromCanche(propertyValue);\r\n    });\r\n\r\n    const properties = toCSSStringRules(kf);\r\n\r\n    let o: Record<string, string>;\r\n\r\n    if (properties && consultComputedStyle(kf)) {\r\n      const propertiesChanged = getComputedValuesAfterChange(\r\n        target,\r\n        properties\r\n      );\r\n\r\n      o = isEmptyObject(propertiesChanged.after)\r\n        ? propertiesChanged.before\r\n        : propertiesChanged.after;\r\n    } else {\r\n      o = kf;\r\n    }\r\n\r\n    customForIn(o, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n\r\n      propertiesKeyframes[propertyName][key] = isColor(propertyValue)\r\n        ? colorToRgb(propertyValue)\r\n        : propertyValue;\r\n\r\n      if (\r\n        isColor(propertiesKeyframes[propertyName][key]) &&\r\n        propertiesKeyframes[propertyName][key] !== kf[propertyName] &&\r\n        trimString(kf[propertyName]).split(' ').length === 1 &&\r\n        getUnit(kf[propertyName]) === ''\r\n      ) {\r\n        addToCancheColorValue(\r\n          kf[propertyName],\r\n          propertiesKeyframes[propertyName][key]\r\n        );\r\n      }\r\n    });\r\n  });\r\n\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'css'\r\n  );\r\n}\r\n","import toCSSKebabCase from './to-css-kebab-case';\nimport { customForIn } from '../utilities/index';\n\n/**\n * Converts a style object to a style string.\n */\nexport default function toCSSStringRules(styleObject: object): string {\n  let string = '';\n  customForIn(styleObject, (_value, propertyName) => {\n    string = `${string} ${propertyName}: ${styleObject[propertyName]};`;\n  });\n  return toCSSKebabCase(string);\n}\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport { WIDE_SMILE_SCROLL_PROPERTIES } from '../sauce/constants';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getPropertyObjectToAnimate from './property-object-to-animate';\r\nimport { getRealPropertyValue } from './get-real-property-value';\r\nimport getScrollValues from './get-scroll-values';\r\nimport treatPropertyCurrentValue from './treat-property-current-value';\r\n\r\nexport default function getDirectPropertiesToBeAnimated(\r\n  targetProperties: Record<string, Record<string, ValuesToAnimateProperty>>,\r\n  target: object,\r\n  index: number,\r\n  length: number\r\n): AnimationAuxiliaryObject['propertiesToBeAnimate'][number][] {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(targetProperties, (propertyKeyframes, propertyName) => {\r\n    const scrollProperty = propertyName;\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = treatPropertyCurrentValue(\r\n        getRealPropertyValue(value, target, index, length),\r\n        scrollProperty,\r\n        'direct',\r\n        target as never\r\n      );\r\n\r\n      keyframes[key][propertyName] = v;\r\n    });\r\n  });\r\n\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const properties = keyframe;\r\n\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n      if (WIDE_SMILE_SCROLL_PROPERTIES.indexOf(propertyName as string) > -1) {\r\n        propertiesKeyframes[propertyName][key] = getScrollValues(\r\n          target as HTMLElement,\r\n          propertyValue\r\n        )[propertyName as 'scrollTop' | 'scrollLeft'];\r\n      } else {\r\n        propertiesKeyframes[propertyName][key] = propertyValue;\r\n      }\r\n    });\r\n  });\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'direct'\r\n  );\r\n}\r\n","export default function getScrollValues(\r\n  target: HTMLElement,\r\n  to: string\r\n): {\r\n  scrollTop: string;\r\n  scrollLeft: string;\r\n} {\r\n  const scrollHeight = target.scrollHeight;\r\n  const scrollWidth = target.scrollWidth;\r\n  const clientHeight = target.clientHeight;\r\n  const clientWidth = target.clientWidth;\r\n  const scrollValues = (value: string | number, maxValue: number) => {\r\n    let v = value;\r\n    v = typeof v === 'number' ? v.toString() : v;\r\n    let r = parseFloat(v);\r\n\r\n    if (v.indexOf('%') > -1) {\r\n      r = (maxValue / 100) * Math.floor(parseFloat(v));\r\n    }\r\n\r\n    v = r > maxValue || v.indexOf('max') > -1 ? maxValue : r;\r\n\r\n    return v.toString();\r\n  };\r\n\r\n  return {\r\n    scrollTop: scrollValues(to, scrollHeight - clientHeight),\r\n    scrollLeft: scrollValues(to, scrollWidth - clientWidth),\r\n  };\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getPropertyObjectToAnimate from './property-object-to-animate';\r\nimport { getRealPropertyValue } from './get-real-property-value';\r\nimport { getUnitOfMeasureForPropertiesValues } from './get-unit-of-measure-properties';\r\nimport organizeTransformFunctionsValues from './organize-transform-functions-values';\r\nimport treatPropertyCurrentValue from './treat-property-current-value';\r\n\r\nexport default function getTransformPropertiesToBeAnimated(\r\n  transformProperties: Record<string, Record<string, ValuesToAnimateProperty>>,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n): AnimationAuxiliaryObject['propertiesToBeAnimate'][number][] {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(transformProperties, (propertyKeyframes, propertyName) => {\r\n    const transformFnName = propertyName;\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = treatPropertyCurrentValue(\r\n        getRealPropertyValue(value, target, index, length),\r\n        transformFnName,\r\n        'transform',\r\n        target\r\n      );\r\n\r\n      keyframes[key][propertyName] = v;\r\n    });\r\n  });\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const properties = getUnitOfMeasureForPropertiesValues(keyframe) as Record<\r\n      string,\r\n      string\r\n    >;\r\n\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n\r\n      propertiesKeyframes[propertyName][key] = organizeTransformFunctionsValues(\r\n        propertyName,\r\n        propertyValue\r\n      );\r\n    });\r\n  });\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'transform'\r\n  );\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport toCSSKebabCase from '../utilities-style/to-css-kebab-case';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getPropertyObjectToAnimate from './property-object-to-animate';\r\nimport { getRealPropertyValue } from './get-real-property-value';\r\nimport treatPropertyCurrentValue from './treat-property-current-value';\r\n\r\nexport default function getAttrPropertiesToBeAnimated(\r\n  attrProperties: Record<string, Record<string, ValuesToAnimateProperty>>,\r\n  target: HTMLElement,\r\n  index: number,\r\n  length: number\r\n): AnimationAuxiliaryObject['propertiesToBeAnimate'][number][] {\r\n  const keyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(attrProperties, (propertyKeyframes, propertyName) => {\r\n    const attrName = toCSSKebabCase(propertyName);\r\n    customForIn(propertyKeyframes, (value, key) => {\r\n      if (!keyframes[key]) {\r\n        keyframes[key] = {};\r\n      }\r\n      const v = treatPropertyCurrentValue(\r\n        getRealPropertyValue(value, target, index, length),\r\n        attrName,\r\n        'attr',\r\n        target\r\n      );\r\n      keyframes[key][propertyName] = v;\r\n    });\r\n  });\r\n\r\n  const propertiesKeyframes: Record<string, Record<string, string>> = {};\r\n\r\n  customForIn(keyframes, (keyframe, key) => {\r\n    const properties = keyframe;\r\n\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (!propertiesKeyframes[propertyName]) {\r\n        propertiesKeyframes[propertyName] = {};\r\n      }\r\n      propertiesKeyframes[propertyName][key] = propertyValue;\r\n    });\r\n  });\r\n\r\n  return getPropertyObjectToAnimate(\r\n    propertiesKeyframes,\r\n    target,\r\n    index,\r\n    length,\r\n    'attr'\r\n  );\r\n}\r\n","import { WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS } from '../sauce/constants';\r\nimport { getCustomProperty } from '../sauce/custom-properties-for-animations';\r\nimport isEmptyObject from '../utilities/is-empty-object';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport getLinkedCSSProperties from '../utilities-style/get-linked-css-properties';\r\nimport getVendorCSSProperty from '../utilities-style/get-vendor-css-property';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport { getAttr } from '../utilities/dom-attributes';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport ordernateByGrowingValues from '../utilities/ordernate-by-growing-values';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport PropertiesToAnimateObjectKeyframes from '../contracts/properties-to-animate-object-keyframes';\r\nimport TargetsAnimationProperty from '../contracts/targets-animation-property';\r\nimport getCSSPropertiesToBeAnimated from './get-css-properties-to-be-animated';\r\nimport getDirectPropertiesToBeAnimated from './get-direct-properties-to-be-animated';\r\nimport getTransformPropertiesToBeAnimated from './get-transform-properties-to-be-animated';\r\nimport TypeOfPropertiesToAnimate from '../contracts/type-of-properties-to-animate';\r\nimport getAttrPropertiesToBeAnimated from './get-attr-properties-to-be-animated';\r\nimport isDOMElement from '../utilities/is-dom-element';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define  */\r\n\r\ntype PropertyObject = AnimationAuxiliaryObject['propertiesToBeAnimate'][number];\r\n\r\ntype Properties = Record<string, Record<string, ValuesToAnimateProperty>>;\r\n\r\nfunction revealSpecialProperties(\r\n  propertyName: string,\r\n  propertyValue: unknown,\r\n  target: object,\r\n  index: number\r\n): Record<string, unknown> {\r\n  const pName = propertyName;\r\n  const specialPropertyCallback = getCustomProperty(pName, 'special');\r\n\r\n  const propertiesFound: Record<string, unknown> = {};\r\n  if (specialPropertyCallback) {\r\n    const o = specialPropertyCallback(propertyValue as never, target, index);\r\n    customForIn(o, (value, name) => {\r\n      if (getCustomProperty(name, 'special')) {\r\n        Object.assign(\r\n          propertiesFound,\r\n          revealSpecialProperties(name, value, target, index)\r\n        );\r\n      } else {\r\n        propertiesFound[name] = value;\r\n      }\r\n    });\r\n  }\r\n\r\n  return propertiesFound;\r\n}\r\n\r\nfunction treatEachTypeProperties(\r\n  properties: Properties,\r\n  type: TypeOfPropertiesToAnimate,\r\n  target: object,\r\n  index: number,\r\n  length: number\r\n) {\r\n  if (!isEmptyObject(properties)) {\r\n    let fn: Function;\r\n    switch (type) {\r\n      case 'attr':\r\n        fn = getAttrPropertiesToBeAnimated;\r\n        break;\r\n      case 'transform':\r\n        fn = getTransformPropertiesToBeAnimated;\r\n        break;\r\n      case 'direct':\r\n        fn = getDirectPropertiesToBeAnimated;\r\n        break;\r\n      default:\r\n        fn = getCSSPropertiesToBeAnimated;\r\n        break;\r\n    }\r\n    return fn(\r\n      properties,\r\n      target,\r\n      index,\r\n      length\r\n    ) as AnimationAuxiliaryObject['propertiesToBeAnimate'][number][];\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction organizePropertiesToBeAnimate(\r\n  properties: PropertiesToAnimateObjectKeyframes,\r\n  target: object,\r\n  index: number,\r\n  originalArrayLength: number\r\n) {\r\n  const DOMElement = isDOMElement(target);\r\n  const CSSProperties: Properties = {};\r\n  const attrProperties: Properties = {};\r\n  const transformProperties: Properties = {};\r\n  const directProperties: Properties = {};\r\n  const observedProperties: PropertyObject[] = [];\r\n  customForIn(properties, (propertyValue, propertyName) => {\r\n    const keyframes = { ...propertyValue };\r\n    const isCSSProperty = DOMElement\r\n      ? getLinkedCSSProperties(getVendorCSSProperty(propertyName as string))[0]\r\n      : false;\r\n\r\n    if (getCustomProperty(propertyName, 'observed')) {\r\n      if (keyframes[0] === '?') {\r\n        keyframes[0] = undefined as never;\r\n      }\r\n      if (keyframes[100] === '?') {\r\n        keyframes[100] = keyframes[0];\r\n      }\r\n\r\n      observedProperties.push({\r\n        keyframes,\r\n        keyframesKeys: ordernateByGrowingValues(Object.keys(keyframes)),\r\n        target,\r\n        index,\r\n        propertyName: propertyName as string,\r\n        type: 'observed',\r\n        originalArrayLength,\r\n      });\r\n    } else if (\r\n      hasOwnProperty(WIDE_SMILE_CSS_TRANSFORM_FUNCTIONS, propertyName)\r\n    ) {\r\n      transformProperties[propertyName] = keyframes;\r\n    } else if (\r\n      DOMElement &&\r\n      (getAttr(target as HTMLElement, propertyName) !== null || !isCSSProperty)\r\n    ) {\r\n      attrProperties[propertyName] = keyframes;\r\n    } else if (isCSSProperty) {\r\n      CSSProperties[getVendorCSSProperty(propertyName as string)] = keyframes;\r\n    } else if (propertyName in target) {\r\n      directProperties[propertyName] = keyframes;\r\n    }\r\n  });\r\n\r\n  const objectsWithProperties: [Properties, TypeOfPropertiesToAnimate][] = [\r\n    [CSSProperties, 'css'],\r\n    [attrProperties, 'attr'],\r\n    [transformProperties, 'transform'],\r\n    [directProperties, 'direct'],\r\n  ];\r\n  return { observedProperties, otherProperties: objectsWithProperties };\r\n}\r\nexport default function getPropertiesToBeAnimated(\r\n  targetObject: TargetsAnimationProperty[number],\r\n  props: PropertiesToAnimateObjectKeyframes,\r\n  specials: PropertiesToAnimateObjectKeyframes\r\n): AnimationAuxiliaryObject['propertiesToBeAnimate'] {\r\n  let propertiesToBeAnimate: PropertyObject[] = [];\r\n  const properties = props;\r\n\r\n  const { target, index, originalArrayLength } = targetObject;\r\n\r\n  customForIn(specials, (o, propertyName) => {\r\n    customForIn(o, (value, key) => {\r\n      customForIn(\r\n        revealSpecialProperties(propertyName as string, value, target, index),\r\n        (v, n) => {\r\n          const newPropertyName = n as never;\r\n          if (!properties[newPropertyName]) {\r\n            properties[newPropertyName] = {} as never;\r\n          }\r\n          if (value !== '?') {\r\n            properties[newPropertyName][key] = v as never;\r\n          } else {\r\n            properties[newPropertyName][key] = value as never;\r\n          }\r\n        }\r\n      );\r\n    });\r\n  });\r\n  const organizedProperties = organizePropertiesToBeAnimate(\r\n    properties,\r\n    target,\r\n    index,\r\n    originalArrayLength\r\n  );\r\n\r\n  propertiesToBeAnimate = propertiesToBeAnimate.concat(\r\n    organizedProperties.observedProperties\r\n  );\r\n\r\n  organizedProperties.otherProperties.forEach((o) => {\r\n    const p = treatEachTypeProperties(\r\n      o[0],\r\n      o[1],\r\n      target as HTMLElement,\r\n      index,\r\n      originalArrayLength\r\n    );\r\n    if (p) {\r\n      propertiesToBeAnimate = propertiesToBeAnimate.concat(p);\r\n    }\r\n  });\r\n  return propertiesToBeAnimate;\r\n}\r\n","import { hasAnimationInTheStack } from '../animation-engine/mount-animations-stack';\r\nimport {\r\n  ANIMATION_STATES,\r\n  TIME_OUT_FOR_SMART_LOADING,\r\n} from '../sauce/constants';\r\nimport { getCustomProperty } from '../sauce/custom-properties-for-animations';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport getTimeNow from '../utilities/get-time-now';\r\nimport PropertiesToAnimateObjectKeyframes from '../contracts/properties-to-animate-object-keyframes';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport getPropertiesToBeAnimated from './get-properties-to-be-animated';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define  */\r\n\r\ntype PropertyObject = AnimationAuxiliaryObject['propertiesToBeAnimate'][number];\r\n\r\nconst ANIMATIONS_FOR_LOAD: Parameters<typeof loadPropertiesToAnimate>[] = [];\r\nlet IS_BUSY_LOADER = false;\r\nconst loadNextAnimation = (a?: typeof ANIMATIONS_FOR_LOAD[number]) => {\r\n  if (a) {\r\n    loadPropertiesToAnimate(...a);\r\n  }\r\n};\r\nexport default function loadPropertiesToAnimate(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  props: PropertiesToAnimateObjectKeyframes,\r\n  callbackLoaded: (\r\n    result: boolean,\r\n    propertiesToAnimate: PropertyObject[]\r\n  ) => void\r\n): void {\r\n  const { animation } = animationAuxiliaryObject;\r\n  const targets = animation.targets;\r\n  if (animation.creator.global.asyncLoading) {\r\n    IS_BUSY_LOADER = false;\r\n  }\r\n\r\n  /**\r\n   * There's an animation currently loading.\r\n   */\r\n  if (IS_BUSY_LOADER && !animation.skip) {\r\n    ANIMATIONS_FOR_LOAD.push([animationAuxiliaryObject, props, callbackLoaded]);\r\n\r\n    return;\r\n  }\r\n\r\n  IS_BUSY_LOADER = true;\r\n\r\n  const length = targets.length;\r\n  const properties = { ...props };\r\n  const specials = (() => {\r\n    const o: typeof properties = {};\r\n    customForIn(properties, (propertyValue, propertyName) => {\r\n      if (getCustomProperty(propertyName as string, 'special')) {\r\n        o[propertyName] = propertyValue as never;\r\n      }\r\n    });\r\n    return o;\r\n  })();\r\n\r\n  let propertiesToBeAnimate: PropertyObject[] = [];\r\n\r\n  let count = 0;\r\n  let startTime = getTimeNow();\r\n\r\n  let releaseTheExecutionStack = false;\r\n\r\n  (function repeat() {\r\n    propertiesToBeAnimate = propertiesToBeAnimate.concat(\r\n      getPropertiesToBeAnimated(targets[count], properties, specials)\r\n    );\r\n    const timePassed = getTimeNow() - startTime;\r\n\r\n    count += 1;\r\n\r\n    switch (animation.state) {\r\n      case ANIMATION_STATES[2]:\r\n      case ANIMATION_STATES[3]:\r\n      case ANIMATION_STATES[4]:\r\n      case ANIMATION_STATES[7]:\r\n        IS_BUSY_LOADER = false;\r\n        callbackLoaded(false, propertiesToBeAnimate);\r\n        loadNextAnimation(ANIMATIONS_FOR_LOAD.shift());\r\n        return;\r\n      default:\r\n        if (count < length) {\r\n          if (\r\n            animation.skip ||\r\n            (!releaseTheExecutionStack && !hasAnimationInTheStack()) ||\r\n            timePassed < TIME_OUT_FOR_SMART_LOADING\r\n          ) {\r\n            releaseTheExecutionStack = true;\r\n            repeat();\r\n          } else {\r\n            releaseTheExecutionStack = false;\r\n            startTime = getTimeNow();\r\n            const setTimeoutId = setTimeout(() => {\r\n              clearTimeout(setTimeoutId);\r\n              repeat();\r\n            }, 0);\r\n          }\r\n        } else {\r\n          IS_BUSY_LOADER = false;\r\n          callbackLoaded(true, propertiesToBeAnimate);\r\n          loadNextAnimation(ANIMATIONS_FOR_LOAD.shift());\r\n        }\r\n        break;\r\n    }\r\n  })();\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\r\nimport { customForIn } from '../utilities/index';\r\n\r\nfunction toArray<Type extends object>(o: unknown): Type | false {\r\n  if (!o || typeof o !== 'object') {\r\n    return false;\r\n  }\r\n  const c = Array.isArray(o) ? o : [].slice.call(o);\r\n  return c && c.length > 0 ? (c as Type) : false;\r\n}\r\n\r\nexport function normalizePastedProperties<Type extends object>(\r\n  obj: Type,\r\n  loopObject?: boolean\r\n): Type {\r\n  const o = obj;\r\n\r\n  customForIn(obj, (propertyValue, propertyName) => {\r\n    const splitedPropertyName = (propertyName as string).split('_');\r\n    if (splitedPropertyName.length > 1) {\r\n      splitedPropertyName.forEach((pName) => {\r\n        const n = pName as never;\r\n        if (pName) {\r\n          if (o[n] && typeof propertyValue === 'object') {\r\n            const v = toArray(propertyValue);\r\n            if (v) {\r\n              o[n] = (o[n] as unknown[]).concat(v) as never;\r\n            } else {\r\n              Object.assign(o[n], propertyValue);\r\n            }\r\n          } else {\r\n            o[n] = propertyValue as never;\r\n          }\r\n        }\r\n      });\r\n      delete o[propertyName];\r\n    }\r\n    if (\r\n      loopObject &&\r\n      propertyValue &&\r\n      typeof propertyValue === 'object' &&\r\n      !toArray(propertyValue)\r\n    ) {\r\n      normalizePastedProperties(propertyValue as never);\r\n    }\r\n  });\r\n  return o;\r\n}\r\n/**\r\n * Normalize object properties that have been pasted to be able to share the same value.\r\n * @example\r\n * input = {\r\n *  firstname_lastname: 'Neves'\r\n * }\r\n *\r\n * output = {\r\n *  firstname: 'Neves'\r\n *  lastname: 'Neves'\r\n * }\r\n *\r\n */\r\nexport default function normalizePastedAnimationProperties<Type extends object>(\r\n  animation: Type\r\n): Type {\r\n  const aInstance = (normalizePastedProperties(\r\n    animation\r\n  ) as unknown) as AnimationInstance;\r\n\r\n  return (aInstance as unknown) as Type;\r\n}\r\n","import Keyframes from '../contracts/key-frames';\r\nimport { PerformerFnProperties } from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport PropertiesToAnimateObjectKeyframes from '../contracts/properties-to-animate-object-keyframes';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport hasOwnProperty from '../utilities/has-own-property';\r\nimport normalizePastedAnimationProperties from './normalize-animation-object-properties';\r\n\r\nfunction flattenOffsetProperty(\r\n  propertyName: 'offset' | '_',\r\n  keyframe: PropertiesToAnimateObject\r\n) {\r\n  const newKeyframes: Keyframes = [];\r\n  (keyframe[propertyName] as number[]).forEach((value) => {\r\n    const newKeyframe = (() => {\r\n      const k: typeof keyframe = {};\r\n      customForIn(keyframe, (propertyValue, name) => {\r\n        if (name !== propertyName) {\r\n          k[name] = propertyValue as never;\r\n        }\r\n      });\r\n      return k;\r\n    })();\r\n    newKeyframe[propertyName] = value as number;\r\n    newKeyframes.push(newKeyframe);\r\n  });\r\n  return newKeyframes;\r\n}\r\nfunction offsetToPercent(value: number) {\r\n  return Math.max(Math.min((100 / 1) * value, 100), 0);\r\n}\r\nfunction arrayKeyframesToObject(keyframes: Keyframes) {\r\n  const keyframesObject: Record<string, Keyframes[number]> = {};\r\n  const keyframesArray = keyframes.slice();\r\n  let leftovers = 100;\r\n  let lastKey = 0;\r\n  const keyframesArrayLength = keyframes.length;\r\n  let leftoversIndexs = keyframesArrayLength;\r\n  const newKeyframesArray: typeof keyframesArray = [];\r\n\r\n  keyframesArray.slice().forEach((keyframe, index) => {\r\n    if (hasOwnProperty(keyframe, 'offset') && Array.isArray(keyframe.offset)) {\r\n      keyframesArray.splice(index, 1);\r\n      newKeyframesArray.push(...flattenOffsetProperty('offset', keyframe));\r\n    } else if (hasOwnProperty(keyframe, '_') && Array.isArray(keyframe._)) {\r\n      keyframesArray.splice(index, 1);\r\n      newKeyframesArray.push(...flattenOffsetProperty('_', keyframe));\r\n    } else {\r\n      newKeyframesArray.push(keyframe);\r\n    }\r\n  });\r\n\r\n  newKeyframesArray.forEach((keyframe, index) => {\r\n    const kf = keyframe;\r\n    if (hasOwnProperty(keyframe, 'offset')) {\r\n      lastKey = offsetToPercent(kf.offset as number);\r\n      delete kf.offset;\r\n    } else if (hasOwnProperty(keyframe, '_')) {\r\n      lastKey = Math.max(kf._ as number, 0);\r\n      delete kf._;\r\n    } else {\r\n      lastKey = index > 0 ? leftovers / leftoversIndexs + lastKey : 0;\r\n    }\r\n\r\n    if (hasOwnProperty(keyframesObject, lastKey)) {\r\n      keyframesObject[lastKey] = {\r\n        ...keyframesObject[lastKey],\r\n        ...(kf as Record<string, string>),\r\n      };\r\n    } else {\r\n      keyframesObject[lastKey] = kf as never;\r\n    }\r\n\r\n    leftovers = 100 - lastKey;\r\n\r\n    leftoversIndexs -= 1;\r\n\r\n    return true;\r\n  });\r\n\r\n  return keyframesObject;\r\n}\r\nexport default function flattenKeyframes(\r\n  keyframes: Keyframes | PropertiesToAnimateObject,\r\n  orderOfThePropertiesUsed?: PerformerFnProperties['orderOfThePropertiesUsed']\r\n): {\r\n  keyframes: Record<string, Record<string, ValuesToAnimateProperty>>;\r\n  orderOfThePropertiesUsed: string[];\r\n} {\r\n  let kframes = keyframes;\r\n  let newKeyframes: Record<string, Keyframes[number]> = {};\r\n  const propertiesToAnimate: PropertiesToAnimateObjectKeyframes = {};\r\n  const propertiesUsed = orderOfThePropertiesUsed\r\n    ? orderOfThePropertiesUsed.slice()\r\n    : [];\r\n  const propertiesUsedForThis: string[] = [];\r\n\r\n  if (Array.isArray(kframes)) {\r\n    newKeyframes = arrayKeyframesToObject(kframes);\r\n  } else {\r\n    kframes = { ...keyframes } as PropertiesToAnimateObject;\r\n    customForIn(kframes, (propertyValue, propertyName) => {\r\n      if (Array.isArray(propertyValue)) {\r\n        propertiesToAnimate[propertyName] = arrayKeyframesToObject(\r\n          (propertyValue as unknown) as Keyframes\r\n        ) as never;\r\n        delete kframes[propertyName as never];\r\n      }\r\n    });\r\n\r\n    newKeyframes[0] = (() => {\r\n      const keyframe: PropertiesToAnimateObject = {};\r\n      customForIn(kframes, (_propertyValue, propertyName) => {\r\n        // Value to be set yet.\r\n        keyframe[propertyName] = '?';\r\n      });\r\n      return keyframe;\r\n    })();\r\n    newKeyframes[100] = kframes;\r\n  }\r\n\r\n  customForIn(newKeyframes, (keyframe, key) => {\r\n    newKeyframes[key] = normalizePastedAnimationProperties(keyframe);\r\n  });\r\n\r\n  customForIn(propertiesToAnimate, (propertyValue, propertyName) => {\r\n    let n = propertyName;\r\n\r\n    if (!Number.isNaN(parseFloat(n))) {\r\n      n = propertiesUsed[Number(n)];\r\n      propertiesToAnimate[n] = propertyValue;\r\n      delete propertiesToAnimate[propertyName];\r\n    }\r\n    if (propertiesUsed.indexOf(n) === -1) {\r\n      propertiesUsed.push(n);\r\n    }\r\n  });\r\n\r\n  customForIn(newKeyframes, (keyframe) => {\r\n    customForIn(keyframe, (propertyValue, propertyName) => {\r\n      const f = keyframe;\r\n      let n = propertyName as string;\r\n\r\n      if (!Number.isNaN(parseFloat(n))) {\r\n        n = propertiesUsed[Number(n)];\r\n\r\n        /**\r\n         * Replaces indexes by the property name.\r\n         */\r\n        f[n as never] = propertyValue as never;\r\n\r\n        delete f[propertyName];\r\n      }\r\n      if (propertiesUsed.indexOf(n) === -1) {\r\n        propertiesUsed.push(n);\r\n      }\r\n      if (propertiesUsedForThis.indexOf(n) === -1) {\r\n        propertiesUsedForThis.push(n);\r\n      }\r\n    });\r\n  });\r\n\r\n  customForIn(newKeyframes, (keyframe, key) => {\r\n    propertiesUsedForThis.forEach((propertyName) => {\r\n      const v = keyframe[propertyName as never];\r\n\r\n      if (!propertiesToAnimate[propertyName]) {\r\n        propertiesToAnimate[propertyName] = {};\r\n      }\r\n      if (key !== '0' && key !== '100') {\r\n        if (keyframe[propertyName as never]) {\r\n          propertiesToAnimate[propertyName][key] = v;\r\n        }\r\n      } else {\r\n        propertiesToAnimate[propertyName][key] =\r\n          typeof v === 'undefined' ? '?' : v;\r\n      }\r\n    });\r\n  });\r\n  return {\r\n    keyframes: propertiesToAnimate,\r\n    orderOfThePropertiesUsed: propertiesUsed,\r\n  };\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport getNewAnimationProgress from '../animation-engine/get-new-animation-progress';\r\nimport {\r\n  addAnimationAuxiliaryObject,\r\n  getAnimationAuxiliaryObject,\r\n} from './crud-animation-objects';\r\nimport CreateAnimationAuxiliaryObject from './create-animation-auxiliary-object';\r\nimport {\r\n  customForIn,\r\n  getTimeNow,\r\n  ordernateByGrowingValues,\r\n} from '../utilities/index';\r\nimport {\r\n  propagateAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport startAnimationExecutionCycle from '../animation-engine/start-animation-execution-cycle';\r\nimport loadPropertiesToAnimate from './load-properties-to-animate';\r\nimport flattenKeyframes from './flatten-keyframes';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport resetAnimationProgress from '../animation-engine/reset-animation-progress';\r\n\r\nfunction getKeyframesKeys(\r\n  keyframes: ReturnType<typeof flattenKeyframes>['keyframes']\r\n) {\r\n  const keys: string[] = [];\r\n  customForIn(keyframes, (propertyKeyframes) => {\r\n    customForIn(propertyKeyframes, (_v, key) => {\r\n      if (keys.indexOf(key) === -1) {\r\n        keys.push(key);\r\n      }\r\n    });\r\n  });\r\n\r\n  return ordernateByGrowingValues(keys);\r\n}\r\nfunction forwardAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject,\r\n  animationArrivalTime: number,\r\n  callbackLoaded: (animationAuxiliaryObjects: AnimationAuxiliaryObject) => void\r\n) {\r\n  const aAuxiliaryObject = animationAuxiliaryObject;\r\n  const { animation } = aAuxiliaryObject;\r\n\r\n  const fKeyframes = flattenKeyframes(\r\n    animation.keyframes,\r\n    animation.performer.$hidden.orderOfThePropertiesUsed\r\n  );\r\n\r\n  animation.performer.$hidden.orderOfThePropertiesUsed =\r\n    fKeyframes.orderOfThePropertiesUsed;\r\n  const keyframes = fKeyframes.keyframes;\r\n\r\n  aAuxiliaryObject.keyframesKeys = getKeyframesKeys(keyframes);\r\n  const animationProgressObject = getNewAnimationProgress(aAuxiliaryObject);\r\n\r\n  aAuxiliaryObject.lastStartProgress = animationProgressObject.progress;\r\n  aAuxiliaryObject.countDriveLoops = animationProgressObject.countDriveLoops;\r\n  animation.progressValue = animationProgressObject.progress;\r\n  animation.max = animationProgressObject.maxProgress;\r\n\r\n  loadPropertiesToAnimate(\r\n    aAuxiliaryObject,\r\n    keyframes,\r\n    (result, propertiesToAnimate) => {\r\n      const currentTime = getTimeNow();\r\n      const animationLoadingTime = currentTime - animationArrivalTime;\r\n\r\n      aAuxiliaryObject.dataLoadingState = result ? 'load' : 'stoped';\r\n      aAuxiliaryObject.animationLoadingTime = animationLoadingTime;\r\n      aAuxiliaryObject.propertiesToBeAnimate = propertiesToAnimate;\r\n\r\n      callbackLoaded(aAuxiliaryObject);\r\n\r\n      propagateAnimationEventListener(\r\n        LISTENERS_NAMES[3],\r\n        aAuxiliaryObject.animation\r\n      );\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Creates an object with the properties of the user's animation instance, and adds control-related properties and the execution of the animation, thus maintaining hidden complexity.\r\n */\r\nexport default function LoadAnimation(\r\n  animation: AnimationInstance,\r\n  callbackLoaded: (animationAuxiliaryObjects: AnimationAuxiliaryObject) => void\r\n): void {\r\n  const hasAnimationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n\r\n  if (!hasAnimationAuxiliaryObject) {\r\n    propagateAnimationEventListener(LISTENERS_NAMES[6], animation);\r\n  }\r\n\r\n  if (animation.state !== ANIMATION_STATES[0] || hasAnimationAuxiliaryObject) {\r\n    if (hasAnimationAuxiliaryObject) {\r\n      if (hasAnimationAuxiliaryObject.dataLoadingState === 'loading') {\r\n        const setTimeoutId = setTimeout(() => {\r\n          clearTimeout(setTimeoutId);\r\n\r\n          if (animation.state !== ANIMATION_STATES[1]) {\r\n            LoadAnimation(animation, callbackLoaded);\r\n          }\r\n        });\r\n      } else {\r\n        startAnimationExecutionCycle(\r\n          resetAnimationProgress(hasAnimationAuxiliaryObject),\r\n          true\r\n        );\r\n      }\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  const currentTime = getTimeNow();\r\n\r\n  const animationAuxiliaryObject = CreateAnimationAuxiliaryObject(animation);\r\n\r\n  addAnimationAuxiliaryObject(animationAuxiliaryObject);\r\n\r\n  Object.assign(animationAuxiliaryObject.animation, {\r\n    state: ANIMATION_STATES[6],\r\n    delay: animation.delay,\r\n  });\r\n\r\n  forwardAnimation(animationAuxiliaryObject, currentTime, callbackLoaded);\r\n}\r\n\r\nexport function startAnimationIfItIsLoaded(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): void {\r\n  if (\r\n    animationAuxiliaryObject.dataLoadingState === 'load' &&\r\n    animationAuxiliaryObject.animation.state !== ANIMATION_STATES[3]\r\n  ) {\r\n    const a = animationAuxiliaryObject;\r\n    a.animation.state = ANIMATION_STATES[1];\r\n\r\n    startAnimationExecutionCycle(animationAuxiliaryObject);\r\n  }\r\n}\r\n","import {\r\n  AnimationInstancePropertiesAllWritable,\r\n  UserAnimationObjectInternal,\r\n} from '../contracts/animation-inter';\r\n\r\n/**\r\n * A simple counter that helps to mark animation objects through the `animationId` property to avoid collisions and also indicates the skip of the animation instance's style insertion.\r\n */\r\nlet ANIMATIONS_ID = -1;\r\n\r\nexport default function AnimationConstructor(\r\n  animation:\r\n    | AnimationInstancePropertiesAllWritable\r\n    | UserAnimationObjectInternal,\r\n  creator: UserAnimationObjectInternal['creator']\r\n): AnimationInstancePropertiesAllWritable {\r\n  const D_A_P = creator.dfs;\r\n  ANIMATIONS_ID += 1;\r\n  return {\r\n    ...D_A_P,\r\n    ...animation,\r\n    ...{\r\n      creator,\r\n\r\n      targets: animation.targets,\r\n\r\n      loop: animation.loop,\r\n\r\n      count: 0,\r\n\r\n      animationId: ANIMATIONS_ID,\r\n    },\r\n  } as AnimationInstancePropertiesAllWritable;\r\n}\r\n","import progressAnimationGoTo from '../animation-actions/progress-animation-go-to';\r\nimport {\r\n  addAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n  removeAnimationEventListener,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { MAX_KEYFRAME } from './constants';\r\n\r\nexport default function iterationControlMethods(\r\n  realDuration: number,\r\n  newDuration: number | undefined,\r\n  part: number,\r\n  animation: AnimationInstance,\r\n  applyDelay?: boolean\r\n): void {\r\n  const aInstance = animation;\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    aInstance.animationId\r\n  );\r\n\r\n  const toProgress = (MAX_KEYFRAME / 1) * Math.min(Math.max(part, 0), 1);\r\n\r\n  if (animationAuxiliaryObject) {\r\n    let dur = newDuration as number;\r\n    const checkDur = typeof dur === 'number';\r\n    const offset = Math.abs(aInstance.progressValue - toProgress);\r\n\r\n    if (checkDur && dur > 0) {\r\n      const c = 100 / offset;\r\n      dur *= c + (c / 100) * (100 / (100 - offset) - 1);\r\n    }\r\n\r\n    addAnimationEventListener(\r\n      LISTENERS_NAMES[7],\r\n      function a(this: AnimationInstance) {\r\n        if (dur === animation.dur) {\r\n          aInstance.dur = realDuration;\r\n        }\r\n        removeAnimationEventListener(LISTENERS_NAMES[7], a, animation);\r\n      },\r\n      animation\r\n    );\r\n\r\n    if (checkDur && dur <= 0) {\r\n      aInstance.jump(toProgress);\r\n    } else {\r\n      if (checkDur) {\r\n        aInstance.dur = dur;\r\n      }\r\n      progressAnimationGoTo(aInstance.animationId, toProgress, applyDelay);\r\n    }\r\n  }\r\n}\r\n","import { removeAnimationFromStack } from '../animation-engine/mount-animations-stack';\r\nimport resetAnimationTimeProperties from '../animation-engine/reset-animation-time-properties';\r\nimport startAnimationExecutionCycle from '../animation-engine/start-animation-execution-cycle';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\n\r\nexport default function progressAnimationGoTo(\r\n  animationId: number,\r\n  newProgress: number,\r\n  applyDelay?: boolean\r\n): void {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(animationId);\r\n  if (animationAuxiliaryObject) {\r\n    const animation = animationAuxiliaryObject.animation;\r\n\r\n    removeAnimationFromStack(animationAuxiliaryObject.animationId);\r\n\r\n    animationAuxiliaryObject.lastStartProgress = animation.progressValue;\r\n\r\n    animation.max = newProgress;\r\n\r\n    if (animation.loop === animation.count) {\r\n      animation.count -= 1;\r\n    }\r\n    if (applyDelay) {\r\n      startAnimationExecutionCycle(\r\n        resetAnimationTimeProperties(animationAuxiliaryObject)\r\n      );\r\n    } else {\r\n      startAnimationExecutionCycle(\r\n        resetAnimationTimeProperties(animationAuxiliaryObject),\r\n        true\r\n      );\r\n    }\r\n  }\r\n}\r\n","import AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport { INTERCALATION_TIME, MAX_KEYFRAME } from '../sauce/constants';\r\nimport { toMs, getTimeNow } from '../utilities/index';\r\nimport { propertiesForAnimationAuxiliaryObject } from '../animation-mount/create-animation-auxiliary-object';\r\nimport getNewAnimationProgress from './get-new-animation-progress';\r\n\r\n/**\r\n * Updates the animation with the new values of the properties.\r\n */\r\nexport default function updateAnimation(\r\n  animationAuxiliaryObject: AnimationAuxiliaryObject\r\n): AnimationAuxiliaryObject {\r\n  const { animation } = animationAuxiliaryObject;\r\n\r\n  let progress = animation.progressValue;\r\n  progress = Math.max(progress, 0);\r\n  progress = Math.min(progress, MAX_KEYFRAME);\r\n\r\n  const timeRunningIteration =\r\n    (Math.max(toMs(animation.dur), 1) / 100) * progress;\r\n\r\n  Object.assign(animationAuxiliaryObject, {\r\n    startTimeOfTheIteration: getTimeNow() - timeRunningIteration,\r\n\r\n    timeRunningIteration,\r\n\r\n    iterationInterlacations: {\r\n      timeConsumed: timeRunningIteration,\r\n\r\n      completed: Math.floor(timeRunningIteration / INTERCALATION_TIME),\r\n    },\r\n  });\r\n\r\n  const animationProgressObject = getNewAnimationProgress(\r\n    animationAuxiliaryObject\r\n  );\r\n\r\n  Object.assign(animationAuxiliaryObject, {\r\n    lastStartProgress: progress,\r\n    countDriveLoops: animationAuxiliaryObject.countDriveLoops - 1,\r\n  });\r\n\r\n  Object.assign(animation, {\r\n    progress,\r\n    max: animationProgressObject.maxProgress,\r\n  });\r\n\r\n  Object.assign(\r\n    animationAuxiliaryObject,\r\n    propertiesForAnimationAuxiliaryObject(animation)\r\n  );\r\n\r\n  return animationAuxiliaryObject;\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport { removeAllAnimationEventListeners } from '../animation-listeners/animations-listeners-handlers';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport {\r\n  getAnimationAuxiliaryObject,\r\n  removeAnimationAuxiliaryObject,\r\n} from '../animation-mount/crud-animation-objects';\r\nimport removeAnimationStyle from '../animation-engine/remove-animation-style';\r\nimport removeReferenceInCreatorToPerformer from '../sauce/remove-reference-in-creator-to-performer';\r\nimport { recyclePropertyObjectsToAnimate } from '../animation-mount/property-object-to-animate';\r\n\r\nfunction removeInstance<T>(array: T, animation: AnimationInstance) {\r\n  return (((array as unknown) as unknown[]).filter(\r\n    (i) => i !== animation\r\n  ) as unknown) as T;\r\n}\r\n/**\r\n * Destroys an animation.\r\n */\r\nexport default function destroyAnimation(a: AnimationInstance): void {\r\n  const animation = a;\r\n  const performerProperties = animation.performer.$hidden;\r\n  const cycleOptions = performerProperties.cycleOptions;\r\n\r\n  if (!animation.state) return;\r\n\r\n  animation.state = ANIMATION_STATES[4];\r\n\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n\r\n  if (animationAuxiliaryObject) {\r\n    removeAnimationStyle(animationAuxiliaryObject);\r\n    removeAnimationAuxiliaryObject(animation.animationId);\r\n\r\n    recyclePropertyObjectsToAnimate(\r\n      animationAuxiliaryObject.propertiesToBeAnimate\r\n    );\r\n  }\r\n  performerProperties.animationInstances = removeInstance(\r\n    performerProperties.animationInstances,\r\n    animation\r\n  );\r\n  performerProperties.independentAnimations = removeInstance(\r\n    performerProperties.independentAnimations,\r\n    animation\r\n  );\r\n  if (cycleOptions) {\r\n    if (cycleOptions.animationInstancesInCycle) {\r\n      cycleOptions.animationInstancesInCycle = removeInstance(\r\n        cycleOptions.animationInstancesInCycle,\r\n        animation\r\n      );\r\n    }\r\n\r\n    if (cycleOptions.sequence) {\r\n      const sequence = cycleOptions.sequence;\r\n      const l = sequence.length;\r\n\r\n      for (let index = 0; index < l; index += 1) {\r\n        sequence[index] = removeInstance(sequence[index], animation);\r\n      }\r\n\r\n      cycleOptions.sequence = sequence.filter((i) => i.length > 0);\r\n    }\r\n  }\r\n\r\n  removeReferenceInCreatorToPerformer(animation.performer);\r\n\r\n  removeAllAnimationEventListeners(animation.animationId);\r\n}\r\n","import { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport getElementsInTheDOM from '../animation-mount/get-elements-in-the-dom';\r\nimport { recyclePropertyObjectToAnimate } from '../animation-mount/property-object-to-animate';\r\nimport {\r\n  AnimationInstance,\r\n  UserAnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport { toCamelCase } from '../utilities/handle-string';\r\n\r\nfunction remove(item: string | number | object, animation: AnimationInstance) {\r\n  const prop = typeof item === 'object' ? 'target' : 'propertyName';\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n\r\n  if (animationAuxiliaryObject) {\r\n    animationAuxiliaryObject.propertiesToBeAnimate = animationAuxiliaryObject.propertiesToBeAnimate.filter(\r\n      (propertyObject) => {\r\n        const check = propertyObject[prop] !== item;\r\n        if (!check) {\r\n          recyclePropertyObjectToAnimate(propertyObject);\r\n        }\r\n        return check;\r\n      }\r\n    );\r\n  }\r\n}\r\nexport function removePropertyFromAnimation(\r\n  names: (string | number)[],\r\n  animation: AnimationInstance\r\n): void {\r\n  names.forEach((name) => {\r\n    const propertyName = toCamelCase(name.toString());\r\n    remove(propertyName, animation);\r\n  });\r\n}\r\n\r\nexport function removeTargetFromAnimation(\r\n  targets: UserAnimationOptions['targets'],\r\n  animation: AnimationInstance\r\n): void {\r\n  getElementsInTheDOM(targets).forEach((o) => {\r\n    remove(o, animation);\r\n  });\r\n}\r\n","import { ANIMATION_STATES, MAX_KEYFRAME } from './constants';\nimport LoadAnimation, {\n  startAnimationIfItIsLoaded,\n} from '../animation-mount/load-animation';\nimport normalizePastedAnimationProperties from '../animation-mount/normalize-animation-object-properties';\nimport { removeAnimationFromStack } from '../animation-engine/mount-animations-stack';\nimport AnimationConstructor from './animation-constructor';\nimport {\n  addAnimationEventListener,\n  propagateAnimationEventListener,\n  LISTENERS_NAMES,\n  removeAnimationEventListener,\n} from '../animation-listeners/animations-listeners-handlers';\nimport iterationControlMethods from './iteration-control-methods';\nimport multiplyValue from '../utilities/multiply-value';\nimport getNewAnimationProgress from '../animation-engine/get-new-animation-progress';\nimport resumeAnimation from '../animation-actions/resume-animation';\nimport restartAnimation from '../animation-actions/restart-animation';\nimport updateAnimation from '../animation-engine/update-animation';\nimport destroyAnimation from '../animation-actions/destroy-animation';\nimport {\n  AnimationInstance,\n  AnimationInstancePropertiesAllWritable,\n  AnimationOptions,\n  PropertiesForTheCreationOfAnimation,\n  UserAnimationObjectInternal,\n} from '../contracts/animation-inter';\nimport { ListenersEventsName } from '../contracts/listeners-events-name';\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\nimport removeAnimationStyle from '../animation-engine/remove-animation-style';\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\nimport PerformerFn from '../contracts/performer-fn';\nimport pushPerformerAgainToTheCreator from './push-performer-again-to-the-creator';\nimport {\n  removePropertyFromAnimation,\n  removeTargetFromAnimation,\n} from '../animation-actions/remove-from-animation';\nimport AllAnimableProperties from '../contracts/animable-properties';\nimport startAnimationExecutionCycle from '../animation-engine/start-animation-execution-cycle';\n\ninterface AnimationWS extends AnimationInstance {\n  [key: string]: unknown;\n}\n\nclass AnimationWS implements AnimationInstance {\n  constructor(\n    animation:\n      | AnimationInstancePropertiesAllWritable\n      | UserAnimationObjectInternal\n      | PropertiesForTheCreationOfAnimation,\n    creator: AnimationInstance['creator']\n  ) {\n    const U_A_O = normalizePastedAnimationProperties(\n      animation\n    ) as UserAnimationObjectInternal;\n    Object.assign(this, AnimationConstructor(U_A_O, creator));\n\n    pushPerformerAgainToTheCreator(this);\n\n    return this;\n  }\n\n  load(): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n\n    if (!animationAuxiliaryObject) {\n      LoadAnimation(this, (aAuxiliaryObject: AnimationAuxiliaryObject) => {\n        const a = aAuxiliaryObject;\n        if (\n          a.dataLoadingState === 'load' &&\n          a.animation.state !== ANIMATION_STATES[3]\n        ) {\n          a.animation.state = ANIMATION_STATES[5];\n        }\n      });\n    }\n\n    return this;\n  }\n\n  play(): this {\n    const hasAnimationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n\n    if (\n      hasAnimationAuxiliaryObject &&\n      hasAnimationAuxiliaryObject.dataLoadingState === 'load' &&\n      hasAnimationAuxiliaryObject.animation.state === ANIMATION_STATES[5]\n    ) {\n      startAnimationExecutionCycle(hasAnimationAuxiliaryObject);\n    } else if (\n      this.state === ANIMATION_STATES[0] ||\n      this.state === ANIMATION_STATES[6]\n    ) {\n      LoadAnimation(this, startAnimationIfItIsLoaded);\n    }\n    return this;\n  }\n\n  pause(): this {\n    if (this.state === ANIMATION_STATES[1]) {\n      this.state = ANIMATION_STATES[3];\n\n      removeAnimationFromStack(this.animationId);\n    }\n\n    return this;\n  }\n\n  resume(): this {\n    if (this.state === ANIMATION_STATES[3]) {\n      resumeAnimation(this);\n    }\n\n    return this;\n  }\n\n  restart(): this {\n    removeAnimationFromStack(this.animationId);\n    restartAnimation(this);\n\n    return this;\n  }\n\n  end(): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (this.state !== ANIMATION_STATES[1]) {\n      if (this.state === ANIMATION_STATES[6]) {\n        const setTimeoutId = setTimeout(() => {\n          clearTimeout(setTimeoutId);\n          this.end();\n        }, 0);\n      }\n      return this;\n    }\n    if (animationAuxiliaryObject) {\n      if (typeof this.loop === 'number') {\n        this.count = this.loop - 1;\n        const animationProgressObject = getNewAnimationProgress(\n          animationAuxiliaryObject\n        );\n        animationAuxiliaryObject.countDriveLoops =\n          animationProgressObject.countDriveLoops;\n        this.max = animationProgressObject.maxProgress;\n      }\n\n      this.progressValue = this.max;\n\n      updateAnimation(animationAuxiliaryObject);\n    }\n\n    return this;\n  }\n\n  go(part: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        undefined,\n        part,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  back(part: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      animationAuxiliaryObject.backRunning = true;\n\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        undefined,\n        part,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  jump(part: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    const toProgress = (MAX_KEYFRAME / 1) * Math.min(Math.max(part, 0), 1);\n\n    if (animationAuxiliaryObject) {\n      const reverseExecution = animationAuxiliaryObject.reverseExecution;\n      const newProgress = reverseExecution\n        ? MAX_KEYFRAME - toProgress\n        : toProgress;\n\n      this.progressValue = newProgress;\n      this.max = newProgress;\n\n      updateAnimation(animationAuxiliaryObject);\n    }\n\n    return this;\n  }\n\n  speed(multiply: number): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        multiplyValue(this.dur, multiply),\n        (1 / MAX_KEYFRAME) * this.max,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  revert(endIteration?: boolean): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n\n    if (animationAuxiliaryObject) {\n      const lastStartProgress = animationAuxiliaryObject.lastStartProgress || 0;\n\n      if (!endIteration) {\n        animationAuxiliaryObject.backRunning = true;\n      }\n      iterationControlMethods(\n        animationAuxiliaryObject.duration,\n        undefined,\n        (1 / MAX_KEYFRAME) * lastStartProgress,\n        this\n      );\n    }\n\n    return this;\n  }\n\n  dirTo(dir: Parameters<AnimationInstance['dirTo']>['0']): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      let direction: AnimationInstance['dir'];\n      switch (dir) {\n        case 0:\n          direction = 'normal';\n          break;\n        case 1:\n          direction = 'reverse';\n          break;\n        case 2:\n          direction = 'alternate';\n          break;\n        case 3:\n          direction = 'alternate-reverse';\n          break;\n\n        default:\n          direction = dir;\n          break;\n      }\n      this.dir = direction;\n      updateAnimation(animationAuxiliaryObject);\n    }\n    return this;\n  }\n\n  cancel(): this {\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\n      this.animationId\n    );\n    if (animationAuxiliaryObject) {\n      const removeChanges = this.removeChanges;\n      removeAnimationFromStack(this.animationId);\n\n      this.removeChanges = true;\n      removeAnimationStyle(animationAuxiliaryObject);\n      this.removeChanges = removeChanges;\n\n      propagateAnimationEventListener(LISTENERS_NAMES[4], this);\n    }\n    this.state = ANIMATION_STATES[7];\n\n    return this;\n  }\n\n  destroy(removeChanges?: true): boolean {\n    if (removeChanges) {\n      this.removeChanges = true;\n    }\n    removeAnimationFromStack(this.animationId);\n\n    propagateAnimationEventListener(LISTENERS_NAMES[5], this);\n\n    destroyAnimation(this);\n\n    /**\n     * Important! Set the property state to avoid side effects of timeouts.\n     */\n    this.state = ANIMATION_STATES[4];\n\n    return true;\n  }\n\n  on(\n    eventName: ListenersEventsName | AllAnimableProperties | string,\n    callbackfn: (\n      this: PerformerFn,\n      item: unknown,\n      performerFn: PerformerFn\n    ) => unknown\n  ): this {\n    addAnimationEventListener(eventName, callbackfn, this);\n    return this;\n  }\n\n  off(\n    eventName: ListenersEventsName | AllAnimableProperties | string,\n    callbackfnUsed: Function\n  ): this {\n    removeAnimationEventListener(eventName, callbackfnUsed, this);\n    return this;\n  }\n\n  remove(...names: (AllAnimableProperties | string)[]): this {\n    removePropertyFromAnimation(names, this);\n    return this;\n  }\n\n  removeTarget(targets: AnimationOptions['targets']): this {\n    removeTargetFromAnimation(targets, this);\n    return this;\n  }\n}\n\nexport default AnimationWS;\n","import { AnimationInstance } from '../contracts/animation-inter';\r\n\r\nexport default function pushPerformerAgainToTheCreator(\r\n  animationInstance: AnimationInstance\r\n): void {\r\n  const performer = animationInstance.performer;\r\n  if (performer.$hidden.removedFromTheCreator) {\r\n    animationInstance.creator.performers.push(performer);\r\n    performer.$hidden.removedFromTheCreator = false;\r\n  }\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport startAnimationExecutionCycle from '../animation-engine/start-animation-execution-cycle';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\n\r\n/**\r\n * Resumes the animation that was paused.\r\n */\r\nexport default function resumeAnimation(\r\n  requiredAnimationProperties: Pick<AnimationInstance, 'state' | 'animationId'>\r\n): void {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    requiredAnimationProperties.animationId\r\n  );\r\n  if (animationAuxiliaryObject) {\r\n    const u = animationAuxiliaryObject.animation;\r\n\r\n    if (animationAuxiliaryObject.animation.state === ANIMATION_STATES[3]) {\r\n      u.state = ANIMATION_STATES[1];\r\n\r\n      startAnimationExecutionCycle(animationAuxiliaryObject, true);\r\n    }\r\n  }\r\n}\r\n","import { ANIMATION_STATES } from '../sauce/constants';\r\nimport LoadAnimation, {\r\n  startAnimationIfItIsLoaded,\r\n} from '../animation-mount/load-animation';\r\nimport startAnimationExecutionCycle from '../animation-engine/start-animation-execution-cycle';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport restartAnimationProperties from '../animation-engine/restart-animation-properties';\r\n\r\n/**\r\n * Restart animation.\r\n */\r\nexport default function restartAnimation(animation: AnimationInstance): void {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n  const u = animation;\r\n  if (animationAuxiliaryObject) {\r\n    startAnimationExecutionCycle(\r\n      restartAnimationProperties(animationAuxiliaryObject)\r\n    );\r\n  } else {\r\n    u.state = ANIMATION_STATES[0];\r\n    u.count = 0;\r\n    LoadAnimation(animation, startAnimationIfItIsLoaded);\r\n  }\r\n}\r\n","export default function multiplyValue(value: number, multiply: number): number {\r\n  const duration = Math.abs(multiply) * value;\r\n  return multiply > 0 ? value + duration : Math.max(value - duration, 0);\r\n}\r\n","import PerformerFn from '../contracts/performer-fn';\r\n\r\nexport default function removeReferenceInCreatorToPerformer(\r\n  performerFn: PerformerFn\r\n): void {\r\n  const performer = performerFn;\r\n\r\n  if (performer.$hidden.animationInstances.length === 0) {\r\n    const index = performer.creator.performers.indexOf(performer);\r\n    if (index > -1) {\r\n      performer.creator.performers.splice(index, 1);\r\n      performer.$hidden.removedFromTheCreator = true;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  addAnimationEventListener,\r\n  LISTENERS_NAMES,\r\n} from '../animation-listeners/animations-listeners-handlers';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport { AnimationInstance } from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\n\r\nimport { ANIMATION_STATES, MAX_KEYFRAME } from '../sauce/constants';\r\nimport iterationControlMethods from '../sauce/iteration-control-methods';\r\n\r\n/* \r\n  eslint-disable @typescript-eslint/no-loop-func\r\n*/\r\n\r\nfunction revertAnimationProgress(animation: AnimationInstance) {\r\n  const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n    animation.animationId\r\n  );\r\n\r\n  if (animationAuxiliaryObject) {\r\n    const lastStartProgress = animationAuxiliaryObject.lastStartProgress || 0;\r\n    iterationControlMethods(\r\n      animationAuxiliaryObject.duration,\r\n      undefined,\r\n      (1 / MAX_KEYFRAME) * lastStartProgress,\r\n      animation,\r\n      true // apply delay\r\n    );\r\n  }\r\n}\r\nfunction runAnimation(\r\n  animation: AnimationInstance,\r\n  direction: PerformerFn['$hidden']['cycleOptions']['dir']\r\n) {\r\n  if (animation.state === ANIMATION_STATES[0]) {\r\n    animation.play();\r\n  } else if (direction === 'normal') {\r\n    animation.restart();\r\n  } else if (animation.state === ANIMATION_STATES[2]) {\r\n    revertAnimationProgress(animation);\r\n  }\r\n}\r\n\r\nfunction repeatCycleExecution(\r\n  cycleOptions: PerformerFn['$hidden']['cycleOptions']\r\n) {\r\n  const cycle = cycleOptions;\r\n  const direction = cycleOptions.dir;\r\n\r\n  if (\r\n    !cycle.sequenceRunning ||\r\n    (cycle.sequenceRunning && !cycle.sequenceRunning[0])\r\n  ) {\r\n    cycle.loopDirection =\r\n      cycle.loopDirection === 'normal' ? 'reverse' : 'normal';\r\n\r\n    cycle.countCompletedAnimations = 0;\r\n\r\n    cycle.countLoops += 1;\r\n  }\r\n\r\n  if (cycle.loop !== true && cycle.countLoops >= (cycle.loop as number)) {\r\n    return;\r\n  }\r\n\r\n  let sequenceRunning = cycle.sequenceRunning;\r\n  if (cycle.sequence && (!sequenceRunning || !sequenceRunning[0])) {\r\n    sequenceRunning =\r\n      cycle.dir === 'normal' || cycle.loopDirection === 'normal'\r\n        ? cycle.sequence.slice()\r\n        : cycle.sequence.slice().reverse();\r\n\r\n    cycle.numberOfAnimationsToComplete = 0;\r\n  }\r\n  if (sequenceRunning && sequenceRunning[0]) {\r\n    const length = sequenceRunning.length;\r\n    const a = sequenceRunning.slice();\r\n    let find = false;\r\n    let index = 0;\r\n    for (; index < length; index += 1) {\r\n      const bucket = a[index];\r\n\r\n      bucket.forEach((i) => {\r\n        if (!i.autoDestroy) {\r\n          find = true;\r\n          cycle.numberOfAnimationsToComplete += 1;\r\n\r\n          runAnimation(i, direction);\r\n        }\r\n      });\r\n\r\n      sequenceRunning.splice(0, index + 1);\r\n\r\n      if (find) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    cycle.sequenceRunning = sequenceRunning;\r\n  }\r\n}\r\n\r\nexport function checkAmountOfAnimationsCompletedInCycle(\r\n  cycleOptions: PerformerFn['$hidden']['cycleOptions']\r\n): void {\r\n  const cycle = cycleOptions;\r\n\r\n  cycle.countCompletedAnimations += 1;\r\n  if (\r\n    cycle.animationInstancesInCycle &&\r\n    cycle.countCompletedAnimations >= cycle.numberOfAnimationsToComplete\r\n  ) {\r\n    repeatCycleExecution(cycle);\r\n  }\r\n}\r\n\r\nexport default function organizeTheExecutionOfCycleAnimations(\r\n  animationPerformer: PerformerFn,\r\n  animation: AnimationInstance,\r\n  instanceToLink?: AnimationInstance,\r\n  typeOfLink?: 'afterAnimation' | 'together'\r\n): void {\r\n  const cycleOptions = animationPerformer.$hidden.cycleOptions;\r\n  if (cycleOptions && animation.isInCycle) {\r\n    if (!cycleOptions.animationInstancesInCycle) {\r\n      cycleOptions.animationInstancesInCycle = [];\r\n    }\r\n    cycleOptions.numberOfAnimationsToComplete += 1;\r\n    cycleOptions.animationInstancesInCycle.unshift(animation);\r\n\r\n    addAnimationEventListener(\r\n      LISTENERS_NAMES[11],\r\n      () => checkAmountOfAnimationsCompletedInCycle(cycleOptions),\r\n      animation\r\n    );\r\n\r\n    if (!cycleOptions.sequence) {\r\n      cycleOptions.sequence = [];\r\n    }\r\n    const length = cycleOptions.sequence.length;\r\n\r\n    if (instanceToLink && typeOfLink) {\r\n      for (let index = 0; index < length; index += 1) {\r\n        const bucket = cycleOptions.sequence[index];\r\n\r\n        if (typeOfLink === 'together') {\r\n          if (bucket.indexOf(instanceToLink) > -1) {\r\n            bucket.push(animation);\r\n            break;\r\n          }\r\n        } else if (\r\n          typeOfLink === 'afterAnimation' &&\r\n          bucket.indexOf(instanceToLink) > -1\r\n        ) {\r\n          cycleOptions.sequence.splice(index, 0, [animation]);\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      cycleOptions.sequence.push([animation]);\r\n    }\r\n  }\r\n}\r\n","import AnimationWS from './animation';\r\nimport { ANIMATION_STATES } from './constants';\r\nimport organizeTheExecutionOfCycleAnimations from '../animation-engine/organize-the-execution-of-cycle-animations';\r\n\r\nfunction runTogetherAnimations(\r\n  animationToLink: AnimationWS,\r\n  playTogether: AnimationWS[]\r\n) {\r\n  const performerFn = animationToLink.performer;\r\n  animationToLink.on('ready', function g() {\r\n    playTogether.forEach((a) => {\r\n      organizeTheExecutionOfCycleAnimations(\r\n        performerFn,\r\n        a,\r\n        animationToLink,\r\n        'together'\r\n      );\r\n      a.play();\r\n    });\r\n    animationToLink.off('ready', g);\r\n  });\r\n  if (animationToLink.autoPlay) {\r\n    animationToLink.play();\r\n  }\r\n}\r\nexport function playAnimationsTogether(\r\n  animationToLink: AnimationWS,\r\n  playTogether?: AnimationWS[]\r\n): void {\r\n  if (!playTogether) {\r\n    return;\r\n  }\r\n  const performerFn = animationToLink.performer;\r\n  const length = playTogether.length;\r\n  let countLoadedAnimations = 0;\r\n  if (animationToLink.state === ANIMATION_STATES[0]) {\r\n    animationToLink.on('load', function f() {\r\n      playTogether.forEach((animation) => {\r\n        animation.on('load', function d() {\r\n          countLoadedAnimations += 1;\r\n          if (countLoadedAnimations >= length) {\r\n            runTogetherAnimations(animationToLink, playTogether);\r\n          }\r\n          animation.off('load', d);\r\n        });\r\n        animation.load();\r\n      });\r\n      animationToLink.off('load', f);\r\n    });\r\n    if (animationToLink.autoPlay) {\r\n      animationToLink.load();\r\n    }\r\n  } else {\r\n    animationToLink.on('ready', function g() {\r\n      playTogether.forEach((animation) => {\r\n        organizeTheExecutionOfCycleAnimations(\r\n          performerFn,\r\n          animation,\r\n          animationToLink,\r\n          'together'\r\n        );\r\n        animation.play();\r\n      });\r\n      animationToLink.off('ready', g);\r\n    });\r\n    if (animationToLink.autoPlay) {\r\n      animationToLink.play();\r\n    }\r\n  }\r\n}\r\n\r\nexport function playAnimationsWaitExecutionTime(\r\n  animationToLink: AnimationWS,\r\n  waitExecutionTime?: {\r\n    animations: AnimationWS[];\r\n    executionTime: string;\r\n  }\r\n): void {\r\n  if (!waitExecutionTime) {\r\n    return;\r\n  }\r\n\r\n  const performerFn = animationToLink.performer;\r\n\r\n  const executionTime = waitExecutionTime.executionTime;\r\n\r\n  waitExecutionTime.animations.forEach((a) => {\r\n    const animation = a;\r\n    animationToLink.on(executionTime, function f() {\r\n      if (performerFn.$hidden.cycleOptions) {\r\n        organizeTheExecutionOfCycleAnimations(\r\n          performerFn,\r\n          animation,\r\n          animationToLink,\r\n          'together'\r\n        );\r\n      }\r\n      animation.play();\r\n    });\r\n  });\r\n}\r\nexport function playAnimationsAfterIterations(\r\n  animationToLink: AnimationWS,\r\n  playAfterIterations?: {\r\n    animations: AnimationWS[];\r\n    amountOfIterations: number;\r\n  }\r\n): void {\r\n  if (!playAfterIterations) {\r\n    return;\r\n  }\r\n  const performerFn = animationToLink.performer;\r\n\r\n  const amountOfIterations = playAfterIterations.amountOfIterations;\r\n  playAfterIterations.animations.forEach((a) => {\r\n    const animation = a;\r\n    let countCompletedIterations = 1;\r\n\r\n    animationToLink.on('loopEnd', function f() {\r\n      if (countCompletedIterations >= amountOfIterations) {\r\n        animationToLink.off('loopEnd', f);\r\n\r\n        if (performerFn.$hidden.cycleOptions) {\r\n          organizeTheExecutionOfCycleAnimations(\r\n            performerFn,\r\n            animation,\r\n            animationToLink,\r\n            'together'\r\n          );\r\n        }\r\n        animation.play();\r\n      }\r\n      countCompletedIterations += 1;\r\n    });\r\n  });\r\n}\r\n","import AnimationInstanceProperties from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\n\r\nconst LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS: [\r\n  PerformerFn,\r\n  AnimationInstanceProperties\r\n][] = [];\r\n\r\nfunction getIndex(animationPerformer: PerformerFn) {\r\n  for (\r\n    let index = 0, l = LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS.length;\r\n    index < l;\r\n    index += 1\r\n  ) {\r\n    if (\r\n      LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS[index][0] ===\r\n      animationPerformer\r\n    ) {\r\n      return index;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nexport function resetArrayOfLastAddedAnimationObjects(): void {\r\n  LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS.length = 0;\r\n}\r\n\r\nexport function removeLastAnimationObjectAddedToPerformer(\r\n  animationPerformer: PerformerFn\r\n): void {\r\n  const index = getIndex(animationPerformer);\r\n  if (index > -1) {\r\n    LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS.splice(index, 1);\r\n  }\r\n}\r\nexport function addLastAnimationObjectAddedToPerformer(\r\n  animationPerformer: PerformerFn,\r\n  animationObject: AnimationInstanceProperties\r\n): void {\r\n  LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS.unshift([\r\n    animationPerformer,\r\n    animationObject,\r\n  ]);\r\n}\r\nexport function getLastAnimationObjectAddedToPerformer(\r\n  animationPerformer: PerformerFn\r\n): AnimationInstanceProperties | undefined {\r\n  const index = getIndex(animationPerformer);\r\n  return index > -1\r\n    ? LAST_ANIMATION_OBJECTS_ADDED_TO_PERFORMERS[index][1]\r\n    : undefined;\r\n}\r\n","import AnimationInstanceProperties, {\r\n  AnimationInstance,\r\n} from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport AnimationWS from './animation';\r\nimport {\r\n  playAnimationsTogether,\r\n  playAnimationsAfterIterations,\r\n  playAnimationsWaitExecutionTime,\r\n} from './logic-to-play-animations';\r\nimport organizeTheExecutionOfCycleAnimations from '../animation-engine/organize-the-execution-of-cycle-animations';\r\nimport createAnimationObjectsFromStaggers from './create-animation-objects-from-staggers';\r\nimport { resetArrayOfLastAddedAnimationObjects } from './last-added-animation-object';\r\nimport { ANIMATION_STATES } from './constants';\r\nimport customForIn from '../utilities/custom-for-in';\r\nimport isEmptyObject from '../utilities/is-empty-object';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define  */\r\n\r\ntype AnimationsTypeOfLink =\r\n  | 'afterAnimation'\r\n  | 'together'\r\n  | 'afterIterations'\r\n  | 'waitExecutionTime';\r\n\r\ntype AnimationObjectSketche = {\r\n  animationOptions: AnimationInstanceProperties;\r\n\r\n  /**\r\n   * It can be used in case there is stagger.\r\n   */\r\n  originalAnimationOptions?: AnimationInstanceProperties;\r\n\r\n  indexOrAnimation?: number | AnimationWS;\r\n  typeOfLink?: AnimationsTypeOfLink;\r\n  amountOfIterations?: number;\r\n  executionTime?: string;\r\n};\r\n\r\nlet STACK_OF_ANIMATIONS_SKETCHES: Record<\r\n  string,\r\n  {\r\n    sketches: AnimationObjectSketche[];\r\n    callbacksCalledDuringStructuring?: Function[];\r\n    performerFn: PerformerFn;\r\n  }\r\n> = {};\r\n\r\nconst CALLBACKS_CALLED_DURING_STRUCTURING: Function[] = [];\r\n\r\nfunction pushSketcheInPerformerBucket(\r\n  performer: PerformerFn,\r\n  sketche: AnimationObjectSketche\r\n) {\r\n  const performerBucket = STACK_OF_ANIMATIONS_SKETCHES[performer.id];\r\n  if (performerBucket) {\r\n    performerBucket.sketches.push(sketche);\r\n  } else {\r\n    STACK_OF_ANIMATIONS_SKETCHES[performer.id] = {\r\n      sketches: [sketche],\r\n      performerFn: performer,\r\n    };\r\n  }\r\n}\r\n\r\nexport function buildAnimationsForSpecificPerformer(\r\n  performer: PerformerFn,\r\n  setProperties?: AnimationInstanceProperties\r\n): void {\r\n  let organizedAnimationInstances: ReturnType<\r\n    typeof organizeAnimationInstances\r\n  > = [];\r\n\r\n  const performerBucket = STACK_OF_ANIMATIONS_SKETCHES[performer.id];\r\n\r\n  delete STACK_OF_ANIMATIONS_SKETCHES[performer.id];\r\n\r\n  if (performerBucket) {\r\n    if (setProperties) {\r\n      performerBucket.sketches.forEach((sketche) => {\r\n        Object.assign(sketche.animationOptions, setProperties);\r\n      });\r\n    }\r\n\r\n    organizedAnimationInstances = organizedAnimationInstances.concat(\r\n      organizeAnimationInstances(\r\n        createAnimationInstances(performer, performerBucket.sketches)\r\n      )\r\n    );\r\n    if (performerBucket.callbacksCalledDuringStructuring) {\r\n      performerBucket.callbacksCalledDuringStructuring.forEach((fn) => {\r\n        fn();\r\n      });\r\n    }\r\n  }\r\n  CALLBACKS_CALLED_DURING_STRUCTURING.forEach((a) => {\r\n    a();\r\n  });\r\n  if (organizedAnimationInstances) {\r\n    applyRulesForTheExecutionOfAnimations(organizedAnimationInstances);\r\n  }\r\n}\r\n\r\nexport function getCurrentAnimationSketches(\r\n  performer: PerformerFn\r\n): AnimationInstanceProperties[] | undefined {\r\n  const performerBucket = STACK_OF_ANIMATIONS_SKETCHES[performer.id];\r\n  if (performerBucket) {\r\n    return performerBucket.sketches.map((o) => o.animationOptions);\r\n  }\r\n  return undefined;\r\n}\r\n\r\ntype OrganizedAnimations = {\r\n  typeOfLink: AnimationsTypeOfLink;\r\n  linkedAnimation: AnimationWS | undefined;\r\n  animation: AnimationWS;\r\n  playTogether?: AnimationWS[];\r\n  afterIterations?: {\r\n    animations: AnimationWS[];\r\n    amountOfIterations: number;\r\n  };\r\n  waitExecutionTime?: {\r\n    animations: AnimationWS[];\r\n    executionTime: string;\r\n  };\r\n}[];\r\n\r\nfunction addToLinkedAnimationObject(\r\n  organizedAnimations: OrganizedAnimations,\r\n  animation: AnimationWS,\r\n  linkedAnimation: AnimationWS\r\n) {\r\n  const l = organizedAnimations.length;\r\n  for (let index = 0; index < l; index += 1) {\r\n    const o = organizedAnimations[index];\r\n\r\n    if (linkedAnimation === o.animation) {\r\n      if (o.playTogether) {\r\n        o.playTogether.push(animation);\r\n      } else {\r\n        o.playTogether = [animation];\r\n      }\r\n\r\n      return true;\r\n    }\r\n    let i = -1;\r\n    const a = o.playTogether;\r\n    if (a) {\r\n      i = a.indexOf(linkedAnimation);\r\n    }\r\n\r\n    if (i > -1 && a) {\r\n      a.splice(i, 0, animation);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction organizeAnimationInstances(\r\n  animationInstances: ReturnType<typeof createAnimationInstances>\r\n) {\r\n  const organizedAnimations: OrganizedAnimations = [];\r\n\r\n  animationInstances.forEach((o, _index, array) => {\r\n    const linkedAnimation =\r\n      typeof o.indexOrAnimation === 'number'\r\n        ? array[o.indexOrAnimation].animation\r\n        : o.indexOrAnimation;\r\n\r\n    if (\r\n      !linkedAnimation ||\r\n      o.typeOfLink === 'afterAnimation' ||\r\n      o.typeOfLink === 'afterIterations' ||\r\n      o.typeOfLink === 'waitExecutionTime' ||\r\n      (linkedAnimation &&\r\n        !addToLinkedAnimationObject(\r\n          organizedAnimations,\r\n          o.animation,\r\n          linkedAnimation\r\n        ))\r\n    ) {\r\n      if (o.typeOfLink === 'afterIterations') {\r\n        organizedAnimations.push({\r\n          typeOfLink: o.typeOfLink,\r\n          linkedAnimation,\r\n          animation: o.animation,\r\n          afterIterations: {\r\n            animations: [o.animation],\r\n            amountOfIterations: o.amountOfIterations as number,\r\n          },\r\n        });\r\n      } else if (o.typeOfLink === 'waitExecutionTime') {\r\n        organizedAnimations.push({\r\n          typeOfLink: o.typeOfLink,\r\n          linkedAnimation,\r\n          animation: o.animation,\r\n          waitExecutionTime: {\r\n            animations: [o.animation],\r\n            executionTime: o.executionTime as string,\r\n          },\r\n        });\r\n      } else {\r\n        organizedAnimations.push({\r\n          typeOfLink: o.typeOfLink as Exclude<typeof o.typeOfLink, undefined>,\r\n          linkedAnimation,\r\n          animation: o.animation,\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  return organizedAnimations;\r\n}\r\nfunction applyRulesForTheExecutionOfAnimations(\r\n  organizedAnimationInstances: ReturnType<typeof organizeAnimationInstances>\r\n): void {\r\n  organizedAnimationInstances.forEach((o) => {\r\n    const {\r\n      animation,\r\n      linkedAnimation,\r\n      typeOfLink,\r\n      playTogether,\r\n      afterIterations,\r\n      waitExecutionTime,\r\n    } = o;\r\n\r\n    const performerFn = animation.performer;\r\n    if (typeOfLink === 'afterIterations' && linkedAnimation) {\r\n      if (playTogether && afterIterations) {\r\n        afterIterations.animations = afterIterations.animations.concat(\r\n          playTogether\r\n        );\r\n      }\r\n      playAnimationsAfterIterations(linkedAnimation, afterIterations);\r\n    } else if (typeOfLink === 'waitExecutionTime' && linkedAnimation) {\r\n      if (playTogether && waitExecutionTime) {\r\n        waitExecutionTime.animations = waitExecutionTime.animations.concat(\r\n          playTogether\r\n        );\r\n      }\r\n      playAnimationsWaitExecutionTime(linkedAnimation, waitExecutionTime);\r\n    } else if (typeOfLink === 'afterAnimation' && linkedAnimation) {\r\n      linkedAnimation.on('end', function f() {\r\n        organizeTheExecutionOfCycleAnimations(performerFn, animation);\r\n\r\n        if (playTogether) {\r\n          playAnimationsTogether(animation, playTogether);\r\n        } else if (animation.autoPlay) {\r\n          animation.play();\r\n        }\r\n\r\n        linkedAnimation.off('end', f);\r\n      });\r\n    } else {\r\n      performerFn.$hidden.independentAnimations.push(animation);\r\n      organizeTheExecutionOfCycleAnimations(performerFn, animation);\r\n\r\n      if (playTogether) {\r\n        playAnimationsTogether(animation, playTogether);\r\n      }\r\n    }\r\n    if (\r\n      !linkedAnimation &&\r\n      (!playTogether || !playTogether[0]) &&\r\n      (!afterIterations || !afterIterations.animations[0])\r\n    ) {\r\n      if (animation.autoPlay && animation.state === ANIMATION_STATES[0]) {\r\n        animation.play();\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction createAnimationInstances(\r\n  performer: PerformerFn,\r\n  sketches: AnimationObjectSketche[]\r\n) {\r\n  const s = sketches;\r\n  s.slice().forEach((obj, index) => {\r\n    const o = obj;\r\n    const fromStaggers = createAnimationObjectsFromStaggers(o.animationOptions);\r\n    if (fromStaggers) {\r\n      fromStaggers.forEach((newAnimationOptions, i) => {\r\n        const a = newAnimationOptions;\r\n        if (i === 0) {\r\n          o.animationOptions = a;\r\n          s[index] = o;\r\n        } else {\r\n          s.push({\r\n            indexOrAnimation: index,\r\n            typeOfLink: 'together',\r\n            animationOptions: a,\r\n            originalAnimationOptions: o.animationOptions,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  const animationInstances = s.map((o) => {\r\n    const creator = performer.creator as AnimationInstance['creator'];\r\n    const animation = new AnimationWS(\r\n      o.animationOptions as AnimationInstanceProperties,\r\n      creator\r\n    );\r\n\r\n    animation.originalAnimationOptions = o.originalAnimationOptions\r\n      ? o.originalAnimationOptions\r\n      : o.animationOptions;\r\n\r\n    performer.$hidden.animationInstances.push(animation);\r\n\r\n    return {\r\n      ...o,\r\n      animation,\r\n    } as Omit<typeof o, 'animationOptions'> & {\r\n      animation: AnimationWS;\r\n    };\r\n  });\r\n  return animationInstances;\r\n}\r\n\r\nfunction buildAnimations() {\r\n  let organizedAnimationInstances: ReturnType<\r\n    typeof organizeAnimationInstances\r\n  > = [];\r\n\r\n  if (!isEmptyObject(STACK_OF_ANIMATIONS_SKETCHES)) {\r\n    customForIn(STACK_OF_ANIMATIONS_SKETCHES, (bucket) => {\r\n      organizedAnimationInstances = organizedAnimationInstances.concat(\r\n        organizeAnimationInstances(\r\n          createAnimationInstances(bucket.performerFn, bucket.sketches)\r\n        )\r\n      );\r\n      if (bucket.callbacksCalledDuringStructuring) {\r\n        bucket.callbacksCalledDuringStructuring.forEach((fn) => {\r\n          fn();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  return organizedAnimationInstances;\r\n}\r\nexport const runCallbacksAfterBuildingAnimations = (() => {\r\n  let alreadyInProcess = false;\r\n  return (callbackfn: Function, performer?: PerformerFn) => {\r\n    if (!performer) {\r\n      CALLBACKS_CALLED_DURING_STRUCTURING.push(callbackfn);\r\n    } else {\r\n      const performerBucket = STACK_OF_ANIMATIONS_SKETCHES[performer.id];\r\n      if (performerBucket) {\r\n        if (!performerBucket.callbacksCalledDuringStructuring) {\r\n          performerBucket.callbacksCalledDuringStructuring = [];\r\n        }\r\n        performerBucket.callbacksCalledDuringStructuring.push(callbackfn);\r\n      }\r\n    }\r\n\r\n    if (!alreadyInProcess) {\r\n      const setTimeoutId = setTimeout(() => {\r\n        const organizedAnimationInstances = buildAnimations();\r\n\r\n        CALLBACKS_CALLED_DURING_STRUCTURING.forEach((a) => {\r\n          a();\r\n        });\r\n\r\n        if (organizedAnimationInstances) {\r\n          applyRulesForTheExecutionOfAnimations(organizedAnimationInstances);\r\n        }\r\n\r\n        CALLBACKS_CALLED_DURING_STRUCTURING.length = 0;\r\n        alreadyInProcess = false;\r\n        clearTimeout(setTimeoutId);\r\n      }, 0);\r\n\r\n      alreadyInProcess = true;\r\n    }\r\n  };\r\n})();\r\n\r\nfunction fireTimeout() {\r\n  if (isEmptyObject(STACK_OF_ANIMATIONS_SKETCHES)) {\r\n    runCallbacksAfterBuildingAnimations(() => {\r\n      STACK_OF_ANIMATIONS_SKETCHES = {};\r\n      resetArrayOfLastAddedAnimationObjects();\r\n    });\r\n  }\r\n}\r\nfunction getlinkedAnimationIndex(\r\n  performer: PerformerFn,\r\n\r\n  linkedAnimation:\r\n    | AnimationInstanceProperties\r\n    | AnimationInstanceProperties\r\n    | AnimationWS\r\n) {\r\n  const performerBucket = STACK_OF_ANIMATIONS_SKETCHES[performer.id];\r\n  if (performerBucket) {\r\n    return performerBucket.sketches.findIndex(\r\n      (o) => o.animationOptions === linkedAnimation\r\n    );\r\n  }\r\n  return undefined;\r\n}\r\nexport function addAnimationObjectToTheConstructionStack(\r\n  performerFn: PerformerFn,\r\n  animationOptions: AnimationInstanceProperties,\r\n  linkedAnimation?:\r\n    | AnimationInstanceProperties\r\n    | AnimationInstanceProperties\r\n    | AnimationWS,\r\n  typeOfLink?: AnimationsTypeOfLink,\r\n  amountOfIterationsOrexecutionTime?: number | string\r\n): void {\r\n  if (performerFn.$hidden.ignorePerformer) {\r\n    performerFn.$hidden.animationInstances.push(\r\n      new AnimationWS(animationOptions, performerFn.creator)\r\n    );\r\n    return;\r\n  }\r\n  fireTimeout();\r\n\r\n  const aOptions = animationOptions;\r\n  let lAnimation = linkedAnimation;\r\n  if (performerFn.$hidden.cycleOptions) {\r\n    aOptions.isInCycle = true;\r\n\r\n    if (lAnimation && !lAnimation.isInCycle) {\r\n      /**\r\n       * Do not allow link  with out-of-cycle animations.\r\n       */\r\n      lAnimation = undefined;\r\n    }\r\n  }\r\n\r\n  if (lAnimation) {\r\n    const indexOrAnimation = (lAnimation as AnimationWS).play\r\n      ? (lAnimation as AnimationWS)\r\n      : getlinkedAnimationIndex(performerFn, lAnimation);\r\n\r\n    if (indexOrAnimation !== null) {\r\n      const o: AnimationObjectSketche = {\r\n        indexOrAnimation,\r\n        typeOfLink,\r\n        animationOptions,\r\n      };\r\n      switch (typeOfLink) {\r\n        case 'afterIterations':\r\n          o.amountOfIterations = amountOfIterationsOrexecutionTime as number;\r\n          break;\r\n\r\n        case 'waitExecutionTime':\r\n          o.executionTime = amountOfIterationsOrexecutionTime as string;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      pushSketcheInPerformerBucket(performerFn, o);\r\n      return;\r\n    }\r\n  }\r\n  pushSketcheInPerformerBucket(performerFn, {\r\n    animationOptions,\r\n  });\r\n}\r\n","import parserStringStagger from '../animation-mount/parser-string-stagger';\r\nimport stagger from '../based-implementations/stagger';\r\nimport AnimationInstanceProperties from '../contracts/animation-inter';\r\nimport FunctionForPropertyValueInKeyframe from '../contracts/function-for-property-value-in-keyframe';\r\n\r\nexport default function createAnimationObjectsFromStaggers(\r\n  animationOptions: AnimationInstanceProperties\r\n): false | AnimationInstanceProperties[] {\r\n  const animationPropertiesObjects: AnimationInstanceProperties[] = [];\r\n  if (animationOptions.targets) {\r\n    animationOptions.targets.forEach((targetObject) => {\r\n      const { target, index, originalArrayLength } = targetObject;\r\n      const newAnimationProperties: AnimationInstanceProperties = {};\r\n      let checkCreateNewObject = false;\r\n\r\n      ['delay', 'drive', 'endDelay', 'dur', 'loop'].forEach((propertyName) => {\r\n        let fn: string | FunctionForPropertyValueInKeyframe =\r\n          animationOptions[propertyName as never];\r\n\r\n        if (typeof fn === 'string') {\r\n          const c = parserStringStagger(fn);\r\n          if (typeof c === 'object') {\r\n            fn = stagger(c);\r\n          }\r\n        }\r\n        if (typeof fn === 'function') {\r\n          newAnimationProperties[propertyName as never] = fn(\r\n            target,\r\n            index,\r\n            originalArrayLength\r\n          ) as never;\r\n          checkCreateNewObject = true;\r\n        }\r\n      });\r\n\r\n      if (checkCreateNewObject) {\r\n        animationPropertiesObjects.push({\r\n          ...animationOptions,\r\n          ...newAnimationProperties,\r\n          targets: [targetObject],\r\n        });\r\n      }\r\n    });\r\n  }\r\n  if (!animationPropertiesObjects[0]) {\r\n    return false;\r\n  }\r\n\r\n  return animationPropertiesObjects;\r\n}\r\n","import hasOwnProperty from '../utilities/has-own-property';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport isDirValue from '../animation-mount/is-dir-value';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport Keyframes from '../contracts/key-frames';\r\nimport AnimationInstanceProperties, {\r\n  AnimationOptions,\r\n  UserAnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport DEFAULTS_ANIMATION_PROPERTIES_VALUES from './defaults-animation-properties-values';\r\nimport getElementsInTheDOM from '../animation-mount/get-elements-in-the-dom';\r\n\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\nexport const ANIMATION_PERFORMER_PROPERTIES = [\r\n  'dir',\r\n  'loop',\r\n  'dur',\r\n  'easing',\r\n  'delay',\r\n  'endDelay',\r\n  'drive',\r\n  'autoDestroy',\r\n  'autoPlay',\r\n  'pauseDocHidden',\r\n  'round',\r\n  'progress',\r\n  'reset',\r\n  'skip',\r\n];\r\n\r\nfunction parametersToAnimateShortcuts(v: unknown) {\r\n  const obj: AnimationOptions = {};\r\n\r\n  switch (typeof v) {\r\n    case 'string':\r\n      if (isDirValue(v)) {\r\n        obj.dir = v as AnimationOptions['dir'];\r\n      } else {\r\n        obj.easing = v as AnimationOptions['easing'];\r\n      }\r\n      break;\r\n    case 'function':\r\n      obj.easing = v as AnimationOptions['easing'];\r\n\r\n      break;\r\n    case 'number':\r\n      obj.dur = v;\r\n      break;\r\n    case 'boolean':\r\n      obj.autoDestroy = v;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return obj;\r\n}\r\n\r\nexport default function createAnimationPropertiesObject(\r\n  animationPerformer: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | ValuesToAnimateProperty[],\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimateOrDurOrAutoDestroy?:\r\n    | AnimationOptions\r\n    | AnimationOptions['dur']\r\n    | true\r\n): AnimationInstanceProperties {\r\n  let parametersToAnimationProperties = parametersToAnimateOrPropertyValue;\r\n  let propertiesToBeAnimate: PropertiesToAnimateObject | Keyframes;\r\n\r\n  if (typeof animate === 'string' || typeof animate === 'number') {\r\n    parametersToAnimationProperties =\r\n      typeof parametersToAnimateOrDurOrAutoDestroy === 'object'\r\n        ? parametersToAnimateOrDurOrAutoDestroy\r\n        : parametersToAnimateShortcuts(parametersToAnimateOrDurOrAutoDestroy);\r\n\r\n    propertiesToBeAnimate = (() => {\r\n      const o: PropertiesToAnimateObject = {};\r\n      o[\r\n        animate\r\n      ] = parametersToAnimateOrPropertyValue as ValuesToAnimateProperty;\r\n      return o;\r\n    })();\r\n  } else {\r\n    parametersToAnimationProperties =\r\n      typeof parametersToAnimationProperties === 'object'\r\n        ? parametersToAnimationProperties\r\n        : parametersToAnimateShortcuts(parametersToAnimateOrPropertyValue);\r\n\r\n    propertiesToBeAnimate = animate as PropertiesToAnimateObject | Keyframes;\r\n  }\r\n\r\n  const targets = ((parametersToAnimationProperties as UserAnimationOptions)\r\n    .targets\r\n    ? getElementsInTheDOM(\r\n        (parametersToAnimationProperties as UserAnimationOptions).targets\r\n      )\r\n    : animationPerformer.$hidden.targets) as HTMLElement[];\r\n\r\n  const length = targets.length;\r\n\r\n  const t = targets.map((target, i) => {\r\n    return {\r\n      originalArrayLength: length,\r\n      target,\r\n      index: i,\r\n    };\r\n  });\r\n  const animationProperties = {\r\n    keyframes: propertiesToBeAnimate,\r\n    ...(parametersToAnimationProperties as AnimationInstanceProperties),\r\n    targets: t,\r\n    performer: animationPerformer,\r\n  } as AnimationOptions;\r\n\r\n  ANIMATION_PERFORMER_PROPERTIES.forEach((propertyName) => {\r\n    if (!hasOwnProperty(animationProperties, propertyName)) {\r\n      animationProperties[propertyName as never] = animationPerformer.$hidden[\r\n        propertyName as never\r\n      ] as never;\r\n    }\r\n  });\r\n\r\n  if (\r\n    animationProperties.drive &&\r\n    animationProperties.drive !== 'normal' &&\r\n    animationProperties.loop === DEFAULTS_ANIMATION_PROPERTIES_VALUES.loop\r\n  ) {\r\n    if (Array.isArray(animationProperties.drive)) {\r\n      const l = animationProperties.drive.length;\r\n      if (typeof animationProperties.drive[l - 1] === 'string') {\r\n        animationProperties.loop = true;\r\n      } else {\r\n        animationProperties.loop = l;\r\n      }\r\n    } else {\r\n      animationProperties.loop = true;\r\n    }\r\n  }\r\n\r\n  if (\r\n    animationProperties.dir &&\r\n    animationProperties.loop === DEFAULTS_ANIMATION_PROPERTIES_VALUES.loop\r\n  ) {\r\n    if (animationProperties.dir.indexOf('alternate') > -1) {\r\n      animationProperties.loop = 2;\r\n    }\r\n  }\r\n\r\n  return animationProperties as AnimationInstanceProperties;\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport { ANIMATION_STATES } from './constants';\r\n\r\nexport default function getAnimationsRunning(\r\n  performerFn: PerformerFn\r\n): AnimationInstance[] {\r\n  const $hidden = performerFn.$hidden;\r\n  const animations = $hidden.animationInstances;\r\n  if ($hidden.cycleOptions) {\r\n    return [\r\n      ...($hidden.cycleOptions\r\n        .animationInstancesInCycle as AnimationInstance[]).filter(\r\n        (a) => a.state === ANIMATION_STATES[1]\r\n      ),\r\n      ...animations.filter((a) => !a.isInCycle),\r\n    ];\r\n  }\r\n  return animations;\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport {\r\n  getCurrentAnimationSketches,\r\n  runCallbacksAfterBuildingAnimations,\r\n} from './organize-animation-creations';\r\n\r\nexport default function applyCallbackForFutureAnimations(\r\n  performer: PerformerFn,\r\n  callback: (animation: AnimationInstance) => void\r\n): void {\r\n  const animationSketches = getCurrentAnimationSketches(performer);\r\n  if (animationSketches) {\r\n    runCallbacksAfterBuildingAnimations(() => {\r\n      performer.$hidden.animationInstances.forEach((animation) => {\r\n        if (\r\n          animation.originalAnimationOptions &&\r\n          animationSketches.indexOf(animation.originalAnimationOptions) > -1\r\n        ) {\r\n          callback(animation);\r\n        }\r\n      });\r\n    }, performer);\r\n  }\r\n}\r\n","import PerformerFn from '../contracts/performer-fn';\r\nimport getUnit from '../utilities/get-unit';\r\n\r\nexport default function getPropertyName(\r\n  performer: PerformerFn,\r\n  name: string\r\n): string {\r\n  if (!getUnit(name)) {\r\n    const n = parseFloat(name);\r\n    if (performer.$hidden.orderOfThePropertiesUsed[n]) {\r\n      return performer.$hidden.orderOfThePropertiesUsed[n];\r\n    }\r\n  }\r\n  return name;\r\n}\r\n","import { ANIMATION_STATES } from './constants';\r\nimport PerformerFn, {\r\n  PerformerFnMethods,\r\n  PerformerFnProperties,\r\n} from '../contracts/performer-fn';\r\nimport {\r\n  AnimationInstance,\r\n  AnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport { ListenersEventsName } from '../contracts/listeners-events-name';\r\nimport getAnimationsRunning from './get-performer-animations-running';\r\nimport amountOfAnimationsInterestedInEvent from '../animation-listeners/amount-of-animations-interested-in-event';\r\nimport { toCamelCase } from '../utilities/handle-string';\r\nimport {\r\n  addFinalKeyframeInTheAnimation,\r\n  createDependentAnimations,\r\n  createIndependentAnimations,\r\n} from './fns-to-create-animations';\r\nimport applyCallbackForFutureAnimations from './apply-callback-for-future-animations';\r\nimport { removeLastAnimationObjectAddedToPerformer } from './last-added-animation-object';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport { buildAnimationsForSpecificPerformer } from './organize-animation-creations';\r\nimport getCurrentPropertiesValue from '../animation-actions/get-current-properties-value';\r\nimport getPropertyName from './get-property-name';\r\nimport setPropertyValue from '../animation-actions/set-property-value';\r\nimport loadAnimationsAndPlayWhenReady from '../animation-actions/load-animations-and-play-when-ready';\r\n\r\n/* eslint-disable @typescript-eslint/no-this-alias  */\r\n\r\nfunction playAnimations(animationPerformer: PerformerFn) {\r\n  animationPerformer.$hidden.animationInstances.forEach((animation) => {\r\n    const i = animation;\r\n    if (i.state === ANIMATION_STATES[0] || i.state === ANIMATION_STATES[5]) {\r\n      if (\r\n        animationPerformer.$hidden.independentAnimations &&\r\n        animationPerformer.$hidden.independentAnimations.indexOf(i) > -1\r\n      ) {\r\n        i.play();\r\n      } else {\r\n        i.autoPlay = true;\r\n      }\r\n    }\r\n  });\r\n}\r\nfunction applyWhenTheAnimationIsLoaded(\r\n  animation: AnimationInstance,\r\n  callback: () => void\r\n) {\r\n  if (animation.state === ANIMATION_STATES[0]) {\r\n    animation\r\n      .on('load', function fn() {\r\n        callback();\r\n        animation.off('load', fn);\r\n      })\r\n      .load();\r\n  } else {\r\n    callback();\r\n  }\r\n}\r\n\r\nconst PERFORMER_FNS_METHODS: PerformerFnMethods = {\r\n  $: createIndependentAnimations,\r\n\r\n  _: createDependentAnimations,\r\n\r\n  to: addFinalKeyframeInTheAnimation,\r\n\r\n  cycle(\r\n    this: PerformerFn,\r\n    loopOrDir: PerformerFnProperties['loop'] | 'normal' | 'alternate',\r\n    dir: 'normal' | 'alternate' = 'normal'\r\n  ) {\r\n    removeLastAnimationObjectAddedToPerformer(this);\r\n    let loop;\r\n    let d: typeof dir;\r\n    if (typeof loopOrDir === 'string') {\r\n      loop = 2;\r\n      d = loopOrDir as typeof dir;\r\n    } else {\r\n      loop = loopOrDir;\r\n      d = dir;\r\n    }\r\n    this.$hidden.cycleOptions = {\r\n      loop: loop || 2,\r\n      dir: d,\r\n      countCompletedAnimations: 0,\r\n      numberOfAnimationsToComplete: 0,\r\n      countLoops: 0,\r\n      loopDirection: 'normal',\r\n    };\r\n    return this;\r\n  },\r\n\r\n  after(this: PerformerFn, amountIterations = 1) {\r\n    this.$hidden.currentAfterIterations = amountIterations;\r\n    return this;\r\n  },\r\n\r\n  wait(this: PerformerFn, seconds?: string) {\r\n    this.$hidden.currentWaitExecutionTime = seconds;\r\n    return this;\r\n  },\r\n\r\n  now(this: PerformerFn) {\r\n    removeLastAnimationObjectAddedToPerformer(this);\r\n\r\n    buildAnimationsForSpecificPerformer(this, {\r\n      skip: true,\r\n      firstRunImmediately: true,\r\n    });\r\n    return this;\r\n  },\r\n\r\n  ready(this: PerformerFn) {\r\n    loadAnimationsAndPlayWhenReady(this);\r\n\r\n    return this;\r\n  },\r\n\r\n  set(\r\n    this: PerformerFn,\r\n    properties: AllAnimableProperties | string | PropertiesToAnimateObject,\r\n    propertyValue?: ValuesToAnimateProperty | ValuesToAnimateProperty[]\r\n  ) {\r\n    const userPerformer = this;\r\n\r\n    setPropertyValue(this, properties, propertyValue);\r\n    return userPerformer;\r\n  },\r\n\r\n  get(this: PerformerFn, name: AllAnimableProperties | string) {\r\n    return getCurrentPropertiesValue(this, name);\r\n  },\r\n\r\n  load(this: PerformerFn) {\r\n    this.$hidden.animationInstances.forEach((animation) => {\r\n      animation.load();\r\n    });\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animation.load();\r\n    });\r\n    return this;\r\n  },\r\n\r\n  play(this: PerformerFn) {\r\n    playAnimations(this);\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      const a = animation;\r\n      if (a.state === ANIMATION_STATES[0] || a.state === ANIMATION_STATES[5]) {\r\n        if (\r\n          this.$hidden.independentAnimations &&\r\n          this.$hidden.independentAnimations.indexOf(a) > -1\r\n        ) {\r\n          a.play();\r\n        } else {\r\n          a.autoPlay = true;\r\n        }\r\n      }\r\n    });\r\n    return this;\r\n  },\r\n\r\n  pause(this: PerformerFn) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.pause());\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.pause();\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  resume(this: PerformerFn) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.resume());\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.resume();\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  restart(this: PerformerFn) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.restart());\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.restart();\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  end(this: PerformerFn) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.end());\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.end();\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  go(this: PerformerFn, part: number) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.go(part));\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.go(part);\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  back(this: PerformerFn, part: number) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.back(part));\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.back(part);\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  jump(this: PerformerFn, part: number) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.jump(part));\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.jump(part);\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  speed(this: PerformerFn, multiply: number) {\r\n    removeLastAnimationObjectAddedToPerformer(this);\r\n\r\n    getAnimationsRunning(this).forEach((animation) =>\r\n      animation.speed(multiply)\r\n    );\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.speed(multiply);\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  revert(this: PerformerFn, endIteration: boolean) {\r\n    getAnimationsRunning(this).forEach((animation) =>\r\n      animation.revert(endIteration)\r\n    );\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      applyWhenTheAnimationIsLoaded(animation, () => {\r\n        animation.revert(endIteration);\r\n      });\r\n    });\r\n    return this;\r\n  },\r\n\r\n  dirTo(this: PerformerFn, dir: Parameters<AnimationInstance['dirTo']>['0']) {\r\n    getAnimationsRunning(this).forEach((animation) => animation.dirTo(dir));\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animation.dirTo(dir);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  cancel(this: PerformerFn) {\r\n    removeLastAnimationObjectAddedToPerformer(this);\r\n\r\n    this.$hidden.animationInstances.forEach((animation) => {\r\n      animation.cancel();\r\n    });\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animation.cancel();\r\n    });\r\n    return this;\r\n  },\r\n\r\n  destroy(this: PerformerFn, removeChanges?: true) {\r\n    removeLastAnimationObjectAddedToPerformer(this);\r\n\r\n    this.$hidden.animationInstances.forEach((animation) => {\r\n      animation.destroy(removeChanges);\r\n    });\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animation.destroy(removeChanges);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  on(\r\n    this: PerformerFn,\r\n    eventName: ListenersEventsName | string | AllAnimableProperties,\r\n    callbackfn: (\r\n      this: PerformerFn,\r\n      item: unknown,\r\n      performerFn: PerformerFn\r\n    ) => unknown\r\n  ) {\r\n    const eName = getPropertyName(this, toCamelCase(eventName.toString()));\r\n    const performer = this;\r\n\r\n    let countingEventShots = 0;\r\n    let countAnimationsInterestedInEvent = 0;\r\n    let animationInstances = performer.$hidden.animationInstances.slice();\r\n    const eventCallback = (item: unknown) => {\r\n      countingEventShots += 1;\r\n\r\n      countAnimationsInterestedInEvent = amountOfAnimationsInterestedInEvent(\r\n        animationInstances\r\n      );\r\n\r\n      if (countingEventShots >= countAnimationsInterestedInEvent) {\r\n        countAnimationsInterestedInEvent = 0;\r\n        countingEventShots = 0;\r\n        switch (eName) {\r\n          case 'load':\r\n          case 'ready':\r\n          case 'play':\r\n            performer.off(eName, callbackfn);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        return callbackfn.call(performer, item, performer);\r\n      }\r\n\r\n      return undefined;\r\n    };\r\n\r\n    animationInstances = performer.$hidden.animationInstances.slice();\r\n\r\n    animationInstances.forEach((animation) => {\r\n      countAnimationsInterestedInEvent += 1;\r\n      animation.on(eventName, eventCallback);\r\n    });\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animationInstances.push(animation);\r\n\r\n      animation.on(eventName, eventCallback);\r\n    });\r\n\r\n    if (!this.$hidden.eventsCallbacks) {\r\n      this.$hidden.eventsCallbacks = {};\r\n    }\r\n    const eventBucket = this.$hidden.eventsCallbacks[eName] || [];\r\n\r\n    if (!this.$hidden.eventsCallbacks[eName]) {\r\n      this.$hidden.eventsCallbacks[eName] = eventBucket;\r\n    }\r\n\r\n    eventBucket.push([callbackfn, eventCallback]);\r\n\r\n    return this;\r\n  },\r\n\r\n  off(\r\n    this: PerformerFn,\r\n    eventName: ListenersEventsName | string | AllAnimableProperties,\r\n    callbackfnUsed: Function\r\n  ) {\r\n    const eName = getPropertyName(this, toCamelCase(eventName.toString()));\r\n\r\n    if (this.$hidden.eventsCallbacks && this.$hidden.eventsCallbacks[eName]) {\r\n      const eventBucket = this.$hidden.eventsCallbacks[eName] as [\r\n        Function,\r\n        Function\r\n      ][];\r\n\r\n      let eventCallback: Function | false = false;\r\n      this.$hidden.eventsCallbacks[eName] = eventBucket.filter((fns) => {\r\n        if (fns[0] !== callbackfnUsed) {\r\n          return true;\r\n        }\r\n        eventCallback = fns[1];\r\n        return false;\r\n      });\r\n\r\n      if (eventCallback) {\r\n        this.$hidden.animationInstances.forEach((animation) =>\r\n          animation.off(eName, eventCallback as Function)\r\n        );\r\n\r\n        applyCallbackForFutureAnimations(this, (animation) => {\r\n          animation.off(eName, eventCallback as Function);\r\n        });\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  remove(this: PerformerFn, ...names: (AllAnimableProperties | string)[]) {\r\n    const propertiesNames = names.map((name) => {\r\n      const n = parseFloat(name.toString());\r\n      if (this.$hidden.orderOfThePropertiesUsed[n]) {\r\n        return this.$hidden.orderOfThePropertiesUsed[n];\r\n      }\r\n      return name;\r\n    }) as string[];\r\n\r\n    this.$hidden.animationInstances.forEach((animation) => {\r\n      animation.remove(...propertiesNames);\r\n    });\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animation.remove(...propertiesNames);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  removeTarget(this: PerformerFn, targets: AnimationOptions['targets']) {\r\n    this.$hidden.animationInstances.forEach((animation) => {\r\n      animation.removeTarget(targets);\r\n    });\r\n\r\n    applyCallbackForFutureAnimations(this, (animation) => {\r\n      animation.removeTarget(targets);\r\n    });\r\n    return this;\r\n  },\r\n};\r\nexport default PERFORMER_FNS_METHODS;\r\n","import customForIn from '../utilities/custom-for-in';\r\nimport { addAnimationObjectToTheConstructionStack } from './organize-animation-creations';\r\nimport WideSmileDebug from './wide-smile-debug';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport createAnimationPropertiesObject from './create-animation-properties-object';\r\nimport PerformerFn, {\r\n  OverloadsForAnimationCreation,\r\n} from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport Keyframes from '../contracts/key-frames';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport { AnimationOptions } from '../contracts/animation-inter';\r\nimport {\r\n  addLastAnimationObjectAddedToPerformer,\r\n  getLastAnimationObjectAddedToPerformer,\r\n} from './last-added-animation-object';\r\n\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n\r\nexport const createIndependentAnimations: OverloadsForAnimationCreation = function a(\r\n  this: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | string\r\n    | ValuesToAnimateProperty[],\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimate?: AnimationOptions | AnimationOptions['dur'] | true\r\n): PerformerFn {\r\n  /* important!, removes the numeric value stored in the property. */\r\n  this.$hidden.currentAfterIterations = undefined;\r\n  this.$hidden.currentWaitExecutionTime = undefined;\r\n\r\n  const animationProperties = createAnimationPropertiesObject(\r\n    this,\r\n    animate as never,\r\n    parametersToAnimateOrPropertyValue as never,\r\n    parametersToAnimate as never\r\n  );\r\n\r\n  addLastAnimationObjectAddedToPerformer(this, animationProperties);\r\n  addAnimationObjectToTheConstructionStack(this, animationProperties);\r\n\r\n  return this;\r\n};\r\n\r\nexport const createDependentAnimations: OverloadsForAnimationCreation = function a(\r\n  this: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | string\r\n    | ValuesToAnimateProperty[],\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimate?: AnimationOptions | AnimationOptions['dur'] | true\r\n): PerformerFn {\r\n  /* important!, removes the numeric value stored in the property. */\r\n  this.$hidden.currentAfterIterations = undefined;\r\n  this.$hidden.currentWaitExecutionTime = undefined;\r\n\r\n  const animationProperties = createAnimationPropertiesObject(\r\n    this,\r\n    animate as never,\r\n    parametersToAnimateOrPropertyValue as never,\r\n    parametersToAnimate as never\r\n  );\r\n\r\n  const lastAnimationObjectAdded = getLastAnimationObjectAddedToPerformer(this);\r\n\r\n  addLastAnimationObjectAddedToPerformer(this, animationProperties);\r\n  if (lastAnimationObjectAdded) {\r\n    addAnimationObjectToTheConstructionStack(\r\n      this,\r\n      animationProperties,\r\n\r\n      lastAnimationObjectAdded,\r\n      'afterAnimation'\r\n    );\r\n  } else {\r\n    const lastAnimationCreated = this.$hidden.animationInstances[\r\n      this.$hidden.animationInstances.length - 1\r\n    ];\r\n    if (lastAnimationCreated) {\r\n      addAnimationObjectToTheConstructionStack(\r\n        this,\r\n        animationProperties,\r\n\r\n        lastAnimationCreated,\r\n        'afterAnimation'\r\n      );\r\n    } else {\r\n      addAnimationObjectToTheConstructionStack(this, animationProperties);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nexport function addFinalKeyframeInTheAnimation(\r\n  this: PerformerFn,\r\n  animate:\r\n    | PropertiesToAnimateObject\r\n    | Keyframes\r\n    | AllAnimableProperties\r\n    | ValuesToAnimateProperty[]\r\n    | ValuesToAnimateProperty,\r\n  parametersToAnimateOrPropertyValue?:\r\n    | AnimationOptions\r\n    | ValuesToAnimateProperty\r\n    | ValuesToAnimateProperty[]\r\n    | true,\r\n  parametersToAnimateOrDurOrAutoDestroy?:\r\n    | AnimationOptions\r\n    | AnimationOptions['dur']\r\n    | true\r\n) {\r\n  /* important!, removes the numeric value stored in the property. */\r\n  this.$hidden.currentAfterIterations = undefined;\r\n  this.$hidden.currentWaitExecutionTime = undefined;\r\n\r\n  const objectExpectingSideEffects = getLastAnimationObjectAddedToPerformer(\r\n    this\r\n  );\r\n  if (objectExpectingSideEffects) {\r\n    const lastAnimationObjectAdded = objectExpectingSideEffects;\r\n    let initialKeyframe: PropertiesToAnimateObject | false = false;\r\n\r\n    let animateProps = animate;\r\n\r\n    if (\r\n      typeof animate !== 'object' &&\r\n      parametersToAnimateOrPropertyValue === undefined\r\n    ) {\r\n      animateProps = [animateProps] as ValuesToAnimateProperty[];\r\n    }\r\n    if (Array.isArray(animateProps)) {\r\n      initialKeyframe = {};\r\n      let count = 0;\r\n      customForIn(\r\n        lastAnimationObjectAdded.keyframes as PropertiesToAnimateObject,\r\n        (_propertyValue, propertyName) => {\r\n          const array = animateProps as ValuesToAnimateProperty[];\r\n          const v = array[count];\r\n\r\n          (initialKeyframe as PropertiesToAnimateObject)[propertyName] = v;\r\n          if (typeof array[count + 1] !== 'undefined') {\r\n            count += 1;\r\n          }\r\n        }\r\n      );\r\n    }\r\n    const animationProperties = createAnimationPropertiesObject(\r\n      this,\r\n      (initialKeyframe || animateProps) as PropertiesToAnimateObject,\r\n      parametersToAnimateOrPropertyValue,\r\n      parametersToAnimateOrDurOrAutoDestroy\r\n    );\r\n\r\n    customForIn(animationProperties, (propertyValue, propertyName) => {\r\n      const v = propertyValue as never;\r\n      if (propertyName === 'keyframes') {\r\n        lastAnimationObjectAdded.keyframes = [\r\n          lastAnimationObjectAdded.keyframes as PropertiesToAnimateObject,\r\n          v,\r\n        ];\r\n      } else {\r\n        lastAnimationObjectAdded[propertyName as never] = v;\r\n      }\r\n    });\r\n  } else {\r\n    WideSmileDebug(\r\n      'Call at an improper moment.',\r\n      'To use the \"to\" method you should call it right after the animation call to which it will be applied.'\r\n    );\r\n  }\r\n  return this;\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport applyCallbackForFutureAnimations from '../sauce/apply-callback-for-future-animations';\r\nimport { ANIMATION_STATES } from '../sauce/constants';\r\n\r\nexport default function loadAnimationsAndPlayWhenReady(\r\n  performer: PerformerFn\r\n): void {\r\n  let setTimeoutId = -1;\r\n  const animationInstances: AnimationInstance[] = [];\r\n  function readyLogic() {\r\n    let count = 0;\r\n    const length = animationInstances.length;\r\n\r\n    function countFn(a: AnimationInstance) {\r\n      const animation = a;\r\n      animation.autoPlay = true;\r\n\r\n      count += 1;\r\n      if (count >= length) {\r\n        animationInstances.forEach((i) => {\r\n          if (\r\n            a.state === ANIMATION_STATES[5] &&\r\n            performer.$hidden.independentAnimations.indexOf(i) > -1\r\n          ) {\r\n            i.play();\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    animationInstances.forEach((animation) => {\r\n      if (animation.state !== ANIMATION_STATES[5]) {\r\n        animation\r\n          .on('load', function f() {\r\n            countFn(animation);\r\n            animation.off('load', f);\r\n          })\r\n          .load();\r\n      } else {\r\n        countFn(animation);\r\n      }\r\n    });\r\n  }\r\n\r\n  applyCallbackForFutureAnimations(performer, (a) => {\r\n    const animation = a;\r\n    animationInstances.push(animation);\r\n    animation.autoPlay = false;\r\n    if (setTimeoutId < 0) {\r\n      setTimeoutId = (setTimeout(() => {\r\n        readyLogic();\r\n        clearTimeout(setTimeoutId);\r\n      }, 0) as unknown) as number;\r\n    }\r\n  });\r\n}\r\n","import { applyAnimationsStyleToTargets } from '../animation-engine/crud-animations-style';\r\nimport { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport AnimationInstanceProperties from '../contracts/animation-inter';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\n\r\nexport default function setPropertyValue(\r\n  performer: PerformerFn,\r\n  properties: AllAnimableProperties | string | PropertiesToAnimateObject,\r\n  propertyValue?: ValuesToAnimateProperty | ValuesToAnimateProperty[]\r\n): void {\r\n  const targets = performer.$hidden.targets;\r\n\r\n  const newPerformer = performer.creator(targets);\r\n\r\n  newPerformer.$hidden.ignorePerformer = true;\r\n\r\n  newPerformer.$hidden.orderOfThePropertiesUsed = performer.$hidden.orderOfThePropertiesUsed.slice();\r\n\r\n  const animationOptions: AnimationInstanceProperties = {\r\n    skip: true,\r\n    autoPlay: false,\r\n    dur: 0,\r\n  };\r\n\r\n  if (typeof properties === 'string') {\r\n    newPerformer.$(\r\n      properties,\r\n      propertyValue as ValuesToAnimateProperty,\r\n      animationOptions\r\n    );\r\n  } else if (typeof properties === 'object') {\r\n    newPerformer.$(properties, animationOptions);\r\n  }\r\n  newPerformer\r\n    .on('load', () => {\r\n      const animation = newPerformer.$hidden.animationInstances[0];\r\n      const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n        animation.animationId\r\n      );\r\n\r\n      if (animationAuxiliaryObject) {\r\n        animation.progressValue = 100;\r\n        animation.max = 100;\r\n\r\n        applyAnimationsStyleToTargets(\r\n          animationAuxiliaryObject.propertiesToBeAnimate,\r\n          animationAuxiliaryObject\r\n        );\r\n\r\n        newPerformer.destroy();\r\n      }\r\n    })\r\n    .load();\r\n}\r\n","import { getAnimationAuxiliaryObject } from '../animation-mount/crud-animation-objects';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport AnimationAuxiliaryObject from '../contracts/animation-auxiliary-object';\r\nimport CurrentPropertyValue from '../contracts/current-property-value';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport getPropertyName from '../sauce/get-property-name';\r\nimport { toCamelCase } from '../utilities/handle-string';\r\n\r\ntype TreatCurrentPropertyValue = CurrentPropertyValue & {\r\n  dateLastIntercalation: AnimationAuxiliaryObject['dateLastIntercalation'];\r\n};\r\n\r\nfunction concatProperties(\r\n  currentPropertiesValue: TreatCurrentPropertyValue[],\r\n  newProperties: TreatCurrentPropertyValue[]\r\n) {\r\n  newProperties.forEach((newPropertyObject) => {\r\n    const index = currentPropertiesValue.findIndex(\r\n      (p) =>\r\n        newPropertyObject.propertyName === p.propertyName &&\r\n        newPropertyObject.target === p.target\r\n    );\r\n    if (index > -1) {\r\n      if (\r\n        newPropertyObject.dateLastIntercalation >\r\n        currentPropertiesValue[index].dateLastIntercalation\r\n      ) {\r\n        currentPropertiesValue.splice(index, 1);\r\n        currentPropertiesValue.push(newPropertyObject);\r\n      }\r\n    } else {\r\n      currentPropertiesValue.push(newPropertyObject);\r\n    }\r\n  });\r\n  return currentPropertiesValue;\r\n}\r\nexport default function getCurrentPropertiesValue(\r\n  performer: PerformerFn,\r\n  name: AllAnimableProperties | string\r\n): CurrentPropertyValue | undefined {\r\n  const propertyName = getPropertyName(performer, toCamelCase(name.toString()));\r\n\r\n  const animationInstances = performer.$hidden.animationInstances\r\n    .slice()\r\n    .reverse();\r\n\r\n  const length = animationInstances.length;\r\n\r\n  let currentPropertiesValue: TreatCurrentPropertyValue[] = [];\r\n  for (let index = 0; index < length; index += 1) {\r\n    const animation = animationInstances[index];\r\n    const animationAuxiliaryObject = getAnimationAuxiliaryObject(\r\n      animation.animationId\r\n    );\r\n    if (animationAuxiliaryObject) {\r\n      const propertyObjects: TreatCurrentPropertyValue[] = animationAuxiliaryObject.propertiesToBeAnimate\r\n        .filter((propertyObject) => {\r\n          return propertyObject.propertyName === propertyName;\r\n        })\r\n        .map((o) => {\r\n          return {\r\n            target: o.target,\r\n            value: o.newPropertyValue,\r\n            propertyName,\r\n            dateLastIntercalation:\r\n              animationAuxiliaryObject.dateLastIntercalation,\r\n          };\r\n        });\r\n\r\n      if (propertyObjects[0]) {\r\n        currentPropertiesValue = concatProperties(\r\n          currentPropertiesValue,\r\n          propertyObjects\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  if (currentPropertiesValue[0]) {\r\n    return {\r\n      target: currentPropertiesValue[0].target,\r\n      value: currentPropertiesValue[0].value,\r\n      propertyName: currentPropertiesValue[0].propertyName,\r\n    };\r\n  }\r\n\r\n  return undefined;\r\n}\r\n","import { AnimationInstance } from '../contracts/animation-inter';\r\n\r\nexport default function amountOfAnimationsInterestedInEvent(\r\n  animationInstances: AnimationInstance[]\r\n): number {\r\n  let countAnimationsInterested = 0;\r\n  animationInstances.forEach((a) => {\r\n    switch (a.state) {\r\n      case 'canceled':\r\n      case 'destroyed':\r\n        break;\r\n\r\n      default:\r\n        countAnimationsInterested += 1;\r\n        break;\r\n    }\r\n  });\r\n  return countAnimationsInterested;\r\n}\r\n","import getElementsInTheDOM from '../animation-mount/get-elements-in-the-dom';\r\nimport { addAnimationObjectToTheConstructionStack } from './organize-animation-creations';\r\nimport AllAnimableProperties from '../contracts/animable-properties';\r\nimport createAnimationPropertiesObject, {\r\n  ANIMATION_PERFORMER_PROPERTIES,\r\n} from './create-animation-properties-object';\r\nimport PERFORMER_FNS_METHODS from './performer-fns-methods';\r\nimport PerformerFn, { PerformerFnProperties } from '../contracts/performer-fn';\r\nimport PropertiesToAnimateObject from '../contracts/properties-to-animate-object';\r\n\r\nimport ValuesToAnimateProperty from '../contracts/values-to-animate-property';\r\nimport Keyframes from '../contracts/key-frames';\r\nimport {\r\n  AnimationInstance,\r\n  AnimationOptions,\r\n  UserAnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport {\r\n  addLastAnimationObjectAddedToPerformer,\r\n  getLastAnimationObjectAddedToPerformer,\r\n} from './last-added-animation-object';\r\n\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\nlet COUNT_PERFORMER_ID = 0;\r\nfunction getNewPerformerFn(\r\n  creator: AnimationInstance['creator'],\r\n  animationPerformerProperties: Required<PerformerFnProperties>\r\n) {\r\n  const performerFn = (function Performer(\r\n    animate:\r\n      | PropertiesToAnimateObject\r\n      | Keyframes\r\n      | AllAnimableProperties\r\n      | number,\r\n    parametersToAnimateOrPropertyValue?:\r\n      | AnimationOptions\r\n      | ValuesToAnimateProperty\r\n      | true,\r\n    parametersToAnimate?: AnimationOptions | AnimationOptions['dur'] | true\r\n  ) {\r\n    const animationProperties = createAnimationPropertiesObject(\r\n      performerFn,\r\n      animate as never,\r\n      parametersToAnimateOrPropertyValue as never,\r\n      parametersToAnimate as never\r\n    );\r\n\r\n    const lastAnimationParametersAdded = getLastAnimationObjectAddedToPerformer(\r\n      performerFn\r\n    );\r\n\r\n    addLastAnimationObjectAddedToPerformer(performerFn, animationProperties);\r\n\r\n    if (performerFn.$hidden.currentAfterIterations) {\r\n      addAnimationObjectToTheConstructionStack(\r\n        performerFn,\r\n        animationProperties,\r\n        lastAnimationParametersAdded,\r\n        'afterIterations',\r\n        performerFn.$hidden.currentAfterIterations\r\n      );\r\n      performerFn.$hidden.currentAfterIterations = undefined;\r\n    } else if (performerFn.$hidden.currentWaitExecutionTime) {\r\n      addAnimationObjectToTheConstructionStack(\r\n        performerFn,\r\n        animationProperties,\r\n        lastAnimationParametersAdded,\r\n        'waitExecutionTime',\r\n        performerFn.$hidden.currentWaitExecutionTime\r\n      );\r\n      performerFn.$hidden.currentWaitExecutionTime = undefined;\r\n    } else if (lastAnimationParametersAdded) {\r\n      addAnimationObjectToTheConstructionStack(\r\n        performerFn,\r\n        animationProperties,\r\n\r\n        lastAnimationParametersAdded,\r\n        'together'\r\n      );\r\n    } else {\r\n      addAnimationObjectToTheConstructionStack(\r\n        performerFn,\r\n        animationProperties\r\n      );\r\n    }\r\n\r\n    return performerFn;\r\n  } as unknown) as PerformerFn;\r\n\r\n  COUNT_PERFORMER_ID += 1;\r\n\r\n  Object.assign(performerFn, PERFORMER_FNS_METHODS, {\r\n    id: COUNT_PERFORMER_ID,\r\n    $hidden: animationPerformerProperties as Required<PerformerFnProperties>,\r\n    creator,\r\n  });\r\n\r\n  return performerFn;\r\n}\r\nconst NewPerformerFn = (\r\n  performerProperties: UserAnimationOptions,\r\n  creator: AnimationInstance['creator']\r\n) => {\r\n  const performerProps = performerProperties;\r\n  const creatorDefaults = creator.dfs;\r\n  const defaults: PerformerFnProperties = {\r\n    animationInstances: [],\r\n    independentAnimations: [],\r\n    orderOfThePropertiesUsed: [],\r\n  };\r\n  ANIMATION_PERFORMER_PROPERTIES.forEach((propertyName) => {\r\n    defaults[propertyName as never] = creatorDefaults[propertyName as never];\r\n  });\r\n\r\n  if (performerProps.targets) {\r\n    performerProps.targets = getElementsInTheDOM(performerProps.targets);\r\n  }\r\n\r\n  const performerFn = getNewPerformerFn(creator, {\r\n    ...defaults,\r\n    ...performerProps,\r\n  } as Required<PerformerFnProperties>);\r\n\r\n  creator.performers.push(performerFn);\r\n\r\n  return performerFn;\r\n};\r\n\r\nexport default NewPerformerFn;\r\n","import isDirValue from '../animation-mount/is-dir-value';\r\nimport {\r\n  AnimationInstance,\r\n  UserAnimationOptions,\r\n} from '../contracts/animation-inter';\r\nimport CreatorFn from '../contracts/creator-fn';\r\nimport EasingsFunctionsList from '../contracts/easings-functions-list';\r\nimport PerformerFn from '../contracts/performer-fn';\r\nimport CREATORS_FN_METHODS from './creators-fns-methods';\r\nimport DEFAULTS_ANIMATION_PROPERTIES_VALUES from './defaults-animation-properties-values';\r\nimport NewPerformerFn from './new-performer-fn';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n\r\nfunction creatorFnProperties(global: CreatorFn['global']) {\r\n  return {\r\n    dfs: { ...DEFAULTS_ANIMATION_PROPERTIES_VALUES },\r\n\r\n    performers: [],\r\n\r\n    global,\r\n\r\n    ...CREATORS_FN_METHODS,\r\n  };\r\n}\r\nfunction pureCreatorFn() {\r\n  const creator = (Creator as unknown) as AnimationInstance['creator'];\r\n\r\n  function Creator(): CreatorFn['global'];\r\n\r\n  function Creator(\r\n    performerProperties: UserAnimationOptions | object | string,\r\n    ...props: (\r\n      | EasingsFunctionsList\r\n      | AnimationInstance['dir']\r\n      | number\r\n      | boolean\r\n      | UserAnimationOptions\r\n    )[]\r\n  ): PerformerFn;\r\n\r\n  function Creator(\r\n    performerProperties?: unknown,\r\n    ...props: (string | number | boolean | UserAnimationOptions)[]\r\n  ) {\r\n    if (performerProperties) {\r\n      const performerFn = {\r\n        targets: (performerProperties as UserAnimationOptions).targets\r\n          ? (performerProperties as UserAnimationOptions).targets\r\n          : (performerProperties as UserAnimationOptions['targets']),\r\n      } as UserAnimationOptions;\r\n\r\n      if ((performerProperties as UserAnimationOptions).targets) {\r\n        Object.assign(performerFn, performerProperties);\r\n      }\r\n      let countNumbers = 0;\r\n      props.forEach((v) => {\r\n        switch (typeof v) {\r\n          case 'number':\r\n            if (countNumbers === 0) {\r\n              performerFn.dur = v;\r\n              countNumbers += 1;\r\n            } else {\r\n              performerFn.loop = v;\r\n            }\r\n            break;\r\n          case 'string':\r\n            if (isDirValue(v)) {\r\n              performerFn.dir = v as AnimationInstance['dir'];\r\n            } else {\r\n              performerFn.easing = v as never;\r\n            }\r\n            break;\r\n          case 'function':\r\n            performerFn.easing = v as never;\r\n\r\n            break;\r\n          case 'boolean':\r\n            performerFn.autoPlay = v;\r\n            break;\r\n          case 'object':\r\n            Object.assign(performerFn, v);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n\r\n      return NewPerformerFn(performerFn, creator);\r\n    }\r\n    return creator.global;\r\n  }\r\n  return Creator;\r\n}\r\nexport default function NewCreatorFn(global: CreatorFn['global']): CreatorFn {\r\n  const creator = Object.assign(pureCreatorFn(), creatorFnProperties(global));\r\n  creator().all.push(creator);\r\n  return creator;\r\n}\r\n","import CreateObserverPropertyCallbackfn from '../contracts/create-observer-property-callbackfn';\r\nimport CreateSpecialPropertyCallbackfn from '../contracts/create-special-property-callbackfn';\r\nimport CreatorFn from '../contracts/creator-fn';\r\nimport EasingFunction from '../contracts/easing-function';\r\nimport { WIDE_SMILE_VERSION } from './constants';\r\nimport { registerCustomEasing } from './custom-easings';\r\nimport {\r\n  createCustomProperty,\r\n  CUSTOM_SPECIAL_PROPERTIES,\r\n  OBSERVER_PROPERTIES,\r\n  removeCustomProperty,\r\n} from './custom-properties-for-animations';\r\nimport NewCreatorFn from './new-creator-fn';\r\n\r\nconst CREATORS_FN_GLOBAL_PROPERTY: CreatorFn['global'] = {\r\n  new() {\r\n    const c = NewCreatorFn(CREATORS_FN_GLOBAL_PROPERTY);\r\n\r\n    CREATORS_FN_GLOBAL_PROPERTY.all.push(c);\r\n\r\n    return c;\r\n  },\r\n  version: WIDE_SMILE_VERSION,\r\n\r\n  asyncLoading: false,\r\n\r\n  specials: CUSTOM_SPECIAL_PROPERTIES,\r\n\r\n  observeds: OBSERVER_PROPERTIES,\r\n\r\n  all: [],\r\n\r\n  newEasing(name: string, callback: EasingFunction) {\r\n    registerCustomEasing(name, callback);\r\n    return this;\r\n  },\r\n  newSpecialProperty(\r\n    this: CreatorFn['global'],\r\n    propertyOrProperties:\r\n      | string\r\n      | Record<string, CreateSpecialPropertyCallbackfn>,\r\n    callbackfn?: CreateSpecialPropertyCallbackfn\r\n  ) {\r\n    createCustomProperty(propertyOrProperties, callbackfn, 'special');\r\n    return this;\r\n  },\r\n\r\n  deleteSpecialProperty(\r\n    this: CreatorFn['global'],\r\n    ...propertiesNames: string[]\r\n  ) {\r\n    removeCustomProperty(propertiesNames, 'special');\r\n    return this;\r\n  },\r\n\r\n  newObservedProperty(\r\n    this: CreatorFn['global'],\r\n    propertyOrProperties:\r\n      | string\r\n      | Record<string, CreateObserverPropertyCallbackfn>,\r\n    callbackfn?: CreateObserverPropertyCallbackfn\r\n  ) {\r\n    createCustomProperty(propertyOrProperties, callbackfn, 'observed');\r\n    return this;\r\n  },\r\n\r\n  deleteObservedProperty(\r\n    this: CreatorFn['global'],\r\n    ...propertiesNames: string[]\r\n  ) {\r\n    removeCustomProperty(propertiesNames, 'observed');\r\n    return this;\r\n  },\r\n};\r\n\r\nexport default CREATORS_FN_GLOBAL_PROPERTY;\r\n","/*\n  # wide-smile (C) 2021, Diogo Neves. \n\n  # Licensed under the MIT license. See LICENSE file in the project root for details.\n  ___________________________________________________________________________________\n  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n  *                                                                                 *\n  * Thanks to everyone who supported the project directly and indirectly.           *\n  *                                                                                 *\n  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n*/\n\nimport wideSmile from './src/creator-fn';\n\ndeclare global {\n  interface Window {\n    wS: typeof wideSmile;\n  }\n}\nexport default wideSmile;\n","import './sauce/polyfills';\r\nimport './animation-engine/handle-visibility-change';\r\nimport NewCreatorFn from './sauce/new-creator-fn';\r\nimport CREATORS_FN_GLOBAL_PROPERTY from './sauce/creators-global-property';\r\n\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n\r\nexport default NewCreatorFn(CREATORS_FN_GLOBAL_PROPERTY);\r\n"],"sourceRoot":""}